(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
        module.exports=function(c,n){var t=[];if(function pickEach(c,o){if(0!==o.length)for(var e=0;e<o.length;e++){var f=o.concat(),i=f.splice(e,1);pickEach(c.concat(i),f)}else"function"==typeof n?n(c):t.push(c)}([],c),"function"!=typeof n)return t};

    },{}],2:[function(require,module,exports){
        (function(){var t;t=function(){var t,e,s;function Asearch(e){var i,r,n,o,h,p;for(this.source=e,this.shiftpat=[],this.epsilon=0,this.acceptpat=0,r=t,i=n=0;0<=s?n<s:n>s;i=0<=s?++n:--n)this.shiftpat[i]=0;for(o=0,h=(p=this.unpack(this.source)).length;o<h;o++)32===(i=p[o])?this.epsilon|=r:(this.shiftpat[i]|=r,this.shiftpat[this.toupper(i)]|=r,this.shiftpat[this.tolower(i)]|=r,r>>>=1);return this.acceptpat=r,this}return s=256,e=[t=2147483648,0,0,0],Asearch.prototype.isupper=function(t){return t>=65&&t<=90},Asearch.prototype.islower=function(t){return t>=97&&t<=122},Asearch.prototype.tolower=function(t){return this.isupper(t)?t+32:t},Asearch.prototype.toupper=function(t){return this.islower(t)?t-32:t},Asearch.prototype.state=function(t,s){var i,r,n,o,h,p,u,a,c;for(null==t&&(t=e),null==s&&(s=""),r=t[0],n=t[1],o=t[2],h=t[3],u=0,a=(c=this.unpack(s)).length;u<a;u++)i=c[u],p=this.shiftpat[i],h=h&this.epsilon|(h&p)>>>1|o>>>1|o,o=o&this.epsilon|(o&p)>>>1|n>>>1|n,n=n&this.epsilon|(n&p)>>>1|r>>>1|r,h|=(o|=(n|=(r=r&this.epsilon|(r&p)>>>1)>>>1)>>>1)>>>1;return[r,n,o,h]},Asearch.prototype.match=function(t,s){var i;return null==s&&(s=0),i=this.state(e,t),s<e.length||(s=e.length-1),0!=(i[s]&this.acceptpat)},Asearch.prototype.unpack=function(t){var e,s,i,r,n;for(e=[],i=0,r=(n=t.split("")).length;i<r;i++)(s=n[i].charCodeAt(0))>255&&e.push((65280&s)>>>8),e.push(255&s);return e},Asearch}(),"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports=t:"undefined"!=typeof window&&null!==window&&(window.Asearch=t)}).call(this);

    },{}],3:[function(require,module,exports){
        var asn1=exports;asn1.bignum=require("bn.js"),asn1.define=require("./asn1/api").define,asn1.base=require("./asn1/base"),asn1.constants=require("./asn1/constants"),asn1.decoders=require("./asn1/decoders"),asn1.encoders=require("./asn1/encoders");

    },{"./asn1/api":4,"./asn1/base":6,"./asn1/constants":10,"./asn1/decoders":12,"./asn1/encoders":15,"bn.js":45}],4:[function(require,module,exports){
        var asn1=require("../asn1"),inherits=require("inherits"),api=exports;function Entity(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}api.define=function define(e,t){return new Entity(e,t)},Entity.prototype._createNamed=function createNamed(e){var t;try{t=require("vm").runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){t=function(e){this._initNamed(e)}}return inherits(t,e),t.prototype._initNamed=function initnamed(t){e.call(this,t)},new t(this)},Entity.prototype._getDecoder=function _getDecoder(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(asn1.decoders[e])),this.decoders[e]},Entity.prototype.decode=function decode(e,t,n){return this._getDecoder(t).decode(e,n)},Entity.prototype._getEncoder=function _getEncoder(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(asn1.encoders[e])),this.encoders[e]},Entity.prototype.encode=function encode(e,t,n){return this._getEncoder(t).encode(e,n)};

    },{"../asn1":3,"inherits":159,"vm":255}],5:[function(require,module,exports){
        var inherits=require("inherits"),Reporter=require("../base").Reporter,Buffer=require("buffer").Buffer;function DecoderBuffer(e,t){Reporter.call(this,t),Buffer.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function EncoderBuffer(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof EncoderBuffer||(e=new EncoderBuffer(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=Buffer.byteLength(e);else{if(!Buffer.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}inherits(DecoderBuffer,Reporter),exports.DecoderBuffer=DecoderBuffer,DecoderBuffer.prototype.save=function save(){return{offset:this.offset,reporter:Reporter.prototype.save.call(this)}},DecoderBuffer.prototype.restore=function restore(e){var t=new DecoderBuffer(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,Reporter.prototype.restore.call(this,e.reporter),t},DecoderBuffer.prototype.isEmpty=function isEmpty(){return this.offset===this.length},DecoderBuffer.prototype.readUInt8=function readUInt8(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},DecoderBuffer.prototype.skip=function skip(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new DecoderBuffer(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},DecoderBuffer.prototype.raw=function raw(e){return this.base.slice(e?e.offset:this.offset,this.length)},exports.EncoderBuffer=EncoderBuffer,EncoderBuffer.prototype.join=function join(e,t){return e||(e=new Buffer(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):Buffer.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)};

    },{"../base":6,"buffer":91,"inherits":159}],6:[function(require,module,exports){
        var base=exports;base.Reporter=require("./reporter").Reporter,base.DecoderBuffer=require("./buffer").DecoderBuffer,base.EncoderBuffer=require("./buffer").EncoderBuffer,base.Node=require("./node");

    },{"./buffer":5,"./node":7,"./reporter":8}],7:[function(require,module,exports){
        var Reporter=require("../base").Reporter,EncoderBuffer=require("../base").EncoderBuffer,DecoderBuffer=require("../base").DecoderBuffer,assert=require("minimalistic-assert"),tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],methods=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags),overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Node(e,t){var r={};this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}module.exports=Node;var stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node.prototype.clone=function clone(){var e=this._baseState,t={};stateProps.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},Node.prototype._wrap=function wrap(){var e=this._baseState;methods.forEach(function(t){this[t]=function _wrappedMethod(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},Node.prototype._init=function init(e){var t=this._baseState;assert(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),assert.equal(t.children.length,1,"Root node can have only one child")},Node.prototype._useArgs=function useArgs(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(assert(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(assert(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0);var i=e[r];t[i]=r}),t}))},overrided.forEach(function(e){Node.prototype[e]=function _overrided(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),tags.forEach(function(e){Node.prototype[e]=function _tagMethod(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return assert(null===t.tag),t.tag=e,this._useArgs(r),this}}),Node.prototype.use=function use(e){assert(e);var t=this._baseState;return assert(null===t.use),t.use=e,this},Node.prototype.optional=function optional(){return this._baseState.optional=!0,this},Node.prototype.def=function def(e){var t=this._baseState;return assert(null===t.default),t.default=e,t.optional=!0,this},Node.prototype.explicit=function explicit(e){var t=this._baseState;return assert(null===t.explicit&&null===t.implicit),t.explicit=e,this},Node.prototype.implicit=function implicit(e){var t=this._baseState;return assert(null===t.explicit&&null===t.implicit),t.implicit=e,this},Node.prototype.obj=function obj(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},Node.prototype.key=function key(e){var t=this._baseState;return assert(null===t.key),t.key=e,this},Node.prototype.any=function any(){return this._baseState.any=!0,this},Node.prototype.choice=function choice(e){var t=this._baseState;return assert(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},Node.prototype.contains=function contains(e){var t=this._baseState;return assert(null===t.use),t.contains=e,this},Node.prototype._decode=function decode(e,t){var r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));var i,o=r.default,n=!0,s=null;if(null!==r.key&&(s=e.enterKey(r.key)),r.optional){var a=null;if(null!==r.explicit?a=r.explicit:null!==r.implicit?a=r.implicit:null!==r.tag&&(a=r.tag),null!==a||r.any){if(n=this._peekTag(e,a,r.any),e.isError(n))return n}else{var c=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),n=!0}catch(e){n=!1}e.restore(c)}}if(r.obj&&n&&(i=e.enterObject()),n){if(null!==r.explicit){var l=this._decodeTag(e,r.explicit);if(e.isError(l))return l;e=l}var u=e.offset;if(null===r.use&&null===r.choice){if(r.any)c=e.save();var d=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(d))return d;r.any?o=e.raw(c):e=d}if(t&&t.track&&null!==r.tag&&t.track(e.path(),u,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),o=r.any?o:null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),e.isError(o))return o;if(r.any||null!==r.choice||null===r.children||r.children.forEach(function decodeChildren(r){r._decode(e,t)}),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){var h=new DecoderBuffer(o);o=this._getUse(r.contains,e._reporterState.obj)._decode(h,t)}}return r.obj&&n&&(o=e.leaveObject(i)),null===r.key||null===o&&!0!==n?null!==s&&e.exitKey(s):e.leaveKey(s,r.key,o),o},Node.prototype._decodeGeneric=function decodeGeneric(e,t,r){var i=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,i.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&i.args?this._decodeObjid(t,i.args[0],i.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,i.args&&i.args[0],r):null!==i.use?this._getUse(i.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},Node.prototype._getUse=function _getUse(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),assert(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},Node.prototype._decodeChoice=function decodeChoice(e,t){var r=this._baseState,i=null,o=!1;return Object.keys(r.choice).some(function(n){var s=e.save(),a=r.choice[n];try{var c=a._decode(e,t);if(e.isError(c))return!1;i={type:n,value:c},o=!0}catch(t){return e.restore(s),!1}return!0},this),o?i:e.error("Choice not matched")},Node.prototype._createEncoderBuffer=function createEncoderBuffer(e){return new EncoderBuffer(e,this.reporter)},Node.prototype._encode=function encode(e,t,r){var i=this._baseState;if(null===i.default||i.default!==e){var o=this._encodeValue(e,t,r);if(void 0!==o&&!this._skipDefault(o,t,r))return o}},Node.prototype._encodeValue=function encode(e,t,r){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new Reporter);var o=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}var n=null,s=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,t);else if(i.contains)n=this._getUse(i.contains,r)._encode(e,t),s=!0;else if(i.children)n=i.children.map(function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");var i=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");var o=r._encode(e[r._baseState.key],t,e);return t.leaveKey(i),o},this).filter(function(e){return e}),n=this._createEncoderBuffer(n);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var a=this.clone();a._baseState.implicit=null,n=this._createEncoderBuffer(e.map(function(r){var i=this._baseState;return this._getUse(i.args[0],e)._encode(r,t)},a))}else null!==i.use?o=this._getUse(i.use,r)._encode(e,t):(n=this._encodePrimitive(i.tag,e),s=!0);if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,l=null===i.implicit?"universal":"context";null===c?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(c,s,l,n))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},Node.prototype._encodeChoice=function encodeChoice(e,t){var r=this._baseState,i=r.choice[e.type];return i||assert(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),i._encode(e.value,t)},Node.prototype._encodePrimitive=function encodePrimitive(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},Node.prototype._isNumstr=function isNumstr(e){return/^[0-9 ]*$/.test(e)},Node.prototype._isPrintstr=function isPrintstr(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)};

    },{"../base":6,"minimalistic-assert":165}],8:[function(require,module,exports){
        var inherits=require("inherits");function Reporter(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}function ReporterError(r,t){this.path=r,this.rethrow(t)}exports.Reporter=Reporter,Reporter.prototype.isError=function isError(r){return r instanceof ReporterError},Reporter.prototype.save=function save(){var r=this._reporterState;return{obj:r.obj,pathLen:r.path.length}},Reporter.prototype.restore=function restore(r){var t=this._reporterState;t.obj=r.obj,t.path=t.path.slice(0,r.pathLen)},Reporter.prototype.enterKey=function enterKey(r){return this._reporterState.path.push(r)},Reporter.prototype.exitKey=function exitKey(r){var t=this._reporterState;t.path=t.path.slice(0,r-1)},Reporter.prototype.leaveKey=function leaveKey(r,t,e){var o=this._reporterState;this.exitKey(r),null!==o.obj&&(o.obj[t]=e)},Reporter.prototype.path=function path(){return this._reporterState.path.join("/")},Reporter.prototype.enterObject=function enterObject(){var r=this._reporterState,t=r.obj;return r.obj={},t},Reporter.prototype.leaveObject=function leaveObject(r){var t=this._reporterState,e=t.obj;return t.obj=r,e},Reporter.prototype.error=function error(r){var t,e=this._reporterState,o=r instanceof ReporterError;if(t=o?r:new ReporterError(e.path.map(function(r){return"["+JSON.stringify(r)+"]"}).join(""),r.message||r,r.stack),!e.options.partial)throw t;return o||e.errors.push(t),t},Reporter.prototype.wrapResult=function wrapResult(r){var t=this._reporterState;return t.options.partial?{result:this.isError(r)?null:r,errors:t.errors}:r},inherits(ReporterError,Error),ReporterError.prototype.rethrow=function rethrow(r){if(this.message=r+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this};

    },{"inherits":159}],9:[function(require,module,exports){
        var constants=require("../constants");exports.tagClass={0:"universal",1:"application",2:"context",3:"private"},exports.tagClassByName=constants._reverse(exports.tagClass),exports.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},exports.tagByName=constants._reverse(exports.tag);

    },{"../constants":10}],10:[function(require,module,exports){
        var constants=exports;constants._reverse=function reverse(r){var e={};return Object.keys(r).forEach(function(n){(0|n)==n&&(n|=0);var t=r[n];e[t]=n}),e},constants.der=require("./der");

    },{"./der":9}],11:[function(require,module,exports){
        var inherits=require("inherits"),asn1=require("../../asn1"),base=asn1.base,bignum=asn1.bignum,der=asn1.constants.der;function DERDecoder(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new DERNode,this.tree._init(r.body)}function DERNode(r){base.Node.call(this,"der",r)}function derDecodeTag(r,e){var t=r.readUInt8(e);if(r.isError(t))return t;var i=der.tagClass[t>>6],o=0==(32&t);if(31==(31&t)){var n=t;for(t=0;128==(128&n);){if(n=r.readUInt8(e),r.isError(n))return n;t<<=7,t|=127&n}}else t&=31;return{cls:i,primitive:o,tag:t,tagStr:der.tag[t]}}function derDecodeLen(r,e,t){var i=r.readUInt8(t);if(r.isError(i))return i;if(!e&&128===i)return null;if(0==(128&i))return i;var o=127&i;if(o>4)return r.error("length octect is too long");i=0;for(var n=0;n<o;n++){i<<=8;var d=r.readUInt8(t);if(r.isError(d))return d;i|=d}return i}module.exports=DERDecoder,DERDecoder.prototype.decode=function decode(r,e){return r instanceof base.DecoderBuffer||(r=new base.DecoderBuffer(r,e)),this.tree._decode(r,e)},inherits(DERNode,base.Node),DERNode.prototype._peekTag=function peekTag(r,e,t){if(r.isEmpty())return!1;var i=r.save(),o=derDecodeTag(r,'Failed to peek tag: "'+e+'"');return r.isError(o)?o:(r.restore(i),o.tag===e||o.tagStr===e||o.tagStr+"of"===e||t)},DERNode.prototype._decodeTag=function decodeTag(r,e,t){var i=derDecodeTag(r,'Failed to decode tag of "'+e+'"');if(r.isError(i))return i;var o=derDecodeLen(r,i.primitive,'Failed to get length of "'+e+'"');if(r.isError(o))return o;if(!t&&i.tag!==e&&i.tagStr!==e&&i.tagStr+"of"!==e)return r.error('Failed to match tag: "'+e+'"');if(i.primitive||null!==o)return r.skip(o,'Failed to match body of: "'+e+'"');var n=r.save(),d=this._skipUntilEnd(r,'Failed to skip indefinite length body: "'+this.tag+'"');return r.isError(d)?d:(o=r.offset-n.offset,r.restore(n),r.skip(o,'Failed to match body of: "'+e+'"'))},DERNode.prototype._skipUntilEnd=function skipUntilEnd(r,e){for(;;){var t=derDecodeTag(r,e);if(r.isError(t))return t;var i,o=derDecodeLen(r,t.primitive,e);if(r.isError(o))return o;if(i=t.primitive||null!==o?r.skip(o):this._skipUntilEnd(r,e),r.isError(i))return i;if("end"===t.tagStr)break}},DERNode.prototype._decodeList=function decodeList(r,e,t,i){for(var o=[];!r.isEmpty();){var n=this._peekTag(r,"end");if(r.isError(n))return n;var d=t.decode(r,"der",i);if(r.isError(d)&&n)break;o.push(d)}return o},DERNode.prototype._decodeStr=function decodeStr(r,e){if("bitstr"===e){var t=r.readUInt8();return r.isError(t)?t:{unused:t,data:r.raw()}}if("bmpstr"===e){var i=r.raw();if(i.length%2==1)return r.error("Decoding of string type: bmpstr length mismatch");for(var o="",n=0;n<i.length/2;n++)o+=String.fromCharCode(i.readUInt16BE(2*n));return o}if("numstr"===e){var d=r.raw().toString("ascii");return this._isNumstr(d)?d:r.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return r.raw();if("objDesc"===e)return r.raw();if("printstr"===e){var s=r.raw().toString("ascii");return this._isPrintstr(s)?s:r.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?r.raw().toString():r.error("Decoding of string type: "+e+" unsupported")},DERNode.prototype._decodeObjid=function decodeObjid(r,e,t){for(var i,o=[],n=0;!r.isEmpty();){var d=r.readUInt8();n<<=7,n|=127&d,0==(128&d)&&(o.push(n),n=0)}128&d&&o.push(n);var s=o[0]/40|0,a=o[0]%40;if(i=t?o:[s,a].concat(o.slice(1)),e){var c=e[i.join(" ")];void 0===c&&(c=e[i.join(".")]),void 0!==c&&(i=c)}return i},DERNode.prototype._decodeTime=function decodeTime(r,e){var t=r.raw().toString();if("gentime"===e)var i=0|t.slice(0,4),o=0|t.slice(4,6),n=0|t.slice(6,8),d=0|t.slice(8,10),s=0|t.slice(10,12),a=0|t.slice(12,14);else{if("utctime"!==e)return r.error("Decoding "+e+" time is not supported yet");i=0|t.slice(0,2),o=0|t.slice(2,4),n=0|t.slice(4,6),d=0|t.slice(6,8),s=0|t.slice(8,10),a=0|t.slice(10,12);i=i<70?2e3+i:1900+i}return Date.UTC(i,o-1,n,d,s,a,0)},DERNode.prototype._decodeNull=function decodeNull(r){return null},DERNode.prototype._decodeBool=function decodeBool(r){var e=r.readUInt8();return r.isError(e)?e:0!==e},DERNode.prototype._decodeInt=function decodeInt(r,e){var t=r.raw(),i=new bignum(t);return e&&(i=e[i.toString(10)]||i),i},DERNode.prototype._use=function use(r,e){return"function"==typeof r&&(r=r(e)),r._getDecoder("der").tree};

    },{"../../asn1":3,"inherits":159}],12:[function(require,module,exports){
        var decoders=exports;decoders.der=require("./der"),decoders.pem=require("./pem");

    },{"./der":11,"./pem":13}],13:[function(require,module,exports){
        var inherits=require("inherits"),Buffer=require("buffer").Buffer,DERDecoder=require("./der");function PEMDecoder(e){DERDecoder.call(this,e),this.enc="pem"}inherits(PEMDecoder,DERDecoder),module.exports=PEMDecoder,PEMDecoder.prototype.decode=function decode(e,r){for(var o=e.toString().split(/[\r\n]+/g),i=r.label.toUpperCase(),t=/^-----(BEGIN|END) ([^-]+)-----$/,c=-1,n=-1,f=0;f<o.length;f++){var d=o[f].match(t);if(null!==d&&d[2]===i){if(-1!==c){if("END"!==d[1])break;n=f;break}if("BEGIN"!==d[1])break;c=f}}if(-1===c||-1===n)throw new Error("PEM section not found for: "+i);var a=o.slice(c+1,n).join("");a.replace(/[^a-z0-9\+\/=]+/gi,"");var D=new Buffer(a,"base64");return DERDecoder.prototype.decode.call(this,D,r)};

    },{"./der":11,"buffer":91,"inherits":159}],14:[function(require,module,exports){
        var inherits=require("inherits"),Buffer=require("buffer").Buffer,asn1=require("../../asn1"),base=asn1.base,der=asn1.constants.der;function DEREncoder(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new DERNode,this.tree._init(e.body)}function DERNode(e){base.Node.call(this,"der",e)}function two(e){return e<10?"0"+e:e}function encodeTag(e,r,t,n){var o;if("seqof"===e?e="seq":"setof"===e&&(e="set"),der.tagByName.hasOwnProperty(e))o=der.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);o=e}return o>=31?n.error("Multi-octet tag encoding unsupported"):(r||(o|=32),o|=der.tagClassByName[t||"universal"]<<6)}module.exports=DEREncoder,DEREncoder.prototype.encode=function encode(e,r){return this.tree._encode(e,r).join()},inherits(DERNode,base.Node),DERNode.prototype._encodeComposite=function encodeComposite(e,r,t,n){var o,i=encodeTag(e,r,t,this.reporter);if(n.length<128)return(o=new Buffer(2))[0]=i,o[1]=n.length,this._createEncoderBuffer([o,n]);for(var f=1,s=n.length;s>=256;s>>=8)f++;(o=new Buffer(2+f))[0]=i,o[1]=128|f;s=1+f;for(var u=n.length;u>0;s--,u>>=8)o[s]=255&u;return this._createEncoderBuffer([o,n])},DERNode.prototype._encodeStr=function encodeStr(e,r){if("bitstr"===r)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===r){for(var t=new Buffer(2*e.length),n=0;n<e.length;n++)t.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(t)}return"numstr"===r?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===r?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)?this._createEncoderBuffer(e):"objDesc"===r?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+r+" unsupported")},DERNode.prototype._encodeObjid=function encodeObjid(e,r,t){if("string"==typeof e){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=r[e].split(/[\s\.]+/g);for(var n=0;n<e.length;n++)e[n]|=0}else if(Array.isArray(e)){e=e.slice();for(n=0;n<e.length;n++)e[n]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!t){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}var o=0;for(n=0;n<e.length;n++){var i=e[n];for(o++;i>=128;i>>=7)o++}var f=new Buffer(o),s=f.length-1;for(n=e.length-1;n>=0;n--){i=e[n];for(f[s--]=127&i;(i>>=7)>0;)f[s--]=128|127&i}return this._createEncoderBuffer(f)},DERNode.prototype._encodeTime=function encodeTime(e,r){var t,n=new Date(e);return"gentime"===r?t=[two(n.getFullYear()),two(n.getUTCMonth()+1),two(n.getUTCDate()),two(n.getUTCHours()),two(n.getUTCMinutes()),two(n.getUTCSeconds()),"Z"].join(""):"utctime"===r?t=[two(n.getFullYear()%100),two(n.getUTCMonth()+1),two(n.getUTCDate()),two(n.getUTCHours()),two(n.getUTCMinutes()),two(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+r+" time is not supported yet"),this._encodeStr(t,"octstr")},DERNode.prototype._encodeNull=function encodeNull(){return this._createEncoderBuffer("")},DERNode.prototype._encodeInt=function encodeInt(e,r){if("string"==typeof e){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=r[e]}if("number"!=typeof e&&!Buffer.isBuffer(e)){var t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=new Buffer(t)}if(Buffer.isBuffer(e)){var n=e.length;0===e.length&&n++;var o=new Buffer(n);return e.copy(o),0===e.length&&(o[0]=0),this._createEncoderBuffer(o)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);n=1;for(var i=e;i>=256;i>>=8)n++;for(i=(o=new Array(n)).length-1;i>=0;i--)o[i]=255&e,e>>=8;return 128&o[0]&&o.unshift(0),this._createEncoderBuffer(new Buffer(o))},DERNode.prototype._encodeBool=function encodeBool(e){return this._createEncoderBuffer(e?255:0)},DERNode.prototype._use=function use(e,r){return"function"==typeof e&&(e=e(r)),e._getEncoder("der").tree},DERNode.prototype._skipDefault=function skipDefault(e,r,t){var n,o=this._baseState;if(null===o.default)return!1;var i=e.join();if(void 0===o.defaultBuffer&&(o.defaultBuffer=this._encodeValue(o.default,r,t).join()),i.length!==o.defaultBuffer.length)return!1;for(n=0;n<i.length;n++)if(i[n]!==o.defaultBuffer[n])return!1;return!0};

    },{"../../asn1":3,"buffer":91,"inherits":159}],15:[function(require,module,exports){
        var encoders=exports;encoders.der=require("./der"),encoders.pem=require("./pem");

    },{"./der":14,"./pem":16}],16:[function(require,module,exports){
        var inherits=require("inherits"),DEREncoder=require("./der");function PEMEncoder(e){DEREncoder.call(this,e),this.enc="pem"}inherits(PEMEncoder,DEREncoder),module.exports=PEMEncoder,PEMEncoder.prototype.encode=function encode(e,r){for(var n=DEREncoder.prototype.encode.call(this,e).toString("base64"),o=["-----BEGIN "+r.label+"-----"],E=0;E<n.length;E+=64)o.push(n.slice(E,E+64));return o.push("-----END "+r.label+"-----"),o.join("\n")};

    },{"./der":14,"inherits":159}],17:[function(require,module,exports){
        module.exports=require("./lib/").default;

    },{"./lib/":18}],18:[function(require,module,exports){
        "use strict";function _toConsumableArray(r){if(Array.isArray(r)){for(var e=0,n=Array(r.length);e<r.length;e++)n[e]=r[e];return n}return Array.from(r)}function _asyncToGenerator(r){return function(){var e=r.apply(this,arguments);return new Promise(function(r,n){return function step(t,a){try{var o=e[t](a),u=o.value}catch(r){return void n(r)}if(!o.done)return Promise.resolve(u).then(function(r){step("next",r)},function(r){step("throw",r)});r(u)}("next")})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=singletonAsync;var last=function last(r){return r[r.length-1]};function singletonAsync(r){var e=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).trailing;if("function"!=typeof r)throw new Error("argument is not function.");var t=!1,a=[];return function(){for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return new Promise((i=_asyncToGenerator(regeneratorRuntime.mark(function _callee(o){var s,i,c;return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",a.push({resolve:o,args:u}));case 2:return t=!0,e.next=5,r.apply(void 0,u);case 5:if(s=e.sent,o(s),!(a.length>0)){e.next=15;break}if(!n){e.next=13;break}return i=last(a),c=i.args,e.next=12,r.apply(void 0,_toConsumableArray(c));case 12:s=e.sent;case 13:a.forEach(function(r){return(0,r.resolve)(s)}),a=[];case 15:t=!1;case 16:case"end":return e.stop()}},_callee,e)})),function(r){return i.apply(this,arguments)}));var i}}

    },{}],19:[function(require,module,exports){
        module.exports=require("./lib/axios");

    },{"./lib/axios":21}],20:[function(require,module,exports){
        (function (process){
            "use strict";var utils=require("./../utils"),settle=require("./../core/settle"),buildURL=require("./../helpers/buildURL"),parseHeaders=require("./../helpers/parseHeaders"),isURLSameOrigin=require("./../helpers/isURLSameOrigin"),createError=require("../core/createError"),btoa="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||require("./../helpers/btoa");module.exports=function xhrAdapter(e){return new Promise(function dispatchXhrRequest(r,t){var s=e.data,o=e.headers;utils.isFormData(s)&&delete o["Content-Type"];var n=new XMLHttpRequest,a="onreadystatechange",i=!1;if("test"===process.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in n||isURLSameOrigin(e.url)||(n=new window.XDomainRequest,a="onload",i=!0,n.onprogress=function handleProgress(){},n.ontimeout=function handleTimeout(){}),e.auth){var u=e.auth.username||"",d=e.auth.password||"";o.Authorization="Basic "+btoa(u+":"+d)}if(n.open(e.method.toUpperCase(),buildURL(e.url,e.params,e.paramsSerializer),!0),n.timeout=e.timeout,n[a]=function handleLoad(){if(n&&(4===n.readyState||i)&&(0!==n.status||n.responseURL&&0===n.responseURL.indexOf("file:"))){var s="getAllResponseHeaders"in n?parseHeaders(n.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?n.response:n.responseText,status:1223===n.status?204:n.status,statusText:1223===n.status?"No Content":n.statusText,headers:s,config:e,request:n};settle(r,t,o),n=null}},n.onerror=function handleError(){t(createError("Network Error",e,null,n)),n=null},n.ontimeout=function handleTimeout(){t(createError("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",n)),n=null},utils.isStandardBrowserEnv()){var l=require("./../helpers/cookies"),p=(e.withCredentials||isURLSameOrigin(e.url))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;p&&(o[e.xsrfHeaderName]=p)}if("setRequestHeader"in n&&utils.forEach(o,function setRequestHeader(e,r){void 0===s&&"content-type"===r.toLowerCase()?delete o[r]:n.setRequestHeader(r,e)}),e.withCredentials&&(n.withCredentials=!0),e.responseType)try{n.responseType=e.responseType}catch(r){if("json"!==e.responseType)throw r}"function"==typeof e.onDownloadProgress&&n.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&n.upload&&n.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function onCanceled(e){n&&(n.abort(),t(e),n=null)}),void 0===s&&(s=null),n.send(s)})};

        }).call(this,require('_process'))
    },{"../core/createError":27,"./../core/settle":30,"./../helpers/btoa":34,"./../helpers/buildURL":35,"./../helpers/cookies":37,"./../helpers/isURLSameOrigin":39,"./../helpers/parseHeaders":41,"./../utils":43,"_process":184}],21:[function(require,module,exports){
        "use strict";var utils=require("./utils"),bind=require("./helpers/bind"),Axios=require("./core/Axios"),defaults=require("./defaults");function createInstance(e){var r=new Axios(e),s=bind(Axios.prototype.request,r);return utils.extend(s,Axios.prototype,r),utils.extend(s,r),s}var axios=createInstance(defaults);axios.Axios=Axios,axios.create=function create(e){return createInstance(utils.merge(defaults,e))},axios.Cancel=require("./cancel/Cancel"),axios.CancelToken=require("./cancel/CancelToken"),axios.isCancel=require("./cancel/isCancel"),axios.all=function all(e){return Promise.all(e)},axios.spread=require("./helpers/spread"),module.exports=axios,module.exports.default=axios;

    },{"./cancel/Cancel":22,"./cancel/CancelToken":23,"./cancel/isCancel":24,"./core/Axios":25,"./defaults":32,"./helpers/bind":33,"./helpers/spread":42,"./utils":43}],22:[function(require,module,exports){
        "use strict";function Cancel(e){this.message=e}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel;

    },{}],23:[function(require,module,exports){
        "use strict";var Cancel=require("./Cancel");function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function promiseExecutor(e){n=e});var o=this;e(function cancel(e){o.reason||(o.reason=new Cancel(e),n(o.reason))})}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var e;return{token:new CancelToken(function executor(n){e=n}),cancel:e}},module.exports=CancelToken;

    },{"./Cancel":22}],24:[function(require,module,exports){
        "use strict";module.exports=function isCancel(e){return!(!e||!e.__CANCEL__)};

    },{}],25:[function(require,module,exports){
        "use strict";var defaults=require("./../defaults"),utils=require("./../utils"),InterceptorManager=require("./InterceptorManager"),dispatchRequest=require("./dispatchRequest");function Axios(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function request(e){"string"==typeof e&&(e=utils.merge({url:arguments[0]},arguments[1])),(e=utils.merge(defaults,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[dispatchRequest,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function unshiftRequestInterceptors(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function pushResponseInterceptors(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},utils.forEach(["delete","get","head","options"],function forEachMethodNoData(e){Axios.prototype[e]=function(t,r){return this.request(utils.merge(r||{},{method:e,url:t}))}}),utils.forEach(["post","put","patch"],function forEachMethodWithData(e){Axios.prototype[e]=function(t,r,s){return this.request(utils.merge(s||{},{method:e,url:t,data:r}))}}),module.exports=Axios;

    },{"./../defaults":32,"./../utils":43,"./InterceptorManager":26,"./dispatchRequest":28}],26:[function(require,module,exports){
        "use strict";var utils=require("./../utils");function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function forEach(e){utils.forEach(this.handlers,function forEachHandler(t){null!==t&&e(t)})},module.exports=InterceptorManager;

    },{"./../utils":43}],27:[function(require,module,exports){
        "use strict";var enhanceError=require("./enhanceError");module.exports=function createError(r,e,n,o,a){var c=new Error(r);return enhanceError(c,e,n,o,a)};

    },{"./enhanceError":29}],28:[function(require,module,exports){
        "use strict";var utils=require("./../utils"),transformData=require("./transformData"),isCancel=require("../cancel/isCancel"),defaults=require("../defaults"),isAbsoluteURL=require("./../helpers/isAbsoluteURL"),combineURLs=require("./../helpers/combineURLs");function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}module.exports=function dispatchRequest(e){return throwIfCancellationRequested(e),e.baseURL&&!isAbsoluteURL(e.url)&&(e.url=combineURLs(e.baseURL,e.url)),e.headers=e.headers||{},e.data=transformData(e.data,e.headers,e.transformRequest),e.headers=utils.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),utils.forEach(["delete","get","head","post","put","patch","common"],function cleanHeaderConfig(a){delete e.headers[a]}),(e.adapter||defaults.adapter)(e).then(function onAdapterResolution(a){return throwIfCancellationRequested(e),a.data=transformData(a.data,a.headers,e.transformResponse),a},function onAdapterRejection(a){return isCancel(a)||(throwIfCancellationRequested(e),a&&a.response&&(a.response.data=transformData(a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})};

    },{"../cancel/isCancel":24,"../defaults":32,"./../helpers/combineURLs":36,"./../helpers/isAbsoluteURL":38,"./../utils":43,"./transformData":31}],29:[function(require,module,exports){
        "use strict";module.exports=function enhanceError(e,r,n,o,s){return e.config=r,n&&(e.code=n),e.request=o,e.response=s,e};

    },{}],30:[function(require,module,exports){
        "use strict";var createError=require("./createError");module.exports=function settle(t,e,r){var s=r.config.validateStatus;r.status&&s&&!s(r.status)?e(createError("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)};

    },{"./createError":27}],31:[function(require,module,exports){
        "use strict";var utils=require("./../utils");module.exports=function transformData(r,t,u){return utils.forEach(u,function transform(u){r=u(r,t)}),r};

    },{"./../utils":43}],32:[function(require,module,exports){
        (function (process){
            "use strict";var utils=require("./utils"),normalizeHeaderName=require("./helpers/normalizeHeaderName"),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils.isUndefined(e)&&utils.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=require("./adapters/xhr"):"undefined"!=typeof process&&(e=require("./adapters/http")),e}var defaults={adapter:getDefaultAdapter(),transformRequest:[function transformRequest(e,t){return normalizeHeaderName(t,"Content-Type"),utils.isFormData(e)||utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e)?e:utils.isArrayBufferView(e)?e.buffer:utils.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function transformResponse(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function validateStatus(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function forEachMethodNoData(e){defaults.headers[e]={}}),utils.forEach(["post","put","patch"],function forEachMethodWithData(e){defaults.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)}),module.exports=defaults;

        }).call(this,require('_process'))
    },{"./adapters/http":20,"./adapters/xhr":20,"./helpers/normalizeHeaderName":40,"./utils":43,"_process":184}],33:[function(require,module,exports){
        "use strict";module.exports=function bind(r,n){return function wrap(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}};

    },{}],34:[function(require,module,exports){
        "use strict";var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E(){this.message="String contains an invalid character"}function btoa(r){for(var t,a,o=String(r),e="",n=0,c=chars;o.charAt(0|n)||(c="=",n%1);e+=c.charAt(63&t>>8-n%1*8)){if((a=o.charCodeAt(n+=.75))>255)throw new E;t=t<<8|a}return e}E.prototype=new Error,E.prototype.code=5,E.prototype.name="InvalidCharacterError",module.exports=btoa;

    },{}],35:[function(require,module,exports){
        "use strict";var utils=require("./../utils");function encode(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function buildURL(e,i,r){if(!i)return e;var t;if(r)t=r(i);else if(utils.isURLSearchParams(i))t=i.toString();else{var l=[];utils.forEach(i,function serialize(e,i){null!=e&&(utils.isArray(e)?i+="[]":e=[e],utils.forEach(e,function parseValue(e){utils.isDate(e)?e=e.toISOString():utils.isObject(e)&&(e=JSON.stringify(e)),l.push(encode(i)+"="+encode(e))}))}),t=l.join("&")}return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e};

    },{"./../utils":43}],36:[function(require,module,exports){
        "use strict";module.exports=function combineURLs(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};

    },{}],37:[function(require,module,exports){
        "use strict";var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(e,t,n,r,i,o){var u=[];u.push(e+"="+encodeURIComponent(t)),utils.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),utils.isString(r)&&u.push("path="+r),utils.isString(i)&&u.push("domain="+i),!0===o&&u.push("secure"),document.cookie=u.join("; ")},read:function read(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function remove(e){this.write(e,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}};

    },{"./../utils":43}],38:[function(require,module,exports){
        "use strict";module.exports=function isAbsoluteURL(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};

    },{}],39:[function(require,module,exports){
        "use strict";var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?function standardBrowserEnv(){var e,r=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");function resolveURL(e){var o=e;return r&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return e=resolveURL(window.location.href),function isURLSameOrigin(r){var t=utils.isString(r)?resolveURL(r):r;return t.protocol===e.protocol&&t.host===e.host}}():function isURLSameOrigin(){return!0};

    },{"./../utils":43}],40:[function(require,module,exports){
        "use strict";var utils=require("../utils");module.exports=function normalizeHeaderName(e,r){utils.forEach(e,function processHeader(t,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=t,delete e[s])})};

    },{"../utils":43}],41:[function(require,module,exports){
        "use strict";var utils=require("./../utils"),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function parseHeaders(e){var t,i,r,o={};return e?(utils.forEach(e.split("\n"),function parser(e){if(r=e.indexOf(":"),t=utils.trim(e.substr(0,r)).toLowerCase(),i=utils.trim(e.substr(r+1)),t){if(o[t]&&ignoreDuplicateOf.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([i]):o[t]?o[t]+", "+i:i}}),o):o};

    },{"./../utils":43}],42:[function(require,module,exports){
        "use strict";module.exports=function spread(r){return function wrap(n){return r.apply(null,n)}};

    },{}],43:[function(require,module,exports){
        "use strict";var bind=require("./helpers/bind"),isBuffer=require("is-buffer"),toString=Object.prototype.toString;function isArray(r){return"[object Array]"===toString.call(r)}function isArrayBuffer(r){return"[object ArrayBuffer]"===toString.call(r)}function isFormData(r){return"undefined"!=typeof FormData&&r instanceof FormData}function isArrayBufferView(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer}function isString(r){return"string"==typeof r}function isNumber(r){return"number"==typeof r}function isUndefined(r){return void 0===r}function isObject(r){return null!==r&&"object"==typeof r}function isDate(r){return"[object Date]"===toString.call(r)}function isFile(r){return"[object File]"===toString.call(r)}function isBlob(r){return"[object Blob]"===toString.call(r)}function isFunction(r){return"[object Function]"===toString.call(r)}function isStream(r){return isObject(r)&&isFunction(r.pipe)}function isURLSearchParams(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}function trim(r){return r.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(r,e){if(null!=r)if("object"!=typeof r&&(r=[r]),isArray(r))for(var n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.call(null,r[t],t,r)}function merge(){var r={};function assignValue(e,n){"object"==typeof r[n]&&"object"==typeof e?r[n]=merge(r[n],e):r[n]=e}for(var e=0,n=arguments.length;e<n;e++)forEach(arguments[e],assignValue);return r}function extend(r,e,n){return forEach(e,function assignValue(e,i){r[i]=n&&"function"==typeof e?bind(e,n):e}),r}module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim};

    },{"./helpers/bind":33,"is-buffer":160}],44:[function(require,module,exports){
        "use strict";exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function placeHoldersCount(o){var r=o.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===o[r-2]?2:"="===o[r-1]?1:0}function byteLength(o){return 3*o.length/4-placeHoldersCount(o)}function toByteArray(o){var r,e,t,u,n,p=o.length;u=placeHoldersCount(o),n=new Arr(3*p/4-u),e=u>0?p-4:p;var a=0;for(r=0;r<e;r+=4)t=revLookup[o.charCodeAt(r)]<<18|revLookup[o.charCodeAt(r+1)]<<12|revLookup[o.charCodeAt(r+2)]<<6|revLookup[o.charCodeAt(r+3)],n[a++]=t>>16&255,n[a++]=t>>8&255,n[a++]=255&t;return 2===u?(t=revLookup[o.charCodeAt(r)]<<2|revLookup[o.charCodeAt(r+1)]>>4,n[a++]=255&t):1===u&&(t=revLookup[o.charCodeAt(r)]<<10|revLookup[o.charCodeAt(r+1)]<<4|revLookup[o.charCodeAt(r+2)]>>2,n[a++]=t>>8&255,n[a++]=255&t),n}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]}function encodeChunk(o,r,e){for(var t,u=[],n=r;n<e;n+=3)t=(o[n]<<16)+(o[n+1]<<8)+o[n+2],u.push(tripletToBase64(t));return u.join("")}function fromByteArray(o){for(var r,e=o.length,t=e%3,u="",n=[],p=0,a=e-t;p<a;p+=16383)n.push(encodeChunk(o,p,p+16383>a?a:p+16383));return 1===t?(r=o[e-1],u+=lookup[r>>2],u+=lookup[r<<4&63],u+="=="):2===t&&(r=(o[e-2]<<8)+o[e-1],u+=lookup[r>>10],u+=lookup[r>>4&63],u+=lookup[r<<2&63],u+="="),n.push(u),n.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;

    },{}],45:[function(require,module,exports){
        !function(t,i){"use strict";function assert(t,i){if(!t)throw new Error(i||"Assertion failed")}function inherits(t,i){t.super_=i;var r=function(){};r.prototype=i.prototype,t.prototype=new r,t.prototype.constructor=t}function BN(t,i,r){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(r=i,i=10),this._init(t||0,i||10,r||"be"))}var r;"object"==typeof t?t.exports=BN:i.BN=BN,BN.BN=BN,BN.wordSize=26;try{r=require("buffer").Buffer}catch(t){}function parseHex(t,i,r){for(var e=0,n=Math.min(t.length,r),h=i;h<n;h++){var s=t.charCodeAt(h)-48;e<<=4,e|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return e}function parseBase(t,i,r,e){for(var n=0,h=Math.min(t.length,r),s=i;s<h;s++){var o=t.charCodeAt(s)-48;n*=e,n+=o>=49?o-49+10:o>=17?o-17+10:o}return n}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,i){return t.cmp(i)>0?t:i},BN.min=function min(t,i){return t.cmp(i)<0?t:i},BN.prototype._init=function init(t,i,r){if("number"==typeof t)return this._initNumber(t,i,r);if("object"==typeof t)return this._initArray(t,i,r);"hex"===i&&(i=16),assert(i===(0|i)&&i>=2&&i<=36);var e=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&e++,16===i?this._parseHex(t,e):this._parseBase(t,i,e),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),i,r)},BN.prototype._initNumber=function _initNumber(t,i,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),i,r)},BN.prototype._initArray=function _initArray(t,i,r){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var n,h,s=0;if("be"===r)for(e=t.length-1,n=0;e>=0;e-=3)h=t[e]|t[e-1]<<8|t[e-2]<<16,this.words[n]|=h<<s&67108863,this.words[n+1]=h>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);else if("le"===r)for(e=0,n=0;e<t.length;e+=3)h=t[e]|t[e+1]<<8|t[e+2]<<16,this.words[n]|=h<<s&67108863,this.words[n+1]=h>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var e,n,h=0;for(r=t.length-6,e=0;r>=i;r-=6)n=parseHex(t,r,r+6),this.words[e]|=n<<h&67108863,this.words[e+1]|=n>>>26-h&4194303,(h+=24)>=26&&(h-=26,e++);r+6!==i&&(n=parseHex(t,i,r+6),this.words[e]|=n<<h&67108863,this.words[e+1]|=n>>>26-h&4194303),this.strip()},BN.prototype._parseBase=function _parseBase(t,i,r){this.words=[0],this.length=1;for(var e=0,n=1;n<=67108863;n*=i)e++;e--,n=n/i|0;for(var h=t.length-r,s=h%e,o=Math.min(h,h-s)+r,u=0,a=r;a<o;a+=e)u=parseBase(t,a,a+e,i),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=parseBase(t,a,t.length,i),a=0;a<s;a++)l*=i;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var e=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],n=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,i,r){r.negative=i.negative^t.negative;var e=t.length+i.length|0;r.length=e,e=e-1|0;var n=0|t.words[0],h=0|i.words[0],s=n*h,o=67108863&s,u=s/67108864|0;r.words[0]=o;for(var a=1;a<e;a++){for(var l=u>>>26,m=67108863&u,f=Math.min(a,i.length-1),d=Math.max(0,a-t.length+1);d<=f;d++){var p=a-d|0;l+=(s=(n=0|t.words[p])*(h=0|i.words[d])+m)/67108864|0,m=67108863&s}r.words[a]=0|m,u=0|l}return 0!==u?r.words[a]=0|u:r.length--,r.strip()}BN.prototype.toString=function toString(t,i){var r;if(i=0|i||1,16===(t=t||10)||"hex"===t){r="";for(var s=0,o=0,u=0;u<this.length;u++){var a=this.words[u],l=(16777215&(a<<s|o)).toString(16);r=0!==(o=a>>>24-s&16777215)||u!==this.length-1?e[6-l.length]+l+r:l+r,(s+=2)>=26&&(s-=26,u--)}for(0!==o&&(r=o.toString(16)+r);r.length%i!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var m=n[t],f=h[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var p=d.modn(f).toString(t);r=(d=d.idivn(f)).isZero()?p+r:e[m-p.length]+p+r}for(this.isZero()&&(r="0"+r);r.length%i!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,i){return assert(void 0!==r),this.toArrayLike(r,t,i)},BN.prototype.toArray=function toArray(t,i){return this.toArrayLike(Array,t,i)},BN.prototype.toArrayLike=function toArrayLike(t,i,r){var e=this.byteLength(),n=r||Math.max(1,e);assert(e<=n,"byte array longer than desired length"),assert(n>0,"Requested array length <= 0"),this.strip();var h,s,o="le"===i,u=new t(n),a=this.clone();if(o){for(s=0;!a.isZero();s++)h=a.andln(255),a.iushrn(8),u[s]=h;for(;s<n;s++)u[s]=0}else{for(s=0;s<n-e;s++)u[s]=0;for(s=0;!a.isZero();s++)h=a.andln(255),a.iushrn(8),u[n-s-1]=h}return u},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var i=t,r=0;return i>=4096&&(r+=13,i>>>=13),i>=64&&(r+=7,i>>>=7),i>=8&&(r+=4,i>>>=4),i>=2&&(r+=2,i>>>=2),r+i},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var i=t,r=0;return 0==(8191&i)&&(r+=13,i>>>=13),0==(127&i)&&(r+=7,i>>>=7),0==(15&i)&&(r+=4,i>>>=4),0==(3&i)&&(r+=2,i>>>=2),0==(1&i)&&r++,r},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],i=this._countBits(t);return 26*(this.length-1)+i},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var r=this._zeroBits(this.words[i]);if(t+=r,26!==r)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},BN.prototype.ior=function ior(t){return assert(0==(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var i;i=this.length>t.length?t:this;for(var r=0;r<i.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=i.length,this.strip()},BN.prototype.iand=function iand(t){return assert(0==(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var i,r;this.length>t.length?(i=this,r=t):(i=t,r=this);for(var e=0;e<r.length;e++)this.words[e]=i.words[e]^r.words[e];if(this!==i)for(;e<i.length;e++)this.words[e]=i.words[e];return this.length=i.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(0==(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),r=t%26;this._expand(i),r>0&&i--;for(var e=0;e<i;e++)this.words[e]=67108863&~this.words[e];return r>0&&(this.words[e]=~this.words[e]&67108863>>26-r),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,i){assert("number"==typeof t&&t>=0);var r=t/26|0,e=t%26;return this._expand(r+1),this.words[r]=i?this.words[r]|1<<e:this.words[r]&~(1<<e),this.strip()},BN.prototype.iadd=function iadd(t){var i,r,e;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i._normSign();this.length>t.length?(r=this,e=t):(r=t,e=this);for(var n=0,h=0;h<e.length;h++)i=(0|r.words[h])+(0|e.words[h])+n,this.words[h]=67108863&i,n=i>>>26;for(;0!==n&&h<r.length;h++)i=(0|r.words[h])+n,this.words[h]=67108863&i,n=i>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;h<r.length;h++)this.words[h]=r.words[h];return this},BN.prototype.add=function add(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,e,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,e=t):(r=t,e=this);for(var h=0,s=0;s<e.length;s++)h=(i=(0|r.words[s])-(0|e.words[s])+h)>>26,this.words[s]=67108863&i;for(;0!==h&&s<r.length;s++)h=(i=(0|r.words[s])+h)>>26,this.words[s]=67108863&i;if(0===h&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var s=function comb10MulTo(t,i,r){var e,n,h,s=t.words,o=i.words,u=r.words,a=0,l=0|s[0],m=8191&l,f=l>>>13,d=0|s[1],p=8191&d,M=d>>>13,v=0|s[2],g=8191&v,c=v>>>13,w=0|s[3],y=8191&w,B=w>>>13,N=0|s[4],b=8191&N,_=N>>>13,R=0|s[5],A=8191&R,k=R>>>13,x=0|s[6],S=8191&x,T=x>>>13,q=0|s[7],F=8191&q,P=q>>>13,Z=0|s[8],L=8191&Z,I=Z>>>13,z=0|s[9],K=8191&z,j=z>>>13,E=0|o[0],O=8191&E,H=E>>>13,D=0|o[1],C=8191&D,J=D>>>13,U=0|o[2],G=8191&U,Q=U>>>13,V=0|o[3],W=8191&V,X=V>>>13,Y=0|o[4],$=8191&Y,tt=Y>>>13,it=0|o[5],rt=8191&it,et=it>>>13,nt=0|o[6],ht=8191&nt,st=nt>>>13,ot=0|o[7],ut=8191&ot,at=ot>>>13,lt=0|o[8],mt=8191&lt,ft=lt>>>13,dt=0|o[9],pt=8191&dt,Mt=dt>>>13;r.negative=t.negative^i.negative,r.length=19;var vt=(a+(e=Math.imul(m,O))|0)+((8191&(n=(n=Math.imul(m,H))+Math.imul(f,O)|0))<<13)|0;a=((h=Math.imul(f,H))+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,e=Math.imul(p,O),n=(n=Math.imul(p,H))+Math.imul(M,O)|0,h=Math.imul(M,H);var gt=(a+(e=e+Math.imul(m,C)|0)|0)+((8191&(n=(n=n+Math.imul(m,J)|0)+Math.imul(f,C)|0))<<13)|0;a=((h=h+Math.imul(f,J)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,e=Math.imul(g,O),n=(n=Math.imul(g,H))+Math.imul(c,O)|0,h=Math.imul(c,H),e=e+Math.imul(p,C)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(M,C)|0,h=h+Math.imul(M,J)|0;var ct=(a+(e=e+Math.imul(m,G)|0)|0)+((8191&(n=(n=n+Math.imul(m,Q)|0)+Math.imul(f,G)|0))<<13)|0;a=((h=h+Math.imul(f,Q)|0)+(n>>>13)|0)+(ct>>>26)|0,ct&=67108863,e=Math.imul(y,O),n=(n=Math.imul(y,H))+Math.imul(B,O)|0,h=Math.imul(B,H),e=e+Math.imul(g,C)|0,n=(n=n+Math.imul(g,J)|0)+Math.imul(c,C)|0,h=h+Math.imul(c,J)|0,e=e+Math.imul(p,G)|0,n=(n=n+Math.imul(p,Q)|0)+Math.imul(M,G)|0,h=h+Math.imul(M,Q)|0;var wt=(a+(e=e+Math.imul(m,W)|0)|0)+((8191&(n=(n=n+Math.imul(m,X)|0)+Math.imul(f,W)|0))<<13)|0;a=((h=h+Math.imul(f,X)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,e=Math.imul(b,O),n=(n=Math.imul(b,H))+Math.imul(_,O)|0,h=Math.imul(_,H),e=e+Math.imul(y,C)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(B,C)|0,h=h+Math.imul(B,J)|0,e=e+Math.imul(g,G)|0,n=(n=n+Math.imul(g,Q)|0)+Math.imul(c,G)|0,h=h+Math.imul(c,Q)|0,e=e+Math.imul(p,W)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(M,W)|0,h=h+Math.imul(M,X)|0;var yt=(a+(e=e+Math.imul(m,$)|0)|0)+((8191&(n=(n=n+Math.imul(m,tt)|0)+Math.imul(f,$)|0))<<13)|0;a=((h=h+Math.imul(f,tt)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,e=Math.imul(A,O),n=(n=Math.imul(A,H))+Math.imul(k,O)|0,h=Math.imul(k,H),e=e+Math.imul(b,C)|0,n=(n=n+Math.imul(b,J)|0)+Math.imul(_,C)|0,h=h+Math.imul(_,J)|0,e=e+Math.imul(y,G)|0,n=(n=n+Math.imul(y,Q)|0)+Math.imul(B,G)|0,h=h+Math.imul(B,Q)|0,e=e+Math.imul(g,W)|0,n=(n=n+Math.imul(g,X)|0)+Math.imul(c,W)|0,h=h+Math.imul(c,X)|0,e=e+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(M,$)|0,h=h+Math.imul(M,tt)|0;var Bt=(a+(e=e+Math.imul(m,rt)|0)|0)+((8191&(n=(n=n+Math.imul(m,et)|0)+Math.imul(f,rt)|0))<<13)|0;a=((h=h+Math.imul(f,et)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,e=Math.imul(S,O),n=(n=Math.imul(S,H))+Math.imul(T,O)|0,h=Math.imul(T,H),e=e+Math.imul(A,C)|0,n=(n=n+Math.imul(A,J)|0)+Math.imul(k,C)|0,h=h+Math.imul(k,J)|0,e=e+Math.imul(b,G)|0,n=(n=n+Math.imul(b,Q)|0)+Math.imul(_,G)|0,h=h+Math.imul(_,Q)|0,e=e+Math.imul(y,W)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(B,W)|0,h=h+Math.imul(B,X)|0,e=e+Math.imul(g,$)|0,n=(n=n+Math.imul(g,tt)|0)+Math.imul(c,$)|0,h=h+Math.imul(c,tt)|0,e=e+Math.imul(p,rt)|0,n=(n=n+Math.imul(p,et)|0)+Math.imul(M,rt)|0,h=h+Math.imul(M,et)|0;var Nt=(a+(e=e+Math.imul(m,ht)|0)|0)+((8191&(n=(n=n+Math.imul(m,st)|0)+Math.imul(f,ht)|0))<<13)|0;a=((h=h+Math.imul(f,st)|0)+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,e=Math.imul(F,O),n=(n=Math.imul(F,H))+Math.imul(P,O)|0,h=Math.imul(P,H),e=e+Math.imul(S,C)|0,n=(n=n+Math.imul(S,J)|0)+Math.imul(T,C)|0,h=h+Math.imul(T,J)|0,e=e+Math.imul(A,G)|0,n=(n=n+Math.imul(A,Q)|0)+Math.imul(k,G)|0,h=h+Math.imul(k,Q)|0,e=e+Math.imul(b,W)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(_,W)|0,h=h+Math.imul(_,X)|0,e=e+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(B,$)|0,h=h+Math.imul(B,tt)|0,e=e+Math.imul(g,rt)|0,n=(n=n+Math.imul(g,et)|0)+Math.imul(c,rt)|0,h=h+Math.imul(c,et)|0,e=e+Math.imul(p,ht)|0,n=(n=n+Math.imul(p,st)|0)+Math.imul(M,ht)|0,h=h+Math.imul(M,st)|0;var bt=(a+(e=e+Math.imul(m,ut)|0)|0)+((8191&(n=(n=n+Math.imul(m,at)|0)+Math.imul(f,ut)|0))<<13)|0;a=((h=h+Math.imul(f,at)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,e=Math.imul(L,O),n=(n=Math.imul(L,H))+Math.imul(I,O)|0,h=Math.imul(I,H),e=e+Math.imul(F,C)|0,n=(n=n+Math.imul(F,J)|0)+Math.imul(P,C)|0,h=h+Math.imul(P,J)|0,e=e+Math.imul(S,G)|0,n=(n=n+Math.imul(S,Q)|0)+Math.imul(T,G)|0,h=h+Math.imul(T,Q)|0,e=e+Math.imul(A,W)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(k,W)|0,h=h+Math.imul(k,X)|0,e=e+Math.imul(b,$)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(_,$)|0,h=h+Math.imul(_,tt)|0,e=e+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,et)|0)+Math.imul(B,rt)|0,h=h+Math.imul(B,et)|0,e=e+Math.imul(g,ht)|0,n=(n=n+Math.imul(g,st)|0)+Math.imul(c,ht)|0,h=h+Math.imul(c,st)|0,e=e+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,at)|0)+Math.imul(M,ut)|0,h=h+Math.imul(M,at)|0;var _t=(a+(e=e+Math.imul(m,mt)|0)|0)+((8191&(n=(n=n+Math.imul(m,ft)|0)+Math.imul(f,mt)|0))<<13)|0;a=((h=h+Math.imul(f,ft)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,e=Math.imul(K,O),n=(n=Math.imul(K,H))+Math.imul(j,O)|0,h=Math.imul(j,H),e=e+Math.imul(L,C)|0,n=(n=n+Math.imul(L,J)|0)+Math.imul(I,C)|0,h=h+Math.imul(I,J)|0,e=e+Math.imul(F,G)|0,n=(n=n+Math.imul(F,Q)|0)+Math.imul(P,G)|0,h=h+Math.imul(P,Q)|0,e=e+Math.imul(S,W)|0,n=(n=n+Math.imul(S,X)|0)+Math.imul(T,W)|0,h=h+Math.imul(T,X)|0,e=e+Math.imul(A,$)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(k,$)|0,h=h+Math.imul(k,tt)|0,e=e+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,et)|0)+Math.imul(_,rt)|0,h=h+Math.imul(_,et)|0,e=e+Math.imul(y,ht)|0,n=(n=n+Math.imul(y,st)|0)+Math.imul(B,ht)|0,h=h+Math.imul(B,st)|0,e=e+Math.imul(g,ut)|0,n=(n=n+Math.imul(g,at)|0)+Math.imul(c,ut)|0,h=h+Math.imul(c,at)|0,e=e+Math.imul(p,mt)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(M,mt)|0,h=h+Math.imul(M,ft)|0;var Rt=(a+(e=e+Math.imul(m,pt)|0)|0)+((8191&(n=(n=n+Math.imul(m,Mt)|0)+Math.imul(f,pt)|0))<<13)|0;a=((h=h+Math.imul(f,Mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,e=Math.imul(K,C),n=(n=Math.imul(K,J))+Math.imul(j,C)|0,h=Math.imul(j,J),e=e+Math.imul(L,G)|0,n=(n=n+Math.imul(L,Q)|0)+Math.imul(I,G)|0,h=h+Math.imul(I,Q)|0,e=e+Math.imul(F,W)|0,n=(n=n+Math.imul(F,X)|0)+Math.imul(P,W)|0,h=h+Math.imul(P,X)|0,e=e+Math.imul(S,$)|0,n=(n=n+Math.imul(S,tt)|0)+Math.imul(T,$)|0,h=h+Math.imul(T,tt)|0,e=e+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,et)|0)+Math.imul(k,rt)|0,h=h+Math.imul(k,et)|0,e=e+Math.imul(b,ht)|0,n=(n=n+Math.imul(b,st)|0)+Math.imul(_,ht)|0,h=h+Math.imul(_,st)|0,e=e+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(B,ut)|0,h=h+Math.imul(B,at)|0,e=e+Math.imul(g,mt)|0,n=(n=n+Math.imul(g,ft)|0)+Math.imul(c,mt)|0,h=h+Math.imul(c,ft)|0;var At=(a+(e=e+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,Mt)|0)+Math.imul(M,pt)|0))<<13)|0;a=((h=h+Math.imul(M,Mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,e=Math.imul(K,G),n=(n=Math.imul(K,Q))+Math.imul(j,G)|0,h=Math.imul(j,Q),e=e+Math.imul(L,W)|0,n=(n=n+Math.imul(L,X)|0)+Math.imul(I,W)|0,h=h+Math.imul(I,X)|0,e=e+Math.imul(F,$)|0,n=(n=n+Math.imul(F,tt)|0)+Math.imul(P,$)|0,h=h+Math.imul(P,tt)|0,e=e+Math.imul(S,rt)|0,n=(n=n+Math.imul(S,et)|0)+Math.imul(T,rt)|0,h=h+Math.imul(T,et)|0,e=e+Math.imul(A,ht)|0,n=(n=n+Math.imul(A,st)|0)+Math.imul(k,ht)|0,h=h+Math.imul(k,st)|0,e=e+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,at)|0)+Math.imul(_,ut)|0,h=h+Math.imul(_,at)|0,e=e+Math.imul(y,mt)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(B,mt)|0,h=h+Math.imul(B,ft)|0;var kt=(a+(e=e+Math.imul(g,pt)|0)|0)+((8191&(n=(n=n+Math.imul(g,Mt)|0)+Math.imul(c,pt)|0))<<13)|0;a=((h=h+Math.imul(c,Mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,e=Math.imul(K,W),n=(n=Math.imul(K,X))+Math.imul(j,W)|0,h=Math.imul(j,X),e=e+Math.imul(L,$)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(I,$)|0,h=h+Math.imul(I,tt)|0,e=e+Math.imul(F,rt)|0,n=(n=n+Math.imul(F,et)|0)+Math.imul(P,rt)|0,h=h+Math.imul(P,et)|0,e=e+Math.imul(S,ht)|0,n=(n=n+Math.imul(S,st)|0)+Math.imul(T,ht)|0,h=h+Math.imul(T,st)|0,e=e+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,at)|0)+Math.imul(k,ut)|0,h=h+Math.imul(k,at)|0,e=e+Math.imul(b,mt)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(_,mt)|0,h=h+Math.imul(_,ft)|0;var xt=(a+(e=e+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,Mt)|0)+Math.imul(B,pt)|0))<<13)|0;a=((h=h+Math.imul(B,Mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(K,$),n=(n=Math.imul(K,tt))+Math.imul(j,$)|0,h=Math.imul(j,tt),e=e+Math.imul(L,rt)|0,n=(n=n+Math.imul(L,et)|0)+Math.imul(I,rt)|0,h=h+Math.imul(I,et)|0,e=e+Math.imul(F,ht)|0,n=(n=n+Math.imul(F,st)|0)+Math.imul(P,ht)|0,h=h+Math.imul(P,st)|0,e=e+Math.imul(S,ut)|0,n=(n=n+Math.imul(S,at)|0)+Math.imul(T,ut)|0,h=h+Math.imul(T,at)|0,e=e+Math.imul(A,mt)|0,n=(n=n+Math.imul(A,ft)|0)+Math.imul(k,mt)|0,h=h+Math.imul(k,ft)|0;var St=(a+(e=e+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,Mt)|0)+Math.imul(_,pt)|0))<<13)|0;a=((h=h+Math.imul(_,Mt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,e=Math.imul(K,rt),n=(n=Math.imul(K,et))+Math.imul(j,rt)|0,h=Math.imul(j,et),e=e+Math.imul(L,ht)|0,n=(n=n+Math.imul(L,st)|0)+Math.imul(I,ht)|0,h=h+Math.imul(I,st)|0,e=e+Math.imul(F,ut)|0,n=(n=n+Math.imul(F,at)|0)+Math.imul(P,ut)|0,h=h+Math.imul(P,at)|0,e=e+Math.imul(S,mt)|0,n=(n=n+Math.imul(S,ft)|0)+Math.imul(T,mt)|0,h=h+Math.imul(T,ft)|0;var Tt=(a+(e=e+Math.imul(A,pt)|0)|0)+((8191&(n=(n=n+Math.imul(A,Mt)|0)+Math.imul(k,pt)|0))<<13)|0;a=((h=h+Math.imul(k,Mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,e=Math.imul(K,ht),n=(n=Math.imul(K,st))+Math.imul(j,ht)|0,h=Math.imul(j,st),e=e+Math.imul(L,ut)|0,n=(n=n+Math.imul(L,at)|0)+Math.imul(I,ut)|0,h=h+Math.imul(I,at)|0,e=e+Math.imul(F,mt)|0,n=(n=n+Math.imul(F,ft)|0)+Math.imul(P,mt)|0,h=h+Math.imul(P,ft)|0;var qt=(a+(e=e+Math.imul(S,pt)|0)|0)+((8191&(n=(n=n+Math.imul(S,Mt)|0)+Math.imul(T,pt)|0))<<13)|0;a=((h=h+Math.imul(T,Mt)|0)+(n>>>13)|0)+(qt>>>26)|0,qt&=67108863,e=Math.imul(K,ut),n=(n=Math.imul(K,at))+Math.imul(j,ut)|0,h=Math.imul(j,at),e=e+Math.imul(L,mt)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(I,mt)|0,h=h+Math.imul(I,ft)|0;var Ft=(a+(e=e+Math.imul(F,pt)|0)|0)+((8191&(n=(n=n+Math.imul(F,Mt)|0)+Math.imul(P,pt)|0))<<13)|0;a=((h=h+Math.imul(P,Mt)|0)+(n>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(K,mt),n=(n=Math.imul(K,ft))+Math.imul(j,mt)|0,h=Math.imul(j,ft);var Pt=(a+(e=e+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,Mt)|0)+Math.imul(I,pt)|0))<<13)|0;a=((h=h+Math.imul(I,Mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Zt=(a+(e=Math.imul(K,pt))|0)+((8191&(n=(n=Math.imul(K,Mt))+Math.imul(j,pt)|0))<<13)|0;return a=((h=Math.imul(j,Mt))+(n>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,u[0]=vt,u[1]=gt,u[2]=ct,u[3]=wt,u[4]=yt,u[5]=Bt,u[6]=Nt,u[7]=bt,u[8]=_t,u[9]=Rt,u[10]=At,u[11]=kt,u[12]=xt,u[13]=St,u[14]=Tt,u[15]=qt,u[16]=Ft,u[17]=Pt,u[18]=Zt,0!==a&&(u[19]=a,r.length++),r};function jumboMulTo(t,i,r){return(new FFTM).mulp(t,i,r)}function FFTM(t,i){this.x=t,this.y=i}Math.imul||(s=smallMulTo),BN.prototype.mulTo=function mulTo(t,i){var r=this.length+t.length;return 10===this.length&&10===t.length?s(this,t,i):r<63?smallMulTo(this,t,i):r<1024?function bigMulTo(t,i,r){r.negative=i.negative^t.negative,r.length=t.length+i.length;for(var e=0,n=0,h=0;h<r.length-1;h++){var s=n;n=0;for(var o=67108863&e,u=Math.min(h,i.length-1),a=Math.max(0,h-t.length+1);a<=u;a++){var l=h-a,m=(0|t.words[l])*(0|i.words[a]),f=67108863&m;o=67108863&(f=f+o|0),n+=(s=(s=s+(m/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[h]=o,e=s,s=n}return 0!==e?r.words[h]=e:r.length--,r.strip()}(this,t,i):jumboMulTo(this,t,i)},FFTM.prototype.makeRBT=function makeRBT(t){for(var i=new Array(t),r=BN.prototype._countBits(t)-1,e=0;e<t;e++)i[e]=this.revBin(e,r,t);return i},FFTM.prototype.revBin=function revBin(t,i,r){if(0===t||t===r-1)return t;for(var e=0,n=0;n<i;n++)e|=(1&t)<<i-n-1,t>>=1;return e},FFTM.prototype.permute=function permute(t,i,r,e,n,h){for(var s=0;s<h;s++)e[s]=i[t[s]],n[s]=r[t[s]]},FFTM.prototype.transform=function transform(t,i,r,e,n,h){this.permute(h,t,i,r,e,n);for(var s=1;s<n;s<<=1)for(var o=s<<1,u=Math.cos(2*Math.PI/o),a=Math.sin(2*Math.PI/o),l=0;l<n;l+=o)for(var m=u,f=a,d=0;d<s;d++){var p=r[l+d],M=e[l+d],v=r[l+d+s],g=e[l+d+s],c=m*v-f*g;g=m*g+f*v,v=c,r[l+d]=p+v,e[l+d]=M+g,r[l+d+s]=p-v,e[l+d+s]=M-g,d!==o&&(c=u*m-a*f,f=u*f+a*m,m=c)}},FFTM.prototype.guessLen13b=function guessLen13b(t,i){var r=1|Math.max(i,t),e=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+e},FFTM.prototype.conjugate=function conjugate(t,i,r){if(!(r<=1))for(var e=0;e<r/2;e++){var n=t[e];t[e]=t[r-e-1],t[r-e-1]=n,n=i[e],i[e]=-i[r-e-1],i[r-e-1]=-n}},FFTM.prototype.normalize13b=function normalize13b(t,i){for(var r=0,e=0;e<i/2;e++){var n=8192*Math.round(t[2*e+1]/i)+Math.round(t[2*e]/i)+r;t[e]=67108863&n,r=n<67108864?0:n/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,i,r,e){for(var n=0,h=0;h<i;h++)n+=0|t[h],r[2*h]=8191&n,n>>>=13,r[2*h+1]=8191&n,n>>>=13;for(h=2*i;h<e;++h)r[h]=0;assert(0===n),assert(0==(-8192&n))},FFTM.prototype.stub=function stub(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=0;return i},FFTM.prototype.mulp=function mulp(t,i,r){var e=2*this.guessLen13b(t.length,i.length),n=this.makeRBT(e),h=this.stub(e),s=new Array(e),o=new Array(e),u=new Array(e),a=new Array(e),l=new Array(e),m=new Array(e),f=r.words;f.length=e,this.convert13b(t.words,t.length,s,e),this.convert13b(i.words,i.length,a,e),this.transform(s,h,o,u,e,n),this.transform(a,h,l,m,e,n);for(var d=0;d<e;d++){var p=o[d]*l[d]-u[d]*m[d];u[d]=o[d]*m[d]+u[d]*l[d],o[d]=p}return this.conjugate(o,u,e),this.transform(o,u,f,h,e,n),this.conjugate(f,h,e),this.normalize13b(f,e),r.negative=t.negative^i.negative,r.length=t.length+i.length,r.strip()},BN.prototype.mul=function mul(t){var i=new BN(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},BN.prototype.mulf=function mulf(t){var i=new BN(null);return i.words=new Array(this.length+t.length),jumboMulTo(this,t,i)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var i=0,r=0;r<this.length;r++){var e=(0|this.words[r])*t,n=(67108863&e)+(67108863&i);i>>=26,i+=e/67108864|0,i+=n>>>26,this.words[r]=67108863&n}return 0!==i&&(this.words[r]=i,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var i=function toBitArray(t){for(var i=new Array(t.bitLength()),r=0;r<i.length;r++){var e=r/26|0,n=r%26;i[r]=(t.words[e]&1<<n)>>>n}return i}(t);if(0===i.length)return new BN(1);for(var r=this,e=0;e<i.length&&0===i[e];e++,r=r.sqr());if(++e<i.length)for(var n=r.sqr();e<i.length;e++,n=n.sqr())0!==i[e]&&(r=r.mul(n));return r},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var i,r=t%26,e=(t-r)/26,n=67108863>>>26-r<<26-r;if(0!==r){var h=0;for(i=0;i<this.length;i++){var s=this.words[i]&n,o=(0|this.words[i])-s<<r;this.words[i]=o|h,h=s>>>26-r}h&&(this.words[i]=h,this.length++)}if(0!==e){for(i=this.length-1;i>=0;i--)this.words[i+e]=this.words[i];for(i=0;i<e;i++)this.words[i]=0;this.length+=e}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,i,r){var e;assert("number"==typeof t&&t>=0),e=i?(i-i%26)/26:0;var n=t%26,h=Math.min((t-n)/26,this.length),s=67108863^67108863>>>n<<n,o=r;if(e-=h,e=Math.max(0,e),o){for(var u=0;u<h;u++)o.words[u]=this.words[u];o.length=h}if(0===h);else if(this.length>h)for(this.length-=h,u=0;u<this.length;u++)this.words[u]=this.words[u+h];else this.words[0]=0,this.length=1;var a=0;for(u=this.length-1;u>=0&&(0!==a||u>=e);u--){var l=0|this.words[u];this.words[u]=a<<26-n|l>>>n,a=l&s}return o&&0!==a&&(o.words[o.length++]=a),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,i,r){return assert(0===this.negative),this.iushrn(t,i,r)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var i=t%26,r=(t-i)/26,e=1<<i;return!(this.length<=r)&&!!(this.words[r]&e)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var i=t%26,r=(t-i)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==i&&r++,this.length=Math.min(r,this.length),0!==i){var e=67108863^67108863>>>i<<i;this.words[this.length-1]&=e}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,i,r){var e,n,h=t.length+r;this._expand(h);var s=0;for(e=0;e<t.length;e++){n=(0|this.words[e+r])+s;var o=(0|t.words[e])*i;s=((n-=67108863&o)>>26)-(o/67108864|0),this.words[e+r]=67108863&n}for(;e<this.length-r;e++)s=(n=(0|this.words[e+r])+s)>>26,this.words[e+r]=67108863&n;if(0===s)return this.strip();for(assert(-1===s),s=0,e=0;e<this.length;e++)s=(n=-(0|this.words[e])+s)>>26,this.words[e]=67108863&n;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,i){var r=(this.length,t.length),e=this.clone(),n=t,h=0|n.words[n.length-1];0!==(r=26-this._countBits(h))&&(n=n.ushln(r),e.iushln(r),h=0|n.words[n.length-1]);var s,o=e.length-n.length;if("mod"!==i){(s=new BN(null)).length=o+1,s.words=new Array(s.length);for(var u=0;u<s.length;u++)s.words[u]=0}var a=e.clone()._ishlnsubmul(n,1,o);0===a.negative&&(e=a,s&&(s.words[o]=1));for(var l=o-1;l>=0;l--){var m=67108864*(0|e.words[n.length+l])+(0|e.words[n.length+l-1]);for(m=Math.min(m/h|0,67108863),e._ishlnsubmul(n,m,l);0!==e.negative;)m--,e.negative=0,e._ishlnsubmul(n,1,l),e.isZero()||(e.negative^=1);s&&(s.words[l]=m)}return s&&s.strip(),e.strip(),"div"!==i&&0!==r&&e.iushrn(r),{div:s||null,mod:e}},BN.prototype.divmod=function divmod(t,i,r){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(h=this.neg().divmod(t,i),"mod"!==i&&(e=h.div.neg()),"div"!==i&&(n=h.mod.neg(),r&&0!==n.negative&&n.iadd(t)),{div:e,mod:n}):0===this.negative&&0!==t.negative?(h=this.divmod(t.neg(),i),"mod"!==i&&(e=h.div.neg()),{div:e,mod:h.mod}):0!=(this.negative&t.negative)?(h=this.neg().divmod(t.neg(),i),"div"!==i&&(n=h.mod.neg(),r&&0!==n.negative&&n.isub(t)),{div:h.div,mod:n}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,i);var e,n,h},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var r=0!==i.div.negative?i.mod.isub(t):i.mod,e=t.ushrn(1),n=t.andln(1),h=r.cmp(e);return h<0||1===n&&0===h?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var i=(1<<26)%t,r=0,e=this.length-1;e>=0;e--)r=(i*r+(0|this.words[e]))%t;return r},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var i=0,r=this.length-1;r>=0;r--){var e=(0|this.words[r])+67108864*i;this.words[r]=e/t|0,i=e%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var i=this,r=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e=new BN(1),n=new BN(0),h=new BN(0),s=new BN(1),o=0;i.isEven()&&r.isEven();)i.iushrn(1),r.iushrn(1),++o;for(var u=r.clone(),a=i.clone();!i.isZero();){for(var l=0,m=1;0==(i.words[0]&m)&&l<26;++l,m<<=1);if(l>0)for(i.iushrn(l);l-- >0;)(e.isOdd()||n.isOdd())&&(e.iadd(u),n.isub(a)),e.iushrn(1),n.iushrn(1);for(var f=0,d=1;0==(r.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(r.iushrn(f);f-- >0;)(h.isOdd()||s.isOdd())&&(h.iadd(u),s.isub(a)),h.iushrn(1),s.iushrn(1);i.cmp(r)>=0?(i.isub(r),e.isub(h),n.isub(s)):(r.isub(i),h.isub(e),s.isub(n))}return{a:h,b:s,gcd:r.iushln(o)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var i=this,r=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e,n=new BN(1),h=new BN(0),s=r.clone();i.cmpn(1)>0&&r.cmpn(1)>0;){for(var o=0,u=1;0==(i.words[0]&u)&&o<26;++o,u<<=1);if(o>0)for(i.iushrn(o);o-- >0;)n.isOdd()&&n.iadd(s),n.iushrn(1);for(var a=0,l=1;0==(r.words[0]&l)&&a<26;++a,l<<=1);if(a>0)for(r.iushrn(a);a-- >0;)h.isOdd()&&h.iadd(s),h.iushrn(1);i.cmp(r)>=0?(i.isub(r),n.isub(h)):(r.isub(i),h.isub(n))}return(e=0===i.cmpn(1)?n:h).cmpn(0)<0&&e.iadd(t),e},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),r=t.clone();i.negative=0,r.negative=0;for(var e=0;i.isEven()&&r.isEven();e++)i.iushrn(1),r.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=i.cmp(r);if(n<0){var h=i;i=r,r=h}else if(0===n||0===r.cmpn(1))break;i.isub(r)}return r.iushln(e)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var i=t%26,r=(t-i)/26,e=1<<i;if(this.length<=r)return this._expand(r+1),this.words[r]|=e,this;for(var n=e,h=r;0!==n&&h<this.length;h++){var s=0|this.words[h];n=(s+=n)>>>26,s&=67108863,this.words[h]=s}return 0!==n&&(this.words[h]=n,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var i,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)i=1;else{r&&(t=-t),assert(t<=67108863,"Number is too big");var e=0|this.words[0];i=e===t?0:e<t?-1:1}return 0!==this.negative?0|-i:i},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,r=this.length-1;r>=0;r--){var e=0|this.words[r],n=0|t.words[r];if(e!==n){e<n?i=-1:e>n&&(i=1);break}}return i},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var o={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,i){this.name=t,this.p=new BN(i,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var i=BN._prime(t);this.m=i.p,this.prime=i}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var i,r=t;do{this.split(r,this.tmp),i=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(i>this.n);var e=i<this.n?-1:r.ucmp(this.p);return 0===e?(r.words[0]=0,r.length=1):e>0?r.isub(this.p):r.strip(),r},MPrime.prototype.split=function split(t,i){t.iushrn(this.n,0,i)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,i){for(var r=Math.min(t.length,9),e=0;e<r;e++)i.words[e]=t.words[e];if(i.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(i.words[i.length++]=4194303&n,e=10;e<t.length;e++){var h=0|t.words[e];t.words[e-10]=(4194303&h)<<4|n>>>22,n=h}n>>>=22,t.words[e-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,r=0;r<t.length;r++){var e=0|t.words[r];i+=977*e,t.words[r]=67108863&i,i=64*e+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var i=0,r=0;r<t.length;r++){var e=19*(0|t.words[r])+i,n=67108863&e;e>>>=26,t.words[r]=n,i=e}return 0!==i&&(t.words[t.length++]=i),t},BN._prime=function prime(t){if(o[t])return o[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return o[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,i){assert(0==(t.negative|i.negative),"red works only with positives"),assert(t.red&&t.red===i.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,i){this._verify2(t,i);var r=t.add(i);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},Red.prototype.iadd=function iadd(t,i){this._verify2(t,i);var r=t.iadd(i);return r.cmp(this.m)>=0&&r.isub(this.m),r},Red.prototype.sub=function sub(t,i){this._verify2(t,i);var r=t.sub(i);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},Red.prototype.isub=function isub(t,i){this._verify2(t,i);var r=t.isub(i);return r.cmpn(0)<0&&r.iadd(this.m),r},Red.prototype.shl=function shl(t,i){return this._verify1(t),this.imod(t.ushln(i))},Red.prototype.imul=function imul(t,i){return this._verify2(t,i),this.imod(t.imul(i))},Red.prototype.mul=function mul(t,i){return this._verify2(t,i),this.imod(t.mul(i))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(assert(i%2==1),3===i){var r=this.m.add(new BN(1)).iushrn(2);return this.pow(t,r)}for(var e=this.m.subn(1),n=0;!e.isZero()&&0===e.andln(1);)n++,e.iushrn(1);assert(!e.isZero());var h=new BN(1).toRed(this),s=h.redNeg(),o=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new BN(2*u*u).toRed(this);0!==this.pow(u,o).cmp(s);)u.redIAdd(s);for(var a=this.pow(u,e),l=this.pow(t,e.addn(1).iushrn(1)),m=this.pow(t,e),f=n;0!==m.cmp(h);){for(var d=m,p=0;0!==d.cmp(h);p++)d=d.redSqr();assert(p<f);var M=this.pow(a,new BN(1).iushln(f-p-1));l=l.redMul(M),a=M.redSqr(),m=m.redMul(a),f=p}return l},Red.prototype.invm=function invm(t){var i=t._invmp(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},Red.prototype.pow=function pow(t,i){if(i.isZero())return new BN(1).toRed(this);if(0===i.cmpn(1))return t.clone();var r=new Array(16);r[0]=new BN(1).toRed(this),r[1]=t;for(var e=2;e<r.length;e++)r[e]=this.mul(r[e-1],t);var n=r[0],h=0,s=0,o=i.bitLength()%26;for(0===o&&(o=26),e=i.length-1;e>=0;e--){for(var u=i.words[e],a=o-1;a>=0;a--){var l=u>>a&1;n!==r[0]&&(n=this.sqr(n)),0!==l||0!==h?(h<<=1,h|=l,(4===++s||0===e&&0===a)&&(n=this.mul(n,r[h]),s=0,h=0)):s=0}o=26}return n},Red.prototype.convertTo=function convertTo(t){var i=t.umod(this.m);return i===t?i.clone():i},Red.prototype.convertFrom=function convertFrom(t){var i=t.clone();return i.red=null,i},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},Mont.prototype.imul=function imul(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(i),e=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(e).iushrn(this.shift),h=n;return n.cmp(this.m)>=0?h=n.isub(this.m):n.cmpn(0)<0&&(h=n.iadd(this.m)),h._forceRed(this)},Mont.prototype.mul=function mul(t,i){if(t.isZero()||i.isZero())return new BN(0)._forceRed(this);var r=t.mul(i),e=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(e).iushrn(this.shift),h=n;return n.cmp(this.m)>=0?h=n.isub(this.m):n.cmpn(0)<0&&(h=n.iadd(this.m)),h._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}("undefined"==typeof module||module,this);

    },{"buffer":61}],46:[function(require,module,exports){
        require("../../js/transition.js"),require("../../js/alert.js"),require("../../js/button.js"),require("../../js/carousel.js"),require("../../js/collapse.js"),require("../../js/dropdown.js"),require("../../js/modal.js"),require("../../js/tooltip.js"),require("../../js/popover.js"),require("../../js/scrollspy.js"),require("../../js/tab.js"),require("../../js/affix.js");

    },{"../../js/affix.js":47,"../../js/alert.js":48,"../../js/button.js":49,"../../js/carousel.js":50,"../../js/collapse.js":51,"../../js/dropdown.js":52,"../../js/modal.js":53,"../../js/popover.js":54,"../../js/scrollspy.js":55,"../../js/tab.js":56,"../../js/tooltip.js":57,"../../js/transition.js":58}],47:[function(require,module,exports){
        !function(t){"use strict";var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function Plugin(e){return this.each(function(){var o=t(this),f=o.data("bs.affix"),n="object"==typeof e&&e;f||o.data("bs.affix",f=new i(this,n)),"string"==typeof e&&f[e]()})}i.VERSION="3.3.7",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,i,e,o){var f=this.$target.scrollTop(),n=this.$element.offset(),s=this.$target.height();if(null!=e&&"top"==this.affixed)return f<e&&"top";if("bottom"==this.affixed)return null!=e?!(f+this.unpin<=n.top)&&"bottom":!(f+s<=t-o)&&"bottom";var a=null==this.affixed,h=a?f:n.top;return null!=e&&f<=e?"top":null!=o&&h+(a?s:i)>=t-o&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,f=o.top,n=o.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof o&&(n=f=o),"function"==typeof f&&(f=o.top(this.$element)),"function"==typeof n&&(n=o.bottom(this.$element));var a=this.getState(s,e,f,n);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var h="affix"+(a?"-"+a:""),l=t.Event(h+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(h).trigger(h.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-e-n})}};var e=t.fn.affix;t.fn.affix=Plugin,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=e,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),e=i.data();e.offset=e.offset||{},null!=e.offsetBottom&&(e.offset.bottom=e.offsetBottom),null!=e.offsetTop&&(e.offset.top=e.offsetTop),Plugin.call(i,e)})})}(jQuery);

    },{}],48:[function(require,module,exports){
        !function(t){"use strict";var e='[data-dismiss="alert"]',r=function(r){t(r).on("click",e,this.close)};r.VERSION="3.3.7",r.TRANSITION_DURATION=150,r.prototype.close=function(e){var n=t(this),a=n.attr("data-target");a||(a=(a=n.attr("href"))&&a.replace(/.*(?=#[^\s]*$)/,""));var s=t("#"===a?[]:a);function removeElement(){s.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),s.length||(s=n.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",removeElement).emulateTransitionEnd(r.TRANSITION_DURATION):removeElement())};var n=t.fn.alert;t.fn.alert=function Plugin(e){return this.each(function(){var n=t(this),a=n.data("bs.alert");a||n.data("bs.alert",a=new r(this)),"string"==typeof e&&a[e].call(n)})},t.fn.alert.Constructor=r,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,r.prototype.close)}(jQuery);

    },{}],49:[function(require,module,exports){
        !function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.isLoading=!1};function Plugin(n){return this.each(function(){var i=t(this),s=i.data("bs.button"),o="object"==typeof n&&n;s||i.data("bs.button",s=new e(this,o)),"toggle"==n?s.toggle():n&&s.setState(n)})}e.VERSION="3.3.7",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var n="disabled",i=this.$element,s=i.is("input")?"val":"html",o=i.data();e+="Text",null==o.resetText&&i.data("resetText",i[s]()),setTimeout(t.proxy(function(){i[s](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=Plugin,t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var n=t(e.target).closest(".btn");Plugin.call(n,"toggle"),t(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery);

    },{}],50:[function(require,module,exports){
        !function(t){"use strict";var e=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};function Plugin(i){return this.each(function(){var s=t(this),n=s.data("bs.carousel"),a=t.extend({},e.DEFAULTS,s.data(),"object"==typeof i&&i),r="string"==typeof i?i:a.slide;n||s.data("bs.carousel",n=new e(this,a)),"number"==typeof i?n.to(i):r?n[r]():a.interval&&n.pause().cycle()})}e.VERSION="3.3.7",e.TRANSITION_DURATION=600,e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},e.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},e.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var s=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(s)},e.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(i,s){var n=this.$element.find(".item.active"),a=s||this.getItemForDirection(i,n),r=this.interval,o="next"==i?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var h=a[0],c=t.Event("slide.bs.carousel",{relatedTarget:h,direction:o});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(a)]);u&&u.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:h,direction:o});return t.support.transition&&this.$element.hasClass("slide")?(a.addClass(i),a[0].offsetWidth,n.addClass(o),a.addClass(o),n.one("bsTransitionEnd",function(){a.removeClass([i,o].join(" ")).addClass("active"),n.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(e.TRANSITION_DURATION)):(n.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(d)),r&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=Plugin,t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var s=function(e){var i,s=t(this),n=t(s.attr("data-target")||(i=s.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var a=t.extend({},n.data(),s.data()),r=s.attr("data-slide-to");r&&(a.interval=!1),Plugin.call(n,a),r&&n.data("bs.carousel").to(r),e.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);Plugin.call(e,e.data())})})}(jQuery);

    },{}],51:[function(require,module,exports){
        !function(t){"use strict";var e=function(a,i){this.$element=t(a),this.options=t.extend({},e.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+a.id+'"],[data-toggle="collapse"][data-target="#'+a.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function getTargetFromTrigger(e){var a,i=e.attr("data-target")||(a=e.attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function Plugin(a){return this.each(function(){var i=t(this),s=i.data("bs.collapse"),n=t.extend({},e.DEFAULTS,i.data(),"object"==typeof a&&a);!s&&n.toggle&&/show|hide/.test(a)&&(n.toggle=!1),s||i.data("bs.collapse",s=new e(this,n)),"string"==typeof a&&s[a]()})}e.VERSION="3.3.7",e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var a,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(a=i.data("bs.collapse"))&&a.transitioning)){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){i&&i.length&&(Plugin.call(i,"hide"),a||i.data("bs.collapse",null));var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var l=function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return l.call(this);var o=t.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",t.proxy(l,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[n](this.$element[0][o])}}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var a=t.Event("hide.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return s.call(this);this.$element[i](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(e,a){var i=t(a);this.addAriaAndCollapsedClass(getTargetFromTrigger(i),i)},this)).end()},e.prototype.addAriaAndCollapsedClass=function(t,e){var a=t.hasClass("in");t.attr("aria-expanded",a),e.toggleClass("collapsed",!a).attr("aria-expanded",a)};var a=t.fn.collapse;t.fn.collapse=Plugin,t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=a,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var a=t(this);a.attr("data-target")||e.preventDefault();var i=getTargetFromTrigger(a),s=i.data("bs.collapse")?"toggle":a.data();Plugin.call(i,s)})}(jQuery);

    },{}],52:[function(require,module,exports){
        !function(t){"use strict";var e=".dropdown-backdrop",n='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};function getParent(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var o=n&&t(n);return o&&o.length?o:e.parent()}function clearMenus(o){o&&3===o.which||(t(e).remove(),t(n).each(function(){var e=t(this),n=getParent(e),r={relatedTarget:this};n.hasClass("open")&&(o&&"click"==o.type&&/input|textarea/i.test(o.target.tagName)&&t.contains(n[0],o.target)||(n.trigger(o=t.Event("hide.bs.dropdown",r)),o.isDefaultPrevented()||(e.attr("aria-expanded","false"),n.removeClass("open").trigger(t.Event("hidden.bs.dropdown",r)))))}))}o.VERSION="3.3.7",o.prototype.toggle=function(e){var n=t(this);if(!n.is(".disabled, :disabled")){var o=getParent(n),r=o.hasClass("open");if(clearMenus(),!r){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",clearMenus);var a={relatedTarget:this};if(o.trigger(e=t.Event("show.bs.dropdown",a)),e.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},o.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var o=t(this);if(e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled")){var r=getParent(o),a=r.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&r.find(n).trigger("focus"),o.trigger("click");var d=r.find(".dropdown-menu li:not(.disabled):visible a");if(d.length){var i=d.index(e.target);38==e.which&&i>0&&i--,40==e.which&&i<d.length-1&&i++,~i||(i=0),d.eq(i).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=function Plugin(e){return this.each(function(){var n=t(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof e&&r[e].call(n)})},t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,o.prototype.toggle).on("keydown.bs.dropdown.data-api",n,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery);

    },{}],53:[function(require,module,exports){
        !function(t){"use strict";var e=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function Plugin(i,o){return this.each(function(){var s=t(this),n=s.data("bs.modal"),a=t.extend({},e.DEFAULTS,s.data(),"object"==typeof i&&i);n||s.data("bs.modal",n=new e(this,a)),"string"==typeof i?n[i](o):a.show&&n.show(o)})}e.VERSION="3.3.7",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(i){var o=this,s=t.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var s=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),s&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var n=t.Event("shown.bs.modal",{relatedTarget:i});s?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(n)}).emulateTransitionEnd(e.TRANSITION_DURATION):o.$element.trigger("focus").trigger(n)}))},e.prototype.hide=function(i){i&&i.preventDefault(),i=t.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(i){var o=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&s;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+s).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;n?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),i&&i()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):a()}else i&&i()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=Plugin,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),o=i.attr("href"),s=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),n=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),i.data());i.is("a")&&e.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),Plugin.call(s,n,this)})}(jQuery);

    },{}],54:[function(require,module,exports){
        !function(t){"use strict";var o=function(t,o){this.init("popover",t,o)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");o.VERSION="3.3.7",o.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),o.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),o.prototype.constructor=o,o.prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.setContent=function(){var t=this.tip(),o=this.getTitle(),e=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](o),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof e?"html":"append":"text"](e),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},o.prototype.hasContent=function(){return this.getTitle()||this.getContent()},o.prototype.getContent=function(){var t=this.$element,o=this.options;return t.attr("data-content")||("function"==typeof o.content?o.content.call(t[0]):o.content)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var e=t.fn.popover;t.fn.popover=function Plugin(e){return this.each(function(){var n=t(this),r=n.data("bs.popover"),i="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||n.data("bs.popover",r=new o(this,i)),"string"==typeof e&&r[e]())})},t.fn.popover.Constructor=o,t.fn.popover.noConflict=function(){return t.fn.popover=e,this}}(jQuery);

    },{}],55:[function(require,module,exports){
        !function(t){"use strict";function ScrollSpy(s,o){this.$body=t(document.body),this.$scrollElement=t(s).is(document.body)?t(window):t(s),this.options=t.extend({},ScrollSpy.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function Plugin(s){return this.each(function(){var o=t(this),e=o.data("bs.scrollspy"),l="object"==typeof s&&s;e||o.data("bs.scrollspy",e=new ScrollSpy(this,l)),"string"==typeof s&&e[s]()})}ScrollSpy.VERSION="3.3.7",ScrollSpy.DEFAULTS={offset:10},ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},ScrollSpy.prototype.refresh=function(){var s=this,o="offset",e=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(o="position",e=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var s=t(this),l=s.data("target")||s.attr("href"),i=/^#./.test(l)&&t(l);return i&&i.length&&i.is(":visible")&&[[i[o]().top+e,l]]||null}).sort(function(t,s){return t[0]-s[0]}).each(function(){s.offsets.push(this[0]),s.targets.push(this[1])})},ScrollSpy.prototype.process=function(){var t,s=this.$scrollElement.scrollTop()+this.options.offset,o=this.getScrollHeight(),e=this.options.offset+o-this.$scrollElement.height(),l=this.offsets,i=this.targets,r=this.activeTarget;if(this.scrollHeight!=o&&this.refresh(),s>=e)return r!=(t=i[i.length-1])&&this.activate(t);if(r&&s<l[0])return this.activeTarget=null,this.clear();for(t=l.length;t--;)r!=i[t]&&s>=l[t]&&(void 0===l[t+1]||s<l[t+1])&&this.activate(i[t])},ScrollSpy.prototype.activate=function(s){this.activeTarget=s,this.clear();var o=this.selector+'[data-target="'+s+'"],'+this.selector+'[href="'+s+'"]',e=t(o).parents("li").addClass("active");e.parent(".dropdown-menu").length&&(e=e.closest("li.dropdown").addClass("active")),e.trigger("activate.bs.scrollspy")},ScrollSpy.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var s=t.fn.scrollspy;t.fn.scrollspy=Plugin,t.fn.scrollspy.Constructor=ScrollSpy,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=s,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var s=t(this);Plugin.call(s,s.data())})})}(jQuery);

    },{}],56:[function(require,module,exports){
        !function(t){"use strict";var a=function(a){this.element=t(a)};function Plugin(e){return this.each(function(){var n=t(this),i=n.data("bs.tab");i||n.data("bs.tab",i=new a(this)),"string"==typeof e&&i[e]()})}a.VERSION="3.3.7",a.TRANSITION_DURATION=150,a.prototype.show=function(){var a=this.element,e=a.closest("ul:not(.dropdown-menu)"),n=a.data("target");if(n||(n=(n=a.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!a.parent("li").hasClass("active")){var i=e.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:a[0]}),s=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(r),a.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var d=t(n);this.activate(a.closest("li"),e),this.activate(d,d.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:a[0]}),a.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},a.prototype.activate=function(e,n,i){var r=n.find("> .active"),s=i&&t.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);function next(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}r.length&&s?r.one("bsTransitionEnd",next).emulateTransitionEnd(a.TRANSITION_DURATION):next(),r.removeClass("in")};var e=t.fn.tab;t.fn.tab=Plugin,t.fn.tab.Constructor=a,t.fn.tab.noConflict=function(){return t.fn.tab=e,this};var n=function(a){a.preventDefault(),Plugin.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery);

    },{}],57:[function(require,module,exports){
        !function(t){"use strict";var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,i,o){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),s=n.length;s--;){var r=n[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var l="hover"==r?"mouseenter":"focusin",a="hover"==r?"mouseleave":"focusout";this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState)i.hoverState="in";else{if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)}},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)}},e.prototype.show=function(){var i=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!o)return;var n=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var l="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,p=a.test(l);p&&(l=l.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(l).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),f=s[0].offsetWidth,c=s[0].offsetHeight;if(p){var u=l,d=this.getPosition(this.$viewport);l="bottom"==l&&h.bottom+c>d.bottom?"top":"top"==l&&h.top-c<d.top?"bottom":"right"==l&&h.right+f>d.width?"left":"left"==l&&h.left-f<d.left?"right":l,s.removeClass(u).addClass(l)}var g=this.getCalculatedOffset(l,h,f,c);this.applyPlacement(g,l);var m=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(e.TRANSITION_DURATION):m()}},e.prototype.applyPlacement=function(e,i){var o=this.tip(),n=o[0].offsetWidth,s=o[0].offsetHeight,r=parseInt(o.css("margin-top"),10),l=parseInt(o.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(l)&&(l=0),e.top+=r,e.left+=l,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var a=o[0].offsetWidth,p=o[0].offsetHeight;"top"==i&&p!=s&&(e.top=e.top+s-p);var h=this.getViewportAdjustedDelta(i,e,a,p);h.left?e.left+=h.left:e.top+=h.top;var f=/top|bottom/.test(i),c=f?2*h.left-n+a:2*h.top-s+p,u=f?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][u],f)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(i){var o=this,n=t(this.$tip),s=t.Event("hide.bs."+this.type);function complete(){"in"!=o.hoverState&&n.detach(),o.$element&&o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),i&&i()}if(this.$element.trigger(s),!s.isDefaultPrevented())return n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",complete).emulateTransitionEnd(e.TRANSITION_DURATION):complete(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],o="BODY"==i.tagName,n=i.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=window.SVGElement&&i instanceof window.SVGElement,r=o?{top:0,left:0}:s?null:e.offset(),l={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,l,a,r)},e.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var l=e.top-s-r.scroll,a=e.top+s-r.scroll+o;l<r.top?n.top=r.top-l:a>r.top+r.height&&(n.top=r.top+r.height-a)}else{var p=e.left-s,h=e.left+s+i;p<r.left?n.left=r.left-p:h>r.right&&(n.left=r.left+r.width-h)}return n},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=function Plugin(i){return this.each(function(){var o=t(this),n=o.data("bs.tooltip"),s="object"==typeof i&&i;!n&&/destroy|hide/.test(i)||(n||o.data("bs.tooltip",n=new e(this,s)),"string"==typeof i&&n[i]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery);

    },{}],58:[function(require,module,exports){
        !function(n){"use strict";n.fn.emulateTransitionEnd=function(t){var i=!1,r=this;n(this).one("bsTransitionEnd",function(){i=!0});return setTimeout(function(){i||n(r).trigger(n.support.transition.end)},t),this},n(function(){n.support.transition=function transitionEnd(){var n=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==n.style[i])return{end:t[i]};return!1}(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);

    },{}],59:[function(require,module,exports){
        var r;function Rand(r){this.rand=r}if(module.exports=function rand(t){return r||(r=new Rand(null)),r.generate(t)},module.exports.Rand=Rand,Rand.prototype.generate=function generate(r){return this._rand(r)},Rand.prototype._rand=function _rand(r){if(this.rand.getBytes)return this.rand.getBytes(r);for(var t=new Uint8Array(r),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function _rand(r){var t=new Uint8Array(r);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function _rand(r){var t=new Uint8Array(r);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto=require("crypto");if("function"!=typeof crypto.randomBytes)throw new Error("Not supported");Rand.prototype._rand=function _rand(r){return crypto.randomBytes(r)}}catch(r){}

    },{"crypto":61}],60:[function(require,module,exports){
        "use strict";function getOS(e){return-1!==e.indexOf("Windows Phone")?"Windows Phone":-1!==e.indexOf("Win")?"Windows":-1!==e.indexOf("Android")?"Android":-1!==e.indexOf("Linux")?"Linux":-1!==e.indexOf("X11")?"UNIX":/iPad|iPhone|iPod/.test(e)?"iOS":-1!==e.indexOf("Mac")?"OS X":void 0}function info(e){var i,n=e||navigator.userAgent,o=getOS(n),r=n.match(/(opera|coast|chrome|safari|firefox|edge|trident(?=\/))\/?\s*?(\S+)/i)||[];if(null!==(i=n.match(/\bIEMobile\/(\S+[0-9])/)))return{name:"IEMobile",version:i[1].split(".")[0],fullVersion:i[1],os:o};if(/trident/i.test(r[1]))return{name:"IE",version:(i=/\brv[ :]+(\S+[0-9])/g.exec(n)||[])[1]&&i[1].split(".")[0],fullVersion:i[1],os:o};if("Chrome"===r[1]){if(null!==(i=n.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:i[1].split(".")[0],fullVersion:i[1],os:o};if(null!==(i=n.match(/\bEdge\/(\S+)/)))return{name:"Edge",version:i[1].split(".")[0],fullVersion:i[1],os:o}}("Coast"===(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"])[0]&&(r[0]="OperaCoast"),"Chrome"!==r[0])&&(null!==(i=n.match(/version\/(\S+)/i))&&""!==i&&r.splice(1,1,i[1]));return"Firefox"===r[0]&&(r[0]=/waterfox/i.test(n)?"Waterfox":r[0]),{name:r[0],version:r[1].split(".")[0],fullVersion:r[1],os:o}}module.exports=info;

    },{}],61:[function(require,module,exports){

    },{}],62:[function(require,module,exports){
        var Buffer=require("safe-buffer").Buffer;function asUInt32Array(r){Buffer.isBuffer(r)||(r=Buffer.from(r));for(var e=r.length/4|0,t=new Array(e),n=0;n<e;n++)t[n]=r.readUInt32BE(4*n);return t}function scrubVec(r){for(;0<r.length;r++)r[0]=0}function cryptBlock(r,e,t,n,o){for(var S,B,c,i,u=t[0],f=t[1],a=t[2],s=t[3],y=r[0]^e[0],_=r[1]^e[1],I=r[2]^e[2],l=r[3]^e[3],X=4,h=1;h<o;h++)S=u[y>>>24]^f[_>>>16&255]^a[I>>>8&255]^s[255&l]^e[X++],B=u[_>>>24]^f[I>>>16&255]^a[l>>>8&255]^s[255&y]^e[X++],c=u[I>>>24]^f[l>>>16&255]^a[y>>>8&255]^s[255&_]^e[X++],i=u[l>>>24]^f[y>>>16&255]^a[_>>>8&255]^s[255&I]^e[X++],y=S,_=B,I=c,l=i;return S=(n[y>>>24]<<24|n[_>>>16&255]<<16|n[I>>>8&255]<<8|n[255&l])^e[X++],B=(n[_>>>24]<<24|n[I>>>16&255]<<16|n[l>>>8&255]<<8|n[255&y])^e[X++],c=(n[I>>>24]<<24|n[l>>>16&255]<<16|n[y>>>8&255]<<8|n[255&_])^e[X++],i=(n[l>>>24]<<24|n[y>>>16&255]<<16|n[_>>>8&255]<<8|n[255&I])^e[X++],[S>>>=0,B>>>=0,c>>>=0,i>>>=0]}var RCON=[0,1,2,4,8,16,32,64,128,27,54],G=function(){for(var r=new Array(256),e=0;e<256;e++)r[e]=e<128?e<<1:e<<1^283;for(var t=[],n=[],o=[[],[],[],[]],S=[[],[],[],[]],B=0,c=0,i=0;i<256;++i){var u=c^c<<1^c<<2^c<<3^c<<4;u=u>>>8^255&u^99,t[B]=u,n[u]=B;var f=r[B],a=r[f],s=r[a],y=257*r[u]^16843008*u;o[0][B]=y<<24|y>>>8,o[1][B]=y<<16|y>>>16,o[2][B]=y<<8|y>>>24,o[3][B]=y,y=16843009*s^65537*a^257*f^16843008*B,S[0][u]=y<<24|y>>>8,S[1][u]=y<<16|y>>>16,S[2][u]=y<<8|y>>>24,S[3][u]=y,0===B?B=c=1:(B=f^r[r[r[s^f]]],c^=r[r[c]])}return{SBOX:t,INV_SBOX:n,SUB_MIX:o,INV_SUB_MIX:S}}();function AES(r){this._key=asUInt32Array(r),this._reset()}AES.blockSize=16,AES.keySize=32,AES.prototype.blockSize=AES.blockSize,AES.prototype.keySize=AES.keySize,AES.prototype._reset=function(){for(var r=this._key,e=r.length,t=e+6,n=4*(t+1),o=[],S=0;S<e;S++)o[S]=r[S];for(S=e;S<n;S++){var B=o[S-1];S%e==0?(B=B<<8|B>>>24,B=G.SBOX[B>>>24]<<24|G.SBOX[B>>>16&255]<<16|G.SBOX[B>>>8&255]<<8|G.SBOX[255&B],B^=RCON[S/e|0]<<24):e>6&&S%e==4&&(B=G.SBOX[B>>>24]<<24|G.SBOX[B>>>16&255]<<16|G.SBOX[B>>>8&255]<<8|G.SBOX[255&B]),o[S]=o[S-e]^B}for(var c=[],i=0;i<n;i++){var u=n-i,f=o[u-(i%4?0:4)];c[i]=i<4||u<=4?f:G.INV_SUB_MIX[0][G.SBOX[f>>>24]]^G.INV_SUB_MIX[1][G.SBOX[f>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[f>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[255&f]]}this._nRounds=t,this._keySchedule=o,this._invKeySchedule=c},AES.prototype.encryptBlockRaw=function(r){return cryptBlock(r=asUInt32Array(r),this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds)},AES.prototype.encryptBlock=function(r){var e=this.encryptBlockRaw(r),t=Buffer.allocUnsafe(16);return t.writeUInt32BE(e[0],0),t.writeUInt32BE(e[1],4),t.writeUInt32BE(e[2],8),t.writeUInt32BE(e[3],12),t},AES.prototype.decryptBlock=function(r){var e=(r=asUInt32Array(r))[1];r[1]=r[3],r[3]=e;var t=cryptBlock(r,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds),n=Buffer.allocUnsafe(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[3],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[1],12),n},AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)},module.exports.AES=AES;

    },{"safe-buffer":237}],63:[function(require,module,exports){
        var aes=require("./aes"),Buffer=require("safe-buffer").Buffer,Transform=require("cipher-base"),inherits=require("inherits"),GHASH=require("./ghash"),xor=require("buffer-xor"),incr32=require("./incr32");function xorTest(t,e){var r=0;t.length!==e.length&&r++;for(var a=Math.min(t.length,e.length),h=0;h<a;++h)r+=t[h]^e[h];return r}function calcIv(t,e,r){if(12===e.length)return t._finID=Buffer.concat([e,Buffer.from([0,0,0,1])]),Buffer.concat([e,Buffer.from([0,0,0,2])]);var a=new GHASH(r),h=e.length,i=h%16;a.update(e),i&&(i=16-i,a.update(Buffer.alloc(i,0))),a.update(Buffer.alloc(8,0));var s=8*h,n=Buffer.alloc(8);n.writeUIntBE(s,0,8),a.update(n),t._finID=a.state;var u=Buffer.from(t._finID);return incr32(u),u}function StreamCipher(t,e,r,a){Transform.call(this);var h=Buffer.alloc(4,0);this._cipher=new aes.AES(e);var i=this._cipher.encryptBlock(h);this._ghash=new GHASH(i),r=calcIv(this,r,i),this._prev=Buffer.from(r),this._cache=Buffer.allocUnsafe(0),this._secCache=Buffer.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}inherits(StreamCipher,Transform),StreamCipher.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=Buffer.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},StreamCipher.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=xor(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&xorTest(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},StreamCipher.prototype.getAuthTag=function getAuthTag(){if(this._decrypt||!Buffer.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},StreamCipher.prototype.setAuthTag=function setAuthTag(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},StreamCipher.prototype.setAAD=function setAAD(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},module.exports=StreamCipher;

    },{"./aes":62,"./ghash":67,"./incr32":68,"buffer-xor":90,"cipher-base":92,"inherits":159,"safe-buffer":237}],64:[function(require,module,exports){
        var ciphers=require("./encrypter"),deciphers=require("./decrypter"),modes=require("./modes/list.json");function getCiphers(){return Object.keys(modes)}exports.createCipher=exports.Cipher=ciphers.createCipher,exports.createCipheriv=exports.Cipheriv=ciphers.createCipheriv,exports.createDecipher=exports.Decipher=deciphers.createDecipher,exports.createDecipheriv=exports.Decipheriv=deciphers.createDecipheriv,exports.listCiphers=exports.getCiphers=getCiphers;

    },{"./decrypter":65,"./encrypter":66,"./modes/list.json":76}],65:[function(require,module,exports){
        var AuthCipher=require("./authCipher"),Buffer=require("safe-buffer").Buffer,MODES=require("./modes"),StreamCipher=require("./streamCipher"),Transform=require("cipher-base"),aes=require("./aes"),ebtk=require("evp_bytestokey"),inherits=require("inherits");function Decipher(e,t,r){Transform.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new aes.AES(t),this._prev=Buffer.from(r),this._mode=e,this._autopadding=!0}function Splitter(){this.cache=Buffer.allocUnsafe(0)}function unpad(e){for(var t=e[15],r=-1;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}function createDecipheriv(e,t,r){var i=MODES[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=Buffer.from(r)),"GCM"!==i.mode&&r.length!==i.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof t&&(t=Buffer.from(t)),t.length!==i.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===i.type?new StreamCipher(i.module,t,r,!0):"auth"===i.type?new AuthCipher(i.module,t,r,!0):new Decipher(i.module,t,r)}function createDecipher(e,t){var r=MODES[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=ebtk(t,!1,r.key,r.iv);return createDecipheriv(e,i.key,i.iv)}inherits(Decipher,Transform),Decipher.prototype._update=function(e){var t,r;this._cache.add(e);for(var i=[];t=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,t),i.push(r);return Buffer.concat(i)},Decipher.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return unpad(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},Decipher.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},Splitter.prototype.add=function(e){this.cache=Buffer.concat([this.cache,e])},Splitter.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},Splitter.prototype.flush=function(){if(this.cache.length)return this.cache},exports.createDecipher=createDecipher,exports.createDecipheriv=createDecipheriv;

    },{"./aes":62,"./authCipher":63,"./modes":75,"./streamCipher":78,"cipher-base":92,"evp_bytestokey":138,"inherits":159,"safe-buffer":237}],66:[function(require,module,exports){
        var MODES=require("./modes"),AuthCipher=require("./authCipher"),Buffer=require("safe-buffer").Buffer,StreamCipher=require("./streamCipher"),Transform=require("cipher-base"),aes=require("./aes"),ebtk=require("evp_bytestokey"),inherits=require("inherits");function Cipher(e,r,t){Transform.call(this),this._cache=new Splitter,this._cipher=new aes.AES(r),this._prev=Buffer.from(t),this._mode=e,this._autopadding=!0}inherits(Cipher,Transform),Cipher.prototype._update=function(e){var r,t;this._cache.add(e);for(var i=[];r=this._cache.get();)t=this._mode.encrypt(this,r),i.push(t);return Buffer.concat(i)};var PADDING=Buffer.alloc(16,16);function Splitter(){this.cache=Buffer.allocUnsafe(0)}function createCipheriv(e,r,t){var i=MODES[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=Buffer.from(r)),r.length!==i.key/8)throw new TypeError("invalid key length "+r.length);if("string"==typeof t&&(t=Buffer.from(t)),"GCM"!==i.mode&&t.length!==i.iv)throw new TypeError("invalid iv length "+t.length);return"stream"===i.type?new StreamCipher(i.module,r,t):"auth"===i.type?new AuthCipher(i.module,r,t):new Cipher(i.module,r,t)}function createCipher(e,r){var t=MODES[e.toLowerCase()];if(!t)throw new TypeError("invalid suite type");var i=ebtk(r,!1,t.key,t.iv);return createCipheriv(e,i.key,i.iv)}Cipher.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(PADDING))throw this._cipher.scrub(),new Error("data not multiple of block length")},Cipher.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},Splitter.prototype.add=function(e){this.cache=Buffer.concat([this.cache,e])},Splitter.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},Splitter.prototype.flush=function(){for(var e=16-this.cache.length,r=Buffer.allocUnsafe(e),t=-1;++t<e;)r.writeUInt8(e,t);return Buffer.concat([this.cache,r])},exports.createCipheriv=createCipheriv,exports.createCipher=createCipher;

    },{"./aes":62,"./authCipher":63,"./modes":75,"./streamCipher":78,"cipher-base":92,"evp_bytestokey":138,"inherits":159,"safe-buffer":237}],67:[function(require,module,exports){
        var Buffer=require("safe-buffer").Buffer,ZEROES=Buffer.alloc(16,0);function toArray(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function fromArray(t){var r=Buffer.allocUnsafe(16);return r.writeUInt32BE(t[0]>>>0,0),r.writeUInt32BE(t[1]>>>0,4),r.writeUInt32BE(t[2]>>>0,8),r.writeUInt32BE(t[3]>>>0,12),r}function GHASH(t){this.h=t,this.state=Buffer.alloc(16,0),this.cache=Buffer.allocUnsafe(0)}GHASH.prototype.ghash=function(t){for(var r=-1;++r<t.length;)this.state[r]^=t[r];this._multiply()},GHASH.prototype._multiply=function(){for(var t,r,e=toArray(this.h),a=[0,0,0,0],h=-1;++h<128;){for(0!=(this.state[~~(h/8)]&1<<7-h%8)&&(a[0]^=e[0],a[1]^=e[1],a[2]^=e[2],a[3]^=e[3]),r=0!=(1&e[3]),t=3;t>0;t--)e[t]=e[t]>>>1|(1&e[t-1])<<31;e[0]=e[0]>>>1,r&&(e[0]=e[0]^225<<24)}this.state=fromArray(a)},GHASH.prototype.update=function(t){var r;for(this.cache=Buffer.concat([this.cache,t]);this.cache.length>=16;)r=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(r)},GHASH.prototype.final=function(t,r){return this.cache.length&&this.ghash(Buffer.concat([this.cache,ZEROES],16)),this.ghash(fromArray([0,t,0,r])),this.state},module.exports=GHASH;

    },{"safe-buffer":237}],68:[function(require,module,exports){
        function incr32(r){for(var n,t=r.length;t--;){if(255!==(n=r.readUInt8(t))){n++,r.writeUInt8(n,t);break}r.writeUInt8(0,t)}}module.exports=incr32;

    },{}],69:[function(require,module,exports){
        var xor=require("buffer-xor");exports.encrypt=function(r,e){var p=xor(e,r._prev);return r._prev=r._cipher.encryptBlock(p),r._prev},exports.decrypt=function(r,e){var p=r._prev;r._prev=e;var c=r._cipher.decryptBlock(e);return xor(c,p)};

    },{"buffer-xor":90}],70:[function(require,module,exports){
        var Buffer=require("safe-buffer").Buffer,xor=require("buffer-xor");function encryptStart(e,r,c){var f=r.length,t=xor(r,e._cache);return e._cache=e._cache.slice(f),e._prev=Buffer.concat([e._prev,c?r:t]),t}exports.encrypt=function(e,r,c){for(var f,t=Buffer.allocUnsafe(0);r.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=Buffer.allocUnsafe(0)),!(e._cache.length<=r.length)){t=Buffer.concat([t,encryptStart(e,r,c)]);break}f=e._cache.length,t=Buffer.concat([t,encryptStart(e,r.slice(0,f),c)]),r=r.slice(f)}return t};

    },{"buffer-xor":90,"safe-buffer":237}],71:[function(require,module,exports){
        var Buffer=require("safe-buffer").Buffer;function encryptByte(r,e,f){for(var n,t,u=-1,c=0;++u<8;)n=e&1<<7-u?128:0,c+=(128&(t=r._cipher.encryptBlock(r._prev)[0]^n))>>u%8,r._prev=shiftIn(r._prev,f?n:t);return c}function shiftIn(r,e){var f=r.length,n=-1,t=Buffer.allocUnsafe(r.length);for(r=Buffer.concat([r,Buffer.from([e])]);++n<f;)t[n]=r[n]<<1|r[n+1]>>7;return t}exports.encrypt=function(r,e,f){for(var n=e.length,t=Buffer.allocUnsafe(n),u=-1;++u<n;)t[u]=encryptByte(r,e[u],f);return t};

    },{"safe-buffer":237}],72:[function(require,module,exports){
        var Buffer=require("safe-buffer").Buffer;function encryptByte(r,e,f){var n=r._cipher.encryptBlock(r._prev)[0]^e;return r._prev=Buffer.concat([r._prev.slice(1),Buffer.from([f?e:n])]),n}exports.encrypt=function(r,e,f){for(var n=e.length,t=Buffer.allocUnsafe(n),c=-1;++c<n;)t[c]=encryptByte(r,e[c],f);return t};

    },{"safe-buffer":237}],73:[function(require,module,exports){
        var xor=require("buffer-xor"),Buffer=require("safe-buffer").Buffer,incr32=require("../incr32");function getBlock(e){var c=e._cipher.encryptBlockRaw(e._prev);return incr32(e._prev),c}var blockSize=16;exports.encrypt=function(e,c){var r=Math.ceil(c.length/blockSize),a=e._cache.length;e._cache=Buffer.concat([e._cache,Buffer.allocUnsafe(r*blockSize)]);for(var t=0;t<r;t++){var n=getBlock(e),i=a+t*blockSize;e._cache.writeUInt32BE(n[0],i+0),e._cache.writeUInt32BE(n[1],i+4),e._cache.writeUInt32BE(n[2],i+8),e._cache.writeUInt32BE(n[3],i+12)}var f=e._cache.slice(0,c.length);return e._cache=e._cache.slice(c.length),xor(c,f)};

    },{"../incr32":68,"buffer-xor":90,"safe-buffer":237}],74:[function(require,module,exports){
        exports.encrypt=function(r,c){return r._cipher.encryptBlock(c)},exports.decrypt=function(r,c){return r._cipher.decryptBlock(c)};

    },{}],75:[function(require,module,exports){
        var modeModules={ECB:require("./ecb"),CBC:require("./cbc"),CFB:require("./cfb"),CFB8:require("./cfb8"),CFB1:require("./cfb1"),OFB:require("./ofb"),CTR:require("./ctr"),GCM:require("./ctr")},modes=require("./list.json");for(var key in modes)modes[key].module=modeModules[modes[key].mode];module.exports=modes;

    },{"./cbc":69,"./cfb":70,"./cfb1":71,"./cfb8":72,"./ctr":73,"./ecb":74,"./list.json":76,"./ofb":77}],76:[function(require,module,exports){
        module.exports={
            "aes-128-ecb": {
                "cipher": "AES",
                "key": 128,
                "iv": 0,
                "mode": "ECB",
                "type": "block"
            },
            "aes-192-ecb": {
                "cipher": "AES",
                "key": 192,
                "iv": 0,
                "mode": "ECB",
                "type": "block"
            },
            "aes-256-ecb": {
                "cipher": "AES",
                "key": 256,
                "iv": 0,
                "mode": "ECB",
                "type": "block"
            },
            "aes-128-cbc": {
                "cipher": "AES",
                "key": 128,
                "iv": 16,
                "mode": "CBC",
                "type": "block"
            },
            "aes-192-cbc": {
                "cipher": "AES",
                "key": 192,
                "iv": 16,
                "mode": "CBC",
                "type": "block"
            },
            "aes-256-cbc": {
                "cipher": "AES",
                "key": 256,
                "iv": 16,
                "mode": "CBC",
                "type": "block"
            },
            "aes128": {
                "cipher": "AES",
                "key": 128,
                "iv": 16,
                "mode": "CBC",
                "type": "block"
            },
            "aes192": {
                "cipher": "AES",
                "key": 192,
                "iv": 16,
                "mode": "CBC",
                "type": "block"
            },
            "aes256": {
                "cipher": "AES",
                "key": 256,
                "iv": 16,
                "mode": "CBC",
                "type": "block"
            },
            "aes-128-cfb": {
                "cipher": "AES",
                "key": 128,
                "iv": 16,
                "mode": "CFB",
                "type": "stream"
            },
            "aes-192-cfb": {
                "cipher": "AES",
                "key": 192,
                "iv": 16,
                "mode": "CFB",
                "type": "stream"
            },
            "aes-256-cfb": {
                "cipher": "AES",
                "key": 256,
                "iv": 16,
                "mode": "CFB",
                "type": "stream"
            },
            "aes-128-cfb8": {
                "cipher": "AES",
                "key": 128,
                "iv": 16,
                "mode": "CFB8",
                "type": "stream"
            },
            "aes-192-cfb8": {
                "cipher": "AES",
                "key": 192,
                "iv": 16,
                "mode": "CFB8",
                "type": "stream"
            },
            "aes-256-cfb8": {
                "cipher": "AES",
                "key": 256,
                "iv": 16,
                "mode": "CFB8",
                "type": "stream"
            },
            "aes-128-cfb1": {
                "cipher": "AES",
                "key": 128,
                "iv": 16,
                "mode": "CFB1",
                "type": "stream"
            },
            "aes-192-cfb1": {
                "cipher": "AES",
                "key": 192,
                "iv": 16,
                "mode": "CFB1",
                "type": "stream"
            },
            "aes-256-cfb1": {
                "cipher": "AES",
                "key": 256,
                "iv": 16,
                "mode": "CFB1",
                "type": "stream"
            },
            "aes-128-ofb": {
                "cipher": "AES",
                "key": 128,
                "iv": 16,
                "mode": "OFB",
                "type": "stream"
            },
            "aes-192-ofb": {
                "cipher": "AES",
                "key": 192,
                "iv": 16,
                "mode": "OFB",
                "type": "stream"
            },
            "aes-256-ofb": {
                "cipher": "AES",
                "key": 256,
                "iv": 16,
                "mode": "OFB",
                "type": "stream"
            },
            "aes-128-ctr": {
                "cipher": "AES",
                "key": 128,
                "iv": 16,
                "mode": "CTR",
                "type": "stream"
            },
            "aes-192-ctr": {
                "cipher": "AES",
                "key": 192,
                "iv": 16,
                "mode": "CTR",
                "type": "stream"
            },
            "aes-256-ctr": {
                "cipher": "AES",
                "key": 256,
                "iv": 16,
                "mode": "CTR",
                "type": "stream"
            },
            "aes-128-gcm": {
                "cipher": "AES",
                "key": 128,
                "iv": 12,
                "mode": "GCM",
                "type": "auth"
            },
            "aes-192-gcm": {
                "cipher": "AES",
                "key": 192,
                "iv": 12,
                "mode": "GCM",
                "type": "auth"
            },
            "aes-256-gcm": {
                "cipher": "AES",
                "key": 256,
                "iv": 12,
                "mode": "GCM",
                "type": "auth"
            }
        }

    },{}],77:[function(require,module,exports){
        (function (Buffer){
            var xor=require("buffer-xor");function getBlock(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}exports.encrypt=function(e,c){for(;e._cache.length<c.length;)e._cache=Buffer.concat([e._cache,getBlock(e)]);var r=e._cache.slice(0,c.length);return e._cache=e._cache.slice(c.length),xor(c,r)};

        }).call(this,require("buffer").Buffer)
    },{"buffer":91,"buffer-xor":90}],78:[function(require,module,exports){
        var aes=require("./aes"),Buffer=require("safe-buffer").Buffer,Transform=require("cipher-base"),inherits=require("inherits");function StreamCipher(e,r,i,t){Transform.call(this),this._cipher=new aes.AES(r),this._prev=Buffer.from(i),this._cache=Buffer.allocUnsafe(0),this._secCache=Buffer.allocUnsafe(0),this._decrypt=t,this._mode=e}inherits(StreamCipher,Transform),StreamCipher.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},StreamCipher.prototype._final=function(){this._cipher.scrub()},module.exports=StreamCipher;

    },{"./aes":62,"cipher-base":92,"inherits":159,"safe-buffer":237}],79:[function(require,module,exports){
        var ebtk=require("evp_bytestokey"),aes=require("browserify-aes/browser"),DES=require("browserify-des"),desModes=require("browserify-des/modes"),aesModes=require("browserify-aes/modes");function createCipher(e,r){var s,i;if(e=e.toLowerCase(),aesModes[e])s=aesModes[e].key,i=aesModes[e].iv;else{if(!desModes[e])throw new TypeError("invalid suite type");s=8*desModes[e].key,i=desModes[e].iv}var t=ebtk(r,!1,s,i);return createCipheriv(e,t.key,t.iv)}function createDecipher(e,r){var s,i;if(e=e.toLowerCase(),aesModes[e])s=aesModes[e].key,i=aesModes[e].iv;else{if(!desModes[e])throw new TypeError("invalid suite type");s=8*desModes[e].key,i=desModes[e].iv}var t=ebtk(r,!1,s,i);return createDecipheriv(e,t.key,t.iv)}function createCipheriv(e,r,s){if(e=e.toLowerCase(),aesModes[e])return aes.createCipheriv(e,r,s);if(desModes[e])return new DES({key:r,iv:s,mode:e});throw new TypeError("invalid suite type")}function createDecipheriv(e,r,s){if(e=e.toLowerCase(),aesModes[e])return aes.createDecipheriv(e,r,s);if(desModes[e])return new DES({key:r,iv:s,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers())}exports.createCipher=exports.Cipher=createCipher,exports.createCipheriv=exports.Cipheriv=createCipheriv,exports.createDecipher=exports.Decipher=createDecipher,exports.createDecipheriv=exports.Decipheriv=createDecipheriv,exports.listCiphers=exports.getCiphers=getCiphers;

    },{"browserify-aes/browser":64,"browserify-aes/modes":75,"browserify-des":80,"browserify-des/modes":81,"evp_bytestokey":138}],80:[function(require,module,exports){
        (function (Buffer){
            var CipherBase=require("cipher-base"),des=require("des.js"),inherits=require("inherits"),modes={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};function DES(e){CipherBase.call(this);var s,d=e.mode.toLowerCase(),t=modes[d];s=e.decrypt?"decrypt":"encrypt";var r=e.key;"des-ede"!==d&&"des-ede-cbc"!==d||(r=Buffer.concat([r,r.slice(0,8)]));var i=e.iv;this._des=t.create({key:r,iv:i,type:s})}modes.des=modes["des-cbc"],modes.des3=modes["des-ede3-cbc"],module.exports=DES,inherits(DES,CipherBase),DES.prototype._update=function(e){return new Buffer(this._des.update(e))},DES.prototype._final=function(){return new Buffer(this._des.final())};

        }).call(this,require("buffer").Buffer)
    },{"buffer":91,"cipher-base":92,"des.js":108,"inherits":159}],81:[function(require,module,exports){
        exports["des-ecb"]={key:8,iv:0},exports["des-cbc"]=exports.des={key:8,iv:8},exports["des-ede3-cbc"]=exports.des3={key:24,iv:8},exports["des-ede3"]={key:24,iv:0},exports["des-ede-cbc"]={key:16,iv:8},exports["des-ede"]={key:16,iv:0};

    },{}],82:[function(require,module,exports){
        (function (Buffer){
            var bn=require("bn.js"),randomBytes=require("randombytes");function blind(e){var n=getr(e);return{blinder:n.toRed(bn.mont(e.modulus)).redPow(new bn(e.publicExponent)).fromRed(),unblinder:n.invm(e.modulus)}}function crt(e,n){var r=blind(n),o=n.modulus.byteLength(),u=(bn.mont(n.modulus),new bn(e).mul(r.blinder).umod(n.modulus)),m=u.toRed(bn.mont(n.prime1)),d=u.toRed(bn.mont(n.prime2)),t=n.coefficient,i=n.prime1,b=n.prime2,l=m.redPow(n.exponent1),s=d.redPow(n.exponent2);l=l.fromRed(),s=s.fromRed();var p=l.isub(s).imul(t).umod(i);return p.imul(b),s.iadd(p),new Buffer(s.imul(r.unblinder).umod(n.modulus).toArray(!1,o))}function getr(e){for(var n=e.modulus.byteLength(),r=new bn(randomBytes(n));r.cmp(e.modulus)>=0||!r.umod(e.prime1)||!r.umod(e.prime2);)r=new bn(randomBytes(n));return r}module.exports=crt,crt.getr=getr;

        }).call(this,require("buffer").Buffer)
    },{"bn.js":45,"buffer":91,"randombytes":198}],83:[function(require,module,exports){
        module.exports=require("./browser/algorithms.json");

    },{"./browser/algorithms.json":84}],84:[function(require,module,exports){
        module.exports={
            "sha224WithRSAEncryption": {
                "sign": "rsa",
                "hash": "sha224",
                "id": "302d300d06096086480165030402040500041c"
            },
            "RSA-SHA224": {
                "sign": "ecdsa/rsa",
                "hash": "sha224",
                "id": "302d300d06096086480165030402040500041c"
            },
            "sha256WithRSAEncryption": {
                "sign": "rsa",
                "hash": "sha256",
                "id": "3031300d060960864801650304020105000420"
            },
            "RSA-SHA256": {
                "sign": "ecdsa/rsa",
                "hash": "sha256",
                "id": "3031300d060960864801650304020105000420"
            },
            "sha384WithRSAEncryption": {
                "sign": "rsa",
                "hash": "sha384",
                "id": "3041300d060960864801650304020205000430"
            },
            "RSA-SHA384": {
                "sign": "ecdsa/rsa",
                "hash": "sha384",
                "id": "3041300d060960864801650304020205000430"
            },
            "sha512WithRSAEncryption": {
                "sign": "rsa",
                "hash": "sha512",
                "id": "3051300d060960864801650304020305000440"
            },
            "RSA-SHA512": {
                "sign": "ecdsa/rsa",
                "hash": "sha512",
                "id": "3051300d060960864801650304020305000440"
            },
            "RSA-SHA1": {
                "sign": "rsa",
                "hash": "sha1",
                "id": "3021300906052b0e03021a05000414"
            },
            "ecdsa-with-SHA1": {
                "sign": "ecdsa",
                "hash": "sha1",
                "id": ""
            },
            "sha256": {
                "sign": "ecdsa",
                "hash": "sha256",
                "id": ""
            },
            "sha224": {
                "sign": "ecdsa",
                "hash": "sha224",
                "id": ""
            },
            "sha384": {
                "sign": "ecdsa",
                "hash": "sha384",
                "id": ""
            },
            "sha512": {
                "sign": "ecdsa",
                "hash": "sha512",
                "id": ""
            },
            "DSA-SHA": {
                "sign": "dsa",
                "hash": "sha1",
                "id": ""
            },
            "DSA-SHA1": {
                "sign": "dsa",
                "hash": "sha1",
                "id": ""
            },
            "DSA": {
                "sign": "dsa",
                "hash": "sha1",
                "id": ""
            },
            "DSA-WITH-SHA224": {
                "sign": "dsa",
                "hash": "sha224",
                "id": ""
            },
            "DSA-SHA224": {
                "sign": "dsa",
                "hash": "sha224",
                "id": ""
            },
            "DSA-WITH-SHA256": {
                "sign": "dsa",
                "hash": "sha256",
                "id": ""
            },
            "DSA-SHA256": {
                "sign": "dsa",
                "hash": "sha256",
                "id": ""
            },
            "DSA-WITH-SHA384": {
                "sign": "dsa",
                "hash": "sha384",
                "id": ""
            },
            "DSA-SHA384": {
                "sign": "dsa",
                "hash": "sha384",
                "id": ""
            },
            "DSA-WITH-SHA512": {
                "sign": "dsa",
                "hash": "sha512",
                "id": ""
            },
            "DSA-SHA512": {
                "sign": "dsa",
                "hash": "sha512",
                "id": ""
            },
            "DSA-RIPEMD160": {
                "sign": "dsa",
                "hash": "rmd160",
                "id": ""
            },
            "ripemd160WithRSA": {
                "sign": "rsa",
                "hash": "rmd160",
                "id": "3021300906052b2403020105000414"
            },
            "RSA-RIPEMD160": {
                "sign": "rsa",
                "hash": "rmd160",
                "id": "3021300906052b2403020105000414"
            },
            "md5WithRSAEncryption": {
                "sign": "rsa",
                "hash": "md5",
                "id": "3020300c06082a864886f70d020505000410"
            },
            "RSA-MD5": {
                "sign": "rsa",
                "hash": "md5",
                "id": "3020300c06082a864886f70d020505000410"
            }
        }

    },{}],85:[function(require,module,exports){
        module.exports={
            "1.3.132.0.10": "secp256k1",
            "1.3.132.0.33": "p224",
            "1.2.840.10045.3.1.1": "p192",
            "1.2.840.10045.3.1.7": "p256",
            "1.3.132.0.34": "p384",
            "1.3.132.0.35": "p521"
        }

    },{}],86:[function(require,module,exports){
        (function (Buffer){
            var createHash=require("create-hash"),stream=require("stream"),inherits=require("inherits"),sign=require("./sign"),verify=require("./verify"),algorithms=require("./algorithms.json");function Sign(e){stream.Writable.call(this);var t=algorithms[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=createHash(t.hash),this._tag=t.id,this._signType=t.sign}function Verify(e){stream.Writable.call(this);var t=algorithms[e];if(!t)throw new Error("Unknown message digest");this._hash=createHash(t.hash),this._tag=t.id,this._signType=t.sign}function createSign(e){return new Sign(e)}function createVerify(e){return new Verify(e)}Object.keys(algorithms).forEach(function(e){algorithms[e].id=new Buffer(algorithms[e].id,"hex"),algorithms[e.toLowerCase()]=algorithms[e]}),inherits(Sign,stream.Writable),Sign.prototype._write=function _write(e,t,i){this._hash.update(e),i()},Sign.prototype.update=function update(e,t){return"string"==typeof e&&(e=new Buffer(e,t)),this._hash.update(e),this},Sign.prototype.sign=function signMethod(e,t){this.end();var i=this._hash.digest(),r=sign(i,e,this._hashType,this._signType,this._tag);return t?r.toString(t):r},inherits(Verify,stream.Writable),Verify.prototype._write=function _write(e,t,i){this._hash.update(e),i()},Verify.prototype.update=function update(e,t){return"string"==typeof e&&(e=new Buffer(e,t)),this._hash.update(e),this},Verify.prototype.verify=function verifyMethod(e,t,i){"string"==typeof t&&(t=new Buffer(t,i)),this.end();var r=this._hash.digest();return verify(t,r,e,this._signType,this._tag)},module.exports={Sign:createSign,Verify:createVerify,createSign:createSign,createVerify:createVerify};

        }).call(this,require("buffer").Buffer)
    },{"./algorithms.json":84,"./sign":87,"./verify":88,"buffer":91,"create-hash":97,"inherits":159,"stream":250}],87:[function(require,module,exports){
        (function (Buffer){
            var createHmac=require("create-hmac"),crt=require("browserify-rsa"),EC=require("elliptic").ec,BN=require("bn.js"),parseKeys=require("parse-asn1"),curves=require("./curves.json");function sign(e,r,t,n,a){var u=parseKeys(r);if(u.curve){if("ecdsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");return ecSign(e,u)}if("dsa"===u.type){if("dsa"!==n)throw new Error("wrong private key type");return dsaSign(e,u,t)}if("rsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");e=Buffer.concat([a,e]);for(var i=u.modulus.byteLength(),o=[0,1];e.length+o.length+1<i;)o.push(255);o.push(0);for(var c=-1;++c<e.length;)o.push(e[c]);return crt(o,u)}function ecSign(e,r){var t=curves[r.curve.join(".")];if(!t)throw new Error("unknown curve "+r.curve.join("."));var n=new EC(t).keyFromPrivate(r.privateKey).sign(e);return new Buffer(n.toDER())}function dsaSign(e,r,t){for(var n,a=r.params.priv_key,u=r.params.p,i=r.params.q,o=r.params.g,c=new BN(0),f=bits2int(e,i).mod(i),s=!1,g=getKey(a,i,e,t);!1===s;)c=makeR(o,n=makeKey(i,g,t),u,i),0===(s=n.invm(i).imul(f.add(a.mul(c))).mod(i)).cmpn(0)&&(s=!1,c=new BN(0));return toDER(c,s)}function toDER(e,r){e=e.toArray(),r=r.toArray(),128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r));var t=[48,e.length+r.length+4,2,e.length];return t=t.concat(e,[2,r.length],r),new Buffer(t)}function getKey(e,r,t,n){if((e=new Buffer(e.toArray())).length<r.byteLength()){var a=new Buffer(r.byteLength()-e.length);a.fill(0),e=Buffer.concat([a,e])}var u=t.length,i=bits2octets(t,r),o=new Buffer(u);o.fill(1);var c=new Buffer(u);return c.fill(0),c=createHmac(n,c).update(o).update(new Buffer([0])).update(e).update(i).digest(),o=createHmac(n,c).update(o).digest(),{k:c=createHmac(n,c).update(o).update(new Buffer([1])).update(e).update(i).digest(),v:o=createHmac(n,c).update(o).digest()}}function bits2int(e,r){var t=new BN(e),n=(e.length<<3)-r.bitLength();return n>0&&t.ishrn(n),t}function bits2octets(e,r){e=(e=bits2int(e,r)).mod(r);var t=new Buffer(e.toArray());if(t.length<r.byteLength()){var n=new Buffer(r.byteLength()-t.length);n.fill(0),t=Buffer.concat([n,t])}return t}function makeKey(e,r,t){var n,a;do{for(n=new Buffer(0);8*n.length<e.bitLength();)r.v=createHmac(t,r.k).update(r.v).digest(),n=Buffer.concat([n,r.v]);a=bits2int(n,e),r.k=createHmac(t,r.k).update(r.v).update(new Buffer([0])).digest(),r.v=createHmac(t,r.k).update(r.v).digest()}while(-1!==a.cmp(e));return a}function makeR(e,r,t,n){return e.toRed(BN.mont(t)).redPow(r).fromRed().mod(n)}module.exports=sign,module.exports.getKey=getKey,module.exports.makeKey=makeKey;

        }).call(this,require("buffer").Buffer)
    },{"./curves.json":85,"bn.js":45,"browserify-rsa":82,"buffer":91,"create-hmac":100,"elliptic":121,"parse-asn1":176}],88:[function(require,module,exports){
        (function (Buffer){
            var BN=require("bn.js"),EC=require("elliptic").ec,parseKeys=require("parse-asn1"),curves=require("./curves.json");function verify(e,r,n,a,t){var o=parseKeys(n);if("ec"===o.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong public key type");return ecVerify(e,r,o)}if("dsa"===o.type){if("dsa"!==a)throw new Error("wrong public key type");return dsaVerify(e,r,o)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong public key type");r=Buffer.concat([t,r]);for(var u=o.modulus.byteLength(),i=[1],d=0;r.length+i.length+2<u;)i.push(255),d++;i.push(0);for(var c=-1;++c<r.length;)i.push(r[c]);i=new Buffer(i);var s=BN.mont(o.modulus);e=(e=new BN(e).toRed(s)).redPow(new BN(o.publicExponent)),e=new Buffer(e.fromRed().toArray());var f=d<8?1:0;for(u=Math.min(e.length,i.length),e.length!==i.length&&(f=1),c=-1;++c<u;)f|=e[c]^i[c];return 0===f}function ecVerify(e,r,n){var a=curves[n.data.algorithm.curve.join(".")];if(!a)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var t=new EC(a),o=n.data.subjectPrivateKey.data;return t.verify(r,e,o)}function dsaVerify(e,r,n){var a=n.data.p,t=n.data.q,o=n.data.g,u=n.data.pub_key,i=parseKeys.signature.decode(e,"der"),d=i.s,c=i.r;checkValue(d,t),checkValue(c,t);var s=BN.mont(a),f=d.invm(t);return 0===o.toRed(s).redPow(new BN(r).mul(f).mod(t)).fromRed().mul(u.toRed(s).redPow(c.mul(f).mod(t)).fromRed()).mod(a).mod(t).cmp(c)}function checkValue(e,r){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(r)>=r)throw new Error("invalid sig")}module.exports=verify;

        }).call(this,require("buffer").Buffer)
    },{"./curves.json":85,"bn.js":45,"buffer":91,"elliptic":121,"parse-asn1":176}],89:[function(require,module,exports){
        "use strict";var Buffer=require("safe-buffer").Buffer,isEncoding=Buffer.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function normalizeEncoding(t){var e=_normalizeEncoding(t);if("string"!=typeof e&&(Buffer.isEncoding===isEncoding||!isEncoding(t)))throw new Error("Unknown encoding: "+t);return e||t}function StringDecoder(t){var e;switch(this.encoding=normalizeEncoding(t),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,e=4;break;case"utf8":this.fillLast=utf8FillLast,e=4;break;case"base64":this.text=base64Text,this.end=base64End,e=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(e)}function utf8CheckByte(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function utf8CheckIncomplete(t,e,s){var i=e.length-1;if(i<s)return 0;var n=utf8CheckByte(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<s||-2===n?0:(n=utf8CheckByte(e[i]))>=0?(n>0&&(t.lastNeed=n-2),n):--i<s||-2===n?0:(n=utf8CheckByte(e[i]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}function utf8CheckExtraBytes(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function utf8FillLast(t){var e=this.lastTotal-this.lastNeed,s=utf8CheckExtraBytes(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function utf8Text(t,e){var s=utf8CheckIncomplete(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function utf8End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function utf16Text(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function utf16End(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function base64Text(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function base64End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};

    },{"safe-buffer":237}],90:[function(require,module,exports){
        (function (Buffer){
            module.exports=function xor(e,n){for(var r=Math.min(e.length,n.length),t=new Buffer(r),o=0;o<r;++o)t[o]=e[o]^n[o];return t};

        }).call(this,require("buffer").Buffer)
    },{"buffer":91}],91:[function(require,module,exports){
        "use strict";var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}function createBuffer(e){if(e>K_MAX_LENGTH)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=Buffer.prototype,t}function Buffer(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(e)}return from(e,t,r)}function from(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return isArrayBuffer(e)?fromArrayBuffer(e,t,r):"string"==typeof e?fromString(e,t):fromObject(e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,r){return assertSize(e),e<=0?createBuffer(e):void 0!==t?"string"==typeof r?createBuffer(e).fill(t,r):createBuffer(e).fill(t):createBuffer(e)}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromString(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=0|byteLength(e,t),n=createBuffer(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function fromArrayLike(e){for(var t=e.length<0?0:0|checked(e.length),r=createBuffer(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function fromArrayBuffer(e,t,r){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");var n;return(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r)).__proto__=Buffer.prototype,n}function fromObject(e){if(Buffer.isBuffer(e)){var t=0|checked(e.length),r=createBuffer(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(e){if(isArrayBufferView(e)||"length"in e)return"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e);if("Buffer"===e.type&&Array.isArray(e.data))return fromArrayLike(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=K_MAX_LENGTH)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer.alloc(+e)}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if(isArrayBufferView(e)||isArrayBuffer(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(n)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),n=!0}}function slowToString(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),numberIsNaN(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,n)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,i){var f,o=1,u=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,r/=2}function read(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var a=-1;for(f=r;f<u;f++)if(read(e,f)===read(t,-1===a?0:f-a)){if(-1===a&&(a=f),f-a+1===s)return a*o}else-1!==a&&(f-=f-a),a=-1}else for(r+s>u&&(r=u-s),f=r;f>=0;f--){for(var h=!0,c=0;c<s;c++)if(read(e,f+c)!==read(t,c)){h=!1;break}if(h)return f}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var f=t.length;if(f%2!=0)throw new TypeError("Invalid hex string");n>f/2&&(n=f/2);for(var o=0;o<n;++o){var u=parseInt(t.substr(2*o,2),16);if(numberIsNaN(u))return o;e[r+o]=u}return o}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(asciiToBytes(t),e,r,n)}function latin1Write(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,n)}function base64Slice(e,t,r){return 0===t&&r===e.length?base64.fromByteArray(e):base64.fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var f,o,u,s,a=e[i],h=null,c=a>239?4:a>223?3:a>191?2:1;if(i+c<=r)switch(c){case 1:a<128&&(h=a);break;case 2:128==(192&(f=e[i+1]))&&(s=(31&a)<<6|63&f)>127&&(h=s);break;case 3:f=e[i+1],o=e[i+2],128==(192&f)&&128==(192&o)&&(s=(15&a)<<12|(63&f)<<6|63&o)>2047&&(s<55296||s>57343)&&(h=s);break;case 4:f=e[i+1],o=e[i+2],u=e[i+3],128==(192&f)&&128==(192&o)&&128==(192&u)&&(s=(15&a)<<18|(63&f)<<12|(63&o)<<6|63&u)>65535&&s<1114112&&(h=s)}null===h?(h=65533,c=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=c}return decodeCodePointsArray(n)}exports.kMaxLength=K_MAX_LENGTH,Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=function(e,t,r){return from(e,t,r)},Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function(e,t,r){return alloc(e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer.isBuffer=function isBuffer(e){return null!=e&&!0===e._isBuffer},Buffer.compare=function compare(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,f=Math.min(r,n);i<f;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Buffer.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var f=e[r];if(!Buffer.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(n,i),i+=f.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){var e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){var e="",t=exports.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function compare(e,t,r,n,i){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var f=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),u=Math.min(f,o),s=this.slice(n,i),a=e.slice(t,r),h=0;h<u;++h)if(s[h]!==a[h]){f=s[h],o=a[h];break}return f<o?-1:o<f?1:0},Buffer.prototype.includes=function includes(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function indexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function write(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var f=!1;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(f)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function latin1Slice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function hexSlice(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",f=t;f<r;++f)i+=toHex(e[f]);return i}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",f=0;f<n.length;f+=2)i+=String.fromCharCode(n[f]+256*n[f+1]);return i}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,i,f){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<f)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function checkIEEE754(e,t,r,n,i,f){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,i){return t=+t,r>>>=0,i||checkIEEE754(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,i){return t=+t,r>>>=0,i||checkIEEE754(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(e,t,r,n,52,8),r+8}Buffer.prototype.slice=function slice(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=Buffer.prototype,n},Buffer.prototype.readUIntLE=function readUIntLE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,f=0;++f<t&&(i*=256);)n+=this[e+f]*i;return n},Buffer.prototype.readUIntBE=function readUIntBE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},Buffer.prototype.readUInt8=function readUInt8(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,f=0;++f<t&&(i*=256);)n+=this[e+f]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readIntBE=function readIntBE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=t,i=1,f=this[e+--n];n>0&&(i*=256);)f+=this[e+--n]*i;return f>=(i*=128)&&(f-=Math.pow(2,8*t)),f},Buffer.prototype.readInt8=function readInt8(e,t){return e>>>=0,t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){e>>>=0,t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function readInt16BE(e,t){e>>>=0,t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),ieee754.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),ieee754.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return e>>>=0,t||checkOffset(e,8,this.length),ieee754.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return e>>>=0,t||checkOffset(e,8,this.length),ieee754.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,f=0;for(this[t]=255&e;++f<r&&(i*=256);)this[t+f]=e/i&255;return t+r},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,f=1;for(this[t+i]=255&e;--i>=0&&(f*=256);)this[t+i]=e/f&255;return t+r},Buffer.prototype.writeUInt8=function writeUInt8(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);checkInt(this,e,t,r,i-1,-i)}var f=0,o=1,u=0;for(this[t]=255&e;++f<r&&(o*=256);)e<0&&0===u&&0!==this[t+f-1]&&(u=1),this[t+f]=(e/o>>0)-u&255;return t+r},Buffer.prototype.writeIntBE=function writeIntBE(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);checkInt(this,e,t,r,i-1,-i)}var f=r-1,o=1,u=0;for(this[t+f]=255&e;--f>=0&&(o*=256);)e<0&&0===u&&0!==this[t+f+1]&&(u=1),this[t+f]=(e/o>>0)-u&255;return t+r},Buffer.prototype.writeInt8=function writeInt8(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function copy(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,f=n-r;if(this===e&&r<t&&t<n)for(i=f-1;i>=0;--i)e[i+t]=this[i+r];else if(f<1e3)for(i=0;i<f;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+f),t);return f},Buffer.prototype.fill=function fill(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var f;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(f=t;f<r;++f)this[f]=e;else{var o=Buffer.isBuffer(e)?e:new Buffer(e,n),u=o.length;for(f=0;f<r-t;++f)this[f+t]=o[f%u]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=e.trim().replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var r;t=t||1/0;for(var n=e.length,i=null,f=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&f.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&f.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&f.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&f.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;f.push(r)}else if(r<2048){if((t-=2)<0)break;f.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;f.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;f.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return f}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e,t){for(var r,n,i,f=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i=r%256,f.push(i),f.push(n);return f}function base64ToBytes(e){return base64.toByteArray(base64clean(e))}function blitBuffer(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function isArrayBuffer(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function isArrayBufferView(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function numberIsNaN(e){return e!=e}

    },{"base64-js":44,"ieee754":158}],92:[function(require,module,exports){
        var Buffer=require("safe-buffer").Buffer,Transform=require("stream").Transform,StringDecoder=require("string_decoder").StringDecoder,inherits=require("inherits");function CipherBase(t){Transform.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}inherits(CipherBase,Transform),CipherBase.prototype.update=function(t,e,r){"string"==typeof t&&(t=Buffer.from(t,e));var i=this._update(t);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},CipherBase.prototype.setAutoPadding=function(){},CipherBase.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},CipherBase.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},CipherBase.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},CipherBase.prototype._transform=function(t,e,r){var i;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){i=t}finally{r(i)}},CipherBase.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},CipherBase.prototype._finalOrDigest=function(t){var e=this.__final()||Buffer.alloc(0);return t&&(e=this._toString(e,t,!0)),e},CipherBase.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new StringDecoder(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var i=this._decoder.write(t);return r&&(i+=this._decoder.end()),i},module.exports=CipherBase;

    },{"inherits":159,"safe-buffer":237,"stream":250,"string_decoder":89}],93:[function(require,module,exports){
        !function(){"use strict";var e={}.hasOwnProperty;function classNames(){for(var s=[],a=0;a<arguments.length;a++){var n=arguments[a];if(n){var r=typeof n;if("string"===r||"number"===r)s.push(n);else if(Array.isArray(n)&&n.length){var l=classNames.apply(null,n);l&&s.push(l)}else if("object"===r)for(var t in n)e.call(n,t)&&n[t]&&s.push(t)}}return s.join(" ")}"undefined"!=typeof module&&module.exports?(classNames.default=classNames,module.exports=classNames):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return classNames}):window.classNames=classNames}();

    },{}],94:[function(require,module,exports){
        "use strict";function _toConsumableArray(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}module.exports=function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];return function(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];var a=n.concat(function(){for(var r=arguments.length,n=Array(r),e=0;e<r;e++)n[e]=arguments[e];return n.slice(0,t.length)});return function next(){for(var r=arguments.length,n=Array(r),e=0;e<r;e++)n[e]=arguments[e];return a.shift().apply(void 0,_toConsumableArray(n.length>0?n:t).concat([next]))}()}};

    },{}],95:[function(require,module,exports){
        (function (Buffer){
            function isArray(r){return Array.isArray?Array.isArray(r):"[object Array]"===objectToString(r)}function isBoolean(r){return"boolean"==typeof r}function isNull(r){return null===r}function isNullOrUndefined(r){return null==r}function isNumber(r){return"number"==typeof r}function isString(r){return"string"==typeof r}function isSymbol(r){return"symbol"==typeof r}function isUndefined(r){return void 0===r}function isRegExp(r){return"[object RegExp]"===objectToString(r)}function isObject(r){return"object"==typeof r&&null!==r}function isDate(r){return"[object Date]"===objectToString(r)}function isError(r){return"[object Error]"===objectToString(r)||r instanceof Error}function isFunction(r){return"function"==typeof r}function isPrimitive(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r}function objectToString(r){return Object.prototype.toString.call(r)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=Buffer.isBuffer;

        }).call(this,{"isBuffer":require("../../is-buffer/index.js")})
    },{"../../is-buffer/index.js":160}],96:[function(require,module,exports){
        (function (Buffer){
            var elliptic=require("elliptic"),BN=require("bn.js");module.exports=function createECDH(e){return new ECDH(e)};var aliases={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function ECDH(e){this.curveType=aliases[e],this.curveType||(this.curveType={name:e}),this.curve=new elliptic.ec(this.curveType.name),this.keys=void 0}function formatReturnValue(e,t,r){Array.isArray(e)||(e=e.toArray());var i=new Buffer(e);if(r&&i.length<r){var s=new Buffer(r-i.length);s.fill(0),i=Buffer.concat([s,i])}return t?i.toString(t):i}aliases.p224=aliases.secp224r1,aliases.p256=aliases.secp256r1=aliases.prime256v1,aliases.p192=aliases.secp192r1=aliases.prime192v1,aliases.p384=aliases.secp384r1,aliases.p521=aliases.secp521r1,ECDH.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},ECDH.prototype.computeSecret=function(e,t,r){return t=t||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,t)),formatReturnValue(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},ECDH.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),formatReturnValue(r,e)},ECDH.prototype.getPrivateKey=function(e){return formatReturnValue(this.keys.getPrivate(),e)},ECDH.prototype.setPublicKey=function(e,t){return t=t||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,t)),this.keys._importPublic(e),this},ECDH.prototype.setPrivateKey=function(e,t){t=t||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,t));var r=new BN(e);return r=r.toString(16),this.keys._importPrivate(r),this};

        }).call(this,require("buffer").Buffer)
    },{"bn.js":45,"buffer":91,"elliptic":121}],97:[function(require,module,exports){
        (function (Buffer){
            "use strict";var inherits=require("inherits"),md5=require("./md5"),RIPEMD160=require("ripemd160"),sha=require("sha.js"),Base=require("cipher-base");function HashNoConstructor(s){Base.call(this,"digest"),this._hash=s,this.buffers=[]}function Hash(s){Base.call(this,"digest"),this._hash=s}inherits(HashNoConstructor,Base),HashNoConstructor.prototype._update=function(s){this.buffers.push(s)},HashNoConstructor.prototype._final=function(){var s=Buffer.concat(this.buffers),t=this._hash(s);return this.buffers=null,t},inherits(Hash,Base),Hash.prototype._update=function(s){this._hash.update(s)},Hash.prototype._final=function(){return this._hash.digest()},module.exports=function createHash(s){return"md5"===(s=s.toLowerCase())?new HashNoConstructor(md5):new Hash("rmd160"===s||"ripemd160"===s?new RIPEMD160:sha(s))};

        }).call(this,require("buffer").Buffer)
    },{"./md5":99,"buffer":91,"cipher-base":92,"inherits":159,"ripemd160":235,"sha.js":240}],98:[function(require,module,exports){
        (function (Buffer){
            "use strict";var intSize=4,zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var charSize=8,hashSize=16;function toArray(e){if(e.length%intSize!=0){var r=e.length+(intSize-e.length%intSize);e=Buffer.concat([e,zeroBuffer],r)}for(var t=new Array(e.length>>>2),n=0,i=0;n<e.length;n+=intSize,i++)t[i]=e.readInt32LE(n);return t}module.exports=function hash(e,r){var t=r(toArray(e),e.length*charSize);e=new Buffer(hashSize);for(var n=0;n<t.length;n++)e.writeInt32LE(t[n],n<<2,!0);return e};

        }).call(this,require("buffer").Buffer)
    },{"buffer":91}],99:[function(require,module,exports){
        "use strict";var makeHash=require("./make-hash");function core_md5(d,_){d[_>>5]|=128<<_%32,d[14+(_+64>>>9<<4)]=_;for(var m=1732584193,f=-271733879,i=-1732584194,h=271733878,g=0;g<d.length;g+=16){var n=m,r=f,e=i,a=h;m=md5_ff(m,f,i,h,d[g+0],7,-680876936),h=md5_ff(h,m,f,i,d[g+1],12,-389564586),i=md5_ff(i,h,m,f,d[g+2],17,606105819),f=md5_ff(f,i,h,m,d[g+3],22,-1044525330),m=md5_ff(m,f,i,h,d[g+4],7,-176418897),h=md5_ff(h,m,f,i,d[g+5],12,1200080426),i=md5_ff(i,h,m,f,d[g+6],17,-1473231341),f=md5_ff(f,i,h,m,d[g+7],22,-45705983),m=md5_ff(m,f,i,h,d[g+8],7,1770035416),h=md5_ff(h,m,f,i,d[g+9],12,-1958414417),i=md5_ff(i,h,m,f,d[g+10],17,-42063),f=md5_ff(f,i,h,m,d[g+11],22,-1990404162),m=md5_ff(m,f,i,h,d[g+12],7,1804603682),h=md5_ff(h,m,f,i,d[g+13],12,-40341101),i=md5_ff(i,h,m,f,d[g+14],17,-1502002290),m=md5_gg(m,f=md5_ff(f,i,h,m,d[g+15],22,1236535329),i,h,d[g+1],5,-165796510),h=md5_gg(h,m,f,i,d[g+6],9,-1069501632),i=md5_gg(i,h,m,f,d[g+11],14,643717713),f=md5_gg(f,i,h,m,d[g+0],20,-373897302),m=md5_gg(m,f,i,h,d[g+5],5,-701558691),h=md5_gg(h,m,f,i,d[g+10],9,38016083),i=md5_gg(i,h,m,f,d[g+15],14,-660478335),f=md5_gg(f,i,h,m,d[g+4],20,-405537848),m=md5_gg(m,f,i,h,d[g+9],5,568446438),h=md5_gg(h,m,f,i,d[g+14],9,-1019803690),i=md5_gg(i,h,m,f,d[g+3],14,-187363961),f=md5_gg(f,i,h,m,d[g+8],20,1163531501),m=md5_gg(m,f,i,h,d[g+13],5,-1444681467),h=md5_gg(h,m,f,i,d[g+2],9,-51403784),i=md5_gg(i,h,m,f,d[g+7],14,1735328473),m=md5_hh(m,f=md5_gg(f,i,h,m,d[g+12],20,-1926607734),i,h,d[g+5],4,-378558),h=md5_hh(h,m,f,i,d[g+8],11,-2022574463),i=md5_hh(i,h,m,f,d[g+11],16,1839030562),f=md5_hh(f,i,h,m,d[g+14],23,-35309556),m=md5_hh(m,f,i,h,d[g+1],4,-1530992060),h=md5_hh(h,m,f,i,d[g+4],11,1272893353),i=md5_hh(i,h,m,f,d[g+7],16,-155497632),f=md5_hh(f,i,h,m,d[g+10],23,-1094730640),m=md5_hh(m,f,i,h,d[g+13],4,681279174),h=md5_hh(h,m,f,i,d[g+0],11,-358537222),i=md5_hh(i,h,m,f,d[g+3],16,-722521979),f=md5_hh(f,i,h,m,d[g+6],23,76029189),m=md5_hh(m,f,i,h,d[g+9],4,-640364487),h=md5_hh(h,m,f,i,d[g+12],11,-421815835),i=md5_hh(i,h,m,f,d[g+15],16,530742520),m=md5_ii(m,f=md5_hh(f,i,h,m,d[g+2],23,-995338651),i,h,d[g+0],6,-198630844),h=md5_ii(h,m,f,i,d[g+7],10,1126891415),i=md5_ii(i,h,m,f,d[g+14],15,-1416354905),f=md5_ii(f,i,h,m,d[g+5],21,-57434055),m=md5_ii(m,f,i,h,d[g+12],6,1700485571),h=md5_ii(h,m,f,i,d[g+3],10,-1894986606),i=md5_ii(i,h,m,f,d[g+10],15,-1051523),f=md5_ii(f,i,h,m,d[g+1],21,-2054922799),m=md5_ii(m,f,i,h,d[g+8],6,1873313359),h=md5_ii(h,m,f,i,d[g+15],10,-30611744),i=md5_ii(i,h,m,f,d[g+6],15,-1560198380),f=md5_ii(f,i,h,m,d[g+13],21,1309151649),m=md5_ii(m,f,i,h,d[g+4],6,-145523070),h=md5_ii(h,m,f,i,d[g+11],10,-1120210379),i=md5_ii(i,h,m,f,d[g+2],15,718787259),f=md5_ii(f,i,h,m,d[g+9],21,-343485551),m=safe_add(m,n),f=safe_add(f,r),i=safe_add(i,e),h=safe_add(h,a)}return[m,f,i,h]}function md5_cmn(d,_,m,f,i,h){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,h)),i),m)}function md5_ff(d,_,m,f,i,h,g){return md5_cmn(_&m|~_&f,d,_,i,h,g)}function md5_gg(d,_,m,f,i,h,g){return md5_cmn(_&f|m&~f,d,_,i,h,g)}function md5_hh(d,_,m,f,i,h,g){return md5_cmn(_^m^f,d,_,i,h,g)}function md5_ii(d,_,m,f,i,h,g){return md5_cmn(m^(_|~f),d,_,i,h,g)}function safe_add(d,_){var m=(65535&d)+(65535&_);return(d>>16)+(_>>16)+(m>>16)<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}module.exports=function md5(d){return makeHash(d,core_md5)};

    },{"./make-hash":98}],100:[function(require,module,exports){
        "use strict";var inherits=require("inherits"),Legacy=require("./legacy"),Base=require("cipher-base"),Buffer=require("safe-buffer").Buffer,md5=require("create-hash/md5"),RIPEMD160=require("ripemd160"),sha=require("sha.js"),ZEROS=Buffer.alloc(128);function Hmac(e,a){Base.call(this,"digest"),"string"==typeof a&&(a=Buffer.from(a));var r="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=a,a.length>r)?a=("rmd160"===e?new RIPEMD160:sha(e)).update(a).digest():a.length<r&&(a=Buffer.concat([a,ZEROS],r));for(var t=this._ipad=Buffer.allocUnsafe(r),s=this._opad=Buffer.allocUnsafe(r),i=0;i<r;i++)t[i]=54^a[i],s[i]=92^a[i];this._hash="rmd160"===e?new RIPEMD160:sha(e),this._hash.update(t)}inherits(Hmac,Base),Hmac.prototype._update=function(e){this._hash.update(e)},Hmac.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new RIPEMD160:sha(this._alg)).update(this._opad).update(e).digest()},module.exports=function createHmac(e,a){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new Hmac("rmd160",a):"md5"===e?new Legacy(md5,a):new Hmac(e,a)};

    },{"./legacy":101,"cipher-base":92,"create-hash/md5":99,"inherits":159,"ripemd160":235,"safe-buffer":237,"sha.js":240}],101:[function(require,module,exports){
        "use strict";var inherits=require("inherits"),Buffer=require("safe-buffer").Buffer,Base=require("cipher-base"),ZEROS=Buffer.alloc(128),blocksize=64;function Hmac(e,s){Base.call(this,"digest"),"string"==typeof s&&(s=Buffer.from(s)),this._alg=e,this._key=s,s.length>blocksize?s=e(s):s.length<blocksize&&(s=Buffer.concat([s,ZEROS],blocksize));for(var i=this._ipad=Buffer.allocUnsafe(blocksize),t=this._opad=Buffer.allocUnsafe(blocksize),a=0;a<blocksize;a++)i[a]=54^s[a],t[a]=92^s[a];this._hash=[i]}inherits(Hmac,Base),Hmac.prototype._update=function(e){this._hash.push(e)},Hmac.prototype._final=function(){var e=this._alg(Buffer.concat(this._hash));return this._alg(Buffer.concat([this._opad,e]))},module.exports=Hmac;

    },{"cipher-base":92,"inherits":159,"safe-buffer":237}],102:[function(require,module,exports){
        "use strict";exports.randomBytes=exports.rng=exports.pseudoRandomBytes=exports.prng=require("randombytes"),exports.createHash=exports.Hash=require("create-hash"),exports.createHmac=exports.Hmac=require("create-hmac");var algos=require("browserify-sign/algos"),algoKeys=Object.keys(algos),hashes=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(algoKeys);exports.getHashes=function(){return hashes};var p=require("pbkdf2");exports.pbkdf2=p.pbkdf2,exports.pbkdf2Sync=p.pbkdf2Sync;var aes=require("browserify-cipher");exports.Cipher=aes.Cipher,exports.createCipher=aes.createCipher,exports.Cipheriv=aes.Cipheriv,exports.createCipheriv=aes.createCipheriv,exports.Decipher=aes.Decipher,exports.createDecipher=aes.createDecipher,exports.Decipheriv=aes.Decipheriv,exports.createDecipheriv=aes.createDecipheriv,exports.getCiphers=aes.getCiphers,exports.listCiphers=aes.listCiphers;var dh=require("diffie-hellman");exports.DiffieHellmanGroup=dh.DiffieHellmanGroup,exports.createDiffieHellmanGroup=dh.createDiffieHellmanGroup,exports.getDiffieHellman=dh.getDiffieHellman,exports.createDiffieHellman=dh.createDiffieHellman,exports.DiffieHellman=dh.DiffieHellman;var sign=require("browserify-sign");exports.createSign=sign.createSign,exports.Sign=sign.Sign,exports.createVerify=sign.createVerify,exports.Verify=sign.Verify,exports.createECDH=require("create-ecdh");var publicEncrypt=require("public-encrypt");exports.publicEncrypt=publicEncrypt.publicEncrypt,exports.privateEncrypt=publicEncrypt.privateEncrypt,exports.publicDecrypt=publicEncrypt.publicDecrypt,exports.privateDecrypt=publicEncrypt.privateDecrypt;var rf=require("randomfill");exports.randomFill=rf.randomFill,exports.randomFillSync=rf.randomFillSync,exports.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},exports.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};

    },{"browserify-cipher":79,"browserify-sign":86,"browserify-sign/algos":83,"create-ecdh":96,"create-hash":97,"create-hmac":100,"diffie-hellman":116,"pbkdf2":178,"public-encrypt":188,"randombytes":198,"randomfill":199}],103:[function(require,module,exports){
        (function (process){
            function useColors(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+exports.humanize(this.diff),o){var C="color: "+this.color;e.splice(1,0,C,"color: inherit");var t=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(r=t))}),e.splice(r,0,C)}}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{null==e?exports.storage.removeItem("debug"):exports.storage.debug=e}catch(e){}}function load(){var e;try{e=exports.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}function localstorage(){try{return window.localStorage}catch(e){}}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:localstorage(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},exports.enable(load());

        }).call(this,require('_process'))
    },{"./debug":104,"_process":184}],104:[function(require,module,exports){
        function selectColor(e){var r,t=0;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return exports.colors[Math.abs(t)%exports.colors.length]}function createDebug(e){var r;function debug(){if(debug.enabled){var e=debug,t=+new Date,s=t-(r||t);e.diff=s,e.prev=r,e.curr=t,r=t;for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=exports.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(r,t){if("%%"===r)return r;a++;var s=exports.formatters[t];if("function"==typeof s){var n=o[a];r=s.call(e,n),o.splice(a,1),a--}return r}),exports.formatArgs.call(e,o),(debug.log||exports.log||console.log.bind(console)).apply(e,o)}}return debug.namespace=e,debug.enabled=exports.enabled(e),debug.useColors=exports.useColors(),debug.color=selectColor(e),debug.destroy=destroy,"function"==typeof exports.init&&exports.init(debug),exports.instances.push(debug),debug}function destroy(){var e=exports.instances.indexOf(this);return-1!==e&&(exports.instances.splice(e,1),!0)}function enable(e){var r;exports.save(e),exports.names=[],exports.skips=[];var t=("string"==typeof e?e:"").split(/[\s,]+/),s=t.length;for(r=0;r<s;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")));for(r=0;r<exports.instances.length;r++){var o=exports.instances[r];o.enabled=exports.enabled(o.namespace)}}function disable(){exports.enable("")}function enabled(e){if("*"===e[e.length-1])return!0;var r,t;for(r=0,t=exports.skips.length;r<t;r++)if(exports.skips[r].test(e))return!1;for(r=0,t=exports.names.length;r<t;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=createDebug.debug=createDebug.default=createDebug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.instances=[],exports.names=[],exports.skips=[],exports.formatters={};

    },{"ms":167}],105:[function(require,module,exports){
        var pSlice=Array.prototype.slice,objectKeys=require("./lib/keys.js"),isArguments=require("./lib/is_arguments.js"),deepEqual=module.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:objEquiv(e,t,r))};function isUndefinedOrNull(e){return null==e}function isBuffer(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}function objEquiv(e,t,r){var n,i;if(isUndefinedOrNull(e)||isUndefinedOrNull(t))return!1;if(e.prototype!==t.prototype)return!1;if(isArguments(e))return!!isArguments(t)&&(e=pSlice.call(e),t=pSlice.call(t),deepEqual(e,t,r));if(isBuffer(e)){if(!isBuffer(t))return!1;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}try{var u=objectKeys(e),f=objectKeys(t)}catch(e){return!1}if(u.length!=f.length)return!1;for(u.sort(),f.sort(),n=u.length-1;n>=0;n--)if(u[n]!=f[n])return!1;for(n=u.length-1;n>=0;n--)if(i=u[n],!deepEqual(e[i],t[i],r))return!1;return typeof e==typeof t}

    },{"./lib/is_arguments.js":106,"./lib/keys.js":107}],106:[function(require,module,exports){
        var supportsArgumentsClass="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function supported(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function unsupported(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}exports=module.exports=supportsArgumentsClass?supported:unsupported,exports.supported=supported,exports.unsupported=unsupported;

    },{}],107:[function(require,module,exports){
        function shim(e){var s=[];for(var t in e)s.push(t);return s}exports=module.exports="function"==typeof Object.keys?Object.keys:shim,exports.shim=shim;

    },{}],108:[function(require,module,exports){
        "use strict";exports.utils=require("./des/utils"),exports.Cipher=require("./des/cipher"),exports.DES=require("./des/des"),exports.CBC=require("./des/cbc"),exports.EDE=require("./des/ede");

    },{"./des/cbc":109,"./des/cipher":110,"./des/des":111,"./des/ede":112,"./des/utils":113}],109:[function(require,module,exports){
        "use strict";var assert=require("minimalistic-assert"),inherits=require("inherits"),proto={};function CBCState(t){assert.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var i=0;i<this.iv.length;i++)this.iv[i]=t[i]}function instantiate(t){function CBC(i){t.call(this,i),this._cbcInit()}inherits(CBC,t);for(var i=Object.keys(proto),e=0;e<i.length;e++){var r=i[e];CBC.prototype[r]=proto[r]}return CBC.create=function create(t){return new CBC(t)},CBC}exports.instantiate=instantiate,proto._cbcInit=function _cbcInit(){var t=new CBCState(this.options.iv);this._cbcState=t},proto._update=function _update(t,i,e,r){var n=this._cbcState,s=this.constructor.super_.prototype,o=n.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)o[a]^=t[i+a];s._update.call(this,o,0,e,r);for(a=0;a<this.blockSize;a++)o[a]=e[r+a]}else{s._update.call(this,t,i,e,r);for(a=0;a<this.blockSize;a++)e[r+a]^=o[a];for(a=0;a<this.blockSize;a++)o[a]=t[i+a]}};

    },{"inherits":159,"minimalistic-assert":165}],110:[function(require,module,exports){
        "use strict";var assert=require("minimalistic-assert");function Cipher(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}module.exports=Cipher,Cipher.prototype._init=function _init(){},Cipher.prototype.update=function update(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},Cipher.prototype._buffer=function _buffer(t,e){for(var r=Math.min(this.buffer.length-this.bufferOff,t.length-e),f=0;f<r;f++)this.buffer[this.bufferOff+f]=t[e+f];return this.bufferOff+=r,r},Cipher.prototype._flushBuffer=function _flushBuffer(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},Cipher.prototype._updateEncrypt=function _updateEncrypt(t){var e=0,r=0,f=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(f*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var h=t.length-(t.length-e)%this.blockSize;e<h;e+=this.blockSize)this._update(t,e,i,r),r+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},Cipher.prototype._updateDecrypt=function _updateDecrypt(t){for(var e=0,r=0,f=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(f*this.blockSize);f>0;f--)e+=this._buffer(t,e),r+=this._flushBuffer(i,r);return e+=this._buffer(t,e),i},Cipher.prototype.final=function final(t){var e,r;return t&&(e=this.update(t)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(r):r},Cipher.prototype._pad=function _pad(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},Cipher.prototype._finalEncrypt=function _finalEncrypt(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},Cipher.prototype._unpad=function _unpad(t){return t},Cipher.prototype._finalDecrypt=function _finalDecrypt(){assert.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)};

    },{"minimalistic-assert":165}],111:[function(require,module,exports){
        "use strict";var assert=require("minimalistic-assert"),inherits=require("inherits"),des=require("../des"),utils=des.utils,Cipher=des.Cipher;function DESState(){this.tmp=new Array(2),this.keys=null}function DES(t){Cipher.call(this,t);var e=new DESState;this._desState=e,this.deriveKeys(e,t.key)}inherits(DES,Cipher),module.exports=DES,DES.create=function create(t){return new DES(t)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES.prototype.deriveKeys=function deriveKeys(t,e){t.keys=new Array(32),assert.equal(e.length,this.blockSize,"Invalid key length");var r=utils.readUInt32BE(e,0),s=utils.readUInt32BE(e,4);utils.pc1(r,s,t.tmp,0),r=t.tmp[0],s=t.tmp[1];for(var i=0;i<t.keys.length;i+=2){var p=shiftTable[i>>>1];r=utils.r28shl(r,p),s=utils.r28shl(s,p),utils.pc2(r,s,t.keys,i)}},DES.prototype._update=function _update(t,e,r,s){var i=this._desState,p=utils.readUInt32BE(t,e),n=utils.readUInt32BE(t,e+4);utils.ip(p,n,i.tmp,0),p=i.tmp[0],n=i.tmp[1],"encrypt"===this.type?this._encrypt(i,p,n,i.tmp,0):this._decrypt(i,p,n,i.tmp,0),p=i.tmp[0],n=i.tmp[1],utils.writeUInt32BE(r,p,s),utils.writeUInt32BE(r,n,s+4)},DES.prototype._pad=function _pad(t,e){for(var r=t.length-e,s=e;s<t.length;s++)t[s]=r;return!0},DES.prototype._unpad=function _unpad(t){for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)assert.equal(t[r],e);return t.slice(0,t.length-e)},DES.prototype._encrypt=function _encrypt(t,e,r,s,i){for(var p=e,n=r,u=0;u<t.keys.length;u+=2){var l=t.keys[u],a=t.keys[u+1];utils.expand(n,t.tmp,0),l^=t.tmp[0],a^=t.tmp[1];var h=utils.substitute(l,a),y=n;n=(p^utils.permute(h))>>>0,p=y}utils.rip(n,p,s,i)},DES.prototype._decrypt=function _decrypt(t,e,r,s,i){for(var p=r,n=e,u=t.keys.length-2;u>=0;u-=2){var l=t.keys[u],a=t.keys[u+1];utils.expand(p,t.tmp,0),l^=t.tmp[0],a^=t.tmp[1];var h=utils.substitute(l,a),y=p;p=(n^utils.permute(h))>>>0,n=y}utils.rip(p,n,s,i)};

    },{"../des":108,"inherits":159,"minimalistic-assert":165}],112:[function(require,module,exports){
        "use strict";var assert=require("minimalistic-assert"),inherits=require("inherits"),des=require("../des"),Cipher=des.Cipher,DES=des.DES;function EDEState(e,t){assert.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),p=t.slice(8,16),i=t.slice(16,24);this.ciphers="encrypt"===e?[DES.create({type:"encrypt",key:r}),DES.create({type:"decrypt",key:p}),DES.create({type:"encrypt",key:i})]:[DES.create({type:"decrypt",key:i}),DES.create({type:"encrypt",key:p}),DES.create({type:"decrypt",key:r})]}function EDE(e){Cipher.call(this,e);var t=new EDEState(this.type,this.options.key);this._edeState=t}inherits(EDE,Cipher),module.exports=EDE,EDE.create=function create(e){return new EDE(e)},EDE.prototype._update=function _update(e,t,r,p){var i=this._edeState;i.ciphers[0]._update(e,t,r,p),i.ciphers[1]._update(r,p,r,p),i.ciphers[2]._update(r,p,r,p)},EDE.prototype._pad=DES.prototype._pad,EDE.prototype._unpad=DES.prototype._unpad;

    },{"../des":108,"inherits":159,"minimalistic-assert":165}],113:[function(require,module,exports){
        "use strict";exports.readUInt32BE=function readUInt32BE(r,t){return(r[0+t]<<24|r[1+t]<<16|r[2+t]<<8|r[3+t])>>>0},exports.writeUInt32BE=function writeUInt32BE(r,t,e){r[0+e]=t>>>24,r[1+e]=t>>>16&255,r[2+e]=t>>>8&255,r[3+e]=255&t},exports.ip=function ip(r,t,e,o){for(var n=0,f=0,p=6;p>=0;p-=2){for(var a=0;a<=24;a+=8)n<<=1,n|=t>>>a+p&1;for(a=0;a<=24;a+=8)n<<=1,n|=r>>>a+p&1}for(p=6;p>=0;p-=2){for(a=1;a<=25;a+=8)f<<=1,f|=t>>>a+p&1;for(a=1;a<=25;a+=8)f<<=1,f|=r>>>a+p&1}e[o+0]=n>>>0,e[o+1]=f>>>0},exports.rip=function rip(r,t,e,o){for(var n=0,f=0,p=0;p<4;p++)for(var a=24;a>=0;a-=8)n<<=1,n|=t>>>a+p&1,n<<=1,n|=r>>>a+p&1;for(p=4;p<8;p++)for(a=24;a>=0;a-=8)f<<=1,f|=t>>>a+p&1,f<<=1,f|=r>>>a+p&1;e[o+0]=n>>>0,e[o+1]=f>>>0},exports.pc1=function pc1(r,t,e,o){for(var n=0,f=0,p=7;p>=5;p--){for(var a=0;a<=24;a+=8)n<<=1,n|=t>>a+p&1;for(a=0;a<=24;a+=8)n<<=1,n|=r>>a+p&1}for(a=0;a<=24;a+=8)n<<=1,n|=t>>a+p&1;for(p=1;p<=3;p++){for(a=0;a<=24;a+=8)f<<=1,f|=t>>a+p&1;for(a=0;a<=24;a+=8)f<<=1,f|=r>>a+p&1}for(a=0;a<=24;a+=8)f<<=1,f|=r>>a+p&1;e[o+0]=n>>>0,e[o+1]=f>>>0},exports.r28shl=function r28shl(r,t){return r<<t&268435455|r>>>28-t};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];exports.pc2=function pc2(r,t,e,o){for(var n=0,f=0,p=pc2table.length>>>1,a=0;a<p;a++)n<<=1,n|=r>>>pc2table[a]&1;for(a=p;a<pc2table.length;a++)f<<=1,f|=t>>>pc2table[a]&1;e[o+0]=n>>>0,e[o+1]=f>>>0},exports.expand=function expand(r,t,e){var o=0,n=0;o=(1&r)<<5|r>>>27;for(var f=23;f>=15;f-=4)o<<=6,o|=r>>>f&63;for(f=11;f>=3;f-=4)n|=r>>>f&63,n<<=6;n|=(31&r)<<1|r>>>31,t[e+0]=o>>>0,t[e+1]=n>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];exports.substitute=function substitute(r,t){for(var e=0,o=0;o<4;o++){e<<=4,e|=sTable[64*o+(r>>>18-6*o&63)]}for(o=0;o<4;o++){e<<=4,e|=sTable[256+64*o+(t>>>18-6*o&63)]}return e>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];exports.permute=function permute(r){for(var t=0,e=0;e<permuteTable.length;e++)t<<=1,t|=r>>>permuteTable[e]&1;return t>>>0},exports.padSplit=function padSplit(r,t,e){for(var o=r.toString(2);o.length<t;)o="0"+o;for(var n=[],f=0;f<t;f+=e)n.push(o.slice(f,f+e));return n.join(" ")};

    },{}],114:[function(require,module,exports){
        var deserializeError=require("./lib/").default;module.exports=deserializeError;

    },{"./lib/":115}],115:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function deserializeError(e){return isSerializedError(e)?Object.assign(new Error,{stack:void 0},e):e}function isSerializedError(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))&&"string"==typeof e.name&&"string"==typeof e.message}exports.default=deserializeError,exports.isSerializedError=isSerializedError;

    },{}],116:[function(require,module,exports){
        (function (Buffer){
            var generatePrime=require("./lib/generatePrime"),primes=require("./lib/primes.json"),DH=require("./lib/dh");function getDiffieHellman(e){var r=new Buffer(primes[e].prime,"hex"),f=new Buffer(primes[e].gen,"hex");return new DH(r,f)}var ENCODINGS={binary:!0,hex:!0,base64:!0};function createDiffieHellman(e,r,f,i){return Buffer.isBuffer(r)||void 0===ENCODINGS[r]?createDiffieHellman(e,"binary",r,f):(r=r||"binary",i=i||"binary",f=f||new Buffer([2]),Buffer.isBuffer(f)||(f=new Buffer(f,i)),"number"==typeof e?new DH(generatePrime(e,f),f,!0):(Buffer.isBuffer(e)||(e=new Buffer(e,r)),new DH(e,f,!0)))}exports.DiffieHellmanGroup=exports.createDiffieHellmanGroup=exports.getDiffieHellman=getDiffieHellman,exports.createDiffieHellman=exports.DiffieHellman=createDiffieHellman;

        }).call(this,require("buffer").Buffer)
    },{"./lib/dh":117,"./lib/generatePrime":118,"./lib/primes.json":119,"buffer":91}],117:[function(require,module,exports){
        (function (Buffer){
            var BN=require("bn.js"),MillerRabin=require("miller-rabin"),millerRabin=new MillerRabin,TWENTYFOUR=new BN(24),ELEVEN=new BN(11),TEN=new BN(10),THREE=new BN(3),SEVEN=new BN(7),primes=require("./generatePrime"),randomBytes=require("randombytes");function setPublicKey(e,r){return r=r||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,r)),this._pub=new BN(e),this}function setPrivateKey(e,r){return r=r||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,r)),this._priv=new BN(e),this}module.exports=DH;var primeCache={};function checkPrime(e,r){var t=r.toString("hex"),i=[t,e.toString(16)].join("_");if(i in primeCache)return primeCache[i];var n,u=0;if(e.isEven()||!primes.simpleSieve||!primes.fermatTest(e)||!millerRabin.test(e))return u+=1,u+="02"===t||"05"===t?8:4,primeCache[i]=u,u;switch(millerRabin.test(e.shrn(1))||(u+=2),t){case"02":e.mod(TWENTYFOUR).cmp(ELEVEN)&&(u+=8);break;case"05":(n=e.mod(TEN)).cmp(THREE)&&n.cmp(SEVEN)&&(u+=8);break;default:u+=4}return primeCache[i]=u,u}function DH(e,r,t){this.setGenerator(r),this.__prime=new BN(e),this._prime=BN.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,t?(this.setPublicKey=setPublicKey,this.setPrivateKey=setPrivateKey):this._primeCode=8}function formatReturnValue(e,r){var t=new Buffer(e.toArray());return r?t.toString(r):t}Object.defineProperty(DH.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=checkPrime(this.__prime,this.__gen)),this._primeCode}}),DH.prototype.generateKeys=function(){return this._priv||(this._priv=new BN(randomBytes(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},DH.prototype.computeSecret=function(e){var r=(e=(e=new BN(e)).toRed(this._prime)).redPow(this._priv).fromRed(),t=new Buffer(r.toArray()),i=this.getPrime();if(t.length<i.length){var n=new Buffer(i.length-t.length);n.fill(0),t=Buffer.concat([n,t])}return t},DH.prototype.getPublicKey=function getPublicKey(e){return formatReturnValue(this._pub,e)},DH.prototype.getPrivateKey=function getPrivateKey(e){return formatReturnValue(this._priv,e)},DH.prototype.getPrime=function(e){return formatReturnValue(this.__prime,e)},DH.prototype.getGenerator=function(e){return formatReturnValue(this._gen,e)},DH.prototype.setGenerator=function(e,r){return r=r||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,r)),this.__gen=e,this._gen=new BN(e),this};

        }).call(this,require("buffer").Buffer)
    },{"./generatePrime":118,"bn.js":45,"buffer":91,"miller-rabin":164,"randombytes":198}],118:[function(require,module,exports){
        var randomBytes=require("randombytes");module.exports=findPrime,findPrime.simpleSieve=simpleSieve,findPrime.fermatTest=fermatTest;var BN=require("bn.js"),TWENTYFOUR=new BN(24),MillerRabin=require("miller-rabin"),millerRabin=new MillerRabin,ONE=new BN(1),TWO=new BN(2),FIVE=new BN(5),SIXTEEN=new BN(16),EIGHT=new BN(8),TEN=new BN(10),THREE=new BN(3),SEVEN=new BN(7),ELEVEN=new BN(11),FOUR=new BN(4),TWELVE=new BN(12),primes=null;function _getPrimes(){if(null!==primes)return primes;var e=[];e[0]=2;for(var r=1,i=3;i<1048576;i+=2){for(var n=Math.ceil(Math.sqrt(i)),t=0;t<r&&e[t]<=n&&i%e[t]!=0;t++);r!==t&&e[t]<=n||(e[r++]=i)}return primes=e,e}function simpleSieve(e){for(var r=_getPrimes(),i=0;i<r.length;i++)if(0===e.modn(r[i]))return 0===e.cmpn(r[i]);return!0}function fermatTest(e){var r=BN.mont(e);return 0===TWO.toRed(r).redPow(e.subn(1)).fromRed().cmpn(1)}function findPrime(e,r){if(e<16)return new BN(2===r||5===r?[140,123]:[140,39]);var i,n;for(r=new BN(r);;){for(i=new BN(randomBytes(Math.ceil(e/8)));i.bitLength()>e;)i.ishrn(1);if(i.isEven()&&i.iadd(ONE),i.testn(1)||i.iadd(TWO),r.cmp(TWO)){if(!r.cmp(FIVE))for(;i.mod(TEN).cmp(THREE);)i.iadd(FOUR)}else for(;i.mod(TWENTYFOUR).cmp(ELEVEN);)i.iadd(FOUR);if(simpleSieve(n=i.shrn(1))&&simpleSieve(i)&&fermatTest(n)&&fermatTest(i)&&millerRabin.test(n)&&millerRabin.test(i))return i}}

    },{"bn.js":45,"miller-rabin":164,"randombytes":198}],119:[function(require,module,exports){
        module.exports={
            "modp1": {
                "gen": "02",
                "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"
            },
            "modp2": {
                "gen": "02",
                "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"
            },
            "modp5": {
                "gen": "02",
                "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"
            },
            "modp14": {
                "gen": "02",
                "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"
            },
            "modp15": {
                "gen": "02",
                "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"
            },
            "modp16": {
                "gen": "02",
                "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"
            },
            "modp17": {
                "gen": "02",
                "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"
            },
            "modp18": {
                "gen": "02",
                "prime": "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"
            }
        }
    },{}],120:[function(require,module,exports){
        module.exports=function(e){return e.source.replace(/\(\((?!\?)/g,function(e){return e+"?:"}).replace(/(^|[^\\])\((?!\?)/g,function(e){return e+"?:"})};

    },{}],121:[function(require,module,exports){
        "use strict";var elliptic=exports;elliptic.version=require("../package.json").version,elliptic.utils=require("./elliptic/utils"),elliptic.rand=require("brorand"),elliptic.curve=require("./elliptic/curve"),elliptic.curves=require("./elliptic/curves"),elliptic.ec=require("./elliptic/ec"),elliptic.eddsa=require("./elliptic/eddsa");

    },{"../package.json":136,"./elliptic/curve":124,"./elliptic/curves":127,"./elliptic/ec":128,"./elliptic/eddsa":131,"./elliptic/utils":135,"brorand":59}],122:[function(require,module,exports){
        "use strict";var BN=require("bn.js"),elliptic=require("../../elliptic"),utils=elliptic.utils,getNAF=utils.getNAF,getJSF=utils.getJSF,assert=utils.assert;function BaseCurve(t,e){this.type=t,this.p=new BN(e.p,16),this.red=e.prime?BN.red(e.prime):BN.mont(this.p),this.zero=new BN(0).toRed(this.red),this.one=new BN(1).toRed(this.red),this.two=new BN(2).toRed(this.red),this.n=e.n&&new BN(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function BasePoint(t,e){this.curve=t,this.type=e,this.precomputed=null}module.exports=BaseCurve,BaseCurve.prototype.point=function point(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function validate(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function _fixedNafMul(t,e){assert(t.precomputed);var n=t._getDoubles(),r=getNAF(e,1),o=(1<<n.step+1)-(n.step%2==0?2:1);o/=3;for(var i=[],s=0;s<r.length;s+=n.step){var a=0;for(e=s+n.step-1;e>=s;e--)a=(a<<1)+r[e];i.push(a)}for(var p=this.jpoint(null,null,null),u=this.jpoint(null,null,null),d=o;d>0;d--){for(s=0;s<i.length;s++){(a=i[s])===d?u=u.mixedAdd(n.points[s]):a===-d&&(u=u.mixedAdd(n.points[s].neg()))}p=p.add(u)}return p.toP()},BaseCurve.prototype._wnafMul=function _wnafMul(t,e){var n=4,r=t._getNAFPoints(n);n=r.wnd;for(var o=r.points,i=getNAF(e,n),s=this.jpoint(null,null,null),a=i.length-1;a>=0;a--){for(e=0;a>=0&&0===i[a];a--)e++;if(a>=0&&e++,s=s.dblp(e),a<0)break;var p=i[a];assert(0!==p),s="affine"===t.type?p>0?s.mixedAdd(o[p-1>>1]):s.mixedAdd(o[-p-1>>1].neg()):p>0?s.add(o[p-1>>1]):s.add(o[-p-1>>1].neg())}return"affine"===t.type?s.toP():s},BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(t,e,n,r,o){for(var i=this._wnafT1,s=this._wnafT2,a=this._wnafT3,p=0,u=0;u<r;u++){var d=(b=e[u])._getNAFPoints(t);i[u]=d.wnd,s[u]=d.points}for(u=r-1;u>=1;u-=2){var l=u-1,h=u;if(1===i[l]&&1===i[h]){var f=[e[l],null,null,e[h]];0===e[l].y.cmp(e[h].y)?(f[1]=e[l].add(e[h]),f[2]=e[l].toJ().mixedAdd(e[h].neg())):0===e[l].y.cmp(e[h].y.redNeg())?(f[1]=e[l].toJ().mixedAdd(e[h]),f[2]=e[l].add(e[h].neg())):(f[1]=e[l].toJ().mixedAdd(e[h]),f[2]=e[l].toJ().mixedAdd(e[h].neg()));var c=[-3,-1,-5,-7,0,7,5,1,3],g=getJSF(n[l],n[h]);p=Math.max(g[0].length,p),a[l]=new Array(p),a[h]=new Array(p);for(var v=0;v<p;v++){var m=0|g[0][v],w=0|g[1][v];a[l][v]=c[3*(m+1)+(w+1)],a[h][v]=0,s[l]=f}}else a[l]=getNAF(n[l],i[l]),a[h]=getNAF(n[h],i[h]),p=Math.max(a[l].length,p),p=Math.max(a[h].length,p)}var y=this.jpoint(null,null,null),B=this._wnafT4;for(u=p;u>=0;u--){for(var _=0;u>=0;){var A=!0;for(v=0;v<r;v++)B[v]=0|a[v][u],0!==B[v]&&(A=!1);if(!A)break;_++,u--}if(u>=0&&_++,y=y.dblp(_),u<0)break;for(v=0;v<r;v++){var b,N=B[v];0!==N&&(N>0?b=s[v][N-1>>1]:N<0&&(b=s[v][-N-1>>1].neg()),y="affine"===b.type?y.mixedAdd(b):y.add(b))}}for(u=0;u<r;u++)s[u]=null;return o?y:y.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function eq(){throw new Error("Not implemented")},BasePoint.prototype.validate=function validate(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function decodePoint(t,e){t=utils.toArray(t,e);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*n)return 6===t[0]?assert(t[t.length-1]%2==0):7===t[0]&&assert(t[t.length-1]%2==1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function encodeCompressed(t){return this.encode(t,!0)},BasePoint.prototype._encode=function _encode(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},BasePoint.prototype.encode=function encode(t,e){return utils.encode(this._encode(e),t)},BasePoint.prototype.precompute=function precompute(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},BasePoint.prototype._hasDoubles=function _hasDoubles(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},BasePoint.prototype._getDoubles=function _getDoubles(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,o=0;o<e;o+=t){for(var i=0;i<t;i++)r=r.dbl();n.push(r)}return{step:t,points:n}},BasePoint.prototype._getNAFPoints=function _getNAFPoints(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1===n?null:this.dbl(),o=1;o<n;o++)e[o]=e[o-1].add(r);return{wnd:t,points:e}},BasePoint.prototype._getBeta=function _getBeta(){return null},BasePoint.prototype.dblp=function dblp(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e};

    },{"../../elliptic":121,"bn.js":45}],123:[function(require,module,exports){
        "use strict";var curve=require("../curve"),elliptic=require("../../elliptic"),BN=require("bn.js"),inherits=require("inherits"),Base=curve.base,assert=elliptic.utils.assert;function EdwardsCurve(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,Base.call(this,"edwards",t),this.a=new BN(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function Point(t,e,r,i,d){Base.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN(e,16),this.y=new BN(r,16),this.z=i?new BN(i,16):this.curve.one,this.t=d&&new BN(d,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits(EdwardsCurve,Base),module.exports=EdwardsCurve,EdwardsCurve.prototype._mulA=function _mulA(t){return this.mOneA?t.redNeg():this.a.redMul(t)},EdwardsCurve.prototype._mulC=function _mulC(t){return this.oneC?t:this.c.redMul(t)},EdwardsCurve.prototype.jpoint=function jpoint(t,e,r,i){return this.point(t,e,r,i)},EdwardsCurve.prototype.pointFromX=function pointFromX(t,e){(t=new BN(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),i=this.c2.redSub(this.a.redMul(r)),d=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=i.redMul(d.redInvm()),u=s.redSqrt();if(0!==u.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var n=u.fromRed().isOdd();return(e&&!n||!e&&n)&&(u=u.redNeg()),this.point(t,u)},EdwardsCurve.prototype.pointFromY=function pointFromY(t,e){(t=new BN(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),i=r.redSub(this.one),d=r.redMul(this.d).redAdd(this.one),s=i.redMul(d.redInvm());if(0===s.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var u=s.redSqrt();if(0!==u.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return u.isOdd()!==e&&(u=u.redNeg()),this.point(u,t)},EdwardsCurve.prototype.validate=function validate(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),i=e.redMul(this.a).redAdd(r),d=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===i.cmp(d)},inherits(Point,Base.BasePoint),EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(t){return Point.fromJSON(this,t)},EdwardsCurve.prototype.point=function point(t,e,r,i){return new Point(this,t,e,r,i)},Point.fromJSON=function fromJSON(t,e){return new Point(t,e[0],e[1],e[2])},Point.prototype.inspect=function inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function isInfinity(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},Point.prototype._extDbl=function _extDbl(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(t),d=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),s=i.redAdd(e),u=s.redSub(r),n=i.redSub(e),o=d.redMul(u),h=s.redMul(n),l=d.redMul(n),p=u.redMul(s);return this.curve.point(o,h,p,l)},Point.prototype._projDbl=function _projDbl(){var t,e,r,i=this.x.redAdd(this.y).redSqr(),d=this.x.redSqr(),s=this.y.redSqr();if(this.curve.twisted){var u=(h=this.curve._mulA(d)).redAdd(s);if(this.zOne)t=i.redSub(d).redSub(s).redMul(u.redSub(this.curve.two)),e=u.redMul(h.redSub(s)),r=u.redSqr().redSub(u).redSub(u);else{var n=this.z.redSqr(),o=u.redSub(n).redISub(n);t=i.redSub(d).redISub(s).redMul(o),e=u.redMul(h.redSub(s)),r=u.redMul(o)}}else{var h=d.redAdd(s);n=this.curve._mulC(this.c.redMul(this.z)).redSqr(),o=h.redSub(n).redSub(n);t=this.curve._mulC(i.redISub(h)).redMul(o),e=this.curve._mulC(h).redMul(d.redISub(s)),r=h.redMul(o)}return this.curve.point(t,e,r)},Point.prototype.dbl=function dbl(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point.prototype._extAdd=function _extAdd(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),d=this.z.redMul(t.z.redAdd(t.z)),s=r.redSub(e),u=d.redSub(i),n=d.redAdd(i),o=r.redAdd(e),h=s.redMul(u),l=n.redMul(o),p=s.redMul(o),c=u.redMul(n);return this.curve.point(h,l,c,p)},Point.prototype._projAdd=function _projAdd(t){var e,r,i=this.z.redMul(t.z),d=i.redSqr(),s=this.x.redMul(t.x),u=this.y.redMul(t.y),n=this.curve.d.redMul(s).redMul(u),o=d.redSub(n),h=d.redAdd(n),l=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(s).redISub(u),p=i.redMul(o).redMul(l);return this.curve.twisted?(e=i.redMul(h).redMul(u.redSub(this.curve._mulA(s))),r=o.redMul(h)):(e=i.redMul(h).redMul(u.redSub(s)),r=this.curve._mulC(o).redMul(h)),this.curve.point(p,e,r)},Point.prototype.add=function add(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},Point.prototype.mul=function mul(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},Point.prototype.mulAdd=function mulAdd(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},Point.prototype.jmulAdd=function jmulAdd(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},Point.prototype.normalize=function normalize(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point.prototype.getX=function getX(){return this.normalize(),this.x.fromRed()},Point.prototype.getY=function getY(){return this.normalize(),this.y.fromRed()},Point.prototype.eq=function eq(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},Point.prototype.eqXToP=function eqXToP(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(i),0===this.x.cmp(e))return!0}return!1},Point.prototype.toP=Point.prototype.normalize,Point.prototype.mixedAdd=Point.prototype.add;

    },{"../../elliptic":121,"../curve":124,"bn.js":45,"inherits":159}],124:[function(require,module,exports){
        "use strict";var curve=exports;curve.base=require("./base"),curve.short=require("./short"),curve.mont=require("./mont"),curve.edwards=require("./edwards");

    },{"./base":122,"./edwards":123,"./mont":125,"./short":126}],125:[function(require,module,exports){
        "use strict";var curve=require("../curve"),BN=require("bn.js"),inherits=require("inherits"),Base=curve.base,elliptic=require("../../elliptic"),utils=elliptic.utils;function MontCurve(t){Base.call(this,"mont",t),this.a=new BN(t.a,16).toRed(this.red),this.b=new BN(t.b,16).toRed(this.red),this.i4=new BN(4).toRed(this.red).redInvm(),this.two=new BN(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Point(t,e,r){Base.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN(e,16),this.z=new BN(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits(MontCurve,Base),module.exports=MontCurve,MontCurve.prototype.validate=function validate(t){var e=t.normalize().x,r=e.redSqr(),i=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===i.redSqrt().redSqr().cmp(i)},inherits(Point,Base.BasePoint),MontCurve.prototype.decodePoint=function decodePoint(t,e){return this.point(utils.toArray(t,e),1)},MontCurve.prototype.point=function point(t,e){return new Point(this,t,e)},MontCurve.prototype.pointFromJSON=function pointFromJSON(t){return Point.fromJSON(this,t)},Point.prototype.precompute=function precompute(){},Point.prototype._encode=function _encode(){return this.getX().toArray("be",this.curve.p.byteLength())},Point.fromJSON=function fromJSON(t,e){return new Point(t,e[0],e[1]||t.one)},Point.prototype.inspect=function inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function isInfinity(){return 0===this.z.cmpn(0)},Point.prototype.dbl=function dbl(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),i=t.redMul(e),o=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,o)},Point.prototype.add=function add(){throw new Error("Not supported on Montgomery curve")},Point.prototype.diffAdd=function diffAdd(t,e){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=t.x.redAdd(t.z),n=t.x.redSub(t.z).redMul(r),d=o.redMul(i),u=e.z.redMul(n.redAdd(d).redSqr()),s=e.x.redMul(n.redISub(d).redSqr());return this.curve.point(u,s)},Point.prototype.mul=function mul(t){for(var e=t.clone(),r=this,i=this.curve.point(null,null),o=[];0!==e.cmpn(0);e.iushrn(1))o.push(e.andln(1));for(var n=o.length-1;n>=0;n--)0===o[n]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},Point.prototype.mulAdd=function mulAdd(){throw new Error("Not supported on Montgomery curve")},Point.prototype.jumlAdd=function jumlAdd(){throw new Error("Not supported on Montgomery curve")},Point.prototype.eq=function eq(t){return 0===this.getX().cmp(t.getX())},Point.prototype.normalize=function normalize(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point.prototype.getX=function getX(){return this.normalize(),this.x.fromRed()};

    },{"../../elliptic":121,"../curve":124,"bn.js":45,"inherits":159}],126:[function(require,module,exports){
        "use strict";var curve=require("../curve"),elliptic=require("../../elliptic"),BN=require("bn.js"),inherits=require("inherits"),Base=curve.base,assert=elliptic.utils.assert;function ShortCurve(r){Base.call(this,"short",r),this.a=new BN(r.a,16).toRed(this.red),this.b=new BN(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function Point(r,e,t,d){Base.BasePoint.call(this,r,"affine"),null===e&&null===t?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN(e,16),this.y=new BN(t,16),d&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(r,e,t,d){Base.BasePoint.call(this,r,"jacobian"),null===e&&null===t&&null===d?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN(0)):(this.x=new BN(e,16),this.y=new BN(t,16),this.z=new BN(d,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits(ShortCurve,Base),module.exports=ShortCurve,ShortCurve.prototype._getEndomorphism=function _getEndomorphism(r){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,t;if(r.beta)e=new BN(r.beta,16).toRed(this.red);else{var d=this._getEndoRoots(this.p);e=(e=d[0].cmp(d[1])<0?d[0]:d[1]).toRed(this.red)}if(r.lambda)t=new BN(r.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?t=i[0]:(t=i[1],assert(0===this.g.mul(t).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:t,basis:r.basis?r.basis.map(function(r){return{a:new BN(r.a,16),b:new BN(r.b,16)}}):this._getEndoBasis(t)}}},ShortCurve.prototype._getEndoRoots=function _getEndoRoots(r){var e=r===this.p?this.red:BN.mont(r),t=new BN(2).toRed(e).redInvm(),d=t.redNeg(),i=new BN(3).toRed(e).redNeg().redSqrt().redMul(t);return[d.redAdd(i).fromRed(),d.redSub(i).fromRed()]},ShortCurve.prototype._getEndoBasis=function _getEndoBasis(r){for(var e,t,d,i,n,u,s,o,h,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),p=r,a=this.n.clone(),f=new BN(1),c=new BN(0),S=new BN(0),v=new BN(1),b=0;0!==p.cmpn(0);){var I=a.div(p);o=a.sub(I.mul(p)),h=S.sub(I.mul(f));var y=v.sub(I.mul(c));if(!d&&o.cmp(l)<0)e=s.neg(),t=f,d=o.neg(),i=h;else if(d&&2==++b)break;s=o,a=p,p=o,S=f,f=h,v=c,c=y}n=o.neg(),u=h;var A=d.sqr().add(i.sqr());return n.sqr().add(u.sqr()).cmp(A)>=0&&(n=e,u=t),d.negative&&(d=d.neg(),i=i.neg()),n.negative&&(n=n.neg(),u=u.neg()),[{a:d,b:i},{a:n,b:u}]},ShortCurve.prototype._endoSplit=function _endoSplit(r){var e=this.endo.basis,t=e[0],d=e[1],i=d.b.mul(r).divRound(this.n),n=t.b.neg().mul(r).divRound(this.n),u=i.mul(t.a),s=n.mul(d.a),o=i.mul(t.b),h=n.mul(d.b);return{k1:r.sub(u).sub(s),k2:o.add(h).neg()}},ShortCurve.prototype.pointFromX=function pointFromX(r,e){(r=new BN(r,16)).red||(r=r.toRed(this.red));var t=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),d=t.redSqrt();if(0!==d.redSqr().redSub(t).cmp(this.zero))throw new Error("invalid point");var i=d.fromRed().isOdd();return(e&&!i||!e&&i)&&(d=d.redNeg()),this.point(r,d)},ShortCurve.prototype.validate=function validate(r){if(r.inf)return!0;var e=r.x,t=r.y,d=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(d).redIAdd(this.b);return 0===t.redSqr().redISub(i).cmpn(0)},ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(r,e,t){for(var d=this._endoWnafT1,i=this._endoWnafT2,n=0;n<r.length;n++){var u=this._endoSplit(e[n]),s=r[n],o=s._getBeta();u.k1.negative&&(u.k1.ineg(),s=s.neg(!0)),u.k2.negative&&(u.k2.ineg(),o=o.neg(!0)),d[2*n]=s,d[2*n+1]=o,i[2*n]=u.k1,i[2*n+1]=u.k2}for(var h=this._wnafMulAdd(1,d,i,2*n,t),l=0;l<2*n;l++)d[l]=null,i[l]=null;return h},inherits(Point,Base.BasePoint),ShortCurve.prototype.point=function point(r,e,t){return new Point(this,r,e,t)},ShortCurve.prototype.pointFromJSON=function pointFromJSON(r,e){return Point.fromJSON(this,r,e)},Point.prototype._getBeta=function _getBeta(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var t=this.curve,d=function(r){return t.point(r.x.redMul(t.endo.beta),r.y)};r.beta=e,e.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(d)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(d)}}}return e}},Point.prototype.toJSON=function toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function fromJSON(r,e,t){"string"==typeof e&&(e=JSON.parse(e));var d=r.point(e[0],e[1],t);if(!e[2])return d;function obj2point(e){return r.point(e[0],e[1],t)}var i=e[2];return d.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[d].concat(i.doubles.points.map(obj2point))},naf:i.naf&&{wnd:i.naf.wnd,points:[d].concat(i.naf.points.map(obj2point))}},d},Point.prototype.inspect=function inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function isInfinity(){return this.inf},Point.prototype.add=function add(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(0===this.x.cmp(r.x))return this.curve.point(null,null);var e=this.y.redSub(r.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(r.x).redInvm()));var t=e.redSqr().redISub(this.x).redISub(r.x),d=e.redMul(this.x.redSub(t)).redISub(this.y);return this.curve.point(t,d)},Point.prototype.dbl=function dbl(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(0===r.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,t=this.x.redSqr(),d=r.redInvm(),i=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(d),n=i.redSqr().redISub(this.x.redAdd(this.x)),u=i.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,u)},Point.prototype.getX=function getX(){return this.x.fromRed()},Point.prototype.getY=function getY(){return this.y.fromRed()},Point.prototype.mul=function mul(r){return r=new BN(r,16),this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},Point.prototype.mulAdd=function mulAdd(r,e,t){var d=[this,e],i=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(d,i):this.curve._wnafMulAdd(1,d,i,2)},Point.prototype.jmulAdd=function jmulAdd(r,e,t){var d=[this,e],i=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(d,i,!0):this.curve._wnafMulAdd(1,d,i,2,!0)},Point.prototype.eq=function eq(r){return this===r||this.inf===r.inf&&(this.inf||0===this.x.cmp(r.x)&&0===this.y.cmp(r.y))},Point.prototype.neg=function neg(r){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var t=this.precomputed,d=function(r){return r.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(d)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(d)}}}return e},Point.prototype.toJ=function toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},inherits(JPoint,Base.BasePoint),ShortCurve.prototype.jpoint=function jpoint(r,e,t){return new JPoint(this,r,e,t)},JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),e=r.redSqr(),t=this.x.redMul(e),d=this.y.redMul(e).redMul(r);return this.curve.point(t,d)},JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function add(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var e=r.z.redSqr(),t=this.z.redSqr(),d=this.x.redMul(e),i=r.x.redMul(t),n=this.y.redMul(e.redMul(r.z)),u=r.y.redMul(t.redMul(this.z)),s=d.redSub(i),o=n.redSub(u);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=s.redSqr(),l=h.redMul(s),p=d.redMul(h),a=o.redSqr().redIAdd(l).redISub(p).redISub(p),f=o.redMul(p.redISub(a)).redISub(n.redMul(l)),c=this.z.redMul(r.z).redMul(s);return this.curve.jpoint(a,f,c)},JPoint.prototype.mixedAdd=function mixedAdd(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var e=this.z.redSqr(),t=this.x,d=r.x.redMul(e),i=this.y,n=r.y.redMul(e).redMul(this.z),u=t.redSub(d),s=i.redSub(n);if(0===u.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var o=u.redSqr(),h=o.redMul(u),l=t.redMul(o),p=s.redSqr().redIAdd(h).redISub(l).redISub(l),a=s.redMul(l.redISub(p)).redISub(i.redMul(h)),f=this.z.redMul(u);return this.curve.jpoint(p,a,f)},JPoint.prototype.dblp=function dblp(r){if(0===r)return this;if(this.isInfinity())return this;if(!r)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,t=0;t<r;t++)e=e.dbl();return e}var d=this.curve.a,i=this.curve.tinv,n=this.x,u=this.y,s=this.z,o=s.redSqr().redSqr(),h=u.redAdd(u);for(t=0;t<r;t++){var l=n.redSqr(),p=h.redSqr(),a=p.redSqr(),f=l.redAdd(l).redIAdd(l).redIAdd(d.redMul(o)),c=n.redMul(p),S=f.redSqr().redISub(c.redAdd(c)),v=c.redISub(S),b=f.redMul(v);b=b.redIAdd(b).redISub(a);var I=h.redMul(s);t+1<r&&(o=o.redMul(a)),n=S,s=I,h=b}return this.curve.jpoint(n,h.redMul(i),s)},JPoint.prototype.dbl=function dbl(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function _zeroDbl(){var r,e,t;if(this.zOne){var d=this.x.redSqr(),i=this.y.redSqr(),n=i.redSqr(),u=this.x.redAdd(i).redSqr().redISub(d).redISub(n);u=u.redIAdd(u);var s=d.redAdd(d).redIAdd(d),o=s.redSqr().redISub(u).redISub(u),h=n.redIAdd(n);h=(h=h.redIAdd(h)).redIAdd(h),r=o,e=s.redMul(u.redISub(o)).redISub(h),t=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),p=this.y.redSqr(),a=p.redSqr(),f=this.x.redAdd(p).redSqr().redISub(l).redISub(a);f=f.redIAdd(f);var c=l.redAdd(l).redIAdd(l),S=c.redSqr(),v=a.redIAdd(a);v=(v=v.redIAdd(v)).redIAdd(v),r=S.redISub(f).redISub(f),e=c.redMul(f.redISub(r)).redISub(v),t=(t=this.y.redMul(this.z)).redIAdd(t)}return this.curve.jpoint(r,e,t)},JPoint.prototype._threeDbl=function _threeDbl(){var r,e,t;if(this.zOne){var d=this.x.redSqr(),i=this.y.redSqr(),n=i.redSqr(),u=this.x.redAdd(i).redSqr().redISub(d).redISub(n);u=u.redIAdd(u);var s=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a),o=s.redSqr().redISub(u).redISub(u);r=o;var h=n.redIAdd(n);h=(h=h.redIAdd(h)).redIAdd(h),e=s.redMul(u.redISub(o)).redISub(h),t=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),p=this.y.redSqr(),a=this.x.redMul(p),f=this.x.redSub(l).redMul(this.x.redAdd(l));f=f.redAdd(f).redIAdd(f);var c=a.redIAdd(a),S=(c=c.redIAdd(c)).redAdd(c);r=f.redSqr().redISub(S),t=this.y.redAdd(this.z).redSqr().redISub(p).redISub(l);var v=p.redSqr();v=(v=(v=v.redIAdd(v)).redIAdd(v)).redIAdd(v),e=f.redMul(c.redISub(r)).redISub(v)}return this.curve.jpoint(r,e,t)},JPoint.prototype._dbl=function _dbl(){var r=this.curve.a,e=this.x,t=this.y,d=this.z,i=d.redSqr().redSqr(),n=e.redSqr(),u=t.redSqr(),s=n.redAdd(n).redIAdd(n).redIAdd(r.redMul(i)),o=e.redAdd(e),h=(o=o.redIAdd(o)).redMul(u),l=s.redSqr().redISub(h.redAdd(h)),p=h.redISub(l),a=u.redSqr();a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);var f=s.redMul(p).redISub(a),c=t.redAdd(t).redMul(d);return this.curve.jpoint(l,f,c)},JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),e=this.y.redSqr(),t=this.z.redSqr(),d=e.redSqr(),i=r.redAdd(r).redIAdd(r),n=i.redSqr(),u=this.x.redAdd(e).redSqr().redISub(r).redISub(d),s=(u=(u=(u=u.redIAdd(u)).redAdd(u).redIAdd(u)).redISub(n)).redSqr(),o=d.redIAdd(d);o=(o=(o=o.redIAdd(o)).redIAdd(o)).redIAdd(o);var h=i.redIAdd(u).redSqr().redISub(n).redISub(s).redISub(o),l=e.redMul(h);l=(l=l.redIAdd(l)).redIAdd(l);var p=this.x.redMul(s).redISub(l);p=(p=p.redIAdd(p)).redIAdd(p);var a=this.y.redMul(h.redMul(o.redISub(h)).redISub(u.redMul(s)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);var f=this.z.redAdd(u).redSqr().redISub(t).redISub(s);return this.curve.jpoint(p,a,f)},JPoint.prototype.mul=function mul(r,e){return r=new BN(r,e),this.curve._wnafMul(this,r)},JPoint.prototype.eq=function eq(r){if("affine"===r.type)return this.eq(r.toJ());if(this===r)return!0;var e=this.z.redSqr(),t=r.z.redSqr();if(0!==this.x.redMul(t).redISub(r.x.redMul(e)).cmpn(0))return!1;var d=e.redMul(this.z),i=t.redMul(r.z);return 0===this.y.redMul(i).redISub(r.y.redMul(d)).cmpn(0)},JPoint.prototype.eqXToP=function eqXToP(r){var e=this.z.redSqr(),t=r.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(t))return!0;for(var d=r.clone(),i=this.curve.redN.redMul(e);;){if(d.iadd(this.curve.n),d.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}return!1},JPoint.prototype.inspect=function inspect(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function isInfinity(){return 0===this.z.cmpn(0)};

    },{"../../elliptic":121,"../curve":124,"bn.js":45,"inherits":159}],127:[function(require,module,exports){
        "use strict";var pre,curves=exports,hash=require("hash.js"),elliptic=require("../elliptic"),assert=elliptic.utils.assert;function PresetCurve(f){"short"===f.type?this.curve=new elliptic.curve.short(f):"edwards"===f.type?this.curve=new elliptic.curve.edwards(f):this.curve=new elliptic.curve.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,assert(this.g.validate(),"Invalid curve"),assert(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function defineCurve(f,e){Object.defineProperty(curves,f,{configurable:!0,enumerable:!0,get:function(){var a=new PresetCurve(e);return Object.defineProperty(curves,f,{configurable:!0,enumerable:!0,value:a}),a}})}curves.PresetCurve=PresetCurve,defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:!1,g:["9"]}),defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{pre=require("./precomputed/secp256k1")}catch(f){pre=void 0}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pre]});

    },{"../elliptic":121,"./precomputed/secp256k1":134,"hash.js":145}],128:[function(require,module,exports){
        "use strict";var BN=require("bn.js"),HmacDRBG=require("hmac-drbg"),elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert,KeyPair=require("./key"),Signature=require("./signature");function EC(e){if(!(this instanceof EC))return new EC(e);"string"==typeof e&&(assert(elliptic.curves.hasOwnProperty(e),"Unknown curve "+e),e=elliptic.curves[e]),e instanceof elliptic.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}module.exports=EC,EC.prototype.keyPair=function keyPair(e){return new KeyPair(this,e)},EC.prototype.keyFromPrivate=function keyFromPrivate(e,t){return KeyPair.fromPrivate(this,e,t)},EC.prototype.keyFromPublic=function keyFromPublic(e,t){return KeyPair.fromPublic(this,e,t)},EC.prototype.genKeyPair=function genKeyPair(e){e||(e={});for(var t=new HmacDRBG({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||elliptic.rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new BN(2));;){var i=new BN(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},EC.prototype._truncateToN=function truncateToN(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},EC.prototype.sign=function sign(e,t,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new BN(e,16));for(var i=this.n.byteLength(),s=t.getPrivate().toArray("be",i),u=e.toArray("be",i),o=new HmacDRBG({hash:this.hash,entropy:s,nonce:u,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new BN(1)),a=0;;a++){var h=n.k?n.k(a):new BN(o.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(c)>=0)){var p=this.g.mul(h);if(!p.isInfinity()){var m=p.getX(),v=m.umod(this.n);if(0!==v.cmpn(0)){var y=h.invm(this.n).mul(v.mul(t.getPrivate()).iadd(e));if(0!==(y=y.umod(this.n)).cmpn(0)){var l=(p.getY().isOdd()?1:0)|(0!==m.cmp(v)?2:0);return n.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),l^=1),new Signature({r:v,s:y,recoveryParam:l})}}}}}},EC.prototype.verify=function verify(e,t,r,n){e=this._truncateToN(new BN(e,16)),r=this.keyFromPublic(r,n);var i=(t=new Signature(t,"hex")).r,s=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var u,o=s.invm(this.n),c=o.mul(e).umod(this.n),a=o.mul(i).umod(this.n);return this.curve._maxwellTrick?!(u=this.g.jmulAdd(c,r.getPublic(),a)).isInfinity()&&u.eqXToP(i):!(u=this.g.mulAdd(c,r.getPublic(),a)).isInfinity()&&0===u.getX().umod(this.n).cmp(i)},EC.prototype.recoverPubKey=function(e,t,r,n){assert((3&r)===r,"The recovery param is more than two bits"),t=new Signature(t,n);var i=this.n,s=new BN(e),u=t.r,o=t.s,c=1&r,a=r>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&a)throw new Error("Unable to find sencond key candinate");u=a?this.curve.pointFromX(u.add(this.curve.n),c):this.curve.pointFromX(u,c);var h=t.r.invm(i),p=i.sub(s).mul(h).umod(i),m=o.mul(h).umod(i);return this.g.mulAdd(p,u,m)},EC.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new Signature(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};

    },{"../../elliptic":121,"./key":129,"./signature":130,"bn.js":45,"hmac-drbg":157}],129:[function(require,module,exports){
        "use strict";var BN=require("bn.js"),elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert;function KeyPair(i,t){this.ec=i,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}module.exports=KeyPair,KeyPair.fromPublic=function fromPublic(i,t,e){return t instanceof KeyPair?t:new KeyPair(i,{pub:t,pubEnc:e})},KeyPair.fromPrivate=function fromPrivate(i,t,e){return t instanceof KeyPair?t:new KeyPair(i,{priv:t,privEnc:e})},KeyPair.prototype.validate=function validate(){var i=this.getPublic();return i.isInfinity()?{result:!1,reason:"Invalid public key"}:i.validate()?i.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function getPublic(i,t){return"string"==typeof i&&(t=i,i=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,i):this.pub},KeyPair.prototype.getPrivate=function getPrivate(i){return"hex"===i?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function _importPrivate(i,t){this.priv=new BN(i,t||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function _importPublic(i,t){if(i.x||i.y)return"mont"===this.ec.curve.type?assert(i.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||assert(i.x&&i.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(i.x,i.y));this.pub=this.ec.curve.decodePoint(i,t)},KeyPair.prototype.derive=function derive(i){return i.mul(this.priv).getX()},KeyPair.prototype.sign=function sign(i,t,e){return this.ec.sign(i,this,t,e)},KeyPair.prototype.verify=function verify(i,t){return this.ec.verify(i,t,this)},KeyPair.prototype.inspect=function inspect(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};

    },{"../../elliptic":121,"bn.js":45}],130:[function(require,module,exports){
        "use strict";var BN=require("bn.js"),elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert;function Signature(t,r){if(t instanceof Signature)return t;this._importDER(t,r)||(assert(t.r&&t.s,"Signature without r or s"),this.r=new BN(t.r,16),this.s=new BN(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function Position(){this.place=0}function getLength(t,r){var e=t[r.place++];if(!(128&e))return e;for(var n=15&e,i=0,a=0,c=r.place;a<n;a++,c++)i<<=8,i|=t[c];return r.place=c,i}function rmPadding(t){for(var r=0,e=t.length-1;!t[r]&&!(128&t[r+1])&&r<e;)r++;return 0===r?t:t.slice(r)}function constructLength(t,r){if(r<128)t.push(r);else{var e=1+(Math.log(r)/Math.LN2>>>3);for(t.push(128|e);--e;)t.push(r>>>(e<<3)&255);t.push(r)}}module.exports=Signature,Signature.prototype._importDER=function _importDER(t,r){t=utils.toArray(t,r);var e=new Position;if(48!==t[e.place++])return!1;if(getLength(t,e)+e.place!==t.length)return!1;if(2!==t[e.place++])return!1;var n=getLength(t,e),i=t.slice(e.place,n+e.place);if(e.place+=n,2!==t[e.place++])return!1;var a=getLength(t,e);if(t.length!==a+e.place)return!1;var c=t.slice(e.place,a+e.place);return 0===i[0]&&128&i[1]&&(i=i.slice(1)),0===c[0]&&128&c[1]&&(c=c.slice(1)),this.r=new BN(i),this.s=new BN(c),this.recoveryParam=null,!0},Signature.prototype.toDER=function toDER(t){var r=this.r.toArray(),e=this.s.toArray();for(128&r[0]&&(r=[0].concat(r)),128&e[0]&&(e=[0].concat(e)),r=rmPadding(r),e=rmPadding(e);!(e[0]||128&e[1]);)e=e.slice(1);var n=[2];constructLength(n,r.length),(n=n.concat(r)).push(2),constructLength(n,e.length);var i=n.concat(e),a=[48];return constructLength(a,i.length),a=a.concat(i),utils.encode(a,t)};

    },{"../../elliptic":121,"bn.js":45}],131:[function(require,module,exports){
        "use strict";var hash=require("hash.js"),elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert,parseBytes=utils.parseBytes,KeyPair=require("./key"),Signature=require("./signature");function EDDSA(t){if(assert("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(t);t=elliptic.curves[t].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=hash.sha512}module.exports=EDDSA,EDDSA.prototype.sign=function sign(t,e){t=parseBytes(t);var i=this.keyFromSecret(e),n=this.hashInt(i.messagePrefix(),t),r=this.g.mul(n),s=this.encodePoint(r),o=this.hashInt(s,i.pubBytes(),t).mul(i.priv()),u=n.add(o).umod(this.curve.n);return this.makeSignature({R:r,S:u,Rencoded:s})},EDDSA.prototype.verify=function verify(t,e,i){t=parseBytes(t),e=this.makeSignature(e);var n=this.keyFromPublic(i),r=this.hashInt(e.Rencoded(),n.pubBytes(),t),s=this.g.mul(e.S());return e.R().add(n.pub().mul(r)).eq(s)},EDDSA.prototype.hashInt=function hashInt(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return utils.intFromLE(t.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function keyFromPublic(t){return KeyPair.fromPublic(this,t)},EDDSA.prototype.keyFromSecret=function keyFromSecret(t){return KeyPair.fromSecret(this,t)},EDDSA.prototype.makeSignature=function makeSignature(t){return t instanceof Signature?t:new Signature(this,t)},EDDSA.prototype.encodePoint=function encodePoint(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},EDDSA.prototype.decodePoint=function decodePoint(t){var e=(t=utils.parseBytes(t)).length-1,i=t.slice(0,e).concat(-129&t[e]),n=0!=(128&t[e]),r=utils.intFromLE(i);return this.curve.pointFromY(r,n)},EDDSA.prototype.encodeInt=function encodeInt(t){return t.toArray("le",this.encodingLength)},EDDSA.prototype.decodeInt=function decodeInt(t){return utils.intFromLE(t)},EDDSA.prototype.isPoint=function isPoint(t){return t instanceof this.pointClass};

    },{"../../elliptic":121,"./key":132,"./signature":133,"hash.js":145}],132:[function(require,module,exports){
        "use strict";var elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert,parseBytes=utils.parseBytes,cachedProperty=utils.cachedProperty;function KeyPair(e,t){this.eddsa=e,this._secret=parseBytes(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=parseBytes(t.pub)}KeyPair.fromPublic=function fromPublic(e,t){return t instanceof KeyPair?t:new KeyPair(e,{pub:t})},KeyPair.fromSecret=function fromSecret(e,t){return t instanceof KeyPair?t:new KeyPair(e,{secret:t})},KeyPair.prototype.secret=function secret(){return this._secret},cachedProperty(KeyPair,"pubBytes",function pubBytes(){return this.eddsa.encodePoint(this.pub())}),cachedProperty(KeyPair,"pub",function pub(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),cachedProperty(KeyPair,"privBytes",function privBytes(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i}),cachedProperty(KeyPair,"priv",function priv(){return this.eddsa.decodeInt(this.privBytes())}),cachedProperty(KeyPair,"hash",function hash(){return this.eddsa.hash().update(this.secret()).digest()}),cachedProperty(KeyPair,"messagePrefix",function messagePrefix(){return this.hash().slice(this.eddsa.encodingLength)}),KeyPair.prototype.sign=function sign(e){return assert(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},KeyPair.prototype.verify=function verify(e,t){return this.eddsa.verify(e,t,this)},KeyPair.prototype.getSecret=function getSecret(e){return assert(this._secret,"KeyPair is public only"),utils.encode(this.secret(),e)},KeyPair.prototype.getPublic=function getPublic(e){return utils.encode(this.pubBytes(),e)},module.exports=KeyPair;

    },{"../../elliptic":121}],133:[function(require,module,exports){
        "use strict";var BN=require("bn.js"),elliptic=require("../../elliptic"),utils=elliptic.utils,assert=utils.assert,cachedProperty=utils.cachedProperty,parseBytes=utils.parseBytes;function Signature(e,t){this.eddsa=e,"object"!=typeof t&&(t=parseBytes(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),assert(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof BN&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}cachedProperty(Signature,"S",function S(){return this.eddsa.decodeInt(this.Sencoded())}),cachedProperty(Signature,"R",function R(){return this.eddsa.decodePoint(this.Rencoded())}),cachedProperty(Signature,"Rencoded",function Rencoded(){return this.eddsa.encodePoint(this.R())}),cachedProperty(Signature,"Sencoded",function Sencoded(){return this.eddsa.encodeInt(this.S())}),Signature.prototype.toBytes=function toBytes(){return this.Rencoded().concat(this.Sencoded())},Signature.prototype.toHex=function toHex(){return utils.encode(this.toBytes(),"hex").toUpperCase()},module.exports=Signature;

    },{"../../elliptic":121,"bn.js":45}],134:[function(require,module,exports){
        module.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}};

    },{}],135:[function(require,module,exports){
        "use strict";var utils=exports,BN=require("bn.js"),minAssert=require("minimalistic-assert"),minUtils=require("minimalistic-crypto-utils");function getNAF(t,r){for(var e=[],i=1<<r+1,n=t.clone();n.cmpn(1)>=0;){var s;if(n.isOdd()){var u=n.andln(i-1);s=u>(i>>1)-1?(i>>1)-u:u,n.isubn(s)}else s=0;e.push(s);for(var l=0!==n.cmpn(0)&&0===n.andln(i-1)?r+1:1,o=1;o<l;o++)e.push(0);n.iushrn(l)}return e}function getJSF(t,r){var e=[[],[]];t=t.clone(),r=r.clone();for(var i=0,n=0;t.cmpn(-i)>0||r.cmpn(-n)>0;){var s,u,l,o=t.andln(3)+i&3,a=r.andln(3)+n&3;if(3===o&&(o=-1),3===a&&(a=-1),0==(1&o))s=0;else s=3!==(l=t.andln(7)+i&7)&&5!==l||2!==a?o:-o;if(e[0].push(s),0==(1&a))u=0;else u=3!==(l=r.andln(7)+n&7)&&5!==l||2!==o?a:-a;e[1].push(u),2*i===s+1&&(i=1-i),2*n===u+1&&(n=1-n),t.iushrn(1),r.iushrn(1)}return e}function cachedProperty(t,r,e){var i="_"+r;t.prototype[r]=function cachedProperty(){return void 0!==this[i]?this[i]:this[i]=e.call(this)}}function parseBytes(t){return"string"==typeof t?utils.toArray(t,"hex"):t}function intFromLE(t){return new BN(t,"hex","le")}utils.assert=minAssert,utils.toArray=minUtils.toArray,utils.zero2=minUtils.zero2,utils.toHex=minUtils.toHex,utils.encode=minUtils.encode,utils.getNAF=getNAF,utils.getJSF=getJSF,utils.cachedProperty=cachedProperty,utils.parseBytes=parseBytes,utils.intFromLE=intFromLE;

    },{"bn.js":45,"minimalistic-assert":165,"minimalistic-crypto-utils":166}],136:[function(require,module,exports){
        module.exports={
            "_args": [
                [
                    "elliptic@6.4.0",
                    "/tmp/build_2cbbd82a91b5c508932ac5a6db627307"
                ]
            ],
            "_from": "elliptic@6.4.0",
            "_id": "elliptic@6.4.0",
            "_inBundle": false,
            "_integrity": "sha1-ysmvh2LIWDYYcAPI3+GT5eLq5d8=",
            "_location": "/elliptic",
            "_phantomChildren": {},
            "_requested": {
                "type": "version",
                "registry": true,
                "raw": "elliptic@6.4.0",
                "name": "elliptic",
                "escapedName": "elliptic",
                "rawSpec": "6.4.0",
                "saveSpec": null,
                "fetchSpec": "6.4.0"
            },
            "_requiredBy": [
                "/browserify-sign",
                "/create-ecdh",
                "/jwk-to-pem"
            ],
            "_resolved": "https://registry.npmjs.org/elliptic/-/elliptic-6.4.0.tgz",
            "_spec": "6.4.0",
            "_where": "/tmp/build_2cbbd82a91b5c508932ac5a6db627307",
            "author": {
                "name": "Fedor Indutny",
                "email": "fedor@indutny.com"
            },
            "bugs": {
                "url": "https://github.com/indutny/elliptic/issues"
            },
            "dependencies": {
                "bn.js": "^4.4.0",
                "brorand": "^1.0.1",
                "hash.js": "^1.0.0",
                "hmac-drbg": "^1.0.0",
                "inherits": "^2.0.1",
                "minimalistic-assert": "^1.0.0",
                "minimalistic-crypto-utils": "^1.0.0"
            },
            "description": "EC cryptography",
            "devDependencies": {
                "brfs": "^1.4.3",
                "coveralls": "^2.11.3",
                "grunt": "^0.4.5",
                "grunt-browserify": "^5.0.0",
                "grunt-cli": "^1.2.0",
                "grunt-contrib-connect": "^1.0.0",
                "grunt-contrib-copy": "^1.0.0",
                "grunt-contrib-uglify": "^1.0.1",
                "grunt-mocha-istanbul": "^3.0.1",
                "grunt-saucelabs": "^8.6.2",
                "istanbul": "^0.4.2",
                "jscs": "^2.9.0",
                "jshint": "^2.6.0",
                "mocha": "^2.1.0"
            },
            "files": [
                "lib"
            ],
            "homepage": "https://github.com/indutny/elliptic",
            "keywords": [
                "EC",
                "Elliptic",
                "curve",
                "Cryptography"
            ],
            "license": "MIT",
            "main": "lib/elliptic.js",
            "name": "elliptic",
            "repository": {
                "type": "git",
                "url": "git+ssh://git@github.com/indutny/elliptic.git"
            },
            "scripts": {
                "jscs": "jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",
                "jshint": "jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",
                "lint": "npm run jscs && npm run jshint",
                "test": "npm run lint && npm run unit",
                "unit": "istanbul test _mocha --reporter=spec test/index.js",
                "version": "grunt dist && git add dist/"
            },
            "version": "6.4.0"
        }

    },{}],137:[function(require,module,exports){
        var objectCreate=Object.create||objectCreatePolyfill,objectKeys=Object.keys||objectKeysPolyfill,bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=objectCreate(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0;var hasDefineProperty,defaultMaxListeners=10;try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),hasDefineProperty=0===o.x}catch(e){hasDefineProperty=!1}function $getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function emitNone(e,t,n){if(t)e.call(n);else for(var r=e.length,i=arrayClone(e,r),s=0;s<r;++s)i[s].call(n)}function emitOne(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=arrayClone(e,i),o=0;o<i;++o)s[o].call(n,r)}function emitTwo(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,o=arrayClone(e,s),a=0;a<s;++a)o[a].call(n,r,i)}function emitThree(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var o=e.length,a=arrayClone(e,o),l=0;l<o;++l)a[l].call(n,r,i,s)}function emitMany(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=arrayClone(e,i),o=0;o<i;++o)s[o].apply(n,r)}function _addListener(e,t,n,r){var i,s,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]):(s=e._events=objectCreate(null),e._eventsCount=0),o){if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=$getMaxListeners(e))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else o=s[t]=n,++e._eventsCount;return e}function onceWrapper(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function _onceWrap(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=bind.call(onceWrapper,r);return i.listener=n,r.wrapFn=i,i}function _listeners(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?unwrapListeners(i):arrayClone(i,i.length):[]}function listenerCount(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function spliceOne(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function arrayClone(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function unwrapListeners(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function objectCreatePolyfill(e){var t=function(){};return t.prototype=e,new t}function objectKeysPolyfill(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n}function functionBindPolyfill(e){var t=this;return function(){return t.apply(e,arguments)}}hasDefineProperty?Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=e}}):EventEmitter.defaultMaxListeners=defaultMaxListeners,EventEmitter.prototype.setMaxListeners=function setMaxListeners(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function emit(e){var t,n,r,i,s,o,a="error"===e;if(o=this._events)a=a&&null==o.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=o[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:emitNone(n,u,this);break;case 2:emitOne(n,u,this,arguments[1]);break;case 3:emitTwo(n,u,this,arguments[1],arguments[2]);break;case 4:emitThree(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];emitMany(n,u,this,i)}return!0},EventEmitter.prototype.addListener=function addListener(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function prependListener(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function once(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function prependOnceListener(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function removeListener(e,t){var n,r,i,s,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=objectCreate(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():spliceOne(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,o||t)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=objectCreate(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=objectCreate(null):delete n[e]),this;if(0===arguments.length){var i,s=objectKeys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=objectCreate(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},EventEmitter.prototype.listeners=function listeners(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function rawListeners(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};

    },{}],138:[function(require,module,exports){
        var Buffer=require("safe-buffer").Buffer,MD5=require("md5.js");function EVP_BytesToKey(e,f,r,t){if(Buffer.isBuffer(e)||(e=Buffer.from(e,"binary")),f&&(Buffer.isBuffer(f)||(f=Buffer.from(f,"binary")),8!==f.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var u=r/8,a=Buffer.alloc(u),l=Buffer.alloc(t||0),n=Buffer.alloc(0);u>0||t>0;){var i=new MD5;i.update(n),i.update(e),f&&i.update(f),n=i.digest();var o=0;if(u>0){var B=a.length-u;o=Math.min(u,n.length),n.copy(a,B,0,o),u-=o}if(o<n.length&&t>0){var h=l.length-t,s=Math.min(t,n.length-o);n.copy(l,h,o,o+s),t-=s}}return n.fill(0),{key:a,iv:l}}module.exports=EVP_BytesToKey;

    },{"md5.js":162,"safe-buffer":237}],139:[function(require,module,exports){
        var copy=require("./lib/").default;module.exports=copy;

    },{"./lib/":140}],140:[function(require,module,exports){
        "use strict";function copy(e,o){if("string"==typeof e&&window&&document){var t=document.createElement("textarea");document.body.appendChild(t),t.setAttribute("readonly",!0),t.style.position="absolute",t.style.left="-1000px",t.style.top=(window.scrollY||document.body.scrollTop)+"px",t.value=e,t.focus(),t.setSelectionRange(0,e.length);var n="function"==typeof document.execCommand&&document.execCommand("copy");return document.body.removeChild(t),n||("function"==typeof o?o(e):window.prompt("Copy",e)),n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=copy;

    },{}],141:[function(require,module,exports){
        "use strict";function makeEmptyFunction(t){return function(){return t}}var emptyFunction=function emptyFunction(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(t){return t},module.exports=emptyFunction;

    },{}],142:[function(require,module,exports){
        "use strict";var validateFormat=function validateFormat(e){};function invariant(e,r,n,i,a,o,t,d){if(validateFormat(r),!e){var l;if(void 0===r)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var v=[n,i,a,o,t,d],f=0;(l=new Error(r.replace(/%s/g,function(){return v[f++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}module.exports=invariant;

    },{}],143:[function(require,module,exports){
        "use strict";module.exports=function(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement};

    },{}],144:[function(require,module,exports){
        (function (Buffer){
            "use strict";var Transform=require("stream").Transform,inherits=require("inherits");function HashBase(t){Transform.call(this),this._block=new Buffer(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}inherits(HashBase,Transform),HashBase.prototype._transform=function(t,e,r){var s=null;try{"buffer"!==e&&(t=new Buffer(t,e)),this.update(t)}catch(t){s=t}r(s)},HashBase.prototype._flush=function(t){var e=null;try{this.push(this._digest())}catch(t){e=t}t(e)},HashBase.prototype.update=function(t,e){if(!Buffer.isBuffer(t)&&"string"!=typeof t)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");Buffer.isBuffer(t)||(t=new Buffer(t,e||"binary"));for(var r=this._block,s=0;this._blockOffset+t.length-s>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[s++];this._update(),this._blockOffset=0}for(;s<t.length;)r[this._blockOffset++]=t[s++];for(var o=0,a=8*t.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},HashBase.prototype._update=function(t){throw new Error("_update is not implemented")},HashBase.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();return void 0!==t&&(e=e.toString(t)),e},HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")},module.exports=HashBase;

        }).call(this,require("buffer").Buffer)
    },{"buffer":91,"inherits":159,"stream":250}],145:[function(require,module,exports){
        var hash=exports;hash.utils=require("./hash/utils"),hash.common=require("./hash/common"),hash.sha=require("./hash/sha"),hash.ripemd=require("./hash/ripemd"),hash.hmac=require("./hash/hmac"),hash.sha1=hash.sha.sha1,hash.sha256=hash.sha.sha256,hash.sha224=hash.sha.sha224,hash.sha384=hash.sha.sha384,hash.sha512=hash.sha.sha512,hash.ripemd160=hash.ripemd.ripemd160;

    },{"./hash/common":146,"./hash/hmac":147,"./hash/ripemd":148,"./hash/sha":149,"./hash/utils":156}],146:[function(require,module,exports){
        "use strict";var utils=require("./utils"),assert=require("minimalistic-assert");function BlockHash(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}exports.BlockHash=BlockHash,BlockHash.prototype.update=function update(t,i){if(t=utils.toArray(t,i),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var e=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-e,t.length),0===this.pending.length&&(this.pending=null),t=utils.join32(t,0,t.length-e,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},BlockHash.prototype.digest=function digest(t){return this.update(this._pad()),assert(null===this.pending),this._digest(t)},BlockHash.prototype._pad=function pad(){var t=this.pendingTotal,i=this._delta8,e=i-(t+this.padLength)%i,n=new Array(e+this.padLength);n[0]=128;for(var s=1;s<e;s++)n[s]=0;if(t<<=3,"big"===this.endian){for(var h=8;h<this.padLength;h++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=t>>>24&255,n[s++]=t>>>16&255,n[s++]=t>>>8&255,n[s++]=255&t}else for(n[s++]=255&t,n[s++]=t>>>8&255,n[s++]=t>>>16&255,n[s++]=t>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,h=8;h<this.padLength;h++)n[s++]=0;return n};

    },{"./utils":156,"minimalistic-assert":165}],147:[function(require,module,exports){
        "use strict";var utils=require("./utils"),assert=require("minimalistic-assert");function Hmac(t,i,e){if(!(this instanceof Hmac))return new Hmac(t,i,e);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(utils.toArray(i,e))}module.exports=Hmac,Hmac.prototype._init=function init(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),assert(t.length<=this.blockSize);for(var i=t.length;i<this.blockSize;i++)t.push(0);for(i=0;i<t.length;i++)t[i]^=54;for(this.inner=(new this.Hash).update(t),i=0;i<t.length;i++)t[i]^=106;this.outer=(new this.Hash).update(t)},Hmac.prototype.update=function update(t,i){return this.inner.update(t,i),this},Hmac.prototype.digest=function digest(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)};

    },{"./utils":156,"minimalistic-assert":165}],148:[function(require,module,exports){
        "use strict";var utils=require("./utils"),common=require("./common"),rotl32=utils.rotl32,sum32=utils.sum32,sum32_3=utils.sum32_3,sum32_4=utils.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(t,s,h,i){return t<=15?s^h^i:t<=31?s&h|~s&i:t<=47?(s|~h)^i:t<=63?s&i|h&~i:s^(h|~i)}function K(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}utils.inherits(RIPEMD160,BlockHash),exports.ripemd160=RIPEMD160,RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function update(t,h){for(var i=this.h[0],u=this.h[1],o=this.h[2],e=this.h[3],l=this.h[4],n=i,m=u,c=o,a=e,_=l,D=0;D<80;D++){var E=sum32(rotl32(sum32_4(i,f(D,u,o,e),t[r[D]+h],K(D)),s[D]),l);i=l,l=e,e=rotl32(o,10),o=u,u=E,E=sum32(rotl32(sum32_4(n,f(79-D,m,c,a),t[rh[D]+h],Kh(D)),sh[D]),_),n=_,_=a,a=rotl32(c,10),c=m,m=E}E=sum32_3(this.h[1],o,a),this.h[1]=sum32_3(this.h[2],e,_),this.h[2]=sum32_3(this.h[3],l,n),this.h[3]=sum32_3(this.h[4],i,m),this.h[4]=sum32_3(this.h[0],u,c),this.h[0]=E},RIPEMD160.prototype._digest=function digest(t){return"hex"===t?utils.toHex32(this.h,"little"):utils.split32(this.h,"little")};var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];

    },{"./common":146,"./utils":156}],149:[function(require,module,exports){
        "use strict";exports.sha1=require("./sha/1"),exports.sha224=require("./sha/224"),exports.sha256=require("./sha/256"),exports.sha384=require("./sha/384"),exports.sha512=require("./sha/512");

    },{"./sha/1":150,"./sha/224":151,"./sha/256":152,"./sha/384":153,"./sha/512":154}],150:[function(require,module,exports){
        "use strict";var utils=require("../utils"),common=require("../common"),shaCommon=require("./common"),rotl32=utils.rotl32,sum32=utils.sum32,sum32_5=utils.sum32_5,ft_1=shaCommon.ft_1,BlockHash=common.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils.inherits(SHA1,BlockHash),module.exports=SHA1,SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function _update(t,s){for(var h=this.W,i=0;i<16;i++)h[i]=t[s+i];for(;i<h.length;i++)h[i]=rotl32(h[i-3]^h[i-8]^h[i-14]^h[i-16],1);var o=this.h[0],u=this.h[1],r=this.h[2],e=this.h[3],l=this.h[4];for(i=0;i<h.length;i++){var m=~~(i/20),n=sum32_5(rotl32(o,5),ft_1(m,u,r,e),l,h[i],sha1_K[m]);l=e,e=r,r=rotl32(u,30),u=o,o=n}this.h[0]=sum32(this.h[0],o),this.h[1]=sum32(this.h[1],u),this.h[2]=sum32(this.h[2],r),this.h[3]=sum32(this.h[3],e),this.h[4]=sum32(this.h[4],l)},SHA1.prototype._digest=function digest(t){return"hex"===t?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")};

    },{"../common":146,"../utils":156,"./common":155}],151:[function(require,module,exports){
        "use strict";var utils=require("../utils"),SHA256=require("./256");function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils.inherits(SHA224,SHA256),module.exports=SHA224,SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function digest(t){return"hex"===t?utils.toHex32(this.h.slice(0,7),"big"):utils.split32(this.h.slice(0,7),"big")};

    },{"../utils":156,"./256":152}],152:[function(require,module,exports){
        "use strict";var utils=require("../utils"),common=require("../common"),shaCommon=require("./common"),assert=require("minimalistic-assert"),sum32=utils.sum32,sum32_4=utils.sum32_4,sum32_5=utils.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash=common.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256(){if(!(this instanceof SHA256))return new SHA256;BlockHash.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils.inherits(SHA256,BlockHash),module.exports=SHA256,SHA256.blockSize=512,SHA256.outSize=256,SHA256.hmacStrength=192,SHA256.padLength=64,SHA256.prototype._update=function _update(s,h){for(var t=this.W,i=0;i<16;i++)t[i]=s[h+i];for(;i<t.length;i++)t[i]=sum32_4(g1_256(t[i-2]),t[i-7],g0_256(t[i-15]),t[i-16]);var m=this.h[0],o=this.h[1],u=this.h[2],e=this.h[3],a=this.h[4],n=this.h[5],r=this.h[6],_=this.h[7];for(assert(this.k.length===t.length),i=0;i<t.length;i++){var l=sum32_5(_,s1_256(a),ch32(a,n,r),this.k[i],t[i]),c=sum32(s0_256(m),maj32(m,o,u));_=r,r=n,n=a,a=sum32(e,l),e=u,u=o,o=m,m=sum32(l,c)}this.h[0]=sum32(this.h[0],m),this.h[1]=sum32(this.h[1],o),this.h[2]=sum32(this.h[2],u),this.h[3]=sum32(this.h[3],e),this.h[4]=sum32(this.h[4],a),this.h[5]=sum32(this.h[5],n),this.h[6]=sum32(this.h[6],r),this.h[7]=sum32(this.h[7],_)},SHA256.prototype._digest=function digest(s){return"hex"===s?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")};

    },{"../common":146,"../utils":156,"./common":155,"minimalistic-assert":165}],153:[function(require,module,exports){
        "use strict";var utils=require("../utils"),SHA512=require("./512");function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils.inherits(SHA384,SHA512),module.exports=SHA384,SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function digest(t){return"hex"===t?utils.toHex32(this.h.slice(0,12),"big"):utils.split32(this.h.slice(0,12),"big")};

    },{"../utils":156,"./512":154}],154:[function(require,module,exports){
        "use strict";var utils=require("../utils"),common=require("../common"),assert=require("minimalistic-assert"),rotr64_hi=utils.rotr64_hi,rotr64_lo=utils.rotr64_lo,shr64_hi=utils.shr64_hi,shr64_lo=utils.shr64_lo,sum64=utils.sum64,sum64_hi=utils.sum64_hi,sum64_lo=utils.sum64_lo,sum64_4_hi=utils.sum64_4_hi,sum64_4_lo=utils.sum64_4_lo,sum64_5_hi=utils.sum64_5_hi,sum64_5_lo=utils.sum64_5_lo,BlockHash=common.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512(){if(!(this instanceof SHA512))return new SHA512;BlockHash.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}function ch64_hi(t,h,r,i,s){var _=t&r^~t&s;return _<0&&(_+=4294967296),_}function ch64_lo(t,h,r,i,s,_){var o=h&i^~h&_;return o<0&&(o+=4294967296),o}function maj64_hi(t,h,r,i,s){var _=t&r^t&s^r&s;return _<0&&(_+=4294967296),_}function maj64_lo(t,h,r,i,s,_){var o=h&i^h&_^i&_;return o<0&&(o+=4294967296),o}function s0_512_hi(t,h){var r=rotr64_hi(t,h,28)^rotr64_hi(h,t,2)^rotr64_hi(h,t,7);return r<0&&(r+=4294967296),r}function s0_512_lo(t,h){var r=rotr64_lo(t,h,28)^rotr64_lo(h,t,2)^rotr64_lo(h,t,7);return r<0&&(r+=4294967296),r}function s1_512_hi(t,h){var r=rotr64_hi(t,h,14)^rotr64_hi(t,h,18)^rotr64_hi(h,t,9);return r<0&&(r+=4294967296),r}function s1_512_lo(t,h){var r=rotr64_lo(t,h,14)^rotr64_lo(t,h,18)^rotr64_lo(h,t,9);return r<0&&(r+=4294967296),r}function g0_512_hi(t,h){var r=rotr64_hi(t,h,1)^rotr64_hi(t,h,8)^shr64_hi(t,h,7);return r<0&&(r+=4294967296),r}function g0_512_lo(t,h){var r=rotr64_lo(t,h,1)^rotr64_lo(t,h,8)^shr64_lo(t,h,7);return r<0&&(r+=4294967296),r}function g1_512_hi(t,h){var r=rotr64_hi(t,h,19)^rotr64_hi(h,t,29)^shr64_hi(t,h,6);return r<0&&(r+=4294967296),r}function g1_512_lo(t,h){var r=rotr64_lo(t,h,19)^rotr64_lo(h,t,29)^shr64_lo(t,h,6);return r<0&&(r+=4294967296),r}utils.inherits(SHA512,BlockHash),module.exports=SHA512,SHA512.blockSize=1024,SHA512.outSize=512,SHA512.hmacStrength=192,SHA512.padLength=128,SHA512.prototype._prepareBlock=function _prepareBlock(t,h){for(var r=this.W,i=0;i<32;i++)r[i]=t[h+i];for(;i<r.length;i+=2){var s=g1_512_hi(r[i-4],r[i-3]),_=g1_512_lo(r[i-4],r[i-3]),o=r[i-14],u=r[i-13],l=g0_512_hi(r[i-30],r[i-29]),n=g0_512_lo(r[i-30],r[i-29]),e=r[i-32],m=r[i-31];r[i]=sum64_4_hi(s,_,o,u,l,n,e,m),r[i+1]=sum64_4_lo(s,_,o,u,l,n,e,m)}},SHA512.prototype._update=function _update(t,h){this._prepareBlock(t,h);var r=this.W,i=this.h[0],s=this.h[1],_=this.h[2],o=this.h[3],u=this.h[4],l=this.h[5],n=this.h[6],e=this.h[7],m=this.h[8],a=this.h[9],c=this.h[10],f=this.h[11],v=this.h[12],g=this.h[13],p=this.h[14],H=this.h[15];assert(this.k.length===r.length);for(var S=0;S<r.length;S+=2){var A=p,k=H,B=s1_512_hi(m,a),d=s1_512_lo(m,a),j=ch64_hi(m,a,c,f,v,g),y=ch64_lo(m,a,c,f,v,g),b=this.k[S],q=this.k[S+1],x=r[S],W=r[S+1],w=sum64_5_hi(A,k,B,d,j,y,b,q,x,W),z=sum64_5_lo(A,k,B,d,j,y,b,q,x,W);A=s0_512_hi(i,s),k=s0_512_lo(i,s),B=maj64_hi(i,s,_,o,u,l),d=maj64_lo(i,s,_,o,u,l);var K=sum64_hi(A,k,B,d),L=sum64_lo(A,k,B,d);p=v,H=g,v=c,g=f,c=m,f=a,m=sum64_hi(n,e,w,z),a=sum64_lo(e,e,w,z),n=u,e=l,u=_,l=o,_=i,o=s,i=sum64_hi(w,z,K,L),s=sum64_lo(w,z,K,L)}sum64(this.h,0,i,s),sum64(this.h,2,_,o),sum64(this.h,4,u,l),sum64(this.h,6,n,e),sum64(this.h,8,m,a),sum64(this.h,10,c,f),sum64(this.h,12,v,g),sum64(this.h,14,p,H)},SHA512.prototype._digest=function digest(t){return"hex"===t?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")};

    },{"../common":146,"../utils":156,"minimalistic-assert":165}],155:[function(require,module,exports){
        "use strict";var utils=require("../utils"),rotr32=utils.rotr32;function ft_1(r,t,o,n){return 0===r?ch32(t,o,n):1===r||3===r?p32(t,o,n):2===r?maj32(t,o,n):void 0}function ch32(r,t,o){return r&t^~r&o}function maj32(r,t,o){return r&t^r&o^t&o}function p32(r,t,o){return r^t^o}function s0_256(r){return rotr32(r,2)^rotr32(r,13)^rotr32(r,22)}function s1_256(r){return rotr32(r,6)^rotr32(r,11)^rotr32(r,25)}function g0_256(r){return rotr32(r,7)^rotr32(r,18)^r>>>3}function g1_256(r){return rotr32(r,17)^rotr32(r,19)^r>>>10}exports.ft_1=ft_1,exports.ch32=ch32,exports.maj32=maj32,exports.p32=p32,exports.s0_256=s0_256,exports.s1_256=s1_256,exports.g0_256=g0_256,exports.g1_256=g1_256;

    },{"../utils":156}],156:[function(require,module,exports){
        "use strict";var assert=require("minimalistic-assert"),inherits=require("inherits");function toArray(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];var o=[];if("string"==typeof r)if(t){if("hex"===t)for((r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r="0"+r),n=0;n<r.length;n+=2)o.push(parseInt(r[n]+r[n+1],16))}else for(var n=0;n<r.length;n++){var e=r.charCodeAt(n),s=e>>8,u=255&e;s?o.push(s,u):o.push(u)}else for(n=0;n<r.length;n++)o[n]=0|r[n];return o}function toHex(r){for(var t="",o=0;o<r.length;o++)t+=zero2(r[o].toString(16));return t}function htonl(r){return(r>>>24|r>>>8&65280|r<<8&16711680|(255&r)<<24)>>>0}function toHex32(r,t){for(var o="",n=0;n<r.length;n++){var e=r[n];"little"===t&&(e=htonl(e)),o+=zero8(e.toString(16))}return o}function zero2(r){return 1===r.length?"0"+r:r}function zero8(r){return 7===r.length?"0"+r:6===r.length?"00"+r:5===r.length?"000"+r:4===r.length?"0000"+r:3===r.length?"00000"+r:2===r.length?"000000"+r:1===r.length?"0000000"+r:r}function join32(r,t,o,n){var e=o-t;assert(e%4==0);for(var s=new Array(e/4),u=0,i=t;u<s.length;u++,i+=4){var h;h="big"===n?r[i]<<24|r[i+1]<<16|r[i+2]<<8|r[i+3]:r[i+3]<<24|r[i+2]<<16|r[i+1]<<8|r[i],s[u]=h>>>0}return s}function split32(r,t){for(var o=new Array(4*r.length),n=0,e=0;n<r.length;n++,e+=4){var s=r[n];"big"===t?(o[e]=s>>>24,o[e+1]=s>>>16&255,o[e+2]=s>>>8&255,o[e+3]=255&s):(o[e+3]=s>>>24,o[e+2]=s>>>16&255,o[e+1]=s>>>8&255,o[e]=255&s)}return o}function rotr32(r,t){return r>>>t|r<<32-t}function rotl32(r,t){return r<<t|r>>>32-t}function sum32(r,t){return r+t>>>0}function sum32_3(r,t,o){return r+t+o>>>0}function sum32_4(r,t,o,n){return r+t+o+n>>>0}function sum32_5(r,t,o,n,e){return r+t+o+n+e>>>0}function sum64(r,t,o,n){var e=r[t],s=n+r[t+1]>>>0,u=(s<n?1:0)+o+e;r[t]=u>>>0,r[t+1]=s}function sum64_hi(r,t,o,n){return(t+n>>>0<t?1:0)+r+o>>>0}function sum64_lo(r,t,o,n){return t+n>>>0}function sum64_4_hi(r,t,o,n,e,s,u,i){var h=0,_=t;return h+=(_=_+n>>>0)<t?1:0,h+=(_=_+s>>>0)<s?1:0,r+o+e+u+(h+=(_=_+i>>>0)<i?1:0)>>>0}function sum64_4_lo(r,t,o,n,e,s,u,i){return t+n+s+i>>>0}function sum64_5_hi(r,t,o,n,e,s,u,i,h,_){var l=0,f=t;return l+=(f=f+n>>>0)<t?1:0,l+=(f=f+s>>>0)<s?1:0,l+=(f=f+i>>>0)<i?1:0,r+o+e+u+h+(l+=(f=f+_>>>0)<_?1:0)>>>0}function sum64_5_lo(r,t,o,n,e,s,u,i,h,_){return t+n+s+i+_>>>0}function rotr64_hi(r,t,o){return(t<<32-o|r>>>o)>>>0}function rotr64_lo(r,t,o){return(r<<32-o|t>>>o)>>>0}function shr64_hi(r,t,o){return r>>>o}function shr64_lo(r,t,o){return(r<<32-o|t>>>o)>>>0}exports.inherits=inherits,exports.toArray=toArray,exports.toHex=toHex,exports.htonl=htonl,exports.toHex32=toHex32,exports.zero2=zero2,exports.zero8=zero8,exports.join32=join32,exports.split32=split32,exports.rotr32=rotr32,exports.rotl32=rotl32,exports.sum32=sum32,exports.sum32_3=sum32_3,exports.sum32_4=sum32_4,exports.sum32_5=sum32_5,exports.sum64=sum64,exports.sum64_hi=sum64_hi,exports.sum64_lo=sum64_lo,exports.sum64_4_hi=sum64_4_hi,exports.sum64_4_lo=sum64_4_lo,exports.sum64_5_hi=sum64_5_hi,exports.sum64_5_lo=sum64_5_lo,exports.rotr64_hi=rotr64_hi,exports.rotr64_lo=rotr64_lo,exports.shr64_hi=shr64_hi,exports.shr64_lo=shr64_lo;

    },{"inherits":159,"minimalistic-assert":165}],157:[function(require,module,exports){
        "use strict";var hash=require("hash.js"),utils=require("minimalistic-crypto-utils"),assert=require("minimalistic-assert");function HmacDRBG(t){if(!(this instanceof HmacDRBG))return new HmacDRBG(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils.toArray(t.entropy,t.entropyEnc||"hex"),i=utils.toArray(t.nonce,t.nonceEnc||"hex"),s=utils.toArray(t.pers,t.persEnc||"hex");assert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,i,s)}module.exports=HmacDRBG,HmacDRBG.prototype._init=function init(t,e,i){var s=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var h=0;h<this.V.length;h++)this.K[h]=0,this.V[h]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function hmac(){return new hash.hmac(this.hash,this.K)},HmacDRBG.prototype._update=function update(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function reseed(t,e,i,s){"string"!=typeof e&&(s=i,i=e,e=null),t=utils.toArray(t,e),i=utils.toArray(i,s),assert(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1},HmacDRBG.prototype.generate=function generate(t,e,i,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(s=i,i=e,e=null),i&&(i=utils.toArray(i,s||"hex"),this._update(i));for(var h=[];h.length<t;)this.V=this._hmac().update(this.V).digest(),h=h.concat(this.V);var r=h.slice(0,t);return this._update(i),this._reseed++,utils.encode(r,e)};

    },{"hash.js":145,"minimalistic-assert":165,"minimalistic-crypto-utils":166}],158:[function(require,module,exports){
        exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};

    },{}],159:[function(require,module,exports){
        "function"==typeof Object.create?module.exports=function inherits(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function inherits(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};

    },{}],160:[function(require,module,exports){
        function isBuffer(f){return!!f.constructor&&"function"==typeof f.constructor.isBuffer&&f.constructor.isBuffer(f)}function isSlowBuffer(f){return"function"==typeof f.readFloatLE&&"function"==typeof f.slice&&isBuffer(f.slice(0,0))}module.exports=function(f){return null!=f&&(isBuffer(f)||isSlowBuffer(f)||!!f._isBuffer)};

    },{}],161:[function(require,module,exports){
        var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};

    },{}],162:[function(require,module,exports){
        (function (Buffer){
            "use strict";var inherits=require("inherits"),HashBase=require("hash-base"),ARRAY16=new Array(16);function MD5(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function rotl(n,f){return n<<f|n>>>32-f}function fnF(n,f,t,i,s,h,e){return rotl(n+(f&t|~f&i)+s+h|0,e)+f|0}function fnG(n,f,t,i,s,h,e){return rotl(n+(f&i|t&~i)+s+h|0,e)+f|0}function fnH(n,f,t,i,s,h,e){return rotl(n+(f^t^i)+s+h|0,e)+f|0}function fnI(n,f,t,i,s,h,e){return rotl(n+(t^(f|~i))+s+h|0,e)+f|0}inherits(MD5,HashBase),MD5.prototype._update=function(){for(var n=ARRAY16,f=0;f<16;++f)n[f]=this._block.readInt32LE(4*f);var t=this._a,i=this._b,s=this._c,h=this._d;t=fnF(t,i,s,h,n[0],3614090360,7),h=fnF(h,t,i,s,n[1],3905402710,12),s=fnF(s,h,t,i,n[2],606105819,17),i=fnF(i,s,h,t,n[3],3250441966,22),t=fnF(t,i,s,h,n[4],4118548399,7),h=fnF(h,t,i,s,n[5],1200080426,12),s=fnF(s,h,t,i,n[6],2821735955,17),i=fnF(i,s,h,t,n[7],4249261313,22),t=fnF(t,i,s,h,n[8],1770035416,7),h=fnF(h,t,i,s,n[9],2336552879,12),s=fnF(s,h,t,i,n[10],4294925233,17),i=fnF(i,s,h,t,n[11],2304563134,22),t=fnF(t,i,s,h,n[12],1804603682,7),h=fnF(h,t,i,s,n[13],4254626195,12),s=fnF(s,h,t,i,n[14],2792965006,17),t=fnG(t,i=fnF(i,s,h,t,n[15],1236535329,22),s,h,n[1],4129170786,5),h=fnG(h,t,i,s,n[6],3225465664,9),s=fnG(s,h,t,i,n[11],643717713,14),i=fnG(i,s,h,t,n[0],3921069994,20),t=fnG(t,i,s,h,n[5],3593408605,5),h=fnG(h,t,i,s,n[10],38016083,9),s=fnG(s,h,t,i,n[15],3634488961,14),i=fnG(i,s,h,t,n[4],3889429448,20),t=fnG(t,i,s,h,n[9],568446438,5),h=fnG(h,t,i,s,n[14],3275163606,9),s=fnG(s,h,t,i,n[3],4107603335,14),i=fnG(i,s,h,t,n[8],1163531501,20),t=fnG(t,i,s,h,n[13],2850285829,5),h=fnG(h,t,i,s,n[2],4243563512,9),s=fnG(s,h,t,i,n[7],1735328473,14),t=fnH(t,i=fnG(i,s,h,t,n[12],2368359562,20),s,h,n[5],4294588738,4),h=fnH(h,t,i,s,n[8],2272392833,11),s=fnH(s,h,t,i,n[11],1839030562,16),i=fnH(i,s,h,t,n[14],4259657740,23),t=fnH(t,i,s,h,n[1],2763975236,4),h=fnH(h,t,i,s,n[4],1272893353,11),s=fnH(s,h,t,i,n[7],4139469664,16),i=fnH(i,s,h,t,n[10],3200236656,23),t=fnH(t,i,s,h,n[13],681279174,4),h=fnH(h,t,i,s,n[0],3936430074,11),s=fnH(s,h,t,i,n[3],3572445317,16),i=fnH(i,s,h,t,n[6],76029189,23),t=fnH(t,i,s,h,n[9],3654602809,4),h=fnH(h,t,i,s,n[12],3873151461,11),s=fnH(s,h,t,i,n[15],530742520,16),t=fnI(t,i=fnH(i,s,h,t,n[2],3299628645,23),s,h,n[0],4096336452,6),h=fnI(h,t,i,s,n[7],1126891415,10),s=fnI(s,h,t,i,n[14],2878612391,15),i=fnI(i,s,h,t,n[5],4237533241,21),t=fnI(t,i,s,h,n[12],1700485571,6),h=fnI(h,t,i,s,n[3],2399980690,10),s=fnI(s,h,t,i,n[10],4293915773,15),i=fnI(i,s,h,t,n[1],2240044497,21),t=fnI(t,i,s,h,n[8],1873313359,6),h=fnI(h,t,i,s,n[15],4264355552,10),s=fnI(s,h,t,i,n[6],2734768916,15),i=fnI(i,s,h,t,n[13],1309151649,21),t=fnI(t,i,s,h,n[4],4149444226,6),h=fnI(h,t,i,s,n[11],3174756917,10),s=fnI(s,h,t,i,n[2],718787259,15),i=fnI(i,s,h,t,n[9],3951481745,21),this._a=this._a+t|0,this._b=this._b+i|0,this._c=this._c+s|0,this._d=this._d+h|0},MD5.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var n=new Buffer(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n},module.exports=MD5;

        }).call(this,require("buffer").Buffer)
    },{"buffer":91,"hash-base":163,"inherits":159}],163:[function(require,module,exports){
        "use strict";var Buffer=require("safe-buffer").Buffer,Transform=require("stream").Transform,inherits=require("inherits");function throwIfNotStringOrBuffer(t,e){if(!Buffer.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}function HashBase(t){Transform.call(this),this._block=Buffer.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}inherits(HashBase,Transform),HashBase.prototype._transform=function(t,e,r){var s=null;try{this.update(t,e)}catch(t){s=t}r(s)},HashBase.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},HashBase.prototype.update=function(t,e){if(throwIfNotStringOrBuffer(t,"Data"),this._finalized)throw new Error("Digest already called");Buffer.isBuffer(t)||(t=Buffer.from(t,e));for(var r=this._block,s=0;this._blockOffset+t.length-s>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[s++];this._update(),this._blockOffset=0}for(;s<t.length;)r[this._blockOffset++]=t[s++];for(var f=0,o=8*t.length;o>0;++f)this._length[f]+=o,(o=this._length[f]/4294967296|0)>0&&(this._length[f]-=4294967296*o);return this},HashBase.prototype._update=function(){throw new Error("_update is not implemented")},HashBase.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")},module.exports=HashBase;

    },{"inherits":159,"safe-buffer":237,"stream":250}],164:[function(require,module,exports){
        var bn=require("bn.js"),brorand=require("brorand");function MillerRabin(r){this.rand=r||new brorand.Rand}module.exports=MillerRabin,MillerRabin.create=function create(r){return new MillerRabin(r)},MillerRabin.prototype._randbelow=function _randbelow(r){var n=r.bitLength(),e=Math.ceil(n/8);do{var t=new bn(this.rand.generate(e))}while(t.cmp(r)>=0);return t},MillerRabin.prototype._randrange=function _randrange(r,n){var e=n.sub(r);return r.add(this._randbelow(e))},MillerRabin.prototype.test=function test(r,n,e){var t=r.bitLength(),a=bn.mont(r),i=new bn(1).toRed(a);n||(n=Math.max(1,t/48|0));for(var o=r.subn(1),b=0;!o.testn(b);b++);for(var d=r.shrn(b),u=o.toRed(a);n>0;n--){var f=this._randrange(new bn(2),o);e&&e(f);var c=f.toRed(a).redPow(d);if(0!==c.cmp(i)&&0!==c.cmp(u)){for(var l=1;l<b;l++){if(0===(c=c.redSqr()).cmp(i))return!1;if(0===c.cmp(u))break}if(l===b)return!1}}return!0},MillerRabin.prototype.getDivisor=function getDivisor(r,n){var e=r.bitLength(),t=bn.mont(r),a=new bn(1).toRed(t);n||(n=Math.max(1,e/48|0));for(var i=r.subn(1),o=0;!i.testn(o);o++);for(var b=r.shrn(o),d=i.toRed(t);n>0;n--){var u=this._randrange(new bn(2),i),f=r.gcd(u);if(0!==f.cmpn(1))return f;var c=u.toRed(t).redPow(b);if(0!==c.cmp(a)&&0!==c.cmp(d)){for(var l=1;l<o;l++){if(0===(c=c.redSqr()).cmp(a))return c.fromRed().subn(1).gcd(r);if(0===c.cmp(d))break}if(l===o)return(c=c.redSqr()).fromRed().subn(1).gcd(r)}}return!1};

    },{"bn.js":45,"brorand":59}],165:[function(require,module,exports){
        function assert(r,e){if(!r)throw new Error(e||"Assertion failed")}module.exports=assert,assert.equal=function assertEqual(r,e,s){if(r!=e)throw new Error(s||"Assertion failed: "+r+" != "+e)};

    },{}],166:[function(require,module,exports){
        "use strict";var utils=exports;function toArray(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];var e=[];if("string"!=typeof r){for(var n=0;n<r.length;n++)e[n]=0|r[n];return e}if("hex"===t){(r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r="0"+r);for(n=0;n<r.length;n+=2)e.push(parseInt(r[n]+r[n+1],16))}else for(n=0;n<r.length;n++){var o=r.charCodeAt(n),u=o>>8,i=255&o;u?e.push(u,i):e.push(i)}return e}function zero2(r){return 1===r.length?"0"+r:r}function toHex(r){for(var t="",e=0;e<r.length;e++)t+=zero2(r[e].toString(16));return t}utils.toArray=toArray,utils.zero2=zero2,utils.toHex=toHex,utils.encode=function encode(r,t){return"hex"===t?toHex(r):r};

    },{}],167:[function(require,module,exports){
        var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;function parse(e){if(!((e=String(e)).length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*y;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"hrs":case"hr":case"h":return a*h;case"minutes":case"minute":case"mins":case"min":case"m":return a*m;case"seconds":case"second":case"secs":case"sec":case"s":return a*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function fmtShort(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){if(!(s<e))return s<1.5*e?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return parse(s);if("number"===r&&!1===isNaN(s))return e.long?fmtLong(s):fmtShort(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};

    },{}],168:[function(require,module,exports){
        "use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}module.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){for(var s in t=Object(arguments[a]))hasOwnProperty.call(t,s)&&(o[s]=t[s]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(t);for(var c=0;c<n.length;c++)propIsEnumerable.call(t,n[c])&&(o[n[c]]=t[n[c]])}}return o};

    },{}],169:[function(require,module,exports){
        (function (process){
            "use strict";var pathtoRegexp=require("path-to-regexp");module.exports=page;var running,prevContext,clickEvent="undefined"!=typeof document&&document.ontouchstart?"touchstart":"click",location="undefined"!=typeof window&&(window.history.location||window.location),dispatch=!0,decodeURLComponents=!0,base="",hashbang=!1;function page(e,t){if("function"==typeof e)return page("*",e);if("function"==typeof t)for(var n=new Route(e),a=1;a<arguments.length;++a)page.callbacks.push(n.middleware(arguments[a]));else"string"==typeof e?page["string"==typeof t?"redirect":"show"](e,t):page.start(e)}function unhandled(e){e.handled||(hashbang?base+location.hash.replace("#!",""):location.pathname+location.search)!==e.canonicalPath&&(page.stop(),e.handled=!1,location.href=e.canonicalPath)}function decodeURLEncodedURIComponent(e){return"string"!=typeof e?e:decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e}function Context(e,t){"/"===e[0]&&0!==e.indexOf(base)&&(e=base+(hashbang?"#!":"")+e);var n=e.indexOf("?");if(this.canonicalPath=e,this.path=e.replace(base,"")||"/",hashbang&&(this.path=this.path.replace("#!","")||"/"),this.title=document.title,this.state=t||{},this.state.path=e,this.querystring=~n?decodeURLEncodedURIComponent(e.slice(n+1)):"",this.pathname=decodeURLEncodedURIComponent(~n?e.slice(0,n):e),this.params={},this.hash="",!hashbang){if(!~this.path.indexOf("#"))return;var a=this.path.split("#");this.path=a[0],this.hash=decodeURLEncodedURIComponent(a[1])||"",this.querystring=this.querystring.split("#")[0]}}function Route(e,t){t=t||{},this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=pathtoRegexp(this.path,this.keys=[],t)}page.callbacks=[],page.exits=[],page.current="",page.len=0,page.base=function(e){if(0===arguments.length)return base;base=e},page.start=function(e){if(e=e||{},!running&&(running=!0,!1===e.dispatch&&(dispatch=!1),!1===e.decodeURLComponents&&(decodeURLComponents=!1),!1!==e.popstate&&window.addEventListener("popstate",onpopstate,!1),!1!==e.click&&document.addEventListener(clickEvent,onclick,!1),!0===e.hashbang&&(hashbang=!0),dispatch)){var t=hashbang&&~location.hash.indexOf("#!")?location.hash.substr(2)+location.search:location.pathname+location.search+location.hash;page.replace(t,null,!0,dispatch)}},page.stop=function(){running&&(page.current="",page.len=0,running=!1,document.removeEventListener(clickEvent,onclick,!1),window.removeEventListener("popstate",onpopstate,!1))},page.show=function(e,t,n,a){var o=new Context(e,t);return page.current=o.path,!1!==n&&page.dispatch(o),!1!==o.handled&&!1!==a&&o.pushState(),o},page.back=function(e,t){page.len>0?(history.back(),page.len--):e?setTimeout(function(){page.show(e,t)}):setTimeout(function(){page.show(base,t)})},page.redirect=function(e,t){"string"==typeof e&&"string"==typeof t&&page(e,function(e){setTimeout(function(){page.replace(t)},0)}),"string"==typeof e&&void 0===t&&setTimeout(function(){page.replace(e)},0)},page.replace=function(e,t,n,a){var o=new Context(e,t);return page.current=o.path,o.init=n,o.save(),!1!==a&&page.dispatch(o),o},page.dispatch=function(e){var t=prevContext,n=0,a=0;function nextEnter(){var t=page.callbacks[n++];if(e.path===page.current)return t?void t(e,nextEnter):unhandled(e);e.handled=!1}prevContext=e,t?function nextExit(){var e=page.exits[a++];if(!e)return nextEnter();e(t,nextExit)}():nextEnter()},page.exit=function(e,t){if("function"==typeof e)return page.exit("*",e);for(var n=new Route(e),a=1;a<arguments.length;++a)page.exits.push(n.middleware(arguments[a]))},page.Context=Context,Context.prototype.pushState=function(){page.len++,history.pushState(this.state,this.title,hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},Context.prototype.save=function(){history.replaceState(this.state,this.title,hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},page.Route=Route,Route.prototype.middleware=function(e){var t=this;return function(n,a){if(t.match(n.path,n.params))return e(n,a);a()}},Route.prototype.match=function(e,t){var n=this.keys,a=e.indexOf("?"),o=~a?e.slice(0,a):e,i=this.regexp.exec(decodeURIComponent(o));if(!i)return!1;for(var s=1,r=i.length;s<r;++s){var h=n[s-1],p=decodeURLEncodedURIComponent(i[s]);void 0===p&&hasOwnProperty.call(t,h.name)||(t[h.name]=p)}return!0};var onpopstate=function(){var e=!1;if("undefined"!=typeof window)return"complete"===document.readyState?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function onpopstate(t){if(e)if(t.state){var n=t.state.path;page.replace(n,t.state)}else page.show(location.pathname+location.hash,void 0,void 0,!1)}}();function onclick(e){if(1===which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.path?e.path[0]:e.target;t&&"A"!==t.nodeName;)t=t.parentNode;if(t&&"A"===t.nodeName&&!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var n=t.getAttribute("href");if((hashbang||t.pathname!==location.pathname||!t.hash&&"#"!==n)&&!(n&&n.indexOf("mailto:")>-1)&&!t.target&&sameOrigin(t.href)){var a=t.pathname+t.search+(t.hash||"");"undefined"!=typeof process&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var o=a;0===a.indexOf(base)&&(a=a.substr(base.length)),hashbang&&(a=a.replace("#!","")),base&&o===a||(e.preventDefault(),page.show(o))}}}}function which(e){return null===(e=e||window.event).which?e.button:e.which}function sameOrigin(e){var t=location.protocol+"//"+location.hostname;return location.port&&(t+=":"+location.port),e&&0===e.indexOf(t)}page.sameOrigin=sameOrigin;

        }).call(this,require('_process'))
    },{"_process":184,"path-to-regexp":171}],170:[function(require,module,exports){
        module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};

    },{}],171:[function(require,module,exports){
        var isarray=require("isarray");module.exports=pathToRegexp,module.exports.parse=parse,module.exports.compile=compile,module.exports.tokensToFunction=tokensToFunction,module.exports.tokensToRegExp=tokensToRegExp;var PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse(e){for(var t,r=[],n=0,o=0,p="";null!=(t=PATH_REGEXP.exec(e));){var a=t[0],i=t[1],s=t.index;if(p+=e.slice(o,s),o=s+a.length,i)p+=i[1];else{p&&(r.push(p),p="");var u=t[2],c=t[3],l=t[4],f=t[5],g=t[6],x=t[7],h="+"===g||"*"===g,m="?"===g||"*"===g,y=u||"/",T=l||f||(x?".*":"[^"+y+"]+?");r.push({name:c||n++,prefix:u||"",delimiter:y,optional:m,repeat:h,pattern:escapeGroup(T)})}}return o<e.length&&(p+=e.substr(o)),p&&r.push(p),r}function compile(e){return tokensToFunction(parse(e))}function tokensToFunction(e){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^"+e[r].pattern+"$"));return function(r){for(var n="",o=r||{},p=0;p<e.length;p++){var a=e[p];if("string"!=typeof a){var i,s=o[a.name];if(null==s){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(isarray(s)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+s+'"');if(0===s.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<s.length;u++){if(i=encodeURIComponent(s[u]),!t[p].test(i))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+i+'"');n+=(0===u?a.prefix:a.delimiter)+i}}else{if(i=encodeURIComponent(s),!t[p].test(i))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+i+'"');n+=a.prefix+i}}else n+=a}return n}}function escapeString(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function escapeGroup(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(e,t){return e.keys=t,e}function flags(e){return e.sensitive?"":"i"}function regexpToRegexp(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return attachKeys(e,t)}function arrayToRegexp(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(pathToRegexp(e[o],t,r).source);return attachKeys(new RegExp("(?:"+n.join("|")+")",flags(r)),t)}function stringToRegexp(e,t,r){for(var n=parse(e),o=tokensToRegExp(n,r),p=0;p<n.length;p++)"string"!=typeof n[p]&&t.push(n[p]);return attachKeys(o,t)}function tokensToRegExp(e,t){for(var r=(t=t||{}).strict,n=!1!==t.end,o="",p=e[e.length-1],a="string"==typeof p&&/\/$/.test(p),i=0;i<e.length;i++){var s=e[i];if("string"==typeof s)o+=escapeString(s);else{var u=escapeString(s.prefix),c=s.pattern;s.repeat&&(c+="(?:"+u+c+")*"),o+=c=s.optional?u?"(?:"+u+"("+c+"))?":"("+c+")?":u+"("+c+")"}}return r||(o=(a?o.slice(0,-2):o)+"(?:\\/(?=$))?"),o+=n?"$":r&&a?"":"(?=\\/|$)",new RegExp("^"+o,flags(t))}function pathToRegexp(e,t,r){return isarray(t=t||[])?r||(r={}):(r=t,t=[]),e instanceof RegExp?regexpToRegexp(e,t,r):isarray(e)?arrayToRegexp(e,t,r):stringToRegexp(e,t,r)}

    },{"isarray":170}],172:[function(require,module,exports){
        module.exports={"2.16.840.1.101.3.4.1.1": "aes-128-ecb",
            "2.16.840.1.101.3.4.1.2": "aes-128-cbc",
            "2.16.840.1.101.3.4.1.3": "aes-128-ofb",
            "2.16.840.1.101.3.4.1.4": "aes-128-cfb",
            "2.16.840.1.101.3.4.1.21": "aes-192-ecb",
            "2.16.840.1.101.3.4.1.22": "aes-192-cbc",
            "2.16.840.1.101.3.4.1.23": "aes-192-ofb",
            "2.16.840.1.101.3.4.1.24": "aes-192-cfb",
            "2.16.840.1.101.3.4.1.41": "aes-256-ecb",
            "2.16.840.1.101.3.4.1.42": "aes-256-cbc",
            "2.16.840.1.101.3.4.1.43": "aes-256-ofb",
            "2.16.840.1.101.3.4.1.44": "aes-256-cfb"
        }
    },{}],173:[function(require,module,exports){
        "use strict";var asn1=require("asn1.js");exports.certificate=require("./certificate");var RSAPrivateKey=asn1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});exports.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});exports.RSAPublicKey=RSAPublicKey;var PublicKey=asn1.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});exports.PublicKey=PublicKey;var AlgorithmIdentifier=asn1.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),PrivateKeyInfo=asn1.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});exports.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});exports.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});exports.DSAPrivateKey=DSAPrivateKey,exports.DSAparam=asn1.define("DSAparam",function(){this.int()});var ECPrivateKey=asn1.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())});exports.ECPrivateKey=ECPrivateKey;var ECParameters=asn1.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});exports.signature=asn1.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});

    },{"./certificate":174,"asn1.js":3}],174:[function(require,module,exports){
        "use strict";var asn=require("asn1.js"),Time=asn.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),AttributeTypeValue=asn.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),AlgorithmIdentifier=asn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional())}),SubjectPublicKeyInfo=asn.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())}),RelativeDistinguishedName=asn.define("RelativeDistinguishedName",function(){this.setof(AttributeTypeValue)}),RDNSequence=asn.define("RDNSequence",function(){this.seqof(RelativeDistinguishedName)}),Name=asn.define("Name",function(){this.choice({rdnSequence:this.use(RDNSequence)})}),Validity=asn.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Time),this.key("notAfter").use(Time))}),Extension=asn.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),TBSCertificate=asn.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int(),this.key("serialNumber").int(),this.key("signature").use(AlgorithmIdentifier),this.key("issuer").use(Name),this.key("validity").use(Validity),this.key("subject").use(Name),this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Extension).optional())}),X509Certificate=asn.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(TBSCertificate),this.key("signatureAlgorithm").use(AlgorithmIdentifier),this.key("signatureValue").bitstr())});module.exports=X509Certificate;

    },{"asn1.js":3}],175:[function(require,module,exports){
        (function (Buffer){
            var findProc=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,startRegex=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n/m,fullRegex=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?-----END \1-----$/m,evp=require("evp_bytestokey"),ciphers=require("browserify-aes");module.exports=function(e,r){var n,a=e.toString(),t=a.match(findProc);if(t){var f="aes"+t[1],c=new Buffer(t[2],"hex"),s=new Buffer(t[3].replace(/\r?\n/g,""),"base64"),i=evp(r,c.slice(0,8),parseInt(t[1],10)).key,p=[],u=ciphers.createDecipheriv(f,i,c);p.push(u.update(s)),p.push(u.final()),n=Buffer.concat(p)}else{var E=a.match(fullRegex);n=new Buffer(E[2].replace(/\r?\n/g,""),"base64")}return{tag:a.match(startRegex)[1],data:n}};

        }).call(this,require("buffer").Buffer)
    },{"browserify-aes":64,"buffer":91,"evp_bytestokey":138}],176:[function(require,module,exports){
        (function (Buffer){
            var asn1=require("./asn1"),aesid=require("./aesid.json"),fixProc=require("./fixProc"),ciphers=require("browserify-aes"),compat=require("pbkdf2");function parseKeys(e){var r;"object"!=typeof e||Buffer.isBuffer(e)||(r=e.passphrase,e=e.key),"string"==typeof e&&(e=new Buffer(e));var a,t,s=fixProc(e,r),i=s.tag,c=s.data;switch(i){case"CERTIFICATE":t=asn1.certificate.decode(c,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(t||(t=asn1.PublicKey.decode(c,"der")),a=t.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return asn1.RSAPublicKey.decode(t.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return t.subjectPrivateKey=t.subjectPublicKey,{type:"ec",data:t};case"1.2.840.10040.4.1":return t.algorithm.params.pub_key=asn1.DSAparam.decode(t.subjectPublicKey.data,"der"),{type:"dsa",data:t.algorithm.params};default:throw new Error("unknown key id "+a)}throw new Error("unknown key type "+i);case"ENCRYPTED PRIVATE KEY":c=decrypt(c=asn1.EncryptedPrivateKey.decode(c,"der"),r);case"PRIVATE KEY":switch(a=(t=asn1.PrivateKey.decode(c,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return asn1.RSAPrivateKey.decode(t.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:t.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(t.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return t.algorithm.params.priv_key=asn1.DSAparam.decode(t.subjectPrivateKey,"der"),{type:"dsa",params:t.algorithm.params};default:throw new Error("unknown key id "+a)}throw new Error("unknown key type "+i);case"RSA PUBLIC KEY":return asn1.RSAPublicKey.decode(c,"der");case"RSA PRIVATE KEY":return asn1.RSAPrivateKey.decode(c,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1.DSAPrivateKey.decode(c,"der")};case"EC PRIVATE KEY":return{curve:(c=asn1.ECPrivateKey.decode(c,"der")).parameters.value,privateKey:c.privateKey};default:throw new Error("unknown key type "+i)}}function decrypt(e,r){var a=e.algorithm.decrypt.kde.kdeparams.salt,t=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),s=aesid[e.algorithm.decrypt.cipher.algo.join(".")],i=e.algorithm.decrypt.cipher.iv,c=e.subjectPrivateKey,d=parseInt(s.split("-")[1],10)/8,n=compat.pbkdf2Sync(r,a,t,d),o=ciphers.createDecipheriv(s,n,i),u=[];return u.push(o.update(c)),u.push(o.final()),Buffer.concat(u)}module.exports=parseKeys,parseKeys.signature=asn1.signature;

        }).call(this,require("buffer").Buffer)
    },{"./aesid.json":172,"./asn1":173,"./fixProc":175,"browserify-aes":64,"buffer":91,"pbkdf2":178}],177:[function(require,module,exports){
        (function (process){
            function normalizeArray(r,t){for(var e=0,n=r.length-1;n>=0;n--){var s=r[n];"."===s?r.splice(n,1):".."===s?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(r){return splitPathRe.exec(r).slice(1)};function filter(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}exports.resolve=function(){for(var r="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var n=e>=0?arguments[e]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(r=n+"/"+r,t="/"===n.charAt(0))}return(t?"/":"")+(r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"))||"."},exports.normalize=function(r){var t=exports.isAbsolute(r),e="/"===substr(r,-1);return(r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"))||t||(r="."),r&&e&&(r+="/"),(t?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function trim(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var e=trim(r.split("/")),n=trim(t.split("/")),s=Math.min(e.length,n.length),i=s,o=0;o<s;o++)if(e[o]!==n[o]){i=o;break}var u=[];for(o=i;o<e.length;o++)u.push("..");return(u=u.concat(n.slice(i))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){var t=splitPath(r),e=t[0],n=t[1];return e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."},exports.basename=function(r,t){var e=splitPath(r)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){return splitPath(r)[3]};var substr="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};

        }).call(this,require('_process'))
    },{"_process":184}],178:[function(require,module,exports){
        exports.pbkdf2=require("./lib/async"),exports.pbkdf2Sync=require("./lib/sync");

    },{"./lib/async":179,"./lib/sync":182}],179:[function(require,module,exports){
        (function (process,global){
            var ZERO_BUF,checkParameters=require("./precondition"),defaultEncoding=require("./default-encoding"),sync=require("./sync"),Buffer=require("safe-buffer").Buffer,subtle=global.crypto&&global.crypto.subtle,toBrowser={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},checks=[];function checkNative(e){if(global.process&&!global.process.browser)return Promise.resolve(!1);if(!subtle||!subtle.importKey||!subtle.deriveBits)return Promise.resolve(!1);if(void 0!==checks[e])return checks[e];var r=browserPbkdf2(ZERO_BUF=ZERO_BUF||Buffer.alloc(8),ZERO_BUF,10,128,e).then(function(){return!0}).catch(function(){return!1});return checks[e]=r,r}function browserPbkdf2(e,r,n,t,o){return subtle.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return subtle.deriveBits({name:"PBKDF2",salt:r,iterations:n,hash:{name:o}},e,t<<3)}).then(function(e){return Buffer.from(e)})}function resolvePromise(e,r){e.then(function(e){process.nextTick(function(){r(null,e)})},function(e){process.nextTick(function(){r(e)})})}module.exports=function(e,r,n,t,o,s){if(Buffer.isBuffer(e)||(e=Buffer.from(e,defaultEncoding)),Buffer.isBuffer(r)||(r=Buffer.from(r,defaultEncoding)),checkParameters(n,t),"function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");var c=toBrowser[(o=o||"sha1").toLowerCase()];if(!c||"function"!=typeof global.Promise)return process.nextTick(function(){var c;try{c=sync(e,r,n,t,o)}catch(e){return s(e)}s(null,c)});resolvePromise(checkNative(c).then(function(s){return s?browserPbkdf2(e,r,n,t,c):sync(e,r,n,t,o)}),s)};

        }).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./default-encoding":180,"./precondition":181,"./sync":182,"_process":184,"safe-buffer":237}],180:[function(require,module,exports){
        (function (process){
            var defaultEncoding;if(process.browser)defaultEncoding="utf-8";else{var pVersionMajor=parseInt(process.version.split(".")[0].slice(1),10);defaultEncoding=pVersionMajor>=6?"utf-8":"binary"}module.exports=defaultEncoding;

        }).call(this,require('_process'))
    },{"_process":184}],181:[function(require,module,exports){
        var MAX_ALLOC=Math.pow(2,30)-1;module.exports=function(r,e){if("number"!=typeof r)throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>MAX_ALLOC||e!=e)throw new TypeError("Bad key length")};

    },{}],182:[function(require,module,exports){
        var md5=require("create-hash/md5"),rmd160=require("ripemd160"),sha=require("sha.js"),checkParameters=require("./precondition"),defaultEncoding=require("./default-encoding"),Buffer=require("safe-buffer").Buffer,ZEROS=Buffer.alloc(128),sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac(e,r,a){var s=getDigest(e),f="sha512"===e||"sha384"===e?128:64;r.length>f?r=s(r):r.length<f&&(r=Buffer.concat([r,ZEROS],f));for(var i=Buffer.allocUnsafe(f+sizes[e]),t=Buffer.allocUnsafe(f+sizes[e]),h=0;h<f;h++)i[h]=54^r[h],t[h]=92^r[h];var n=Buffer.allocUnsafe(f+a+4);i.copy(n,0,0,f),this.ipad1=n,this.ipad2=i,this.opad=t,this.alg=e,this.blocksize=f,this.hash=s,this.size=sizes[e]}function getDigest(e){return"rmd160"===e||"ripemd160"===e?rmd160:"md5"===e?md5:function shaFunc(r){return sha(e).update(r).digest()}}function pbkdf2(e,r,a,s,f){Buffer.isBuffer(e)||(e=Buffer.from(e,defaultEncoding)),Buffer.isBuffer(r)||(r=Buffer.from(r,defaultEncoding)),checkParameters(a,s);var i=new Hmac(f=f||"sha1",e,r.length),t=Buffer.allocUnsafe(s),h=Buffer.allocUnsafe(r.length+4);r.copy(h,0,0,r.length);for(var n=0,u=sizes[f],o=Math.ceil(s/u),c=1;c<=o;c++){h.writeUInt32BE(c,r.length);for(var d=i.run(h,i.ipad1),l=d,p=1;p<a;p++){l=i.run(l,i.ipad2);for(var m=0;m<u;m++)d[m]^=l[m]}d.copy(t,n),n+=u}return t}Hmac.prototype.run=function(e,r){return e.copy(r,this.blocksize),this.hash(r).copy(this.opad,this.blocksize),this.hash(this.opad)},module.exports=pbkdf2;

    },{"./default-encoding":180,"./precondition":181,"create-hash/md5":99,"ripemd160":235,"safe-buffer":237,"sha.js":240}],183:[function(require,module,exports){
        (function (process){
            "use strict";function nextTick(e,n,c,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var t,s,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function afterTickOne(){e.call(null,n)});case 3:return process.nextTick(function afterTickTwo(){e.call(null,n,c)});case 4:return process.nextTick(function afterTickThree(){e.call(null,n,c,r)});default:for(t=new Array(o-1),s=0;s<t.length;)t[s++]=arguments[s];return process.nextTick(function afterTick(){e.apply(null,t)})}}!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports=nextTick:module.exports=process.nextTick;

        }).call(this,require('_process'))
    },{"_process":184}],184:[function(require,module,exports){
        var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

    },{}],185:[function(require,module,exports){
        "use strict";var emptyFunction=require("fbjs/lib/emptyFunction"),invariant=require("fbjs/lib/invariant"),ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");module.exports=function(){function shim(e,i,t,r,s,m){m!==ReactPropTypesSecret&&invariant(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function getShim(){return shim}shim.isRequired=shim;var e={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};return e.checkPropTypes=emptyFunction,e.PropTypes=e,e};

    },{"./lib/ReactPropTypesSecret":187,"fbjs/lib/emptyFunction":141,"fbjs/lib/invariant":142}],186:[function(require,module,exports){
        var REACT_ELEMENT_TYPE,isValidElement,throwOnDirectAccess;module.exports=require("./factoryWithThrowingShims")();

    },{"./factoryWithThrowingShims":185}],187:[function(require,module,exports){
        "use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret;

    },{}],188:[function(require,module,exports){
        exports.publicEncrypt=require("./publicEncrypt"),exports.privateDecrypt=require("./privateDecrypt"),exports.privateEncrypt=function privateEncrypt(r,p){return exports.publicEncrypt(r,p,!0)},exports.publicDecrypt=function publicDecrypt(r,p){return exports.privateDecrypt(r,p,!0)};

    },{"./privateDecrypt":190,"./publicEncrypt":191}],189:[function(require,module,exports){
        (function (Buffer){
            var createHash=require("create-hash");function i2ops(e){var r=new Buffer(4);return r.writeUInt32BE(e,0),r}module.exports=function(e,r){for(var t,a=new Buffer(""),n=0;a.length<r;)t=i2ops(n++),a=Buffer.concat([a,createHash("sha1").update(e).update(t).digest()]);return a.slice(0,r)};

        }).call(this,require("buffer").Buffer)
    },{"buffer":91,"create-hash":97}],190:[function(require,module,exports){
        (function (Buffer){
            var parseKeys=require("parse-asn1"),mgf=require("./mgf"),xor=require("./xor"),bn=require("bn.js"),crt=require("browserify-rsa"),createHash=require("create-hash"),withPublic=require("./withPublic");function oaep(r,e){r.modulus;var n=r.modulus.byteLength(),t=(e.length,createHash("sha1").update(new Buffer("")).digest()),i=t.length;if(0!==e[0])throw new Error("decryption error");var o=e.slice(1,i+1),u=e.slice(i+1),a=xor(o,mgf(u,i)),c=xor(u,mgf(a,n-i-1));if(compare(t,c.slice(0,i)))throw new Error("decryption error");for(var f=i;0===c[f];)f++;if(1!==c[f++])throw new Error("decryption error");return c.slice(f)}function pkcs1(r,e,n){for(var t=e.slice(0,2),i=2,o=0;0!==e[i++];)if(i>=e.length){o++;break}var u=e.slice(2,i-1);e.slice(i-1,i);if(("0002"!==t.toString("hex")&&!n||"0001"!==t.toString("hex")&&n)&&o++,u.length<8&&o++,o)throw new Error("decryption error");return e.slice(i)}function compare(r,e){r=new Buffer(r),e=new Buffer(e);var n=0,t=r.length;r.length!==e.length&&(n++,t=Math.min(r.length,e.length));for(var i=-1;++i<t;)n+=r[i]^e[i];return n}module.exports=function privateDecrypt(r,e,n){var t;t=r.padding?r.padding:n?1:4;var i,o=parseKeys(r),u=o.modulus.byteLength();if(e.length>u||new bn(e).cmp(o.modulus)>=0)throw new Error("decryption error");i=n?withPublic(new bn(e),o):crt(e,o);var a=new Buffer(u-i.length);if(a.fill(0),i=Buffer.concat([a,i],u),4===t)return oaep(o,i);if(1===t)return pkcs1(o,i,n);if(3===t)return i;throw new Error("unknown padding")};

        }).call(this,require("buffer").Buffer)
    },{"./mgf":189,"./withPublic":192,"./xor":193,"bn.js":45,"browserify-rsa":82,"buffer":91,"create-hash":97,"parse-asn1":176}],191:[function(require,module,exports){
        (function (Buffer){
            var parseKeys=require("parse-asn1"),randomBytes=require("randombytes"),createHash=require("create-hash"),mgf=require("./mgf"),xor=require("./xor"),bn=require("bn.js"),withPublic=require("./withPublic"),crt=require("browserify-rsa"),constants={RSA_PKCS1_OAEP_PADDING:4,RSA_PKCS1_PADDIN:1,RSA_NO_PADDING:3};function oaep(e,r){var n=e.modulus.byteLength(),o=r.length,t=createHash("sha1").update(new Buffer("")).digest(),u=t.length,f=2*u;if(o>n-f-2)throw new Error("message too long");var a=new Buffer(n-o-f-2);a.fill(0);var s=n-u-1,i=randomBytes(u),c=xor(Buffer.concat([t,a,new Buffer([1]),r],s),mgf(i,s)),w=xor(i,mgf(c,u));return new bn(Buffer.concat([new Buffer([0]),w,c],n))}function pkcs1(e,r,n){var o,t=r.length,u=e.modulus.byteLength();if(t>u-11)throw new Error("message too long");return n?(o=new Buffer(u-t-3)).fill(255):o=nonZero(u-t-3),new bn(Buffer.concat([new Buffer([0,n?1:2]),o,new Buffer([0]),r],u))}function nonZero(e,r){for(var n,o=new Buffer(e),t=0,u=randomBytes(2*e),f=0;t<e;)f===u.length&&(u=randomBytes(2*e),f=0),(n=u[f++])&&(o[t++]=n);return o}module.exports=function publicEncrypt(e,r,n){var o;o=e.padding?e.padding:n?1:4;var t,u=parseKeys(e);if(4===o)t=oaep(u,r);else if(1===o)t=pkcs1(u,r,n);else{if(3!==o)throw new Error("unknown padding");if((t=new bn(r)).cmp(u.modulus)>=0)throw new Error("data too long for modulus")}return n?crt(t,u):withPublic(t,u)};

        }).call(this,require("buffer").Buffer)
    },{"./mgf":189,"./withPublic":192,"./xor":193,"bn.js":45,"browserify-rsa":82,"buffer":91,"create-hash":97,"parse-asn1":176,"randombytes":198}],192:[function(require,module,exports){
        (function (Buffer){
            var bn=require("bn.js");function withPublic(e,n){return new Buffer(e.toRed(bn.mont(n.modulus)).redPow(new bn(n.publicExponent)).fromRed().toArray())}module.exports=withPublic;

        }).call(this,require("buffer").Buffer)
    },{"bn.js":45,"buffer":91}],193:[function(require,module,exports){
        module.exports=function xor(r,o){for(var e=r.length,n=-1;++n<e;)r[n]^=o[n];return r};

    },{}],194:[function(require,module,exports){
        (function (global){
            !function(e){var o="object"==typeof exports&&exports&&!exports.nodeType&&exports,r="object"==typeof module&&module&&!module.nodeType&&module,n="object"==typeof global&&global;n.global!==n&&n.window!==n&&n.self!==n||(e=n);var t,i,c=2147483647,d=36,u=1,f=26,a=38,s=700,p=72,l=128,h="-",v=/^xn--/,g=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=d-u,b=Math.floor,y=String.fromCharCode;function error(e){throw new RangeError(w[e])}function map(e,o){for(var r=e.length,n=[];r--;)n[r]=o(e[r]);return n}function mapDomain(e,o){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+map((e=e.replace(m,".")).split("."),o).join(".")}function ucs2decode(e){for(var o,r,n=[],t=0,i=e.length;t<i;)(o=e.charCodeAt(t++))>=55296&&o<=56319&&t<i?56320==(64512&(r=e.charCodeAt(t++)))?n.push(((1023&o)<<10)+(1023&r)+65536):(n.push(o),t--):n.push(o);return n}function ucs2encode(e){return map(e,function(e){var o="";return e>65535&&(o+=y((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=y(e)}).join("")}function digitToBasic(e,o){return e+22+75*(e<26)-((0!=o)<<5)}function adapt(e,o,r){var n=0;for(e=r?b(e/s):e>>1,e+=b(e/o);e>x*f>>1;n+=d)e=b(e/x);return b(n+(x+1)*e/(e+a))}function decode(e){var o,r,n,t,i,a,s,v,g,m,w,x=[],y=e.length,C=0,j=l,A=p;for((r=e.lastIndexOf(h))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&error("not-basic"),x.push(e.charCodeAt(n));for(t=r>0?r+1:0;t<y;){for(i=C,a=1,s=d;t>=y&&error("invalid-input"),((v=(w=e.charCodeAt(t++))-48<10?w-22:w-65<26?w-65:w-97<26?w-97:d)>=d||v>b((c-C)/a))&&error("overflow"),C+=v*a,!(v<(g=s<=A?u:s>=A+f?f:s-A));s+=d)a>b(c/(m=d-g))&&error("overflow"),a*=m;A=adapt(C-i,o=x.length+1,0==i),b(C/o)>c-j&&error("overflow"),j+=b(C/o),C%=o,x.splice(C++,0,j)}return ucs2encode(x)}function encode(e){var o,r,n,t,i,a,s,v,g,m,w,x,C,j,A,I=[];for(x=(e=ucs2decode(e)).length,o=l,r=0,i=p,a=0;a<x;++a)(w=e[a])<128&&I.push(y(w));for(n=t=I.length,t&&I.push(h);n<x;){for(s=c,a=0;a<x;++a)(w=e[a])>=o&&w<s&&(s=w);for(s-o>b((c-r)/(C=n+1))&&error("overflow"),r+=(s-o)*C,o=s,a=0;a<x;++a)if((w=e[a])<o&&++r>c&&error("overflow"),w==o){for(v=r,g=d;!(v<(m=g<=i?u:g>=i+f?f:g-i));g+=d)A=v-m,j=d-m,I.push(y(digitToBasic(m+A%j,0))),v=b(A/j);I.push(y(digitToBasic(v,0))),i=adapt(r,C,n==t),r=0,++n}++r,++o}return I.join("")}if(t={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function toASCII(e){return mapDomain(e,function(e){return g.test(e)?"xn--"+encode(e):e})},toUnicode:function toUnicode(e){return mapDomain(e,function(e){return v.test(e)?decode(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(o&&r)if(module.exports==o)r.exports=t;else for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);else e.punycode=t}(this);

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{}],195:[function(require,module,exports){
        "use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;y<p;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};

    },{}],196:[function(require,module,exports){
        "use strict";var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?map(r[n],function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};

    },{}],197:[function(require,module,exports){
        "use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");

    },{"./decode":195,"./encode":196}],198:[function(require,module,exports){
        (function (process,global){
            "use strict";function oldBrowser(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var Buffer=require("safe-buffer").Buffer,crypto=global.crypto||global.msCrypto;function randomBytes(r,e){if(r>65536)throw new Error("requested too many random bytes");var o=new global.Uint8Array(r);r>0&&crypto.getRandomValues(o);var t=Buffer.from(o.buffer);return"function"==typeof e?process.nextTick(function(){e(null,t)}):t}crypto&&crypto.getRandomValues?module.exports=randomBytes:module.exports=oldBrowser;

        }).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"_process":184,"safe-buffer":237}],199:[function(require,module,exports){
        (function (process,global){
            "use strict";function oldBrowser(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var safeBuffer=require("safe-buffer"),randombytes=require("randombytes"),Buffer=safeBuffer.Buffer,kBufferMaxLength=safeBuffer.kMaxLength,crypto=global.crypto||global.msCrypto,kMaxUint32=Math.pow(2,32)-1;function assertOffset(r,e){if("number"!=typeof r||r!=r)throw new TypeError("offset must be a number");if(r>kMaxUint32||r<0)throw new TypeError("offset must be a uint32");if(r>kBufferMaxLength||r>e)throw new RangeError("offset out of range")}function assertSize(r,e,t){if("number"!=typeof r||r!=r)throw new TypeError("size must be a number");if(r>kMaxUint32||r<0)throw new TypeError("size must be a uint32");if(r+e>t||r>kBufferMaxLength)throw new RangeError("buffer too small")}function randomFill(r,e,t,n){if(!(Buffer.isBuffer(r)||r instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)n=e,e=0,t=r.length;else if("function"==typeof t)n=t,t=r.length-e;else if("function"!=typeof n)throw new TypeError('"cb" argument must be a function');return assertOffset(e,r.length),assertSize(t,e,r.length),actualFill(r,e,t,n)}function actualFill(r,e,t,n){if(process.browser){var o=r.buffer,f=new Uint8Array(o,e,t);return crypto.getRandomValues(f),n?void process.nextTick(function(){n(null,r)}):r}if(!n)return randombytes(t).copy(r,e),r;randombytes(t,function(t,o){if(t)return n(t);o.copy(r,e),n(null,r)})}function randomFillSync(r,e,t){if(void 0===e&&(e=0),!(Buffer.isBuffer(r)||r instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return assertOffset(e,r.length),void 0===t&&(t=r.length-e),assertSize(t,e,r.length),actualFill(r,e,t)}crypto&&crypto.getRandomValues||!process.browser?(exports.randomFill=randomFill,exports.randomFillSync=randomFillSync):(exports.randomFill=oldBrowser,exports.randomFillSync=oldBrowser);

        }).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"_process":184,"randombytes":198,"safe-buffer":237}],200:[function(require,module,exports){
        function RavenConfigError(r){this.name="RavenConfigError",this.message=r}RavenConfigError.prototype=new Error,RavenConfigError.prototype.constructor=RavenConfigError,module.exports=RavenConfigError;

    },{}],201:[function(require,module,exports){
        var utils=require("./utils"),wrapMethod=function(e,a,r){var s=e[a],t=e;if(a in e){var l="warn"===a?"warning":a;e[a]=function(){var e=[].slice.call(arguments),i=utils.safeJoin(e," "),o={level:l,logger:"console",extra:{arguments:e}};"assert"===a?!1===e[0]&&(i="Assertion failed: "+(utils.safeJoin(e.slice(1)," ")||"console.assert"),o.extra.arguments=e.slice(1),r&&r(i,o)):r&&r(i,o),s&&Function.prototype.apply.call(s,t,e)}}};module.exports={wrapMethod:wrapMethod};

    },{"./utils":204}],202:[function(require,module,exports){
        (function (global){
            var TraceKit=require("../vendor/TraceKit/tracekit"),stringify=require("../vendor/json-stringify-safe/stringify"),md5=require("../vendor/md5/md5"),RavenConfigError=require("./configError"),utils=require("./utils"),isErrorEvent=utils.isErrorEvent,isDOMError=utils.isDOMError,isDOMException=utils.isDOMException,isError=utils.isError,isObject=utils.isObject,isPlainObject=utils.isPlainObject,isUndefined=utils.isUndefined,isFunction=utils.isFunction,isString=utils.isString,isArray=utils.isArray,isEmptyObject=utils.isEmptyObject,each=utils.each,objectMerge=utils.objectMerge,truncate=utils.truncate,objectFrozen=utils.objectFrozen,hasKey=utils.hasKey,joinRegExp=utils.joinRegExp,urlencode=utils.urlencode,uuid4=utils.uuid4,htmlTreeAsString=utils.htmlTreeAsString,isSameException=utils.isSameException,isSameStacktrace=utils.isSameStacktrace,parseUrl=utils.parseUrl,fill=utils.fill,supportsFetch=utils.supportsFetch,supportsReferrerPolicy=utils.supportsReferrerPolicy,serializeKeysForMessage=utils.serializeKeysForMessage,serializeException=utils.serializeException,sanitize=utils.sanitize,wrapConsoleMethod=require("./console").wrapMethod,dsnKeys="source protocol user pass host port path".split(" "),dsnPattern=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function now(){return+new Date}var _window="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_document=_window.document,_navigator=_window.navigator;function keepOriginalCallback(e,t){return isFunction(t)?function(r){return t(r,e)}:t}function Raven(){for(var e in this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!isUndefined(_document),this._hasNavigator=!isUndefined(_navigator),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:_window.SENTRY_RELEASE&&_window.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",keepalive:!0,referrerPolicy:supportsReferrerPolicy()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=_window.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=now(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=_window.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}Raven.prototype={VERSION:"3.26.3",debug:!1,TraceKit:TraceKit,config:function(e,t){var r=this;if(r._globalServer)return this._logDebug("error","Error: Raven has already been configured"),r;if(!e)return r;var n=r._globalOptions;t&&each(t,function(e,t){"tags"===e||"extra"===e||"user"===e?r._globalContext[e]=t:n[e]=t}),r.setDSN(e),n.ignoreErrors.push(/^Script error\.?$/),n.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),n.ignoreErrors=joinRegExp(n.ignoreErrors),n.ignoreUrls=!!n.ignoreUrls.length&&joinRegExp(n.ignoreUrls),n.whitelistUrls=!!n.whitelistUrls.length&&joinRegExp(n.whitelistUrls),n.includePaths=joinRegExp(n.includePaths),n.maxBreadcrumbs=Math.max(0,Math.min(n.maxBreadcrumbs||100,100));var i={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},a=n.autoBreadcrumbs;"[object Object]"==={}.toString.call(a)?a=objectMerge(i,a):!1!==a&&(a=i),n.autoBreadcrumbs=a;var o={tryCatch:!0},s=n.instrument;return"[object Object]"==={}.toString.call(s)?s=objectMerge(o,s):!1!==s&&(s=o),n.instrument=s,TraceKit.collectWindowErrors=!!n.collectWindowErrors,r},install:function(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(TraceKit.report.subscribe(function(){e._handleOnErrorStackInfo.apply(e,arguments)}),e._globalOptions.captureUnhandledRejections&&e._attachPromiseRejectionHandler(),e._patchFunctionToString(),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this._parseDSN(e),r=t.path.lastIndexOf("/"),n=t.path.substr(1,r);this._dsn=e,this._globalKey=t.user,this._globalSecret=t.pass&&t.pass.substr(1),this._globalProject=t.path.substr(r+1),this._globalServer=this._getGlobalServer(t),this._globalEndpoint=this._globalServer+"/"+n+"api/"+this._globalProject+"/store/",this._resetBackoff()},context:function(e,t,r){return isFunction(e)&&(r=t||[],t=e,e={}),this.wrap(e,t).apply(this,r)},wrap:function(e,t,r){var n=this;if(isUndefined(t)&&!isFunction(e))return e;if(isFunction(e)&&(t=e,e=void 0),!isFunction(t))return t;try{if(t.__raven__)return t;if(t.__raven_wrapper__)return t.__raven_wrapper__}catch(e){return t}function wrapped(){var i=[],a=arguments.length,o=!e||e&&!1!==e.deep;for(r&&isFunction(r)&&r.apply(this,arguments);a--;)i[a]=o?n.wrap(e,arguments[a]):arguments[a];try{return t.apply(this,i)}catch(t){throw n._ignoreNextOnError(),n.captureException(t,e),t}}for(var i in t)hasKey(t,i)&&(wrapped[i]=t[i]);return wrapped.prototype=t.prototype,t.__raven_wrapper__=wrapped,wrapped.__raven__=!0,wrapped.__orig__=t,wrapped},uninstall:function(){return TraceKit.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function(e){this._logDebug("debug","Raven caught unhandled promise rejection:",e),this.captureException(e.reason,{mechanism:{type:"onunhandledrejection",handled:!1}})},_attachPromiseRejectionHandler:function(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),_window.addEventListener&&_window.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function(){return _window.removeEventListener&&_window.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function(e,t){if(t=objectMerge({trimHeadFrames:0},t||{}),isErrorEvent(e)&&e.error)e=e.error;else{if(isDOMError(e)||isDOMException(e)){var r=e.name||(isDOMError(e)?"DOMError":"DOMException"),n=e.message?r+": "+e.message:r;return this.captureMessage(n,objectMerge(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}))}if(isError(e))e=e;else{if(!isPlainObject(e))return this.captureMessage(e,objectMerge(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}));t=this._getCaptureExceptionOptionsFromPlainObject(t,e),e=new Error(t.message)}}this._lastCapturedException=e;try{var i=TraceKit.computeStackTrace(e);this._handleStackInfo(i,t)}catch(t){if(e!==t)throw t}return this},_getCaptureExceptionOptionsFromPlainObject:function(e,t){var r=Object.keys(t).sort(),n=objectMerge(e,{message:"Non-Error exception captured with keys: "+serializeKeysForMessage(r),fingerprint:[md5(r)],extra:e.extra||{}});return n.extra.__serialized__=serializeException(t),n},captureMessage:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){var r,n=objectMerge({message:e+=""},t=t||{});try{throw new Error(e)}catch(e){r=e}r.name=null;var i=TraceKit.computeStackTrace(r),a=isArray(i.stack)&&i.stack[1];a&&"Raven.captureException"===a.func&&(a=i.stack[2]);var o=a&&a.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(o))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(o))){if(this._globalOptions.stacktrace||t.stacktrace||""===n.message){n.fingerprint=null==n.fingerprint?e:n.fingerprint,(t=objectMerge({trimHeadFrames:0},t)).trimHeadFrames+=1;var s=this._prepareFrames(i,t);n.stacktrace={frames:s.reverse()}}return n.fingerprint&&(n.fingerprint=isArray(n.fingerprint)?n.fingerprint:[n.fingerprint]),this._send(n),this}}},captureBreadcrumb:function(e){var t=objectMerge({timestamp:now()/1e3},e);if(isFunction(this._globalOptions.breadcrumbCallback)){var r=this._globalOptions.breadcrumbCallback(t);if(isObject(r)&&!isEmptyObject(r))t=r;else if(!1===r)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(e){return this._globalContext.user=e,this},setExtraContext:function(e){return this._mergeContext("extra",e),this},setTagsContext:function(e){return this._mergeContext("tags",e),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(stringify(this._globalContext))},setEnvironment:function(e){return this._globalOptions.environment=e,this},setRelease:function(e){return this._globalOptions.release=e,this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=keepOriginalCallback(t,e),this},setBreadcrumbCallback:function(e){var t=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=keepOriginalCallback(t,e),this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=keepOriginalCallback(t,e),this},setTransport:function(e){return this._globalOptions.transport=e,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var e=_window.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if(_document){var t=(e=e||{}).eventId||this.lastEventId();if(!t)throw new RavenConfigError("Missing eventId");var r=e.dsn||this._dsn;if(!r)throw new RavenConfigError("Missing DSN");var n=encodeURIComponent,i="";i+="?eventId="+n(t),i+="&dsn="+n(r);var a=e.user||this._globalContext.user;a&&(a.name&&(i+="&name="+n(a.name)),a.email&&(i+="&email="+n(a.email)));var o=this._getGlobalServer(this._parseDSN(r)),s=_document.createElement("script");s.async=!0,s.src=o+"/api/embed/error-page/"+i,(_document.head||_document.body).appendChild(s)}},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})},_triggerEvent:function(e,t){var r,n;if(this._hasDocument){for(n in t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),_document.createEvent?(r=_document.createEvent("HTMLEvents")).initEvent(e,!0,!0):(r=_document.createEventObject()).eventType=e,t)hasKey(t,n)&&(r[n]=t[n]);if(_document.createEvent)_document.dispatchEvent(r);else try{_document.fireEvent("on"+r.eventType.toLowerCase(),r)}catch(e){}}},_breadcrumbEventHandler:function(e){var t=this;return function(r){if(t._keypressTimeout=null,t._lastCapturedEvent!==r){var n;t._lastCapturedEvent=r;try{n=htmlTreeAsString(r.target)}catch(e){n="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:n})}}},_keypressEventHandler:function(){var e=this;return function(t){var r;try{r=t.target}catch(e){return}var n=r&&r.tagName;if(n&&("INPUT"===n||"TEXTAREA"===n||r.isContentEditable)){var i=e._keypressTimeout;i||e._breadcrumbEventHandler("input")(t),clearTimeout(i),e._keypressTimeout=setTimeout(function(){e._keypressTimeout=null},1e3)}}},_captureUrlChange:function(e,t){var r=parseUrl(this._location.href),n=parseUrl(t),i=parseUrl(e);this._lastHref=t,r.protocol===n.protocol&&r.host===n.host&&(t=n.relative),r.protocol===i.protocol&&r.host===i.host&&(e=i.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_patchFunctionToString:function(){var e=this;e._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"==typeof this&&this.__raven__?e._originalFunctionToString.apply(this.__orig__,arguments):e._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function(){var e=this,t=e._wrappedBuiltIns;function wrapTimeFn(t){return function(r,n){for(var i=new Array(arguments.length),a=0;a<i.length;++a)i[a]=arguments[a];var o=i[0];return isFunction(o)&&(i[0]=e.wrap({mechanism:{type:"instrument",data:{function:t.name||"<anonymous>"}}},o)),t.apply?t.apply(this,i):t(i[0],i[1])}}var r=this._globalOptions.autoBreadcrumbs;function wrapEventTarget(n){var i=_window[n]&&_window[n].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(fill(i,"addEventListener",function(t){return function(i,a,o,s){try{a&&a.handleEvent&&(a.handleEvent=e.wrap({mechanism:{type:"instrument",data:{target:n,function:"handleEvent",handler:a&&a.name||"<anonymous>"}}},a.handleEvent))}catch(e){}var l,c,u;return r&&r.dom&&("EventTarget"===n||"Node"===n)&&(c=e._breadcrumbEventHandler("click"),u=e._keypressEventHandler(),l=function(e){if(e){var t;try{t=e.type}catch(e){return}return"click"===t?c(e):"keypress"===t?u(e):void 0}}),t.call(this,i,e.wrap({mechanism:{type:"instrument",data:{target:n,function:"addEventListener",handler:a&&a.name||"<anonymous>"}}},a,l),o,s)}},t),fill(i,"removeEventListener",function(e){return function(t,r,n,i){try{r=r&&(r.__raven_wrapper__?r.__raven_wrapper__:r)}catch(e){}return e.call(this,t,r,n,i)}},t))}fill(_window,"setTimeout",wrapTimeFn,t),fill(_window,"setInterval",wrapTimeFn,t),_window.requestAnimationFrame&&fill(_window,"requestAnimationFrame",function(t){return function(r){return t(e.wrap({mechanism:{type:"instrument",data:{function:"requestAnimationFrame",handler:t&&t.name||"<anonymous>"}}},r))}},t);for(var n=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],i=0;i<n.length;i++)wrapEventTarget(n[i])},_instrumentBreadcrumbs:function(){var e=this,t=this._globalOptions.autoBreadcrumbs,r=e._wrappedBuiltIns;function wrapProp(t,r){t in r&&isFunction(r[t])&&fill(r,t,function(r){return e.wrap({mechanism:{type:"instrument",data:{function:t,handler:r&&r.name||"<anonymous>"}}},r)})}if(t.xhr&&"XMLHttpRequest"in _window){var n=_window.XMLHttpRequest&&_window.XMLHttpRequest.prototype;fill(n,"open",function(t){return function(r,n){return isString(n)&&-1===n.indexOf(e._globalKey)&&(this.__raven_xhr={method:r,url:n,status_code:null}),t.apply(this,arguments)}},r),fill(n,"send",function(t){return function(){var r=this;function onreadystatechangeHandler(){if(r.__raven_xhr&&4===r.readyState){try{r.__raven_xhr.status_code=r.status}catch(e){}e.captureBreadcrumb({type:"http",category:"xhr",data:r.__raven_xhr})}}for(var n=["onload","onerror","onprogress"],i=0;i<n.length;i++)wrapProp(n[i],r);return"onreadystatechange"in r&&isFunction(r.onreadystatechange)?fill(r,"onreadystatechange",function(t){return e.wrap({mechanism:{type:"instrument",data:{function:"onreadystatechange",handler:t&&t.name||"<anonymous>"}}},t,onreadystatechangeHandler)}):r.onreadystatechange=onreadystatechangeHandler,t.apply(this,arguments)}},r)}t.xhr&&supportsFetch()&&fill(_window,"fetch",function(t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;++n)r[n]=arguments[n];var i,a=r[0],o="GET";if("string"==typeof a?i=a:"Request"in _window&&a instanceof _window.Request?(i=a.url,a.method&&(o=a.method)):i=""+a,-1!==i.indexOf(e._globalKey))return t.apply(this,r);r[1]&&r[1].method&&(o=r[1].method);var s={method:o,url:i,status_code:null};return t.apply(this,r).then(function(t){return s.status_code=t.status,e.captureBreadcrumb({type:"http",category:"fetch",data:s}),t}).catch(function(t){throw e.captureBreadcrumb({type:"http",category:"fetch",data:s,level:"error"}),t})}},r),t.dom&&this._hasDocument&&(_document.addEventListener?(_document.addEventListener("click",e._breadcrumbEventHandler("click"),!1),_document.addEventListener("keypress",e._keypressEventHandler(),!1)):_document.attachEvent&&(_document.attachEvent("onclick",e._breadcrumbEventHandler("click")),_document.attachEvent("onkeypress",e._keypressEventHandler())));var i=_window.chrome,a=!(i&&i.app&&i.app.runtime)&&_window.history&&_window.history.pushState&&_window.history.replaceState;if(t.location&&a){var o=_window.onpopstate;_window.onpopstate=function(){var t=e._location.href;if(e._captureUrlChange(e._lastHref,t),o)return o.apply(this,arguments)};var s=function(t){return function(){var r=arguments.length>2?arguments[2]:void 0;return r&&e._captureUrlChange(e._lastHref,r+""),t.apply(this,arguments)}};fill(_window.history,"pushState",s,r),fill(_window.history,"replaceState",s,r)}if(t.console&&"console"in _window&&console.log){var l=function(t,r){e.captureBreadcrumb({message:t,level:r.level,category:"console"})};each(["debug","info","warn","error","log"],function(e,t){wrapConsoleMethod(console,t,l)})}},_restoreBuiltIns:function(){for(var e;this._wrappedBuiltIns.length;){var t=(e=this._wrappedBuiltIns.shift())[0],r=e[1],n=e[2];t[r]=n}},_restoreConsole:function(){for(var e in this._originalConsoleMethods)this._originalConsole[e]=this._originalConsoleMethods[e]},_drainPlugins:function(){var e=this;each(this._plugins,function(t,r){var n=r[0],i=r[1];n.apply(e,[e].concat(i))})},_parseDSN:function(e){var t=dsnPattern.exec(e),r={},n=7;try{for(;n--;)r[dsnKeys[n]]=t[n]||""}catch(t){throw new RavenConfigError("Invalid DSN: "+e)}if(r.pass&&!this._globalOptions.allowSecretKey)throw new RavenConfigError("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return r},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(e,t){(t=t||{}).mechanism=t.mechanism||{type:"onerror",handled:!1},this._ignoreOnError||this._handleStackInfo(e,t)},_handleStackInfo:function(e,t){var r=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,r,t)},_prepareFrames:function(e,t){var r=this,n=[];if(e.stack&&e.stack.length&&(each(e.stack,function(t,i){var a=r._normalizeFrame(i,e.url);a&&n.push(a)}),t&&t.trimHeadFrames))for(var i=0;i<t.trimHeadFrames&&i<n.length;i++)n[i].in_app=!1;return n=n.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e,t){var r={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};return e.url||(r.filename=t),r.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(r.filename)||/(Raven|TraceKit)\./.test(r.function)||/raven\.(min\.)?js$/.test(r.filename)),r},_processException:function(e,t,r,n,i,a){var o,s=(e?e+": ":"")+(t||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)&&!this._globalOptions.ignoreErrors.test(s))&&(i&&i.length?(r=i[0].filename||r,i.reverse(),o={frames:i}):r&&(o={frames:[{filename:r,lineno:n,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(r))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(r)))){var l=objectMerge({exception:{values:[{type:e,value:t,stacktrace:o}]},transaction:r},a),c=l.exception.values[0];null==c.type&&""===c.value&&(c.value="Unrecoverable error caught"),!l.exception.mechanism&&l.mechanism&&(l.exception.mechanism=l.mechanism,delete l.mechanism),l.exception.mechanism=objectMerge({type:"generic",handled:!0},l.exception.mechanism||{}),this._send(l)}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=truncate(e.message,t)),e.exception){var r=e.exception.values[0];r.value=truncate(r.value,t)}var n=e.request;return n&&(n.url&&(n.url=truncate(n.url,this._globalOptions.maxUrlLength)),n.Referer&&(n.Referer=truncate(n.Referer,this._globalOptions.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this._trimBreadcrumbs(e.breadcrumbs),e},_trimBreadcrumbs:function(e){for(var t,r,n,i=["to","from","url"],a=0;a<e.values.length;++a)if((r=e.values[a]).hasOwnProperty("data")&&isObject(r.data)&&!objectFrozen(r.data)){n=objectMerge({},r.data);for(var o=0;o<i.length;++o)t=i[o],n.hasOwnProperty(t)&&n[t]&&(n[t]=truncate(n[t],this._globalOptions.maxUrlLength));e.values[a].data=n}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var e={};return this._hasNavigator&&_navigator.userAgent&&(e.headers={"User-Agent":_navigator.userAgent}),_window.location&&_window.location.href&&(e.url=_window.location.href),this._hasDocument&&_document.referrer&&(e.headers||(e.headers={}),e.headers.Referer=_document.referrer),e}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&now()-this._backoffStart<this._backoffDuration},_isRepeatData:function(e){var t=this._lastData;return!(!t||e.message!==t.message||e.transaction!==t.transaction)&&(e.stacktrace||t.stacktrace?isSameStacktrace(e.stacktrace,t.stacktrace):!e.exception&&!t.exception||isSameException(e.exception,t.exception))},_setBackoffState:function(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var r;try{r=supportsFetch()?e.headers.get("Retry-After"):e.getResponseHeader("Retry-After"),r=1e3*parseInt(r,10)}catch(e){}this._backoffDuration=r||(2*this._backoffDuration||1e3),this._backoffStart=now()}}},_send:function(e){var t=this._globalOptions,r={project:this._globalProject,logger:t.logger,platform:"javascript"},n=this._getHttpData();n&&(r.request=n),e.trimHeadFrames&&delete e.trimHeadFrames,(e=objectMerge(r,e)).tags=objectMerge(objectMerge({},this._globalContext.tags),e.tags),e.extra=objectMerge(objectMerge({},this._globalContext.extra),e.extra),e.extra["session:duration"]=now()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(e.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(e.user=this._globalContext.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),e=this._sanitizeData(e),Object.keys(e).forEach(function(t){(null==e[t]||""===e[t]||isEmptyObject(e[t]))&&delete e[t]}),isFunction(t.dataCallback)&&(e=t.dataCallback(e)||e),e&&!isEmptyObject(e)&&(isFunction(t.shouldSendCallback)&&!t.shouldSendCallback(e)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",e):"number"==typeof t.sampleRate?Math.random()<t.sampleRate&&this._sendProcessedPayload(e):this._sendProcessedPayload(e)))},_sanitizeData:function(e){return sanitize(e,this._globalOptions.sanitizeKeys)},_getUuid:function(){return uuid4()},_sendProcessedPayload:function(e,t){var r=this,n=this._globalOptions;if(this.isSetup())if(e=this._trimPacket(e),this._globalOptions.allowDuplicates||!this._isRepeatData(e)){this._lastEventId=e.event_id||(e.event_id=this._getUuid()),this._lastData=e,this._logDebug("debug","Raven about to send:",e);var i={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(i.sentry_secret=this._globalSecret);var a=e.exception&&e.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:a?(a.type?a.type+": ":"")+a.value:e.message,event_id:e.event_id,level:e.level||"error"});var o=this._globalEndpoint;(n.transport||this._makeRequest).call(this,{url:o,auth:i,data:e,options:n,onSuccess:function success(){r._resetBackoff(),r._triggerEvent("success",{data:e,src:o}),t&&t()},onError:function failure(n){r._logDebug("error","Raven transport failed to send: ",n),n.request&&r._setBackoffState(n.request),r._triggerEvent("failure",{data:e,src:o}),n=n||new Error("Raven send failed (no additional details provided)"),t&&t(n)}})}else this._logDebug("warn","Raven dropped repeat event: ",e)},_makeRequest:function(e){var t=e.url+"?"+urlencode(e.auth),r=null,n={};if(e.options.headers&&(r=this._evaluateHash(e.options.headers)),e.options.fetchParameters&&(n=this._evaluateHash(e.options.fetchParameters)),supportsFetch()){n.body=stringify(e.data);var i=objectMerge({},this._fetchDefaults),a=objectMerge(i,n);return r&&(a.headers=r),_window.fetch(t,a).then(function(t){if(t.ok)e.onSuccess&&e.onSuccess();else{var r=new Error("Sentry error code: "+t.status);r.request=t,e.onError&&e.onError(r)}}).catch(function(){e.onError&&e.onError(new Error("Sentry error code: network unavailable"))})}var o=_window.XMLHttpRequest&&new _window.XMLHttpRequest;o&&(("withCredentials"in o||"undefined"!=typeof XDomainRequest)&&("withCredentials"in o?o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)e.onSuccess&&e.onSuccess();else if(e.onError){var t=new Error("Sentry error code: "+o.status);t.request=o,e.onError(t)}}:(o=new XDomainRequest,t=t.replace(/^https?:/,""),e.onSuccess&&(o.onload=e.onSuccess),e.onError&&(o.onerror=function(){var t=new Error("Sentry error code: XDomainRequest");t.request=o,e.onError(t)})),o.open("POST",t),r&&each(r,function(e,t){o.setRequestHeader(e,t)}),o.send(stringify(e.data))))},_evaluateHash:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t[r]="function"==typeof n?n():n}return t},_logDebug:function(e){this._originalConsoleMethods[e]&&(this.debug||this._globalOptions.debug)&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(e,t){isUndefined(t)?delete this._globalContext[e]:this._globalContext[e]=objectMerge(this._globalContext[e]||{},t)}},Raven.prototype.setUser=Raven.prototype.setUserContext,Raven.prototype.setReleaseContext=Raven.prototype.setRelease,module.exports=Raven;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../vendor/TraceKit/tracekit":205,"../vendor/json-stringify-safe/stringify":206,"../vendor/md5/md5":207,"./configError":200,"./console":201,"./utils":204}],203:[function(require,module,exports){
        (function (global){
            var RavenConstructor=require("./raven"),_window="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_Raven=_window.Raven,Raven=new RavenConstructor;Raven.noConflict=function(){return _window.Raven=_Raven,Raven},Raven.afterLoad(),module.exports=Raven,module.exports.Client=RavenConstructor;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./raven":202}],204:[function(require,module,exports){
        (function (global){
            var stringify=require("../vendor/json-stringify-safe/stringify"),_window="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function isObject(e){return"object"==typeof e&&null!==e}function isError(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function isErrorEvent(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function isDOMError(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function isDOMException(e){return"[object DOMException]"===Object.prototype.toString.call(e)}function isUndefined(e){return void 0===e}function isFunction(e){return"function"==typeof e}function isPlainObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function isString(e){return"[object String]"===Object.prototype.toString.call(e)}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function isEmptyObject(e){if(!isPlainObject(e))return!1;for(var r in e)if(e.hasOwnProperty(r))return!1;return!0}function supportsErrorEvent(){try{return new ErrorEvent(""),!0}catch(e){return!1}}function supportsDOMError(){try{return new DOMError(""),!0}catch(e){return!1}}function supportsDOMException(){try{return new DOMException(""),!0}catch(e){return!1}}function supportsFetch(){if(!("fetch"in _window))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function supportsReferrerPolicy(){if(!supportsFetch())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(e){return!1}}function supportsPromiseRejectionEvent(){return"function"==typeof PromiseRejectionEvent}function wrappedCallback(e){return function dataCallback(r,t){var n=e(r)||r;return t&&t(n)||n}}function each(e,r){var t,n;if(isUndefined(e.length))for(t in e)hasKey(e,t)&&r.call(null,t,e[t]);else if(n=e.length)for(t=0;t<n;t++)r.call(null,t,e[t])}function objectMerge(e,r){return r?(each(r,function(r,t){e[r]=t}),e):e}function objectFrozen(e){return!!Object.isFrozen&&Object.isFrozen(e)}function truncate(e,r){if("number"!=typeof r)throw new Error("2nd argument to `truncate` function should be a number");return"string"!=typeof e||0===r?e:e.length<=r?e:e.substr(0,r)+"…"}function hasKey(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function joinRegExp(e){for(var r,t=[],n=0,i=e.length;n<i;n++)isString(r=e[n])?t.push(r.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):r&&r.source&&t.push(r.source);return new RegExp(t.join("|"),"i")}function urlencode(e){var r=[];return each(e,function(e,t){r.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),r.join("&")}function parseUrl(e){if("string"!=typeof e)return{};var r=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),t=r[6]||"",n=r[8]||"";return{protocol:r[2],host:r[4],path:r[5],relative:r[5]+t+n}}function uuid4(){var e=_window.crypto||_window.msCrypto;if(!isUndefined(e)&&e.getRandomValues){var r=new Uint16Array(8);e.getRandomValues(r),r[3]=4095&r[3]|16384,r[4]=16383&r[4]|32768;var t=function(e){for(var r=e.toString(16);r.length<4;)r="0"+r;return r};return t(r[0])+t(r[1])+t(r[2])+t(r[3])+t(r[4])+t(r[5])+t(r[6])+t(r[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0;return("x"===e?r:3&r|8).toString(16)})}function htmlTreeAsString(e){for(var r,t=[],n=0,i=0,o=" > ".length;e&&n++<5&&!("html"===(r=htmlElementAsString(e))||n>1&&i+t.length*o+r.length>=80);)t.push(r),i+=r.length,e=e.parentNode;return t.reverse().join(" > ")}function htmlElementAsString(e){var r,t,n,i,o,c=[];if(!e||!e.tagName)return"";if(c.push(e.tagName.toLowerCase()),e.id&&c.push("#"+e.id),(r=e.className)&&isString(r))for(t=r.split(/\s+/),o=0;o<t.length;o++)c.push("."+t[o]);var u=["type","name","title","alt"];for(o=0;o<u.length;o++)n=u[o],(i=e.getAttribute(n))&&c.push("["+n+'="'+i+'"]');return c.join("")}function isOnlyOneTruthy(e,r){return!!(!!e^!!r)}function isBothUndefined(e,r){return isUndefined(e)&&isUndefined(r)}function isSameException(e,r){return!isOnlyOneTruthy(e,r)&&(e=e.values[0],r=r.values[0],e.type===r.type&&e.value===r.value&&(!isBothUndefined(e.stacktrace,r.stacktrace)&&isSameStacktrace(e.stacktrace,r.stacktrace)))}function isSameStacktrace(e,r){if(isOnlyOneTruthy(e,r))return!1;var t,n,i=e.frames,o=r.frames;if(void 0===i||void 0===o)return!1;if(i.length!==o.length)return!1;for(var c=0;c<i.length;c++)if(t=i[c],n=o[c],t.filename!==n.filename||t.lineno!==n.lineno||t.colno!==n.colno||t.function!==n.function)return!1;return!0}function fill(e,r,t,n){if(null!=e){var i=e[r];e[r]=t(i),e[r].__raven__=!0,e[r].__orig__=i,n&&n.push([e,r,i])}}function safeJoin(e,r){if(!isArray(e))return"";for(var t=[],n=0;n<e.length;n++)try{t.push(String(e[n]))}catch(e){t.push("[value cannot be serialized]")}return t.join(r)}var MAX_SERIALIZE_EXCEPTION_DEPTH=3,MAX_SERIALIZE_EXCEPTION_SIZE=51200,MAX_SERIALIZE_KEYS_LENGTH=40;function utf8Length(e){return~-encodeURI(e).split(/%..|./).length}function jsonSize(e){return utf8Length(JSON.stringify(e))}function serializeValue(e){if("string"==typeof e){return truncate(e,40)}if("number"==typeof e||"boolean"==typeof e||void 0===e)return e;var r=Object.prototype.toString.call(e);return"[object Object]"===r?"[Object]":"[object Array]"===r?"[Array]":"[object Function]"===r?e.name?"[Function: "+e.name+"]":"[Function]":e}function serializeObject(e,r){return 0===r?serializeValue(e):isPlainObject(e)?Object.keys(e).reduce(function(t,n){return t[n]=serializeObject(e[n],r-1),t},{}):Array.isArray(e)?e.map(function(e){return serializeObject(e,r-1)}):serializeValue(e)}function serializeException(e,r,t){if(!isPlainObject(e))return e;t="number"!=typeof(r="number"!=typeof r?MAX_SERIALIZE_EXCEPTION_DEPTH:r)?MAX_SERIALIZE_EXCEPTION_SIZE:t;var n=serializeObject(e,r);return jsonSize(stringify(n))>t?serializeException(e,r-1):n}function serializeKeysForMessage(e,r){if("number"==typeof e||"string"==typeof e)return e.toString();if(!Array.isArray(e))return"";if(0===(e=e.filter(function(e){return"string"==typeof e})).length)return"[object has no keys]";if(r="number"!=typeof r?MAX_SERIALIZE_KEYS_LENGTH:r,e[0].length>=r)return e[0];for(var t=e.length;t>0;t--){var n=e.slice(0,t).join(", ");if(!(n.length>r))return t===e.length?n:n+"…"}return""}function sanitize(e,r){if(!isArray(r)||isArray(r)&&0===r.length)return e;var t,n=joinRegExp(r),i="********";try{t=JSON.parse(stringify(e))}catch(r){return e}return function sanitizeWorker(e){return isArray(e)?e.map(function(e){return sanitizeWorker(e)}):isPlainObject(e)?Object.keys(e).reduce(function(r,t){return n.test(t)?r[t]=i:r[t]=sanitizeWorker(e[t]),r},{}):e}(t)}module.exports={isObject:isObject,isError:isError,isErrorEvent:isErrorEvent,isDOMError:isDOMError,isDOMException:isDOMException,isUndefined:isUndefined,isFunction:isFunction,isPlainObject:isPlainObject,isString:isString,isArray:isArray,isEmptyObject:isEmptyObject,supportsErrorEvent:supportsErrorEvent,supportsDOMError:supportsDOMError,supportsDOMException:supportsDOMException,supportsFetch:supportsFetch,supportsReferrerPolicy:supportsReferrerPolicy,supportsPromiseRejectionEvent:supportsPromiseRejectionEvent,wrappedCallback:wrappedCallback,each:each,objectMerge:objectMerge,truncate:truncate,objectFrozen:objectFrozen,hasKey:hasKey,joinRegExp:joinRegExp,urlencode:urlencode,uuid4:uuid4,htmlTreeAsString:htmlTreeAsString,htmlElementAsString:htmlElementAsString,isSameException:isSameException,isSameStacktrace:isSameStacktrace,parseUrl:parseUrl,fill:fill,safeJoin:safeJoin,serializeException:serializeException,serializeKeysForMessage:serializeKeysForMessage,sanitize:sanitize};

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../vendor/json-stringify-safe/stringify":206}],205:[function(require,module,exports){
        (function (global){
            var utils=require("../../src/utils"),TraceKit={collectWindowErrors:!0,debug:!1},_window="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_slice=[].slice,UNKNOWN_FUNCTION="?",ERROR_TYPES_RE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function getLocationHref(){return"undefined"==typeof document||null==document.location?"":document.location.href}function getLocationOrigin(){return"undefined"==typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:"")}TraceKit.report=function reportModuleWrapper(){var e,n,t=[],r=null,c=null,a=null;function notifyHandlers(e,n){var r=null;if(!n||TraceKit.collectWindowErrors){for(var c in t)if(t.hasOwnProperty(c))try{t[c].apply(null,[e].concat(_slice.call(arguments,2)))}catch(e){r=e}if(r)throw r}}function traceKitWindowOnError(n,t,r,c,i){var l=utils.isErrorEvent(i)?i.error:i,o=utils.isErrorEvent(n)?n.message:n;if(a)TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(a,t,r,o),processLastException();else if(l&&utils.isError(l))notifyHandlers(TraceKit.computeStackTrace(l),!0);else{var u,s={url:t,line:r,column:c},f=void 0;if("[object String]"==={}.toString.call(o))(u=o.match(ERROR_TYPES_RE))&&(f=u[1],o=u[2]);s.func=UNKNOWN_FUNCTION,notifyHandlers({name:f,message:o,url:getLocationHref(),stack:[s]},!0)}return!!e&&e.apply(this,arguments)}function processLastException(){var e=a,n=r;r=null,a=null,c=null,notifyHandlers.apply(null,[e,!1].concat(n))}function report(e,n){var t=_slice.call(arguments,1);if(a){if(c===e)return;processLastException()}var i=TraceKit.computeStackTrace(e);if(a=i,c=e,r=t,setTimeout(function(){c===e&&processLastException()},i.incomplete?2e3:0),!1!==n)throw e}return report.subscribe=function subscribe(r){!function installGlobalHandler(){n||(e=_window.onerror,_window.onerror=traceKitWindowOnError,n=!0)}(),t.push(r)},report.unsubscribe=function unsubscribe(e){for(var n=t.length-1;n>=0;--n)t[n]===e&&t.splice(n,1)},report.uninstall=function unsubscribeAll(){!function uninstallGlobalHandler(){n&&(_window.onerror=e,n=!1,e=void 0)}(),t=[]},report}(),TraceKit.computeStackTrace=function computeStackTraceWrapper(){function computeStackTraceFromStackProp(e){if(void 0!==e.stack&&e.stack){for(var n,t,r,c=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,i=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,l=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,o=/\((\S*)(?::(\d+))(?::(\d+))\)/,u=e.stack.split("\n"),s=[],f=(/^(.*) is undefined$/.exec(e.message),0),m=u.length;f<m;++f){if(t=c.exec(u[f])){var p=t[2]&&0===t[2].indexOf("native");t[2]&&0===t[2].indexOf("eval")&&(n=o.exec(t[2]))&&(t[2]=n[1],t[3]=n[2],t[4]=n[3]),r={url:p?null:t[2],func:t[1]||UNKNOWN_FUNCTION,args:p?[t[2]]:[],line:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}else if(t=a.exec(u[f]))r={url:t[2],func:t[1]||UNKNOWN_FUNCTION,args:[],line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=i.exec(u[f])))continue;t[3]&&t[3].indexOf(" > eval")>-1&&(n=l.exec(t[3]))?(t[3]=n[1],t[4]=n[2],t[5]=null):0!==f||t[5]||void 0===e.columnNumber||(s[0].column=e.columnNumber+1),r={url:t[3],func:t[1]||UNKNOWN_FUNCTION,args:t[2]?t[2].split(","):[],line:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}if(!r.func&&r.line&&(r.func=UNKNOWN_FUNCTION),r.url&&"blob:"===r.url.substr(0,5)){var d=new XMLHttpRequest;if(d.open("GET",r.url,!1),d.send(null),200===d.status){var g=d.responseText||"",T=(g=g.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(T){var k=T[1];"~"===k.charAt(0)&&(k=getLocationOrigin()+k.slice(1)),r.url=k.slice(0,-4)}}}s.push(r)}return s.length?{name:e.name,message:e.message,url:getLocationHref(),stack:s}:null}}function augmentStackTraceWithInitialElement(e,n,t,r){var c={url:n,line:t};if(c.url&&c.line){if(e.incomplete=!1,c.func||(c.func=UNKNOWN_FUNCTION),e.stack.length>0&&e.stack[0].url===c.url){if(e.stack[0].line===c.line)return!1;if(!e.stack[0].line&&e.stack[0].func===c.func)return e.stack[0].line=c.line,!1}return e.stack.unshift(c),e.partial=!0,!0}return e.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(e,n){for(var t,r,c=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,a=[],i={},l=!1,o=computeStackTraceByWalkingCallerChain.caller;o&&!l;o=o.caller)if(o!==computeStackTrace&&o!==TraceKit.report){if(r={url:null,func:UNKNOWN_FUNCTION,line:null,column:null},o.name?r.func=o.name:(t=c.exec(o.toString()))&&(r.func=t[1]),void 0===r.func)try{r.func=t.input.substring(0,t.input.indexOf("{"))}catch(e){}i[""+o]?l=!0:i[""+o]=!0,a.push(r)}n&&a.splice(0,n);var u={name:e.name,message:e.message,url:getLocationHref(),stack:a};return augmentStackTraceWithInitialElement(u,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),u}function computeStackTrace(e,n){var t=null;n=null==n?0:+n;try{if(t=computeStackTraceFromStackProp(e))return t}catch(e){if(TraceKit.debug)throw e}try{if(t=computeStackTraceByWalkingCallerChain(e,n+1))return t}catch(e){if(TraceKit.debug)throw e}return{name:e.name,message:e.message,url:getLocationHref()}}return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.computeStackTraceFromStackProp=computeStackTraceFromStackProp,computeStackTrace}(),module.exports=TraceKit;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../src/utils":204}],206:[function(require,module,exports){
        function indexOf(r,i){for(var e=0;e<r.length;++e)if(r[e]===i)return e;return-1}function stringify(r,i,e,n){return JSON.stringify(r,serializer(i,n),e)}function stringifyError(r){var i={stack:r.stack,message:r.message,name:r.name};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(i[e]=r[e]);return i}function serializer(r,i){var e=[],n=[];return null==i&&(i=function(r,i){return e[0]===i?"[Circular ~]":"[Circular ~."+n.slice(0,indexOf(e,i)).join(".")+"]"}),function(t,s){if(e.length>0){var l=indexOf(e,this);~l?e.splice(l+1):e.push(this),~l?n.splice(l,1/0,t):n.push(t),~indexOf(e,s)&&(s=i.call(this,t,s))}else e.push(s);return null==r?s instanceof Error?stringifyError(s):s:r.call(this,t,s)}}exports=module.exports=stringify,exports.getSerialize=serializer;

    },{}],207:[function(require,module,exports){
        function safeAdd(r,d){var n=(65535&r)+(65535&d);return(r>>16)+(d>>16)+(n>>16)<<16|65535&n}function bitRotateLeft(r,d){return r<<d|r>>>32-d}function md5cmn(r,d,n,t,m,f){return safeAdd(bitRotateLeft(safeAdd(safeAdd(d,r),safeAdd(t,f)),m),n)}function md5ff(r,d,n,t,m,f,i){return md5cmn(d&n|~d&t,r,d,m,f,i)}function md5gg(r,d,n,t,m,f,i){return md5cmn(d&t|n&~t,r,d,m,f,i)}function md5hh(r,d,n,t,m,f,i){return md5cmn(d^n^t,r,d,m,f,i)}function md5ii(r,d,n,t,m,f,i){return md5cmn(n^(d|~t),r,d,m,f,i)}function binlMD5(r,d){var n,t,m,f,i;r[d>>5]|=128<<d%32,r[14+(d+64>>>9<<4)]=d;var e=1732584193,h=-271733879,g=-1732584194,o=271733878;for(n=0;n<r.length;n+=16)t=e,m=h,f=g,i=o,e=md5ff(e,h,g,o,r[n],7,-680876936),o=md5ff(o,e,h,g,r[n+1],12,-389564586),g=md5ff(g,o,e,h,r[n+2],17,606105819),h=md5ff(h,g,o,e,r[n+3],22,-1044525330),e=md5ff(e,h,g,o,r[n+4],7,-176418897),o=md5ff(o,e,h,g,r[n+5],12,1200080426),g=md5ff(g,o,e,h,r[n+6],17,-1473231341),h=md5ff(h,g,o,e,r[n+7],22,-45705983),e=md5ff(e,h,g,o,r[n+8],7,1770035416),o=md5ff(o,e,h,g,r[n+9],12,-1958414417),g=md5ff(g,o,e,h,r[n+10],17,-42063),h=md5ff(h,g,o,e,r[n+11],22,-1990404162),e=md5ff(e,h,g,o,r[n+12],7,1804603682),o=md5ff(o,e,h,g,r[n+13],12,-40341101),g=md5ff(g,o,e,h,r[n+14],17,-1502002290),e=md5gg(e,h=md5ff(h,g,o,e,r[n+15],22,1236535329),g,o,r[n+1],5,-165796510),o=md5gg(o,e,h,g,r[n+6],9,-1069501632),g=md5gg(g,o,e,h,r[n+11],14,643717713),h=md5gg(h,g,o,e,r[n],20,-373897302),e=md5gg(e,h,g,o,r[n+5],5,-701558691),o=md5gg(o,e,h,g,r[n+10],9,38016083),g=md5gg(g,o,e,h,r[n+15],14,-660478335),h=md5gg(h,g,o,e,r[n+4],20,-405537848),e=md5gg(e,h,g,o,r[n+9],5,568446438),o=md5gg(o,e,h,g,r[n+14],9,-1019803690),g=md5gg(g,o,e,h,r[n+3],14,-187363961),h=md5gg(h,g,o,e,r[n+8],20,1163531501),e=md5gg(e,h,g,o,r[n+13],5,-1444681467),o=md5gg(o,e,h,g,r[n+2],9,-51403784),g=md5gg(g,o,e,h,r[n+7],14,1735328473),e=md5hh(e,h=md5gg(h,g,o,e,r[n+12],20,-1926607734),g,o,r[n+5],4,-378558),o=md5hh(o,e,h,g,r[n+8],11,-2022574463),g=md5hh(g,o,e,h,r[n+11],16,1839030562),h=md5hh(h,g,o,e,r[n+14],23,-35309556),e=md5hh(e,h,g,o,r[n+1],4,-1530992060),o=md5hh(o,e,h,g,r[n+4],11,1272893353),g=md5hh(g,o,e,h,r[n+7],16,-155497632),h=md5hh(h,g,o,e,r[n+10],23,-1094730640),e=md5hh(e,h,g,o,r[n+13],4,681279174),o=md5hh(o,e,h,g,r[n],11,-358537222),g=md5hh(g,o,e,h,r[n+3],16,-722521979),h=md5hh(h,g,o,e,r[n+6],23,76029189),e=md5hh(e,h,g,o,r[n+9],4,-640364487),o=md5hh(o,e,h,g,r[n+12],11,-421815835),g=md5hh(g,o,e,h,r[n+15],16,530742520),e=md5ii(e,h=md5hh(h,g,o,e,r[n+2],23,-995338651),g,o,r[n],6,-198630844),o=md5ii(o,e,h,g,r[n+7],10,1126891415),g=md5ii(g,o,e,h,r[n+14],15,-1416354905),h=md5ii(h,g,o,e,r[n+5],21,-57434055),e=md5ii(e,h,g,o,r[n+12],6,1700485571),o=md5ii(o,e,h,g,r[n+3],10,-1894986606),g=md5ii(g,o,e,h,r[n+10],15,-1051523),h=md5ii(h,g,o,e,r[n+1],21,-2054922799),e=md5ii(e,h,g,o,r[n+8],6,1873313359),o=md5ii(o,e,h,g,r[n+15],10,-30611744),g=md5ii(g,o,e,h,r[n+6],15,-1560198380),h=md5ii(h,g,o,e,r[n+13],21,1309151649),e=md5ii(e,h,g,o,r[n+4],6,-145523070),o=md5ii(o,e,h,g,r[n+11],10,-1120210379),g=md5ii(g,o,e,h,r[n+2],15,718787259),h=md5ii(h,g,o,e,r[n+9],21,-343485551),e=safeAdd(e,t),h=safeAdd(h,m),g=safeAdd(g,f),o=safeAdd(o,i);return[e,h,g,o]}function binl2rstr(r){var d,n="",t=32*r.length;for(d=0;d<t;d+=8)n+=String.fromCharCode(r[d>>5]>>>d%32&255);return n}function rstr2binl(r){var d,n=[];for(n[(r.length>>2)-1]=void 0,d=0;d<n.length;d+=1)n[d]=0;var t=8*r.length;for(d=0;d<t;d+=8)n[d>>5]|=(255&r.charCodeAt(d/8))<<d%32;return n}function rstrMD5(r){return binl2rstr(binlMD5(rstr2binl(r),8*r.length))}function rstrHMACMD5(r,d){var n,t,m=rstr2binl(r),f=[],i=[];for(f[15]=i[15]=void 0,m.length>16&&(m=binlMD5(m,8*r.length)),n=0;n<16;n+=1)f[n]=909522486^m[n],i[n]=1549556828^m[n];return t=binlMD5(f.concat(rstr2binl(d)),512+8*d.length),binl2rstr(binlMD5(i.concat(t),640))}function rstr2hex(r){var d,n,t="";for(n=0;n<r.length;n+=1)d=r.charCodeAt(n),t+="0123456789abcdef".charAt(d>>>4&15)+"0123456789abcdef".charAt(15&d);return t}function str2rstrUTF8(r){return unescape(encodeURIComponent(r))}function rawMD5(r){return rstrMD5(str2rstrUTF8(r))}function hexMD5(r){return rstr2hex(rawMD5(r))}function rawHMACMD5(r,d){return rstrHMACMD5(str2rstrUTF8(r),str2rstrUTF8(d))}function hexHMACMD5(r,d){return rstr2hex(rawHMACMD5(r,d))}function md5(r,d,n){return d?n?rawHMACMD5(d,r):hexHMACMD5(d,r):n?rawMD5(r):hexMD5(r)}module.exports=md5;

    },{}],208:[function(require,module,exports){
        "use strict";var _when=require("./when"),_not=require("./not");module.exports={When:_when.When,WhenNot:_not.WhenNot};

    },{"./not":209,"./when":210}],209:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WhenNot=void 0;var _when=require("./when"),WhenNot=exports.WhenNot=function WhenNot(e){if(e.and&&e.or)throw new Error('must not use "and" with "or".');var r=(0,_when.filterCaseLabel)(Object.keys(e));if(r.length>1&&!e.and&&!e.or)throw new Error('must specify "and" or "or" operator.');var n=!0,t=!1,o=void 0;try{for(var a,i=r[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value;if(e.or){if(_when.When.case(l))return null}else if(!_when.When.case(l))return e.children||null}}catch(e){t=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(t)throw o}}return e.or&&e.children||null};

    },{"./when":210}],210:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var reservedWords=["children","or","and"],filterCaseLabel=exports.filterCaseLabel=function filterCaseLabel(e){return e.filter(function(e){return!reservedWords.includes(e)})},When=exports.When=function When(e){if(e.and&&e.or)throw new Error('must not use "and" with "or".');var r=filterCaseLabel(Object.keys(e));if(r.length>1&&!e.and&&!e.or)throw new Error('must specify "and" or "or" operator.');var n=!0,t=!1,o=void 0;try{for(var i,s=r[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(e.or){if(When.case(a))return e.children||null}else if(!When.case(a))return null}}catch(e){t=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(t)throw o}}return e.or?null:e.children||null};When.cases={},When.case=function(e,r){if(r){if("function"!=typeof r)throw new Error("condition must be a function.");if(When.cases[e])throw new Error('label "'+e+'" is already registerd.');return When.cases[e]=r,Object.defineProperty(When,e,{get:r}),r}if("function"!=typeof When.cases[e])throw new Error('label "'+e+'" is not registerd.');return When.cases[e]()};

    },{}],211:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_shallowEqual=require("../utils/shallowEqual"),_shallowEqual2=_interopRequireDefault(_shallowEqual),_Elements=require("./Elements");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _objectWithoutProperties(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var noop=function noop(){},_extractOptions=function _extractOptions(e){e.id,e.className,e.elementRef,e.onChange,e.onFocus,e.onBlur,e.onReady;return _objectWithoutProperties(e,["id","className","elementRef","onChange","onFocus","onBlur","onReady"])},Element=function Element(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=t=function(t){function _class(e,n){_classCallCheck(this,_class);var o=_possibleConstructorReturn(this,t.call(this,e,n));o.handleRef=function(e){o._ref=e},o._element=null;var r=_extractOptions(o.props);return o._options=r,o}return _inherits(_class,t),_class.prototype.componentDidMount=function componentDidMount(){var t=this;this.context.addElementsLoadListener(function(n){var r=n.create(e,t._options);t._element=r,t._setupEventListeners(r),r.mount(t._ref),o.sourceType&&t.context.registerElement(o.sourceType,r)})},_class.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){var t=_extractOptions(e);0===Object.keys(t).length||(0,_shallowEqual2.default)(t,this._options)||(this._options=t,this._element&&this._element.update(t))},_class.prototype.componentWillUnmount=function componentWillUnmount(){if(this._element){var e=this._element;e.destroy(),this.context.unregisterElement(e)}},_class.prototype._setupEventListeners=function _setupEventListeners(e){var t=this;e.on("ready",function(){t.props.elementRef&&(window.console&&window.console.warn&&console.warn("'elementRef()' is deprecated and will be removed in a future version of react-stripe-elements. Please use 'onReady()' instead."),t.props.elementRef(t._element)),t.props.onReady(t._element)}),e.on("change",function(e){t.props.onChange(e)}),e.on("blur",function(){var e;return(e=t.props).onBlur.apply(e,arguments)}),e.on("focus",function(){var e;return(e=t.props).onFocus.apply(e,arguments)})},_class.prototype.render=function render(){return _react2.default.createElement("div",{id:this.props.id,className:this.props.className,ref:this.handleRef})},_class}(_react2.default.Component),t.propTypes={id:_propTypes2.default.string,className:_propTypes2.default.string,elementRef:_propTypes2.default.func,onChange:_propTypes2.default.func,onBlur:_propTypes2.default.func,onFocus:_propTypes2.default.func,onReady:_propTypes2.default.func},t.defaultProps={id:void 0,className:void 0,elementRef:void 0,onChange:noop,onBlur:noop,onFocus:noop,onReady:noop},t.contextTypes=_Elements.elementContextTypes,n};exports.default=Element;

    },{"../utils/shallowEqual":217,"./Elements":212,"prop-types":186,"react":219}],212:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elementContextTypes=exports.injectContextTypes=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_Provider=require("./Provider");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var injectContextTypes=exports.injectContextTypes={getRegisteredElements:_propTypes2.default.func.isRequired},elementContextTypes=exports.elementContextTypes={addElementsLoadListener:_propTypes2.default.func.isRequired,registerElement:_propTypes2.default.func.isRequired,unregisterElement:_propTypes2.default.func.isRequired},Elements=function(e){function Elements(t,r){_classCallCheck(this,Elements);var n=_possibleConstructorReturn(this,e.call(this,t,r));return n.handleRegisterElement=function(e,t){n.setState(function(r){return{registeredElements:[].concat(_toConsumableArray(r.registeredElements),[{type:e,element:t}])}})},n.handleUnregisterElement=function(e){n.setState(function(t){return{registeredElements:t.registeredElements.filter(function(t){return t.element!==e})}})},n.state={registeredElements:[]},n}return _inherits(Elements,e),Elements.prototype.getChildContext=function getChildContext(){var e=this;return{addElementsLoadListener:function addElementsLoadListener(t){if(e._elements)t(e._elements);else{var r=e.props,n=(r.children,_objectWithoutProperties(r,["children"]));"sync"===e.context.tag?(e._elements=e.context.stripe.elements(n),t(e._elements)):e.context.addStripeLoadListener(function(r){e._elements?t(e._elements):(e._elements=r.elements(n),t(e._elements))})}},registerElement:this.handleRegisterElement,unregisterElement:this.handleUnregisterElement,getRegisteredElements:function getRegisteredElements(){return e.state.registeredElements}}},Elements.prototype.render=function render(){return _react2.default.Children.only(this.props.children)},Elements}(_react2.default.Component);Elements.childContextTypes=_extends({},injectContextTypes,elementContextTypes),Elements.contextTypes=_Provider.providerContextTypes,Elements.defaultProps={children:null},exports.default=Elements;

    },{"./Provider":214,"prop-types":186,"react":219}],213:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_shallowEqual=require("../utils/shallowEqual"),_shallowEqual2=_interopRequireDefault(_shallowEqual),_Elements=require("./Elements");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _objectWithoutProperties(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var noop=function noop(){},_extractOptions=function _extractOptions(e){e.id,e.className,e.elementRef,e.onBlur,e.onClick,e.onFocus,e.onReady,e.paymentRequest;return _objectWithoutProperties(e,["id","className","elementRef","onBlur","onClick","onFocus","onReady","paymentRequest"])},PaymentRequestButtonElement=function(e){function PaymentRequestButtonElement(t,n){_classCallCheck(this,PaymentRequestButtonElement);var o=_possibleConstructorReturn(this,e.call(this,t,n));o.handleRef=function(e){o._ref=e};var r=_extractOptions(t);return o._options=r,o}return _inherits(PaymentRequestButtonElement,e),PaymentRequestButtonElement.prototype.componentDidMount=function componentDidMount(){var e=this;this.context.addElementsLoadListener(function(t){e._element=t.create("paymentRequestButton",_extends({paymentRequest:e.props.paymentRequest},e._options)),e._element.on("ready",function(){e.props.elementRef&&(window.console&&window.console.warn&&console.warn("'elementRef()' is deprecated and will be removed in a future version of react-stripe-elements. Please use 'onReady()' instead."),e.props.elementRef(e._element)),e.props.onReady(e._element)}),e._element.on("focus",function(){var t;return(t=e.props).onFocus.apply(t,arguments)}),e._element.on("click",function(){var t;return(t=e.props).onClick.apply(t,arguments)}),e._element.on("blur",function(){var t;return(t=e.props).onBlur.apply(t,arguments)}),e._element.mount(e._ref)})},PaymentRequestButtonElement.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){this.props.paymentRequest!==e.paymentRequest&&console.warn("Unsupported prop change: paymentRequest is not a customizable property.");var t=_extractOptions(e);0===Object.keys(t).length||(0,_shallowEqual2.default)(t,this._options)||(this._options=t,this._element.update(t))},PaymentRequestButtonElement.prototype.componentWillUnmount=function componentWillUnmount(){this._element.destroy()},PaymentRequestButtonElement.prototype.render=function render(){return _react2.default.createElement("div",{id:this.props.id,className:this.props.className,ref:this.handleRef})},PaymentRequestButtonElement}(_react2.default.Component);PaymentRequestButtonElement.propTypes={id:_propTypes2.default.string,className:_propTypes2.default.string,elementRef:_propTypes2.default.func,onBlur:_propTypes2.default.func,onClick:_propTypes2.default.func,onFocus:_propTypes2.default.func,onReady:_propTypes2.default.func,paymentRequest:_propTypes2.default.shape({canMakePayment:_propTypes2.default.func.isRequired,on:_propTypes2.default.func.isRequired,show:_propTypes2.default.func.isRequired}).isRequired},PaymentRequestButtonElement.defaultProps={id:void 0,className:void 0,elementRef:void 0,onBlur:noop,onClick:noop,onFocus:noop,onReady:noop},PaymentRequestButtonElement.contextTypes=_Elements.elementContextTypes,exports.default=PaymentRequestButtonElement;

    },{"../utils/shallowEqual":217,"./Elements":212,"prop-types":186,"react":219}],214:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.providerContextTypes=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,r){var t={};for(var i in e)r.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var providerContextTypes=exports.providerContextTypes={tag:_propTypes2.default.string.isRequired,stripe:_propTypes2.default.object,addStripeLoadListener:_propTypes2.default.func},getOrCreateStripe=function getOrCreateStripe(e,r){window.Stripe.__cachedInstances=window.Stripe.__cachedInstances||{};var t="key="+e+" options="+JSON.stringify(r),i=window.Stripe.__cachedInstances[t]||window.Stripe(e,r);return window.Stripe.__cachedInstances[t]=i,i},ensureStripeShape=function ensureStripeShape(e){if(e&&e.elements&&e.createSource&&e.createToken)return e;throw new Error("Please pass a valid Stripe object to StripeProvider. You can obtain a Stripe object by calling 'Stripe(...)' with your publishable key.")},Provider=function(e){function Provider(r){_classCallCheck(this,Provider);var t=_possibleConstructorReturn(this,e.call(this,r));if(t.props.apiKey&&t.props.stripe)throw new Error("Please pass either 'apiKey' or 'stripe' to StripeProvider, not both.");if(t.props.apiKey){if(!window.Stripe)throw new Error("Please load Stripe.js (https://js.stripe.com/v3/) on this page to use react-stripe-elements. If Stripe.js isn't available yet (it's loading asynchronously, or you're using server-side rendering), see https://github.com/stripe/react-stripe-elements#advanced-integrations");var i=t.props,o=i.apiKey,p=(i.children,i.stripe,_objectWithoutProperties(i,["apiKey","children","stripe"]));t._meta={tag:"sync",stripe:getOrCreateStripe(o,p)}}else if(t.props.stripe)t._meta={tag:"sync",stripe:ensureStripeShape(t.props.stripe)};else{if(null!==t.props.stripe)throw new Error("Please pass either 'apiKey' or 'stripe' to StripeProvider. If you're using 'stripe' but don't have a Stripe instance yet, pass 'null' explicitly.");t._meta={tag:"async",stripe:null}}return t._didWarn=!1,t._didWakeUpListeners=!1,t._listeners=[],t}return _inherits(Provider,e),Provider.prototype.getChildContext=function getChildContext(){var e=this;return"sync"===this._meta.tag?{tag:"sync",stripe:this._meta.stripe}:{tag:"async",addStripeLoadListener:function addStripeLoadListener(r){e._meta.stripe?r(e._meta.stripe):e._listeners.push(r)}}},Provider.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){var r=this.props.apiKey&&e.apiKey&&this.props.apiKey!==e.apiKey,t=this.props.stripe&&e.stripe&&this.props.stripe!==e.stripe;if(!this._didWarn&&(r||t)&&window.console&&window.console.error)return this._didWarn=!0,void console.error("StripeProvider does not support changing the apiKey parameter.");if(!this._didWakeUpListeners&&e.stripe){this._didWakeUpListeners=!0;var i=ensureStripeShape(e.stripe);this._meta.stripe=i,this._listeners.forEach(function(e){e(i)})}},Provider.prototype.render=function render(){return _react2.default.Children.only(this.props.children)},Provider}(_react2.default.Component);Provider.propTypes={apiKey:_propTypes2.default.string,stripe:_propTypes2.default.object,children:_propTypes2.default.node},Provider.childContextTypes=providerContextTypes,Provider.defaultProps={apiKey:void 0,stripe:void 0,children:null},exports.default=Provider;

    },{"prop-types":186,"react":219}],215:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_react=require("react"),_react2=_interopRequireDefault(_react),_Elements=require("./Elements"),_Provider=require("./Provider");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var inject=function inject(e){var t,r,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).withRef,o=void 0!==n&&n;return r=t=function(t){function _class(e,r){if(_classCallCheck(this,_class),!r||!r.getRegisteredElements)throw new Error("It looks like you are trying to inject Stripe context outside of an Elements context.\nPlease be sure the component that calls createSource or createToken is within an <Elements> component.");var n=_possibleConstructorReturn(this,t.call(this,e,r));return n.findElement=function(e){var t=n.context.getRegisteredElements(),r="auto"===e?t:t.filter(function(t){return t.type===e});if(1===r.length)return r[0].element;if(r.length>1)throw new Error("You did not specify the type of Source or Token to create.\n        We could not infer which Element you want to use for this operation.");return null},n.requireElement=function(e){var t=n.findElement(e);if(t)return t;throw new Error("You did not specify the type of Source or Token to create.\n        We could not infer which Element you want to use for this operation.")},n.wrappedCreateToken=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t&&"object"===(void 0===t?"undefined":_typeof(t))){var o=t.type,i=_objectWithoutProperties(t,["type"]),c="string"==typeof o?o:"auto",s=n.requireElement(c);return e.createToken(s,i)}if("string"==typeof t)return e.createToken(t,r);throw new Error("Invalid options passed to createToken. Expected an object, got "+(void 0===t?"undefined":_typeof(t))+".")}},n.wrappedCreateSource=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t&&"object"===(void 0===t?"undefined":_typeof(t))){var r=t.type,o=_objectWithoutProperties(t,["type"]),i="string"==typeof r?r:"auto",c=n.findElement(i);if(c)return e.createSource(c,o);if("auto"!==i)return e.createSource(t);throw new Error("You did not specify the type of Source to create.\n          We also could not find any Elements in the current context.")}throw new Error("Invalid options passed to createSource. Expected an object, got "+(void 0===t?"undefined":_typeof(t))+".")}},"sync"===n.context.tag?n.state={stripe:n.stripeProps(n.context.stripe)}:n.state={stripe:null},n}return _inherits(_class,t),_class.prototype.componentDidMount=function componentDidMount(){var e=this;"async"===this.context.tag&&this.context.addStripeLoadListener(function(t){e.setState({stripe:e.stripeProps(t)})})},_class.prototype.getWrappedInstance=function getWrappedInstance(){if(!o)throw new Error("To access the wrapped instance, the `{withRef: true}` option must be set when calling `injectStripe()`");return this.wrappedInstance},_class.prototype.stripeProps=function stripeProps(e){return _extends({},e,{createToken:this.wrappedCreateToken(e),createSource:this.wrappedCreateSource(e)})},_class.prototype.render=function render(){var t=this;return _react2.default.createElement(e,_extends({},this.props,{stripe:this.state.stripe,ref:o?function(e){t.wrappedInstance=e}:null}))},_class}(_react2.default.Component),t.contextTypes=_extends({},_Provider.providerContextTypes,_Elements.injectContextTypes),t.displayName="InjectStripe("+(e.displayName||e.name||"Component")+")",r};exports.default=inject;

    },{"./Elements":212,"./Provider":214,"react":219}],216:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PaymentRequestButtonElement=exports.PostalCodeElement=exports.CardCVCElement=exports.CardExpiryElement=exports.CardNumberElement=exports.CardElement=exports.Elements=exports.injectStripe=exports.StripeProvider=void 0;var _Provider=require("./components/Provider"),_Provider2=_interopRequireDefault(_Provider),_inject=require("./components/inject"),_inject2=_interopRequireDefault(_inject),_Elements=require("./components/Elements"),_Elements2=_interopRequireDefault(_Elements),_Element=require("./components/Element"),_Element2=_interopRequireDefault(_Element),_PaymentRequestButtonElement=require("./components/PaymentRequestButtonElement"),_PaymentRequestButtonElement2=_interopRequireDefault(_PaymentRequestButtonElement);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var CardElement=(0,_Element2.default)("card",{sourceType:"card"}),CardNumberElement=(0,_Element2.default)("cardNumber",{sourceType:"card"}),CardExpiryElement=(0,_Element2.default)("cardExpiry"),CardCVCElement=(0,_Element2.default)("cardCvc"),PostalCodeElement=(0,_Element2.default)("postalCode");exports.StripeProvider=_Provider2.default,exports.injectStripe=_inject2.default,exports.Elements=_Elements2.default,exports.CardElement=CardElement,exports.CardNumberElement=CardNumberElement,exports.CardExpiryElement=CardExpiryElement,exports.CardCVCElement=CardCVCElement,exports.PostalCodeElement=PostalCodeElement,exports.PaymentRequestButtonElement=_PaymentRequestButtonElement2.default;

    },{"./components/Element":211,"./components/Elements":212,"./components/PaymentRequestButtonElement":213,"./components/Provider":214,"./components/inject":215}],217:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var shallowEqual=function shallowEqual(e,t){var l=Object.keys(e),r=Object.keys(t);return l.length===r.length&&l.every(function(l){return t.hasOwnProperty(l)&&t[l]===e[l]})};exports.default=shallowEqual;

    },{}],218:[function(require,module,exports){
        "use strict";var m=require("object-assign"),n=require("fbjs/lib/emptyObject"),p=require("fbjs/lib/emptyFunction"),q="function"==typeof Symbol&&Symbol.for,r=q?Symbol.for("react.element"):60103,t=q?Symbol.for("react.call"):60104,u=q?Symbol.for("react.return"):60105,v=q?Symbol.for("react.portal"):60106,w=q?Symbol.for("react.fragment"):60107,x="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t=arguments.length-1,r="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);throw(t=Error(r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function A(e,t,r){this.props=e,this.context=t,this.refs=n,this.updater=r||z}function B(e,t,r){this.props=e,this.context=t,this.refs=n,this.updater=r||z}function C(){}A.prototype.isReactComponent={},A.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&y("85"),this.updater.enqueueSetState(this,e,t,"setState")},A.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},C.prototype=A.prototype;var D=B.prototype=new C;function E(e,t,r){this.props=e,this.context=t,this.refs=n,this.updater=r||z}D.constructor=B,m(D,A.prototype),D.isPureReactComponent=!0;var F=E.prototype=new C;F.constructor=E,m(F,A.prototype),F.unstable_isAsyncReactComponent=!0,F.render=function(){return this.props.children};var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function J(e,t,n){var o,u={},l=null,i=null;if(null!=t)for(o in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(l=""+t.key),t)H.call(t,o)&&!I.hasOwnProperty(o)&&(u[o]=t[o]);var c=arguments.length-2;if(1===c)u.children=n;else if(1<c){for(var f=Array(c),a=0;a<c;a++)f[a]=arguments[a+2];u.children=f}if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===u[o]&&(u[o]=c[o]);return{$$typeof:r,type:e,key:l,ref:i,props:u,_owner:G.current}}function K(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}function escape(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}var L=/\/+/g,M=[];function N(e,t,r,n){if(M.length){var o=M.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function O(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>M.length&&M.push(e)}function P(e,n,o,l){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var c=!1;if(null===e)c=!0;else switch(i){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case t:case u:case v:c=!0}}if(c)return o(l,e,""===n?"."+Q(e,0):n),1;if(c=0,n=""===n?".":n+":",Array.isArray(e))for(var f=0;f<e.length;f++){var a=n+Q(i=e[f],f);c+=P(i,a,o,l)}else if(null==e?a=null:a="function"==typeof(a=x&&e[x]||e["@@iterator"])?a:null,"function"==typeof a)for(e=a.call(e),f=0;!(i=e.next()).done;)c+=P(i=i.value,a=n+Q(i,f++),o,l);else"object"===i&&y("31","[object Object]"===(o=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":o,"");return c}function Q(e,t){return"object"==typeof e&&null!==e&&null!=e.key?escape(e.key):t.toString(36)}function R(e,t){e.func.call(e.context,t,e.count++)}function S(e,t,n){var o=e.result,u=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?T(e,o,n,p.thatReturnsArgument):null!=e&&(K(e)&&(t=u+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(L,"$&/")+"/")+n,e={$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),o.push(e))}function T(e,t,r,n,o){var u="";null!=r&&(u=(""+r).replace(L,"$&/")+"/"),t=N(t,u,n,o),null==e||P(e,"",S,t),O(t)}var U={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return T(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;t=N(null,null,t,r),null==e||P(e,"",R,t),O(t)},count:function(e){return null==e?0:P(e,"",p.thatReturnsNull,null)},toArray:function(e){var t=[];return T(e,t,null,p.thatReturnsArgument),t},only:function(e){return K(e)||y("143"),e}},Component:A,PureComponent:B,unstable_AsyncComponent:E,Fragment:w,createElement:J,cloneElement:function(e,t,n){var o=m({},e.props),u=e.key,l=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,i=G.current),void 0!==t.key&&(u=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(f in t)H.call(t,f)&&!I.hasOwnProperty(f)&&(o[f]=void 0===t[f]&&void 0!==c?c[f]:t[f])}var f=arguments.length-2;if(1===f)o.children=n;else if(1<f){c=Array(f);for(var a=0;a<f;a++)c[a]=arguments[a+2];o.children=c}return{$$typeof:r,type:e.type,key:u,ref:l,props:o,_owner:i}},createFactory:function(e){var t=J.bind(null,e);return t.type=e,t},isValidElement:K,version:"16.2.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:G,assign:m}},V=Object.freeze({default:U}),W=V&&U||V;module.exports=W.default?W.default:W;

    },{"fbjs/lib/emptyFunction":220,"fbjs/lib/emptyObject":221,"object-assign":168}],219:[function(require,module,exports){
        "use strict";module.exports=require("./cjs/react.production.min.js");

    },{"./cjs/react.production.min.js":218}],220:[function(require,module,exports){
        "use strict";function makeEmptyFunction(t){return function(){return t}}var emptyFunction=function emptyFunction(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(t){return t},module.exports=emptyFunction;

    },{}],221:[function(require,module,exports){
        "use strict";var emptyObject={};module.exports=emptyObject;

    },{}],222:[function(require,module,exports){
        module.exports=require("./lib/_stream_duplex.js");

    },{"./lib/_stream_duplex.js":223}],223:[function(require,module,exports){
        "use strict";var processNextTick=require("process-nextick-args"),objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=Duplex;var util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||processNextTick(onEndNT,this)}function onEndNT(e){e.end()}function forEach(e,t){for(var r=0,i=e.length;r<i;r++)t(e[r],r)}Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),Duplex.prototype._destroy=function(e,t){this.push(null),this.end(),processNextTick(t,e)};

    },{"./_stream_readable":225,"./_stream_writable":227,"core-util-is":95,"inherits":159,"process-nextick-args":183}],224:[function(require,module,exports){
        "use strict";module.exports=PassThrough;var Transform=require("./_stream_transform"),util=require("core-util-is");function PassThrough(r){if(!(this instanceof PassThrough))return new PassThrough(r);Transform.call(this,r)}util.inherits=require("inherits"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,i){i(null,r)};

    },{"./_stream_transform":226,"core-util-is":95,"inherits":159}],225:[function(require,module,exports){
        (function (process,global){
            "use strict";var processNextTick=require("process-nextick-args");module.exports=Readable;var Duplex,isArray=require("isarray");Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter,EElistenerCount=function(e,t){return e.listeners(t).length},Stream=require("./internal/streams/stream"),Buffer=require("safe-buffer").Buffer,OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer.from(e)}function _isUint8Array(e){return Buffer.isBuffer(e)||e instanceof OurUint8Array}var util=require("core-util-is");util.inherits=require("inherits");var debugUtil=require("util"),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,BufferList=require("./internal/streams/BufferList"),destroyImpl=require("./internal/streams/destroy");util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function ReadableState(e,t){Duplex=Duplex||require("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(Duplex=Duplex||require("./_stream_duplex"),!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),Stream.call(this)}function readableAddChunk(e,t,n,r,a){var i,d=e._readableState;null===t?(d.reading=!1,onEofChunk(e,d)):(a||(i=chunkInvalid(d,t)),i?e.emit("error",i):d.objectMode||t&&t.length>0?("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===Buffer.prototype||(t=_uint8ArrayToBuffer(t)),r?d.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):addChunk(e,d,t,!0):d.ended?e.emit("error",new Error("stream.push() after EOF")):(d.reading=!1,d.decoder&&!n?(t=d.decoder.write(t),d.objectMode||0!==t.length?addChunk(e,d,t,!1):maybeReadMore(e,d)):addChunk(e,d,t,!1))):r||(d.reading=!1));return needMoreData(d)}function addChunk(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}function chunkInvalid(e,t){var n;return _isUint8Array(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(e,t){this.push(null),t(e)},Readable.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=Buffer.from(e,t),t=""),n=!0),readableAddChunk(this,e,t,!1,n)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){return StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?processNextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,processNextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount(e,"data")&&(t.flowing=!0,flow(e))}}function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,processNextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=fromListPartial(e,t.buffer,t.decoder),n);var n}function fromListPartial(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?copyFromBufferString(e,t):copyFromBuffer(e,t),r}function copyFromBufferString(e,t){var n=t.head,r=1,a=n.data;for(e-=a.length;n=n.next;){var i=n.data,d=e>i.length?i.length:e;if(d===i.length?a+=i:a+=i.slice(0,e),0===(e-=d)){d===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(d));break}++r}return t.length-=r,a}function copyFromBuffer(e,t){var n=Buffer.allocUnsafe(e),r=t.head,a=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var i=r.data,d=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,d),0===(e-=d)){d===i.length?(++a,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(d));break}++a}return t.length-=a,n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,processNextTick(endReadableNT,t,e))}function endReadableNT(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function forEach(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var r,a=t.needReadable;return debug("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&debug("length less than watermark",a=!0),t.ended||t.reading?debug("reading or ended",a=!1):a&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(n,t))),null===(r=e>0?fromList(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&endReadable(this)),null!==r&&this.emit("data",r),r},Readable.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,debug("pipe count=%d opts=%j",r.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?onend:unpipe;function onunpipe(t,a){debug("onunpipe"),t===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,function cleanup(){debug("cleanup"),e.removeListener("close",onclose),e.removeListener("finish",onfinish),e.removeListener("drain",i),e.removeListener("error",onerror),e.removeListener("unpipe",onunpipe),n.removeListener("end",onend),n.removeListener("end",unpipe),n.removeListener("data",ondata),d=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||i()}())}function onend(){debug("onend"),e.end()}r.endEmitted?processNextTick(a):n.once("end",a),e.on("unpipe",onunpipe);var i=pipeOnDrain(n);e.on("drain",i);var d=!1;var o=!1;function ondata(t){debug("ondata"),o=!1,!1!==e.write(t)||o||((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==indexOf(r.pipes,e))&&!d&&(debug("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,o=!0),n.pause())}function onerror(t){debug("onerror",t),unpipe(),e.removeListener("error",onerror),0===EElistenerCount(e,"error")&&e.emit("error",t)}function onclose(){e.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),e.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),n.unpipe(e)}return n.on("data",ondata),prependListener(e,"error",onerror),e.once("close",onclose),e.once("finish",onfinish),e.emit("pipe",n),r.flowing||(debug("pipe resume"),n.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)r[i].emit("unpipe",this,n);return this}var d=indexOf(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},Readable.prototype.on=function(e,t){var n=Stream.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&emitReadable(this):processNextTick(nReadingNextTick,this))}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,resume(this,e)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var a in e.on("end",function(){if(debug("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(a){(debug("wrapped data"),t.decoder&&(a=t.decoder.write(a)),t.objectMode&&null==a)||(t.objectMode||a&&a.length)&&(r.push(a)||(n=!0,e.pause()))}),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<kProxyEvents.length;i++)e.on(kProxyEvents[i],r.emit.bind(r,kProxyEvents[i]));return r._read=function(t){debug("wrapped _read",t),n&&(n=!1,e.resume())},r},Readable._fromList=fromList;

        }).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./_stream_duplex":223,"./internal/streams/BufferList":228,"./internal/streams/destroy":229,"./internal/streams/stream":230,"_process":184,"core-util-is":95,"events":137,"inherits":159,"isarray":161,"process-nextick-args":183,"safe-buffer":237,"string_decoder/":251,"util":61}],226:[function(require,module,exports){
        "use strict";module.exports=Transform;var Duplex=require("./_stream_duplex"),util=require("core-util-is");function TransformState(r){this.afterTransform=function(t,n){return afterTransform(r,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(r,t,n){var e=r._transformState;e.transforming=!1;var i=e.writecb;if(!i)return r.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=n&&r.push(n),i(t);var a=r._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&r._read(a.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r),this._transformState=new TransformState(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(r,n){done(t,r,n)}):done(t)})}function done(r,t,n){if(t)return r.emit("error",t);null!=n&&r.push(n);var e=r._writableState,i=r._transformState;if(e.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}util.inherits=require("inherits"),util.inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(r,t,n){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(r,t,n){var e=this._transformState;if(e.writecb=n,e.writechunk=r,e.writeencoding=t,!e.transforming){var i=this._readableState;(e.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(r){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Transform.prototype._destroy=function(r,t){var n=this;Duplex.prototype._destroy.call(this,r,function(r){t(r),n.emit("close")})};

    },{"./_stream_duplex":223,"core-util-is":95,"inherits":159}],227:[function(require,module,exports){
        (function (process,global){
            "use strict";var processNextTick=require("process-nextick-args");function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(t,e)}}module.exports=Writable;var Duplex,asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:processNextTick;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var internalUtil={deprecate:require("util-deprecate")},Stream=require("./internal/streams/stream"),Buffer=require("safe-buffer").Buffer,OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer.from(e)}function _isUint8Array(e){return Buffer.isBuffer(e)||e instanceof OurUint8Array}var realHasInstance,destroyImpl=require("./internal/streams/destroy");function nop(){}function WritableState(e,t){Duplex=Duplex||require("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){if(Duplex=Duplex||require("./_stream_duplex"),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Stream.call(this)}function writeAfterEnd(e,t){var r=new Error("write after end");e.emit("error",r),processNextTick(t,r)}function validChunk(e,t,r,i){var n=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),processNextTick(i,o),n=!1),n}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer.from(t,r)),t}function writeOrBuffer(e,t,r,i,n,o){if(!r){var s=decodeChunk(t,i,n);i!==s&&(r=!0,n="buffer",i=s)}var a=t.objectMode?1:i.length;t.length+=a;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,a,i,n,o);return f}function doWrite(e,t,r,i,n,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){--t.pendingcb,r?(processNextTick(n,i),processNextTick(finishMaybe,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),finishMaybe(e,t))}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var o=needFinish(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),i?asyncWrite(afterWrite,e,r,o,n):afterWrite(e,r,o,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)n[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;n.allBuffers=a,doWrite(e,t,!0,t.length,n,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest(t)}else{for(;r;){var f=r.chunk,u=r.encoding,l=r.callback;if(doWrite(e,t,!1,t.objectMode?1:f.length,f,u,l),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),finishMaybe(e,t)})}function prefinish(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,processNextTick(callFinal,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function finishMaybe(e,t){var r=needFinish(t);return r&&(prefinish(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?processNextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function getBuffer(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!realHasInstance.call(this,e)||e&&e._writableState instanceof WritableState}})):realHasInstance=function(e){return e instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1,o=_isUint8Array(e)&&!i.objectMode;return o&&!Buffer.isBuffer(e)&&(e=_uint8ArrayToBuffer(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=nop),i.ended?writeAfterEnd(this,r):(o||validChunk(this,i,e,r))&&(i.pendingcb++,n=writeOrBuffer(this,i,o,e,t,r)),n},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Writable.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||endWritable(this,i,r)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(e,t){this.end(),t(e)};

        }).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./_stream_duplex":223,"./internal/streams/destroy":229,"./internal/streams/stream":230,"_process":184,"core-util-is":95,"inherits":159,"process-nextick-args":183,"safe-buffer":237,"util-deprecate":254}],228:[function(require,module,exports){
        "use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Buffer=require("safe-buffer").Buffer;function copyBuffer(t,e,i){t.copy(e,i)}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function push(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},BufferList.prototype.unshift=function unshift(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},BufferList.prototype.shift=function shift(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},BufferList.prototype.clear=function clear(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function join(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},BufferList.prototype.concat=function concat(t){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var e=Buffer.allocUnsafe(t>>>0),i=this.head,h=0;i;)copyBuffer(i.data,e,h),h+=i.data.length,i=i.next;return e},BufferList}();

    },{"safe-buffer":237}],229:[function(require,module,exports){
        "use strict";var processNextTick=require("process-nextick-args");function destroy(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;i||a?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||processNextTick(emitErrorNT,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(processNextTick(emitErrorNT,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}))}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(t,e){t.emit("error",e)}module.exports={destroy:destroy,undestroy:undestroy};

    },{"process-nextick-args":183}],230:[function(require,module,exports){
        module.exports=require("events").EventEmitter;

    },{"events":137}],231:[function(require,module,exports){
        module.exports=require("./readable").PassThrough;

    },{"./readable":232}],232:[function(require,module,exports){
        exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");

    },{"./lib/_stream_duplex.js":223,"./lib/_stream_passthrough.js":224,"./lib/_stream_readable.js":225,"./lib/_stream_transform.js":226,"./lib/_stream_writable.js":227}],233:[function(require,module,exports){
        module.exports=require("./readable").Transform;

    },{"./readable":232}],234:[function(require,module,exports){
        module.exports=require("./lib/_stream_writable.js");

    },{"./lib/_stream_writable.js":227}],235:[function(require,module,exports){
        (function (Buffer){
            "use strict";var inherits=require("inherits"),HashBase=require("hash-base");function RIPEMD160(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function rotl(t,r){return t<<r|t>>>32-r}function fn1(t,r,n,o,f,l,i,s){return rotl(t+(r^n^o)+l+i|0,s)+f|0}function fn2(t,r,n,o,f,l,i,s){return rotl(t+(r&n|~r&o)+l+i|0,s)+f|0}function fn3(t,r,n,o,f,l,i,s){return rotl(t+((r|~n)^o)+l+i|0,s)+f|0}function fn4(t,r,n,o,f,l,i,s){return rotl(t+(r&o|n&~o)+l+i|0,s)+f|0}function fn5(t,r,n,o,f,l,i,s){return rotl(t+(r^(n|~o))+l+i|0,s)+f|0}inherits(RIPEMD160,HashBase),RIPEMD160.prototype._update=function(){for(var t=new Array(16),r=0;r<16;++r)t[r]=this._block.readInt32LE(4*r);var n=this._a,o=this._b,f=this._c,l=this._d,i=this._e;n=fn1(n,o,f,l,i,t[0],0,11),i=fn1(i,n,o,f=rotl(f,10),l,t[1],0,14),l=fn1(l,i,n,o=rotl(o,10),f,t[2],0,15),f=fn1(f,l,i,n=rotl(n,10),o,t[3],0,12),o=fn1(o,f,l,i=rotl(i,10),n,t[4],0,5),n=fn1(n,o,f,l=rotl(l,10),i,t[5],0,8),i=fn1(i,n,o,f=rotl(f,10),l,t[6],0,7),l=fn1(l,i,n,o=rotl(o,10),f,t[7],0,9),f=fn1(f,l,i,n=rotl(n,10),o,t[8],0,11),o=fn1(o,f,l,i=rotl(i,10),n,t[9],0,13),n=fn1(n,o,f,l=rotl(l,10),i,t[10],0,14),i=fn1(i,n,o,f=rotl(f,10),l,t[11],0,15),l=fn1(l,i,n,o=rotl(o,10),f,t[12],0,6),f=fn1(f,l,i,n=rotl(n,10),o,t[13],0,7),o=fn1(o,f,l,i=rotl(i,10),n,t[14],0,9),i=fn2(i,n=fn1(n,o,f,l=rotl(l,10),i,t[15],0,8),o,f=rotl(f,10),l,t[7],1518500249,7),l=fn2(l,i,n,o=rotl(o,10),f,t[4],1518500249,6),f=fn2(f,l,i,n=rotl(n,10),o,t[13],1518500249,8),o=fn2(o,f,l,i=rotl(i,10),n,t[1],1518500249,13),n=fn2(n,o,f,l=rotl(l,10),i,t[10],1518500249,11),i=fn2(i,n,o,f=rotl(f,10),l,t[6],1518500249,9),l=fn2(l,i,n,o=rotl(o,10),f,t[15],1518500249,7),f=fn2(f,l,i,n=rotl(n,10),o,t[3],1518500249,15),o=fn2(o,f,l,i=rotl(i,10),n,t[12],1518500249,7),n=fn2(n,o,f,l=rotl(l,10),i,t[0],1518500249,12),i=fn2(i,n,o,f=rotl(f,10),l,t[9],1518500249,15),l=fn2(l,i,n,o=rotl(o,10),f,t[5],1518500249,9),f=fn2(f,l,i,n=rotl(n,10),o,t[2],1518500249,11),o=fn2(o,f,l,i=rotl(i,10),n,t[14],1518500249,7),n=fn2(n,o,f,l=rotl(l,10),i,t[11],1518500249,13),l=fn3(l,i=fn2(i,n,o,f=rotl(f,10),l,t[8],1518500249,12),n,o=rotl(o,10),f,t[3],1859775393,11),f=fn3(f,l,i,n=rotl(n,10),o,t[10],1859775393,13),o=fn3(o,f,l,i=rotl(i,10),n,t[14],1859775393,6),n=fn3(n,o,f,l=rotl(l,10),i,t[4],1859775393,7),i=fn3(i,n,o,f=rotl(f,10),l,t[9],1859775393,14),l=fn3(l,i,n,o=rotl(o,10),f,t[15],1859775393,9),f=fn3(f,l,i,n=rotl(n,10),o,t[8],1859775393,13),o=fn3(o,f,l,i=rotl(i,10),n,t[1],1859775393,15),n=fn3(n,o,f,l=rotl(l,10),i,t[2],1859775393,14),i=fn3(i,n,o,f=rotl(f,10),l,t[7],1859775393,8),l=fn3(l,i,n,o=rotl(o,10),f,t[0],1859775393,13),f=fn3(f,l,i,n=rotl(n,10),o,t[6],1859775393,6),o=fn3(o,f,l,i=rotl(i,10),n,t[13],1859775393,5),n=fn3(n,o,f,l=rotl(l,10),i,t[11],1859775393,12),i=fn3(i,n,o,f=rotl(f,10),l,t[5],1859775393,7),f=fn4(f,l=fn3(l,i,n,o=rotl(o,10),f,t[12],1859775393,5),i,n=rotl(n,10),o,t[1],2400959708,11),o=fn4(o,f,l,i=rotl(i,10),n,t[9],2400959708,12),n=fn4(n,o,f,l=rotl(l,10),i,t[11],2400959708,14),i=fn4(i,n,o,f=rotl(f,10),l,t[10],2400959708,15),l=fn4(l,i,n,o=rotl(o,10),f,t[0],2400959708,14),f=fn4(f,l,i,n=rotl(n,10),o,t[8],2400959708,15),o=fn4(o,f,l,i=rotl(i,10),n,t[12],2400959708,9),n=fn4(n,o,f,l=rotl(l,10),i,t[4],2400959708,8),i=fn4(i,n,o,f=rotl(f,10),l,t[13],2400959708,9),l=fn4(l,i,n,o=rotl(o,10),f,t[3],2400959708,14),f=fn4(f,l,i,n=rotl(n,10),o,t[7],2400959708,5),o=fn4(o,f,l,i=rotl(i,10),n,t[15],2400959708,6),n=fn4(n,o,f,l=rotl(l,10),i,t[14],2400959708,8),i=fn4(i,n,o,f=rotl(f,10),l,t[5],2400959708,6),l=fn4(l,i,n,o=rotl(o,10),f,t[6],2400959708,5),o=fn5(o,f=fn4(f,l,i,n=rotl(n,10),o,t[2],2400959708,12),l,i=rotl(i,10),n,t[4],2840853838,9),n=fn5(n,o,f,l=rotl(l,10),i,t[0],2840853838,15),i=fn5(i,n,o,f=rotl(f,10),l,t[5],2840853838,5),l=fn5(l,i,n,o=rotl(o,10),f,t[9],2840853838,11),f=fn5(f,l,i,n=rotl(n,10),o,t[7],2840853838,6),o=fn5(o,f,l,i=rotl(i,10),n,t[12],2840853838,8),n=fn5(n,o,f,l=rotl(l,10),i,t[2],2840853838,13),i=fn5(i,n,o,f=rotl(f,10),l,t[10],2840853838,12),l=fn5(l,i,n,o=rotl(o,10),f,t[14],2840853838,5),f=fn5(f,l,i,n=rotl(n,10),o,t[1],2840853838,12),o=fn5(o,f,l,i=rotl(i,10),n,t[3],2840853838,13),n=fn5(n,o,f,l=rotl(l,10),i,t[8],2840853838,14),i=fn5(i,n,o,f=rotl(f,10),l,t[11],2840853838,11),l=fn5(l,i,n,o=rotl(o,10),f,t[6],2840853838,8),f=fn5(f,l,i,n=rotl(n,10),o,t[15],2840853838,5),o=fn5(o,f,l,i=rotl(i,10),n,t[13],2840853838,6),l=rotl(l,10);var s=this._a,h=this._b,e=this._c,_=this._d,c=this._e;s=fn5(s,h,e,_,c,t[5],1352829926,8),c=fn5(c,s,h,e=rotl(e,10),_,t[14],1352829926,9),_=fn5(_,c,s,h=rotl(h,10),e,t[7],1352829926,9),e=fn5(e,_,c,s=rotl(s,10),h,t[0],1352829926,11),h=fn5(h,e,_,c=rotl(c,10),s,t[9],1352829926,13),s=fn5(s,h,e,_=rotl(_,10),c,t[2],1352829926,15),c=fn5(c,s,h,e=rotl(e,10),_,t[11],1352829926,15),_=fn5(_,c,s,h=rotl(h,10),e,t[4],1352829926,5),e=fn5(e,_,c,s=rotl(s,10),h,t[13],1352829926,7),h=fn5(h,e,_,c=rotl(c,10),s,t[6],1352829926,7),s=fn5(s,h,e,_=rotl(_,10),c,t[15],1352829926,8),c=fn5(c,s,h,e=rotl(e,10),_,t[8],1352829926,11),_=fn5(_,c,s,h=rotl(h,10),e,t[1],1352829926,14),e=fn5(e,_,c,s=rotl(s,10),h,t[10],1352829926,14),h=fn5(h,e,_,c=rotl(c,10),s,t[3],1352829926,12),c=fn4(c,s=fn5(s,h,e,_=rotl(_,10),c,t[12],1352829926,6),h,e=rotl(e,10),_,t[6],1548603684,9),_=fn4(_,c,s,h=rotl(h,10),e,t[11],1548603684,13),e=fn4(e,_,c,s=rotl(s,10),h,t[3],1548603684,15),h=fn4(h,e,_,c=rotl(c,10),s,t[7],1548603684,7),s=fn4(s,h,e,_=rotl(_,10),c,t[0],1548603684,12),c=fn4(c,s,h,e=rotl(e,10),_,t[13],1548603684,8),_=fn4(_,c,s,h=rotl(h,10),e,t[5],1548603684,9),e=fn4(e,_,c,s=rotl(s,10),h,t[10],1548603684,11),h=fn4(h,e,_,c=rotl(c,10),s,t[14],1548603684,7),s=fn4(s,h,e,_=rotl(_,10),c,t[15],1548603684,7),c=fn4(c,s,h,e=rotl(e,10),_,t[8],1548603684,12),_=fn4(_,c,s,h=rotl(h,10),e,t[12],1548603684,7),e=fn4(e,_,c,s=rotl(s,10),h,t[4],1548603684,6),h=fn4(h,e,_,c=rotl(c,10),s,t[9],1548603684,15),s=fn4(s,h,e,_=rotl(_,10),c,t[1],1548603684,13),_=fn3(_,c=fn4(c,s,h,e=rotl(e,10),_,t[2],1548603684,11),s,h=rotl(h,10),e,t[15],1836072691,9),e=fn3(e,_,c,s=rotl(s,10),h,t[5],1836072691,7),h=fn3(h,e,_,c=rotl(c,10),s,t[1],1836072691,15),s=fn3(s,h,e,_=rotl(_,10),c,t[3],1836072691,11),c=fn3(c,s,h,e=rotl(e,10),_,t[7],1836072691,8),_=fn3(_,c,s,h=rotl(h,10),e,t[14],1836072691,6),e=fn3(e,_,c,s=rotl(s,10),h,t[6],1836072691,6),h=fn3(h,e,_,c=rotl(c,10),s,t[9],1836072691,14),s=fn3(s,h,e,_=rotl(_,10),c,t[11],1836072691,12),c=fn3(c,s,h,e=rotl(e,10),_,t[8],1836072691,13),_=fn3(_,c,s,h=rotl(h,10),e,t[12],1836072691,5),e=fn3(e,_,c,s=rotl(s,10),h,t[2],1836072691,14),h=fn3(h,e,_,c=rotl(c,10),s,t[10],1836072691,13),s=fn3(s,h,e,_=rotl(_,10),c,t[0],1836072691,13),c=fn3(c,s,h,e=rotl(e,10),_,t[4],1836072691,7),e=fn2(e,_=fn3(_,c,s,h=rotl(h,10),e,t[13],1836072691,5),c,s=rotl(s,10),h,t[8],2053994217,15),h=fn2(h,e,_,c=rotl(c,10),s,t[6],2053994217,5),s=fn2(s,h,e,_=rotl(_,10),c,t[4],2053994217,8),c=fn2(c,s,h,e=rotl(e,10),_,t[1],2053994217,11),_=fn2(_,c,s,h=rotl(h,10),e,t[3],2053994217,14),e=fn2(e,_,c,s=rotl(s,10),h,t[11],2053994217,14),h=fn2(h,e,_,c=rotl(c,10),s,t[15],2053994217,6),s=fn2(s,h,e,_=rotl(_,10),c,t[0],2053994217,14),c=fn2(c,s,h,e=rotl(e,10),_,t[5],2053994217,6),_=fn2(_,c,s,h=rotl(h,10),e,t[12],2053994217,9),e=fn2(e,_,c,s=rotl(s,10),h,t[2],2053994217,12),h=fn2(h,e,_,c=rotl(c,10),s,t[13],2053994217,9),s=fn2(s,h,e,_=rotl(_,10),c,t[9],2053994217,12),c=fn2(c,s,h,e=rotl(e,10),_,t[7],2053994217,5),_=fn2(_,c,s,h=rotl(h,10),e,t[10],2053994217,15),h=fn1(h,e=fn2(e,_,c,s=rotl(s,10),h,t[14],2053994217,8),_,c=rotl(c,10),s,t[12],0,8),s=fn1(s,h,e,_=rotl(_,10),c,t[15],0,5),c=fn1(c,s,h,e=rotl(e,10),_,t[10],0,12),_=fn1(_,c,s,h=rotl(h,10),e,t[4],0,9),e=fn1(e,_,c,s=rotl(s,10),h,t[1],0,12),h=fn1(h,e,_,c=rotl(c,10),s,t[5],0,5),s=fn1(s,h,e,_=rotl(_,10),c,t[8],0,14),c=fn1(c,s,h,e=rotl(e,10),_,t[7],0,6),_=fn1(_,c,s,h=rotl(h,10),e,t[6],0,8),e=fn1(e,_,c,s=rotl(s,10),h,t[2],0,13),h=fn1(h,e,_,c=rotl(c,10),s,t[13],0,6),s=fn1(s,h,e,_=rotl(_,10),c,t[14],0,5),c=fn1(c,s,h,e=rotl(e,10),_,t[0],0,15),_=fn1(_,c,s,h=rotl(h,10),e,t[3],0,13),e=fn1(e,_,c,s=rotl(s,10),h,t[9],0,11),h=fn1(h,e,_,c=rotl(c,10),s,t[11],0,11),_=rotl(_,10);var a=this._b+f+_|0;this._b=this._c+l+c|0,this._c=this._d+i+s|0,this._d=this._e+n+h|0,this._e=this._a+o+e|0,this._a=a},RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=new Buffer(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},module.exports=RIPEMD160;

        }).call(this,require("buffer").Buffer)
    },{"buffer":91,"hash-base":144,"inherits":159}],236:[function(require,module,exports){
        module.exports=function(){"use strict";function a(){this.readers=0,this.queue=[]}function b(u,n,r){var o;"function"!=typeof u?(t.hasOwnProperty(u)||(t[u]=new a),o=t[u]):(r=n,n=u,o=e),r||(r={});var c=null;r.hasOwnProperty("scope")&&(c=r.scope);var i=function(){var e=!1;return function(){e||(e=!0,o.readers--,o.queue.length&&o.queue[0]())}}();if(o.readers<0||o.queue.length){var l=!1;if(o.queue.push(function(){!l&&o.readers>=0&&(l=!0,o.queue.shift(),o.readers++,n.call(c,i),o.queue.length&&o.queue[0]())}),r.hasOwnProperty("timeout")){var s=null;r.hasOwnProperty("timeoutCallback")&&(s=r.timeoutCallback),setTimeout(function(){l||(l=!0,o.queue.shift(),s&&s.call(r.scope))},r.timeout)}}else o.readers++,n.call(r.scope,i)}function c(u,n,r){var o;"function"!=typeof u?(t.hasOwnProperty(u)||(t[u]=new a),o=t[u]):(r=n,n=u,o=e),r||(r={});var c=null;r.hasOwnProperty("scope")&&(c=r.scope);var i=function(){var e=!1;return function(){e||(e=!0,o.readers=0,o.queue.length&&o.queue[0]())}}();if(o.readers||o.queue.length){var l=!1;if(o.queue.push(function(){l||o.readers||(l=!0,o.queue.shift(),o.readers=-1,n.call(r.scope,i))}),r.hasOwnProperty("timeout")){var s=null;r.hasOwnProperty("timeoutCallback")&&(s=r.timeoutCallback),setTimeout(function(){l||(l=!0,o.queue.shift(),s&&s.call(c))},r.timeout)}}else o.readers=-1,n.call(r.scope,i)}var e=new a,t={};this.readLock=b,this.writeLock=c,this.async={readLock:function(e,t,u){"function"!=typeof e?b(e,function(e){t.call(this,null,e)},u):b(function(e){t.call(this,null,e)},u=t=e)},writeLock:function(e,t,u){"function"!=typeof e?c(e,function(e){t.call(this,null,e)},u):c(function(e){t.call(this,null,e)},u=t=e)}}};

    },{}],237:[function(require,module,exports){
        var buffer=require("buffer"),Buffer=buffer.Buffer;function copyProps(f,r){for(var e in f)r[e]=f[e]}function SafeBuffer(f,r,e){return Buffer(f,r,e)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(f,r,e){if("number"==typeof f)throw new TypeError("Argument must not be a number");return Buffer(f,r,e)},SafeBuffer.alloc=function(f,r,e){if("number"!=typeof f)throw new TypeError("Argument must be a number");var u=Buffer(f);return void 0!==r?"string"==typeof e?u.fill(r,e):u.fill(r):u.fill(0),u},SafeBuffer.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Buffer(f)},SafeBuffer.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(f)};

    },{"buffer":91}],238:[function(require,module,exports){
        "use strict";function destroyCircular(e,t){var r;return r=Array.isArray(e)?[]:{},t.push(e),Object.keys(e).forEach(function(n){var o=e[n];"function"!=typeof o&&(o&&"object"==typeof o?-1!==t.indexOf(e[n])?r[n]="[Circular]":r[n]=destroyCircular(e[n],t.slice(0)):r[n]=o)}),"string"==typeof e.name&&(r.name=e.name),"string"==typeof e.message&&(r.message=e.message),"string"==typeof e.stack&&(r.stack=e.stack),r}module.exports=function(e){return"object"==typeof e?destroyCircular(e,[]):"function"==typeof e?"[Function: "+(e.name||"anonymous")+"]":e};

    },{}],239:[function(require,module,exports){
        var Buffer=require("safe-buffer").Buffer;function Hash(t,i){this._block=Buffer.alloc(t),this._finalSize=i,this._blockSize=t,this._len=0}Hash.prototype.update=function(t,i){"string"==typeof t&&(i=i||"utf8",t=Buffer.from(t,i));for(var e=this._block,s=this._blockSize,h=t.length,o=this._len,l=0;l<h;){for(var r=o%s,_=Math.min(h-l,s-r),n=0;n<_;n++)e[r+n]=t[l+n];l+=_,(o+=_)%s==0&&this._update(e)}return this._len+=h,this},Hash.prototype.digest=function(t){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var e=8*this._len;if(e<=4294967295)this._block.writeUInt32BE(e,this._blockSize-4);else{var s=(4294967295&e)>>>0,h=(e-s)/4294967296;this._block.writeUInt32BE(h,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")},module.exports=Hash;

    },{"safe-buffer":237}],240:[function(require,module,exports){
        var exports=module.exports=function SHA(e){e=e.toLowerCase();var r=exports[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};exports.sha=require("./sha"),exports.sha1=require("./sha1"),exports.sha224=require("./sha224"),exports.sha256=require("./sha256"),exports.sha384=require("./sha384"),exports.sha512=require("./sha512");

    },{"./sha":241,"./sha1":242,"./sha224":243,"./sha256":244,"./sha384":245,"./sha512":246}],241:[function(require,module,exports){
        var inherits=require("inherits"),Hash=require("./hash"),Buffer=require("safe-buffer").Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);function Sha(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl5(t){return t<<5|t>>>27}function rotl30(t){return t<<30|t>>>2}function ft(t,i,r,h){return 0===t?i&r|~i&h:2===t?i&r|i&h|r&h:i^r^h}inherits(Sha,Hash),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha.prototype._update=function(t){for(var i=this._w,r=0|this._a,h=0|this._b,s=0|this._c,e=0|this._d,n=0|this._e,_=0;_<16;++_)i[_]=t.readInt32BE(4*_);for(;_<80;++_)i[_]=i[_-3]^i[_-8]^i[_-14]^i[_-16];for(var a=0;a<80;++a){var o=~~(a/20),f=rotl5(r)+ft(o,h,s,e)+n+i[a]+K[o]|0;n=e,e=s,s=rotl30(h),h=r,r=f}this._a=r+this._a|0,this._b=h+this._b|0,this._c=s+this._c|0,this._d=e+this._d|0,this._e=n+this._e|0},Sha.prototype._hash=function(){var t=Buffer.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=Sha;

    },{"./hash":239,"inherits":159,"safe-buffer":237}],242:[function(require,module,exports){
        var inherits=require("inherits"),Hash=require("./hash"),Buffer=require("safe-buffer").Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);function Sha1(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl1(t){return t<<1|t>>>31}function rotl5(t){return t<<5|t>>>27}function rotl30(t){return t<<30|t>>>2}function ft(t,i,r,h){return 0===t?i&r|~i&h:2===t?i&r|i&h|r&h:i^r^h}inherits(Sha1,Hash),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha1.prototype._update=function(t){for(var i=this._w,r=0|this._a,h=0|this._b,s=0|this._c,e=0|this._d,n=0|this._e,_=0;_<16;++_)i[_]=t.readInt32BE(4*_);for(;_<80;++_)i[_]=rotl1(i[_-3]^i[_-8]^i[_-14]^i[_-16]);for(var a=0;a<80;++a){var o=~~(a/20),f=rotl5(r)+ft(o,h,s,e)+n+i[a]+K[o]|0;n=e,e=s,s=rotl30(h),h=r,r=f}this._a=r+this._a|0,this._b=h+this._b|0,this._c=s+this._c|0,this._d=e+this._d|0,this._e=n+this._e|0},Sha1.prototype._hash=function(){var t=Buffer.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=Sha1;

    },{"./hash":239,"inherits":159,"safe-buffer":237}],243:[function(require,module,exports){
        var inherits=require("inherits"),Sha256=require("./sha256"),Hash=require("./hash"),Buffer=require("safe-buffer").Buffer,W=new Array(64);function Sha224(){this.init(),this._w=W,Hash.call(this,64,56)}inherits(Sha224,Sha256),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var t=Buffer.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},module.exports=Sha224;

    },{"./hash":239,"./sha256":244,"inherits":159,"safe-buffer":237}],244:[function(require,module,exports){
        var inherits=require("inherits"),Hash=require("./hash"),Buffer=require("safe-buffer").Buffer,K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W=new Array(64);function Sha256(){this.init(),this._w=W,Hash.call(this,64,56)}function ch(t,i,h){return h^t&(i^h)}function maj(t,i,h){return t&i|h&(t|i)}function sigma0(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function sigma1(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function gamma0(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function gamma1(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}inherits(Sha256,Hash),Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Sha256.prototype._update=function(t){for(var i=this._w,h=0|this._a,s=0|this._b,r=0|this._c,e=0|this._d,n=0|this._e,_=0|this._f,a=0|this._g,f=0|this._h,u=0;u<16;++u)i[u]=t.readInt32BE(4*u);for(;u<64;++u)i[u]=gamma1(i[u-2])+i[u-7]+gamma0(i[u-15])+i[u-16]|0;for(var o=0;o<64;++o){var c=f+sigma1(n)+ch(n,_,a)+K[o]+i[o]|0,m=sigma0(h)+maj(h,s,r)|0;f=a,a=_,_=n,n=e+c|0,e=r,r=s,s=h,h=c+m|0}this._a=h+this._a|0,this._b=s+this._b|0,this._c=r+this._c|0,this._d=e+this._d|0,this._e=n+this._e|0,this._f=_+this._f|0,this._g=a+this._g|0,this._h=f+this._h|0},Sha256.prototype._hash=function(){var t=Buffer.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},module.exports=Sha256;

    },{"./hash":239,"inherits":159,"safe-buffer":237}],245:[function(require,module,exports){
        var inherits=require("inherits"),SHA512=require("./sha512"),Hash=require("./hash"),Buffer=require("safe-buffer").Buffer,W=new Array(160);function Sha384(){this.init(),this._w=W,Hash.call(this,128,112)}inherits(Sha384,SHA512),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){var t=Buffer.allocUnsafe(48);function writeInt64BE(h,i,s){t.writeInt32BE(h,s),t.writeInt32BE(i,s+4)}return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),t},module.exports=Sha384;

    },{"./hash":239,"./sha512":246,"inherits":159,"safe-buffer":237}],246:[function(require,module,exports){
        var inherits=require("inherits"),Hash=require("./hash"),Buffer=require("safe-buffer").Buffer,K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W=new Array(160);function Sha512(){this.init(),this._w=W,Hash.call(this,128,112)}function Ch(t,h,i){return i^t&(h^i)}function maj(t,h,i){return t&h|i&(t|h)}function sigma0(t,h){return(t>>>28|h<<4)^(h>>>2|t<<30)^(h>>>7|t<<25)}function sigma1(t,h){return(t>>>14|h<<18)^(t>>>18|h<<14)^(h>>>9|t<<23)}function Gamma0(t,h){return(t>>>1|h<<31)^(t>>>8|h<<24)^t>>>7}function Gamma0l(t,h){return(t>>>1|h<<31)^(t>>>8|h<<24)^(t>>>7|h<<25)}function Gamma1(t,h){return(t>>>19|h<<13)^(h>>>29|t<<3)^t>>>6}function Gamma1l(t,h){return(t>>>19|h<<13)^(h>>>29|t<<3)^(t>>>6|h<<26)}function getCarry(t,h){return t>>>0<h>>>0?1:0}inherits(Sha512,Hash),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Sha512.prototype._update=function(t){for(var h=this._w,i=0|this._ah,s=0|this._bh,r=0|this._ch,_=0|this._dh,a=0|this._eh,e=0|this._fh,n=0|this._gh,l=0|this._hh,f=0|this._al,g=0|this._bl,u=0|this._cl,c=0|this._dl,m=0|this._el,o=0|this._fl,y=0|this._gl,C=0|this._hl,B=0;B<32;B+=2)h[B]=t.readInt32BE(4*B),h[B+1]=t.readInt32BE(4*B+4);for(;B<160;B+=2){var d=h[B-30],w=h[B-30+1],E=Gamma0(d,w),I=Gamma0l(w,d),b=Gamma1(d=h[B-4],w=h[B-4+1]),p=Gamma1l(w,d),G=h[B-14],v=h[B-14+1],S=h[B-32],j=h[B-32+1],q=I+v|0,H=E+G+getCarry(q,I)|0;H=(H=H+b+getCarry(q=q+p|0,p)|0)+S+getCarry(q=q+j|0,j)|0,h[B]=H,h[B+1]=q}for(var W=0;W<160;W+=2){H=h[W],q=h[W+1];var x=maj(i,s,r),A=maj(f,g,u),U=sigma0(i,f),k=sigma0(f,i),z=sigma1(a,m),D=sigma1(m,a),F=K[W],J=K[W+1],L=Ch(a,e,n),M=Ch(m,o,y),N=C+D|0,O=l+z+getCarry(N,C)|0;O=(O=(O=O+L+getCarry(N=N+M|0,M)|0)+F+getCarry(N=N+J|0,J)|0)+H+getCarry(N=N+q|0,q)|0;var P=k+A|0,Q=U+x+getCarry(P,k)|0;l=n,C=y,n=e,y=o,e=a,o=m,a=_+O+getCarry(m=c+N|0,c)|0,_=r,c=u,r=s,u=g,s=i,g=f,i=O+Q+getCarry(f=N+P|0,N)|0}this._al=this._al+f|0,this._bl=this._bl+g|0,this._cl=this._cl+u|0,this._dl=this._dl+c|0,this._el=this._el+m|0,this._fl=this._fl+o|0,this._gl=this._gl+y|0,this._hl=this._hl+C|0,this._ah=this._ah+i+getCarry(this._al,f)|0,this._bh=this._bh+s+getCarry(this._bl,g)|0,this._ch=this._ch+r+getCarry(this._cl,u)|0,this._dh=this._dh+_+getCarry(this._dl,c)|0,this._eh=this._eh+a+getCarry(this._el,m)|0,this._fh=this._fh+e+getCarry(this._fl,o)|0,this._gh=this._gh+n+getCarry(this._gl,y)|0,this._hh=this._hh+l+getCarry(this._hl,C)|0},Sha512.prototype._hash=function(){var t=Buffer.allocUnsafe(64);function writeInt64BE(h,i,s){t.writeInt32BE(h,s),t.writeInt32BE(i,s+4)}return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),writeInt64BE(this._gh,this._gl,48),writeInt64BE(this._hh,this._hl,56),t},module.exports=Sha512;

    },{"./hash":239,"inherits":159,"safe-buffer":237}],247:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SocketIOError=exports.TimeoutError=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};exports.convertErrorToObject=convertErrorToObject,exports.convertObjectToError=convertObjectToError;var _serializeError=require("serialize-error"),_serializeError2=_interopRequireDefault(_serializeError),_deserializeError=require("deserialize-error"),_deserializeError2=_interopRequireDefault(_deserializeError);function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?r:e}function _inherits(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function serializeErrorWithoutStack(r){return delete r.stack,(0,_serializeError2.default)(r)}function convertErrorToObject(r){if(r instanceof Error)return serializeErrorWithoutStack(r);if(r instanceof Array)return r.map(serializeErrorWithoutStack);var e={};for(var o in r)r.hasOwnProperty(o)&&(e[o]=serializeErrorWithoutStack(r[o]));return e}function convertObjectToError(r){if(r instanceof Error)return r;if(r instanceof Array)return r.map(_deserializeError2.default);if("object"!==(void 0===r?"undefined":_typeof(r)))return r;var e=(0,_deserializeError2.default)(r);if(e!==r)return e;for(var o in e={},r)e[o]=(0,_deserializeError2.default)(r[o]);return e}var TimeoutError=exports.TimeoutError=function(r){function TimeoutError(r){_classCallCheck(this,TimeoutError);var e=_possibleConstructorReturn(this,(TimeoutError.__proto__||Object.getPrototypeOf(TimeoutError)).call(this,r));return e.name="TimeoutError",e}return _inherits(TimeoutError,Error),TimeoutError}(),SocketIOError=exports.SocketIOError=function(r){function SocketIOError(r){_classCallCheck(this,SocketIOError);var e=_possibleConstructorReturn(this,(SocketIOError.__proto__||Object.getPrototypeOf(SocketIOError)).call(this,r));return e.name="SocketIOError",e}return _inherits(SocketIOError,Error),SocketIOError}();

    },{"deserialize-error":114,"serialize-error":238}],248:[function(require,module,exports){
        "use strict";var _main=require("./main"),_main2=_interopRequireDefault(_main),_error=require("./error");function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}module.exports=function(r,e){return new _main2.default(r,e)},Object.assign(module.exports,{TimeoutError:_error.TimeoutError,SocketIOError:_error.SocketIOError});

    },{"./error":247,"./main":249}],249:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}(),_error=require("./error"),_combineMiddlewares=require("combine-middlewares"),_combineMiddlewares2=_interopRequireDefault(_combineMiddlewares);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var SocketIORequest=function(){function SocketIORequest(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,SocketIORequest),this.io=e,this.options=Object.assign({event:"socket.io-request",timeout:9e4},r)}return _createClass(SocketIORequest,[{key:"request",value:function request(e,r){var t=this;if("string"!=typeof e)throw new Error('argument "method" is missing');return new Promise(function(o,n){t.io.emit(t.options.event,{method:e,data:r},function(e){if(clearTimeout(s),t.io.removeListener("disconnect",i),e.error)return n((0,_error.convertObjectToError)(e.error));o(e.data)});var i=function onDisconnect(){clearTimeout(s),n(new _error.SocketIOError("disconnect"))},s=setTimeout(function(){t.io.removeListener("disconnect",i),n(new _error.TimeoutError("exceeded "+t.options.timeout+" (msec)"))},t.options.timeout);t.io.once("disconnect",i)})}},{key:"response",value:function response(e){if("string"!=typeof e)throw new Error('argument "method" is missing');for(var r=arguments.length,t=Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];if(t.find(function(e){return"function"!=typeof e}))throw new Error('"middlewares" must be a function');var n=_combineMiddlewares2.default.apply(void 0,_toConsumableArray(t.concat()));this.io.on(this.options.event,function(r,t){if(r.method===e){var o=function res(e){return t({data:e})};o.error=function(e){return t({error:(0,_error.convertErrorToObject)(e)})},n(r.data,o)}})}}]),SocketIORequest}();exports.default=SocketIORequest;

    },{"./error":247,"combine-middlewares":94}],250:[function(require,module,exports){
        module.exports=Stream;var EE=require("events").EventEmitter,inherits=require("inherits");function Stream(){EE.call(this)}inherits(Stream,EE),Stream.Readable=require("readable-stream/readable.js"),Stream.Writable=require("readable-stream/writable.js"),Stream.Duplex=require("readable-stream/duplex.js"),Stream.Transform=require("readable-stream/transform.js"),Stream.PassThrough=require("readable-stream/passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(e,r){var n=this;function ondata(r){e.writable&&!1===e.write(r)&&n.pause&&n.pause()}function ondrain(){n.readable&&n.resume&&n.resume()}n.on("data",ondata),e.on("drain",ondrain),e._isStdio||r&&!1===r.end||(n.on("end",onend),n.on("close",onclose));var o=!1;function onend(){o||(o=!0,e.end())}function onclose(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function onerror(e){if(cleanup(),0===EE.listenerCount(this,"error"))throw e}function cleanup(){n.removeListener("data",ondata),e.removeListener("drain",ondrain),n.removeListener("end",onend),n.removeListener("close",onclose),n.removeListener("error",onerror),e.removeListener("error",onerror),n.removeListener("end",cleanup),n.removeListener("close",cleanup),e.removeListener("close",cleanup)}return n.on("error",onerror),e.on("error",onerror),n.on("end",cleanup),n.on("close",cleanup),e.on("close",cleanup),e.emit("pipe",n),e};

    },{"events":137,"inherits":159,"readable-stream/duplex.js":222,"readable-stream/passthrough.js":231,"readable-stream/readable.js":232,"readable-stream/transform.js":233,"readable-stream/writable.js":234}],251:[function(require,module,exports){
        "use strict";var Buffer=require("safe-buffer").Buffer,isEncoding=Buffer.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function normalizeEncoding(t){var e=_normalizeEncoding(t);if("string"!=typeof e&&(Buffer.isEncoding===isEncoding||!isEncoding(t)))throw new Error("Unknown encoding: "+t);return e||t}function StringDecoder(t){var e;switch(this.encoding=normalizeEncoding(t),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,e=4;break;case"utf8":this.fillLast=utf8FillLast,e=4;break;case"base64":this.text=base64Text,this.end=base64End,e=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(e)}function utf8CheckByte(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function utf8CheckIncomplete(t,e,s){var i=e.length-1;if(i<s)return 0;var a=utf8CheckByte(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s?0:(a=utf8CheckByte(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s?0:(a=utf8CheckByte(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function utf8CheckExtraBytes(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�".repeat(s);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�".repeat(s+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�".repeat(s+2)}}function utf8FillLast(t){var e=this.lastTotal-this.lastNeed,s=utf8CheckExtraBytes(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function utf8Text(t,e){var s=utf8CheckIncomplete(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function utf8End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�".repeat(this.lastTotal-this.lastNeed):e}function utf16Text(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function utf16End(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function base64Text(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function base64End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};

    },{"safe-buffer":237}],252:[function(require,module,exports){
        "use strict";var punycode=require("punycode"),util=require("./util");function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");function urlParse(t,s,e){if(t&&util.isObject(t)&&t instanceof Url)return t;var h=new Url;return h.parse(t,s,e),h}function urlFormat(t){return util.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,s){return urlParse(t,!1,!0).resolve(s)}function urlResolveObject(t,s){return t?urlParse(t,!1,!0).resolveObject(s):s}Url.prototype.parse=function(t,s,e){if(!util.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t.indexOf("?"),r=-1!==h&&h<t.indexOf("#")?"?":"#",a=t.split(r);a[0]=a[0].replace(/\\/g,"/");var o=t=a.join(r);if(o=o.trim(),!e&&1===t.split("#").length){var n=simplePathPattern.exec(o);if(n)return this.path=o,this.href=o,this.pathname=n[1],n[2]?(this.search=n[2],this.query=s?querystring.parse(this.search.substr(1)):this.search.substr(1)):s&&(this.search="",this.query={}),this}var i=protocolPattern.exec(o);if(i){var l=(i=i[0]).toLowerCase();this.protocol=l,o=o.substr(i.length)}if(e||i||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===o.substr(0,2);!u||i&&hostlessProtocol[i]||(o=o.substr(2),this.slashes=!0)}if(!hostlessProtocol[i]&&(u||i&&!slashedProtocol[i])){for(var p,c,f=-1,m=0;m<hostEndingChars.length;m++){-1!==(v=o.indexOf(hostEndingChars[m]))&&(-1===f||v<f)&&(f=v)}-1!==(c=-1===f?o.lastIndexOf("@"):o.lastIndexOf("@",f))&&(p=o.slice(0,c),o=o.slice(c+1),this.auth=decodeURIComponent(p)),f=-1;for(m=0;m<nonHostChars.length;m++){var v;-1!==(v=o.indexOf(nonHostChars[m]))&&(-1===f||v<f)&&(f=v)}-1===f&&(f=o.length),this.host=o.slice(0,f),o=o.slice(f),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var y=this.hostname.split(/\./),P=(m=0,y.length);m<P;m++){var d=y[m];if(d&&!d.match(hostnamePartPattern)){for(var b="",q=0,O=d.length;q<O;q++)d.charCodeAt(q)>127?b+="x":b+=d[q];if(!b.match(hostnamePartPattern)){var j=y.slice(0,m),x=y.slice(m+1),U=d.match(hostnamePartStart);U&&(j.push(U[1]),x.unshift(U[2])),x.length&&(o="/"+x.join(".")+o),this.hostname=j.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=punycode.toASCII(this.hostname));var C=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+C,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!unsafeProtocol[l])for(m=0,P=autoEscape.length;m<P;m++){var w=autoEscape[m];if(-1!==o.indexOf(w)){var E=encodeURIComponent(w);E===w&&(E=escape(w)),o=o.split(w).join(E)}}var I=o.indexOf("#");-1!==I&&(this.hash=o.substr(I),o=o.slice(0,I));var R=o.indexOf("?");if(-1!==R?(this.search=o.substr(R),this.query=o.substr(R+1),s&&(this.query=querystring.parse(this.query)),o=o.slice(0,R)):s&&(this.search="",this.query={}),o&&(this.pathname=o),slashedProtocol[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var S=this.search||"";this.path=C+S}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var s=this.protocol||"",e=this.pathname||"",h=this.hash||"",r=!1,a="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(a=querystring.stringify(this.query));var o=this.search||a&&"?"+a||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||slashedProtocol[s])&&!1!==r?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),h&&"#"!==h.charAt(0)&&(h="#"+h),o&&"?"!==o.charAt(0)&&(o="?"+o),s+r+(e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(o=o.replace("#","%23"))+h},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(util.isString(t)){var s=new Url;s.parse(t,!1,!0),t=s}for(var e=new Url,h=Object.keys(this),r=0;r<h.length;r++){var a=h[r];e[a]=this[a]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),n=0;n<o.length;n++){var i=o[n];"protocol"!==i&&(e[i]=t[i])}return slashedProtocol[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!slashedProtocol[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var p=l[u];e[p]=t[p]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])e.pathname=t.pathname;else{for(var c=(t.pathname||"").split("/");c.length&&!(t.host=c.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),e.pathname=c.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var f=e.pathname||"",m=e.search||"";e.path=f+m}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var v=e.pathname&&"/"===e.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=g||v||e.host&&t.pathname,P=y,d=e.pathname&&e.pathname.split("/")||[],b=(c=t.pathname&&t.pathname.split("/")||[],e.protocol&&!slashedProtocol[e.protocol]);if(b&&(e.hostname="",e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===c[0]?c[0]=t.host:c.unshift(t.host)),t.host=null),y=y&&(""===c[0]||""===d[0])),g)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,d=c;else if(c.length)d||(d=[]),d.pop(),d=d.concat(c),e.search=t.search,e.query=t.query;else if(!util.isNullOrUndefined(t.search)){if(b)e.hostname=e.host=d.shift(),(U=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=U.shift(),e.host=e.hostname=U.shift());return e.search=t.search,e.query=t.query,util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!d.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var q=d.slice(-1)[0],O=(e.host||t.host||d.length>1)&&("."===q||".."===q)||""===q,j=0,x=d.length;x>=0;x--)"."===(q=d[x])?d.splice(x,1):".."===q?(d.splice(x,1),j++):j&&(d.splice(x,1),j--);if(!y&&!P)for(;j--;j)d.unshift("..");!y||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),O&&"/"!==d.join("/").substr(-1)&&d.push("");var U,C=""===d[0]||d[0]&&"/"===d[0].charAt(0);b&&(e.hostname=e.host=C?"":d.length?d.shift():"",(U=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=U.shift(),e.host=e.hostname=U.shift()));return(y=y||e.host&&d.length)&&!C&&d.unshift(""),d.length?e.pathname=d.join("/"):(e.pathname=null,e.path=null),util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Url.prototype.parseHost=function(){var t=this.host,s=portPattern.exec(t);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};

    },{"./util":253,"punycode":194,"querystring":197}],253:[function(require,module,exports){
        "use strict";module.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}};

    },{}],254:[function(require,module,exports){
        (function (global){
            function deprecate(r,e){if(config("noDeprecation"))return r;var o=!1;return function deprecated(){if(!o){if(config("throwDeprecation"))throw new Error(e);config("traceDeprecation")?console.trace(e):console.warn(e),o=!0}return r.apply(this,arguments)}}function config(r){try{if(!global.localStorage)return!1}catch(r){return!1}var e=global.localStorage[r];return null!=e&&"true"===String(e).toLowerCase()}module.exports=deprecate;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{}],255:[function(require,module,exports){
        var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function NodeScript(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,r=n.eval,o=n.execScript;!r&&o&&(o.call(n,"null"),r=n.eval),forEach(Object_keys(e),function(t){n[t]=e[t]}),forEach(globals,function(t){e[t]&&(n[t]=e[t])});var c=Object_keys(n),i=r.call(n,this.code);return forEach(Object_keys(n),function(t){(t in e||-1===indexOf(c,t))&&(e[t]=n[t])}),forEach(globals,function(t){t in e||defineProp(e,t,n[t])}),document.body.removeChild(t),i},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),n=this.runInContext(t);return e&&forEach(Object_keys(t),function(n){e[n]=t[n]}),n},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var n=Script(t);return n[e].apply(n,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(n){t[n]=e[n]}),t};

    },{}],256:[function(require,module,exports){
        module.exports={
            "name": "scrapbox",
            "version": "0.0.1",
            "private": true,
            "engines": {
                "node": "9.11.1",
                "npm": "6.x"
            },
            "scripts": {
                "postinstall": "npm run build",
                "start": "node run-server.js",
                "start:dev": "node-dev run-server.js",
                "build": "run-s build:**",
                "build:babel": "babel src/ --only server/,share/ --out-dir build/ --minified --source-maps false",
                "build:browserify": "browserify --verbose -t babelify -t browserify-shim -t [ dotenvify --silent ] -g [ uglifyify --keep_fnames ] src/client/js/index.js -o public/assets/index.js",
                "build:worker:dedicated": "browserify --verbose -t babelify -t [ dotenvify --silent ] -g [ uglifyify --keep_fnames ] src/client/js/workers/dedicated-worker/index.js -o public/assets/dedicated-worker.js",
                "build:landing:js": "mkdir -p public/assets/landing/; browserify --verbose -t babelify -t browserify-shim -t [ dotenvify --silent ] -g [ uglifyify --keep_fnames ] src/landing/js/index.js -o public/assets/landing/index.js",
                "build:ga": "mkdir -p public/assets/js; cp src/client/js/lib/ga.js public/assets/js/ga.js",
                "build:sass:constants": "babel-node scripts/convert-js-constants-to-scss.js",
                "build:sass:app": "node-sass src/client/css/app.scss --include-path ./node_modules/bootstrap-sass/assets/stylesheets --include-path ./node_modules/font-awesome/scss --include-path ./node_modules/highlight.js/styles --output-style compressed -o public/assets/css/",
                "build:sass:themes": "find src/client/css/themes -name '*.scss' | xargs -n1 node-sass -o public/assets/css/themes/",
                "build:landing:sass": "node-sass src/landing/css/index.scss --include-path ./node_modules/bootstrap-sass/assets/stylesheets --include-path ./node_modules/font-awesome/scss --output-style compressed -o public/assets/landing/css/",
                "build:assets": "scripts/build-assets/index.sh",
                "build:assets-json": "babel-node scripts/build-assets/assets-json.js",
                "test": "run-s test:*",
                "test:standard": "standard",
                "test:sass": "sass-lint -v --no-exit",
                "test:db-import": "babel-node ./scripts/testdb-setup.js import",
                "test:mocha": "NODE_ENV=test mocha 'src/{*,**/*}/test/*.js' -r ./dotenv-load.js -r babel-register -r babel-polyfill --timeout 20000 --exit",
                "test:mocha-enable-billings": "NODE_ENV=test ENABLE_BILLING=true mocha 'src/server/controllers/projects/test/*.js' 'src/server/controllers/billings/test/*.js' -r ./dotenv-load.js -r babel-register -r babel-polyfill --timeout 20000 --exit",
                "watch": "run-p watch:**",
                "watch:babel": "npm run build:babel -- --watch",
                "watch:browserify": "watchify --verbose --debug -t babelify -t [ dotenvify --silent ] src/client/js/index.js -o public/assets/index.js",
                "watch:worker:dedicated": "watchify --verbose --debug -t babelify -t [ dotenvify --silent ] src/client/js/workers/dedicated-worker/index.js -o public/assets/dedicated-worker.js",
                "watch:landing:js": "chokidar 'src/landing/js/**/*.js' -c 'npm run build:landing:js' --initial",
                "watch:sass:constants": "chokidar 'src/share/constants/**/*.js' -c 'npm run build:sass:constants'",
                "watch:sass:app": "npm run build:sass:constants && chokidar 'src/client/css/**/*.scss' -c 'npm run build:sass:app -- --source-map-embed' --initial",
                "watch:landing:sass": "chokidar 'src/landing/css/**/*.scss' -c 'npm run build:landing:sass -- --source-map-embed' --initial",
                "watch:sass:themes": "chokidar 'src/client/css/theme_*.scss' 'src/client/css/themes/*.scss' -c 'npm run build:sass:themes' --initial",
                "watch:assets": "chokidar 'src/client/img/**' 'src/landing/img/**' 'src/landing/pdf/**' 'src/client/fonts/**' -c 'npm run build:assets' --initial",
                "watch:assets-json": "chokidar 'src/**' -c 'npm run build:assets-json' --initial",
                "clean": "./scripts/clean.sh",
                "imagemin": "imagemin src/landing/img/* -o src/landing/img",
                "batch": "babel-node ./tasks/batches/index.js",
                "delete-unused-projects": "babel-node ./tasks/delete-unused-projects/index.js",
                "metrics": "run-s metrics:*",
                "metrics:basic": "babel-node ./tasks/metrics/basic/update-spreadsheet.js",
                "metrics:business": "babel-node ./tasks/metrics/business/update-spreadsheet.js",
                "project-backup": "babel-node ./tasks/project-backup/index.js",
                "db-export": "babel-node ./scripts/testdb-setup.js export"
            },
            "dependencies": {
                "@google-cloud/storage": "^1.7.0",
                "array-permutation-simple": "^0.0.3",
                "asearch": "0.0.7",
                "async-singleton": "^0.0.4",
                "axios": "^0.18.0",
                "babel-cli": "^6.26.0",
                "babel-polyfill": "^6.26.0",
                "babel-preset-env": "^1.7.0",
                "babel-preset-react": "^6.24.1",
                "babel-preset-stage-3": "^6.24.1",
                "babelify": "^8.0.0",
                "bootstrap": "^3.3.7",
                "bootstrap-sass": "^3.3.7",
                "browser-info": "^1.2.0",
                "browserify": "^16.2.2",
                "browserify-shim": "^3.8.14",
                "chalk": "^2.4.1",
                "checkey": "^0.1.3",
                "classnames": "^2.2.6",
                "combine-middlewares": "^0.1.0",
                "compression": "^1.7.2",
                "connect-mongo": "^2.0.1",
                "cookie-parser": "^1.4.3",
                "csurf": "^1.9.0",
                "debug": "^3.1.0",
                "deep-equal": "^1.0.1",
                "disable-regexp-capture": "0.0.5",
                "dotenv": "^6.0.0",
                "dotenvify": "github:shokai/dotenvify#dotenv-options",
                "email-validator": "^2.0.4",
                "exec-copy": "0.1.1",
                "express": "^4.16.3",
                "express-force-ssl": "^0.3.2",
                "express-react-views": "^0.10.5",
                "express-session": "^1.15.6",
                "feed": "^1.1.1",
                "font-awesome": "^4.4.0",
                "google-spreadsheet-as-promised": "^0.2.12",
                "haikunator": "^2.0.0",
                "handlebars": "^4.0.11",
                "has-dom": "^1.0.1",
                "helmet": "^3.12.0",
                "highlight.js": "^9.12.0",
                "i18n-core": "^3.2.0",
                "jquery": "^3.3.1",
                "js-yaml": "^3.10.0",
                "katex": "^0.7.1",
                "lodash": "^4.17.5",
                "markdown": "^0.5.0",
                "moment": "^2.20.1",
                "mongoose": "^5.1.2",
                "morgan": "^1.9.0",
                "multer": "^1.2.0",
                "newrelic": "^4.0.0",
                "node-sass": "shokai/node-sass",
                "npm-run-all": "^4.1.3",
                "page": "^1.6.4",
                "passport": "^0.3.2",
                "passport-azure-ad": "^3.0.12",
                "passport-github": "^1.1.0",
                "passport-google-oauth": "^1.0.0",
                "passport-oauth2": "^1.3.0",
                "prop-types": "^15.6.1",
                "raven-js": "^3.26.3",
                "react": "^16.2.0",
                "react-bootstrap": "^0.31.5",
                "react-display-switch": "^0.4.1",
                "react-dom": "^16.2.0",
                "react-stripe-elements": "^1.6.0",
                "rwlock": "^5.0.0",
                "sendgrid": "^5.2.3",
                "socket.io": "^2.1.0",
                "socket.io-client": "^2.1.0",
                "socket.io-redis": "^5.2.0",
                "socket.io-request": "^0.8.0",
                "svg2ttf": "^4.1.0",
                "svgicons2svgfont": "^9.0.3",
                "ttf2woff": "^2.0.1",
                "ttf2woff2": "^2.0.3",
                "stripe": "^5.6.1",
                "uglifyify": "^5.0.1",
                "urlsafe-base64": "^1.0.0"
            },
            "devDependencies": {
                "babel-register": "^6.16.3",
                "chai": "^4.1.1",
                "cheerio": "^0.22.0",
                "chokidar-cli": "^1.2.0",
                "imagemin-cli": "^3.0.0",
                "mocha": "^5.0.5",
                "node-dev": "^3.1.3",
                "sass-lint": "^1.12.1",
                "standard": "11.0.0",
                "supertest": "^3.0.0",
                "watchify": "^3.11.0"
            },
            "standard": {
                "ignore": [
                    "/build",
                    "/public"
                ]
            },
            "browserify-shim": {
                "babel-polyfill": "global:window._babelPolyfill",
                "highlight.js": "global:window.hljs",
                "jquery": "global:window.$",
                "katex": "global:window.katex",
                "lodash": "global:window._",
                "moment": "global:window.moment",
                "react": "global:window.React",
                "react-dom": "global:window.ReactDOM",
                "react-bootstrap": "global:window.ReactBootstrap",
                "socket.io-client": "global:window.io"
            }
        }

    },{}],257:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};exports.default=ActionLink;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_key=require("../constants/key");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var preventDefault=function preventDefault(e){return e.preventDefault()};function ActionLink(e){return _react2.default.createElement("a",_extends({tabIndex:"0"},e,{onMouseDown:preventDefault,onKeyUp:function onKeyUp(t){t.keyCode===_key.Keys.ENTER&&e.onClick(t)}}),e.children)}ActionLink.propTypes={role:_propTypes2.default.string.isRequired,onClick:_propTypes2.default.func.isRequired,children:_propTypes2.default.node.isRequired};

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../constants/key":444,"prop-types":186}],258:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_navbar=require("./navbar/"),_navbar2=_interopRequireDefault(_navbar),_common=require("./navbar/common/"),_common2=_interopRequireDefault(_common),_pageAlert=require("./page-alert/"),_pageAlert2=_interopRequireDefault(_pageAlert),_pageMenu=require("./page-menu/"),_pageMenu2=_interopRequireDefault(_pageMenu),_page=require("./page"),_page2=_interopRequireDefault(_page),_pageList=require("./page-list"),_pageList2=_interopRequireDefault(_pageList),_expandableMemu=require("./page-menu/expandable-memu"),_expandableMemu2=_interopRequireDefault(_expandableMemu),_stream=require("./stream/"),_stream2=_interopRequireDefault(_stream),_quickLaunch=require("./quick-launch"),_quickLaunch2=_interopRequireDefault(_quickLaunch),_statusBar=require("./status-bar/"),_statusBar2=_interopRequireDefault(_statusBar),_loadingBar=require("./loading-bar"),_loadingBar2=_interopRequireDefault(_loadingBar),_errorPage=require("./error-page"),_errorPage2=_interopRequireDefault(_errorPage),_welcomePage=require("./welcome-page"),_welcomePage2=_interopRequireDefault(_welcomePage),_invitationPage=require("./invitation-page"),_invitationPage2=_interopRequireDefault(_invitationPage),_noProjectPage=require("./no-project-page"),_noProjectPage2=_interopRequireDefault(_noProjectPage),_userSettingsPage=require("./user-settings-page/"),_userSettingsPage2=_interopRequireDefault(_userSettingsPage),_projectSettingsPage=require("./project-settings-page/"),_projectSettingsPage2=_interopRequireDefault(_projectSettingsPage),_userscriptAlert=require("./userscript-alert"),_userscriptAlert2=_interopRequireDefault(_userscriptAlert),_css=require("./css"),_presentationCss=require("./presentation-css"),_presentationCss2=_interopRequireDefault(_presentationCss),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_billingsInfoPage=require("./billings-info-page/"),_billingsInfoPage2=_interopRequireDefault(_billingsInfoPage),_newBillingsPage=require("./new-billings-page/"),_newBillingsPage2=_interopRequireDefault(_newBillingsPage),_billingAlert=require("./billing-alert"),_billingAlert2=_interopRequireDefault(_billingAlert),_trialExpired=require("./trial-expired"),_trialExpired2=_interopRequireDefault(_trialExpired);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var App=function(e){function App(e){_classCallCheck(this,App);var t=_possibleConstructorReturn(this,(App.__proto__||Object.getPrototypeOf(App)).call(this,e));return t.state={layout:_stores2.default.Layout.get()},t.subscribe(_stores2.default.Layout,_stores2.default.DisplayStyle),t}return _inherits(App,_baseComponent2.default),_createClass(App,[{key:"onStoreChange",value:function onStoreChange(){this.setState({layout:_stores2.default.Layout.get()})}},{key:"render",value:function render(){switch(this.state.layout){case"launch":return _react2.default.createElement("div",null,_react2.default.createElement("nav",{className:"navbar navbar-default"}));case"no-project-page":return _react2.default.createElement("div",null,_react2.default.createElement(_common2.default,null),_react2.default.createElement(_noProjectPage2.default,null));case"welcome-page":return _react2.default.createElement("div",null,_react2.default.createElement(_welcomePage2.default,null));case"settings-profile-page":case"settings-extensions-page":var e=this.state.layout.match(/^settings-(.+)-page$/)[1];return _react2.default.createElement("div",null,_react2.default.createElement(_common2.default,null),_react2.default.createElement(_userSettingsPage2.default,{tab:e}));case"invitation-page":return _react2.default.createElement("div",null,_react2.default.createElement(_common2.default,null),_react2.default.createElement(_invitationPage2.default,null));case"error-page":return _react2.default.createElement("div",null,_react2.default.createElement(_common2.default,null),_react2.default.createElement(_errorPage2.default,null));case"project-settings-basic-page":case"project-settings-pro-page":case"project-settings-members-page":case"project-settings-theme-page":case"project-settings-notifications-page":case"project-settings-page-data-page":case"project-settings-backup-page":case"project-settings-billing-page":var t=this.state.layout.match(/^project-settings-(.+)-page$/)[1];return _react2.default.createElement("div",null,_react2.default.createElement(_css.ProjectThemeCSS,null),_react2.default.createElement(_reactDisplaySwitch.When,{enable_billing:!0},_react2.default.createElement(_billingAlert2.default,null)),_react2.default.createElement(_navbar2.default,null),_react2.default.createElement(_projectSettingsPage2.default,{tab:t}));case"billings-new":return _react2.default.createElement("div",null,_react2.default.createElement(_common2.default,null),_react2.default.createElement(_newBillingsPage2.default,null));case"billings-info":return _react2.default.createElement("div",null,_react2.default.createElement(_common2.default,null),_react2.default.createElement(_billingsInfoPage2.default,null));default:var a="list"===this.state.layout,r="page"===this.state.layout,l="stream"===this.state.layout;return _react2.default.createElement("div",{className:(0,_classnames2.default)("app",_stores2.default.DisplayStyle.style)},_react2.default.createElement(_css.ProjectThemeCSS,null),_react2.default.createElement(_css.ProjectCSS,null),_react2.default.createElement(_css.UserCSS,null),_react2.default.createElement(_presentationCss2.default,null),_react2.default.createElement(_reactDisplaySwitch.When,{touch_device:!0},_react2.default.createElement(_loadingBar2.default,null)),_react2.default.createElement(_reactDisplaySwitch.When,{enable_billing:!0},_react2.default.createElement(_billingAlert2.default,null)),_react2.default.createElement(_navbar2.default,null),_react2.default.createElement(_userscriptAlert2.default,null),_react2.default.createElement("div",{className:"page-item-animation",id:"page-item-animation"}),_react2.default.createElement("div",{className:"container"},_react2.default.createElement(_quickLaunch2.default,null)),_react2.default.createElement(_trialExpired2.default,null,_react2.default.createElement("div",{className:"container",style:{display:a?"block":"none"}},_react2.default.createElement(_pageList2.default,{autoScroll:a,show:a})),_react2.default.createElement("div",{className:"row-flex",style:{display:r?"flex":"none"}},_react2.default.createElement("div",{className:"col-page-side"}),_react2.default.createElement("div",{className:"col-page"},_react2.default.createElement(_pageAlert2.default,null),_react2.default.createElement(_expandableMemu2.default,null),_react2.default.createElement(_page2.default,{show:r})),_react2.default.createElement("div",{className:"col-page-side"},_react2.default.createElement(_pageMenu2.default,null))),_react2.default.createElement("div",{className:"row-flex",style:{display:l?"flex":"none"}},_react2.default.createElement("div",{className:"col-page-side"}),_react2.default.createElement("div",{className:"col-page"},_react2.default.createElement(_stream2.default,{show:l})),_react2.default.createElement("div",{className:"col-page-side"}))),_react2.default.createElement(_statusBar2.default,null))}}}]),App}();exports.default=App;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./base-component":261,"./billing-alert":262,"./billings-info-page/":264,"./css":266,"./error-page":280,"./invitation-page":291,"./loading-bar":307,"./navbar/":334,"./navbar/common/":319,"./new-billings-page/":336,"./no-project-page":339,"./page":370,"./page-alert/":340,"./page-list":352,"./page-menu/":362,"./page-menu/expandable-memu":359,"./presentation-css":372,"./project-settings-page/":373,"./quick-launch":400,"./status-bar/":420,"./stream/":425,"./trial-expired":435,"./user-settings-page/":437,"./userscript-alert":439,"./welcome-page":441,"classnames":93,"react-display-switch":208}],259:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_externalLink=require("./external-link"),_externalLink2=_interopRequireDefault(_externalLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var AudioLink=function(e){function AudioLink(){_classCallCheck(this,AudioLink);var e=_possibleConstructorReturn(this,(AudioLink.__proto__||Object.getPrototypeOf(AudioLink)).call(this));return e.play=e.play.bind(e),e.stop=e.stop.bind(e),e.audio=new Audio,e}return _inherits(AudioLink,_react.Component),_createClass(AudioLink,null,[{key:"propTypes",get:function get(){return{src:_propTypes2.default.string.isRequired,title:_propTypes2.default.string,setCharIndex:_propTypes2.default.func.isRequired}}}]),_createClass(AudioLink,[{key:"play",value:function play(e){e.stopPropagation(),e.preventDefault();var t=this.props.src;this.audio.src!==t&&(this.audio.src=t),this.audio.play()}},{key:"stop",value:function stop(e){e.stopPropagation(),e.preventDefault(),this.audio.pause(),this.audio.currentTime=0}},{key:"render",value:function render(){var e=this.props,t=e.src,r=e.title,n=e.setCharIndex;return _react2.default.createElement("span",{className:"audio-link"},_react2.default.createElement(_externalLink2.default,{href:t},n(r||t)),_react2.default.createElement("span",{className:"play",onMouseOver:this.play,onMouseOut:this.stop},"♬"))}}]),AudioLink}();exports.default=AudioLink;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./external-link":281,"prop-types":186}],260:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var AudioPlayer=function(e){function AudioPlayer(e){_classCallCheck(this,AudioPlayer);var t=_possibleConstructorReturn(this,(AudioPlayer.__proto__||Object.getPrototypeOf(AudioPlayer)).call(this,e));return t.subscribe(_stores2.default.Layout),t}return _inherits(AudioPlayer,_baseComponent2.default),_createClass(AudioPlayer,null,[{key:"propTypes",get:function get(){return{url:_propTypes2.default.string.isRequired}}}]),_createClass(AudioPlayer,[{key:"onStoreChange",value:function onStoreChange(){this.audio&&"page"!==_stores2.default.Layout.get()&&this.audio.pause()}},{key:"render",value:function render(){var e=this,t=this.props.url;return _react2.default.createElement("audio",{ref:function ref(t){e.audio=t},className:"audio",controls:"true",preload:"none",src:t})}}]),AudioPlayer}();exports.default=AudioPlayer;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./base-component":261,"prop-types":186}],261:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_baseStore=require("../stores/base-store"),_baseStore2=_interopRequireDefault(_baseStore);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var BaseComponent=function(e){function BaseComponent(){_classCallCheck(this,BaseComponent);var e=_possibleConstructorReturn(this,(BaseComponent.__proto__||Object.getPrototypeOf(BaseComponent)).call(this));return e._stores=[],e.mounted=!1,e.onStoreChange=e.onStoreChange.bind(e),e}return _inherits(BaseComponent,_react.Component),_createClass(BaseComponent,[{key:"subscribe",value:function subscribe(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value;if(!(u instanceof _baseStore2.default))throw new Error('argument must be instance of "BaseStore"');if("function"!=typeof this.onStoreChange)throw new Error('function "onStoreChange" is not defined');if(this._stores.includes(u))throw new Error('"'+u.constructor.name+'" is already subscribed');this._stores.push(u)}}catch(e){r=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"componentDidMount",value:function componentDidMount(){var e=this;this.mounted=!0,this._stores.forEach(function(t){return t.addChangeListener(e.onStoreChange)})}},{key:"componentWillUnmount",value:function componentWillUnmount(){var e=this;this.mounted=!1,this._stores.forEach(function(t){return t.removeChangeListener(e.onStoreChange)})}}]),BaseComponent}();exports.default=BaseComponent;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/base-store":511}],262:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var BillingAlert=function(e){function BillingAlert(){_classCallCheck(this,BillingAlert);var e=_possibleConstructorReturn(this,(BillingAlert.__proto__||Object.getPrototypeOf(BillingAlert)).call(this));return e.state={project:_stores2.default.CurrentProject.get()},e.subscribe(_stores2.default.CurrentProject),e}return _inherits(BillingAlert,_baseComponent2.default),_createClass(BillingAlert,[{key:"onStoreChange",value:function onStoreChange(){var e=_stores2.default.CurrentProject.get();this.setState({project:e})}},{key:"render",value:function render(){var e=this.state.project;if(!e)return null;if(e.billing&&"past_due"===e.billing.status)return _react2.default.createElement("div",{className:"billing-alert"},_react2.default.createElement("a",{className:(0,_classnames2.default)({expired:!0}),href:"/projects/"+e.name+"/settings/billing"},"Payment failed :( Please update your details"));if(!e.trialing)return null;var t=e.trialDaysLeft<1,r=!t&&e.trialDaysLeft<8;return _react2.default.createElement("div",{className:"billing-alert"},_react2.default.createElement("a",{className:(0,_classnames2.default)({warning:r,expired:t}),href:"/projects/"+e.name+"/settings/billing"},t?"Free trial is expired. Please subscribe to continue":"Free trial: "+e.trialDaysLeft+" days left"))}}]),BillingAlert}();exports.default=BillingAlert;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./base-component":261,"classnames":93}],263:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();exports.default=BillingHistoryTable;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_moment="undefined"!=typeof window?window.window.moment:"undefined"!=typeof global?global.window.moment:null,_moment2=_interopRequireDefault(_moment),_formatMoney=require("../../lib/format-money"),_formatMoney2=_interopRequireDefault(_formatMoney);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),l=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(l).then(function(e){step("next",e)},function(e){step("throw",e)});e(l)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function BillingHistoryTable(e){var t=e.charges,r=t.map(function(e){return _react2.default.createElement("tr",{key:e.id},_react2.default.createElement("td",null,_moment2.default.unix(e.created).format("YYYY-MM-DD")),_react2.default.createElement("td",null,e.status),_react2.default.createElement("td",null,e.source.brand,"-",e.source.last4),_react2.default.createElement("td",null,(0,_formatMoney2.default)({amount:e.amount,currency:e.currency})),_react2.default.createElement("td",{align:"right"},"succeeded"===e.status&&_react2.default.createElement(SendReceipt,{chargeId:e.id})))});return _react2.default.createElement("table",{className:"table"},_react2.default.createElement("thead",null,_react2.default.createElement("tr",{className:"active"},_react2.default.createElement("th",null,"Date"),_react2.default.createElement("th",null,"Status"),_react2.default.createElement("th",null,"Card"),_react2.default.createElement("th",null,"Amount"),_react2.default.createElement("th",{width:"80",align:"right"},"Receipt"))),_react2.default.createElement("tbody",null,t&&t.length>0?r:_react2.default.createElement("tr",null,_react2.default.createElement("td",{colSpan:"5"},"No data"))))}var SendReceipt=function(e){function SendReceipt(){_classCallCheck(this,SendReceipt);var e=_possibleConstructorReturn(this,(SendReceipt.__proto__||Object.getPrototypeOf(SendReceipt)).call(this));return e.onClick=e.onClick.bind(e),e}return _inherits(SendReceipt,_react.Component),_createClass(SendReceipt,null,[{key:"propTypes",get:function get(){return{chargeId:_propTypes2.default.string.isRequired}}}]),_createClass(SendReceipt,[{key:"onClick",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_stores2.default.Billing.sendReceipt(this.props.chargeId);case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),t=e.t0.response&&e.t0.response.data?e.t0.response.data.message:"Can’t connect to the servers. Please try again later.",alert(t),e.abrupt("return");case 10:alert("A receipt has been sent to your registered email address.");case 11:case"end":return e.stop()}},_callee,this,[[0,5]])}));return function onClick(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){return _react2.default.createElement("button",{type:"button",className:"btn btn-xs btn-default",onClick:this.onClick},"Send email")}}]),SendReceipt}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/format-money":462,"../../stores/":520,"prop-types":186}],264:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_billingHistoryTable=require("./billing-history-table"),_billingHistoryTable2=_interopRequireDefault(_billingHistoryTable),_updateCard=require("./update-card"),_updateCard2=_interopRequireDefault(_updateCard),_moment="undefined"!=typeof window?window.window.moment:"undefined"!=typeof global?global.window.moment:null,_moment2=_interopRequireDefault(_moment),_formatMoney=require("../../lib/format-money"),_formatMoney2=_interopRequireDefault(_formatMoney);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var BillingsInfoPage=function(e){function BillingsInfoPage(e){_classCallCheck(this,BillingsInfoPage);var t=_possibleConstructorReturn(this,(BillingsInfoPage.__proto__||Object.getPrototypeOf(BillingsInfoPage)).call(this,e));return t.state={billing:_stores2.default.Billing.get()},t.subscribe(_stores2.default.Billing),t}return _inherits(BillingsInfoPage,_baseComponent2.default),_createClass(BillingsInfoPage,[{key:"onStoreChange",value:function onStoreChange(){this.setState({billing:_stores2.default.Billing.get()})}},{key:"render",value:function render(){var e=this.state.billing,t=e.source,a=e.upcoming,l=e.projects[0],n="past_due"===e.status;return _react2.default.createElement(Panel,{title:e.name,billing:e,firstProject:l},_react2.default.createElement("section",null,_react2.default.createElement("div",{className:"section-title"},"Paid projects"),_react2.default.createElement(LinkedProjectsList,{projects:e.projects})),_react2.default.createElement("section",null,_react2.default.createElement("div",{className:"section-title"},"Billing overview"),_react2.default.createElement("ul",{className:"billing-rows"},_react2.default.createElement("li",null,_react2.default.createElement("div",{className:"head"},"Plan"),_react2.default.createElement("div",{className:"content"},"Business")),_react2.default.createElement("li",null,_react2.default.createElement("div",{className:"head"},"Size"),_react2.default.createElement("div",{className:"content"},e.quantity," ",e.quantity>1?"members":"member")),_react2.default.createElement("li",null,_react2.default.createElement("div",{className:"head"},"Payment"),_react2.default.createElement("div",{className:"content"},_react2.default.createElement(_updateCard2.default,{source:t,pastDue:n}),_react2.default.createElement(Upcoming,{upcoming:a}))))),_react2.default.createElement("section",null,_react2.default.createElement("div",{className:"section-title"},"Billing history"),_react2.default.createElement(_billingHistoryTable2.default,{charges:e.charges})))}}]),BillingsInfoPage}();function LinkedProjectsList(e){var t=e.projects;return!t||t.length<1?_react2.default.createElement("ul",{className:"project-list"},_react2.default.createElement("li",null,"No project")):_react2.default.createElement("ul",{className:"project-list"},t.map(function(e){return _react2.default.createElement("li",{key:e.id},_react2.default.createElement("a",{href:"/"+e.name},e.displayName))}))}function Upcoming(e){var t=e.upcoming;return t?_react2.default.createElement("div",null,_react2.default.createElement("div",null,"Next scheduled payment: ",_react2.default.createElement("strong",null,_moment2.default.unix(t.nextPaymentAttempt).format("YYYY-MM-DD"))),_react2.default.createElement("div",null,"Next payment total: ",_react2.default.createElement("strong",null,(0,_formatMoney2.default)({amount:t.amountDue,currency:t.currency})))):_react2.default.createElement("div",null,_react2.default.createElement("div",null,"Next scheduled payment: ",_react2.default.createElement("strong",null,"No")),_react2.default.createElement("div",null,"Next payment total: ",_react2.default.createElement("strong",null,"0")))}function Panel(e){e.title,e.billing;var t=e.firstProject,a=e.children;return _react2.default.createElement("div",{className:"container billings-info-page"},_react2.default.createElement("div",{className:"row"},_react2.default.createElement("div",{className:"col-md-10 col-md-offset-1 col-sm-12 col-sm-offset-0"},t&&_react2.default.createElement("ol",{className:"breadcrumb"},_react2.default.createElement("li",null,_react2.default.createElement("a",{href:"/projects/"+t.name+"/settings/billing"},t.displayName," (Billing)"))),_react2.default.createElement("h1",null,"Billing"),_react2.default.createElement("div",{className:"panel panel-default"},_react2.default.createElement("div",{className:"panel-body"},a)))))}exports.default=BillingsInfoPage;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/format-money":462,"../../stores/":520,"../base-component":261,"./billing-history-table":263,"./update-card":265}],265:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactStripeElements=require("react-stripe-elements");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var UpdateCard=function(e){function UpdateCard(){_classCallCheck(this,UpdateCard);var e=_possibleConstructorReturn(this,(UpdateCard.__proto__||Object.getPrototypeOf(UpdateCard)).call(this));return e.state={stripe:null,updated:!1,edit:!1},e.onSuccess=e.onSuccess.bind(e),e.onClick=e.onClick.bind(e),e.onCancel=e.onCancel.bind(e),e}return _inherits(UpdateCard,_react.Component),_createClass(UpdateCard,null,[{key:"propTypes",get:function get(){return{source:_propTypes2.default.object.isRequired,pastDue:_propTypes2.default.bool.isRequired}}}]),_createClass(UpdateCard,[{key:"componentDidMount",value:function componentDidMount(){var e=this,t="pk_live_ZOqJedg3NuctNSITGRIuRICk";window.Stripe?this.setState({stripe:window.Stripe(t)}):document.querySelector("#stripe-js").addEventListener("load",function(){e.setState({stripe:window.Stripe(t)})})}},{key:"onClick",value:function onClick(){this.setState({edit:!0})}},{key:"onSuccess",value:function onSuccess(){this.setState({edit:!1,updated:!0})}},{key:"onCancel",value:function onCancel(){this.setState({edit:!1})}},{key:"render",value:function render(){var e=this,t=this.props.source,r=this.props.pastDue,n=this.state.updated,a=function Message(){return n&&r?_react2.default.createElement("div",{className:"alert alert-success"},"Your card has been updated successfully. We will try to process your payment in a few minutes."):r?_react2.default.createElement("div",{className:"alert alert-danger"},"Unable to process payment. Please update your card details or try a new card."):null};return _react2.default.createElement("div",null,_react2.default.createElement(function CardInfo(){if(!t)return null;if(e.state.edit)return null;var o=r&&!n,s=o?"btn btn-danger":"btn btn-default",u=o?"card-info fail":"card-info";return _react2.default.createElement("div",{className:u},_react2.default.createElement(a,null),_react2.default.createElement("strong",null,t.brand,"-",t.last4),_react2.default.createElement("span",{className:"desc"},"Expiration: "),_react2.default.createElement("strong",null,t.expMonth,"/",t.expYear),_react2.default.createElement("span",{className:"desc"},"By: "),_react2.default.createElement("strong",null,t.name),_react2.default.createElement("button",{type:"button",className:s,onClick:e.onClick},"Change"))},null),_react2.default.createElement(function UpdateCard(){return e.state.edit?_react2.default.createElement(_reactStripeElements.StripeProvider,{stripe:e.state.stripe},_react2.default.createElement(_reactStripeElements.Elements,null,_react2.default.createElement(InjectedCheckoutForm,{onSuccess:e.onSuccess,onCancel:e.onCancel,source:t}))):null},null))}}]),UpdateCard}();exports.default=UpdateCard;var CheckoutForm=function(e){function CheckoutForm(){_classCallCheck(this,CheckoutForm);var e=_possibleConstructorReturn(this,(CheckoutForm.__proto__||Object.getPrototypeOf(CheckoutForm)).call(this));return e.state={submitting:!1},e.onSubmit=e.onSubmit.bind(e),e}return _inherits(CheckoutForm,_react2.default.Component),_createClass(CheckoutForm,[{key:"onSubmit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,n,a;return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return this.setState({submitting:!0}),e.preventDefault(),t=this.nameInput.value,o.next=5,this.props.stripe.createToken({name:t});case 5:if(r=o.sent,n=r.token,console.log("Received Stripe token:",n),n){o.next=10;break}return o.abrupt("return",this.setState({submitting:!1}));case 10:return o.prev=10,o.next=13,_stores2.default.Billing.update({token:n.id,name:t});case 13:o.next=20;break;case 15:return o.prev=15,o.t0=o.catch(10),a=o.t0.response&&o.t0.response.data?o.t0.response.data.message:"Can’t connect to the servers. Please try again later.",alert(a),o.abrupt("return",this.setState({submitting:!1}));case 20:this.setState({submitting:!1}),this.props.onSuccess();case 22:case"end":return o.stop()}},_callee,this,[[10,15]])}));return function onSubmit(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this,t=this.state.submitting,r=this.props.source;return _react2.default.createElement("form",{onSubmit:this.onSubmit,className:"update-card-form"},_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("div",{className:"form-control",style:{paddingTop:"8px"}},_react2.default.createElement(_reactStripeElements.CardElement,{hidePostalCode:!0,style:{base:{fontSize:"14px"}}}))),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("input",{type:"text",className:"form-control",placeholder:"Name on the receipt",defaultValue:r.name,ref:function ref(t){e.nameInput=t}})),_react2.default.createElement("div",{className:"form-group buttons"},_react2.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:t},"Update"),_react2.default.createElement("button",{type:"submit",className:"btn btn-default",onClick:this.props.onCancel},"Cancel")))}}],[{key:"propTypes",get:function get(){return{onSuccess:_propTypes2.default.func.isRequired,onCancel:_propTypes2.default.func.isRequired,source:_propTypes2.default.object.isRequired}}}]),CheckoutForm}(),InjectedCheckoutForm=(0,_reactStripeElements.injectStripe)(CheckoutForm);

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"prop-types":186,"react-stripe-elements":216}],266:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};exports.default=CSS,exports.UserCSS=UserCSS,exports.ProjectThemeCSS=ProjectThemeCSS,exports.ProjectCSS=ProjectCSS;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function CSS(e){return _react2.default.createElement("link",_extends({rel:"stylesheet"},e))}function UserCSS(){var e=_stores2.default.CurrentProject.get(),t=_stores2.default.CurrentUser.get();if(!(e&&e.name&&t&&t.name))return null;var r="/api/code/"+e.name+"/"+t.name+"/style.css";return _react2.default.createElement(CSS,{href:r})}function ProjectThemeCSS(){var e=_stores2.default.CurrentProject.get();if(!e||!e.name)return null;if(!e.theme||"default"===e.theme)return null;var t="/assets/css/themes/"+e.theme+".css";return _react2.default.createElement(CSS,{href:t})}function ProjectCSS(){var e=_stores2.default.CurrentProject.get();if(!e||!e.name)return null;var t="/api/code/"+e.name+"/settings/style.css";return _react2.default.createElement(CSS,{href:t})}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520}],267:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=BracketButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_popupMenu=require("../popup-menu"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_bracketComplete=require("../../lib/transform-text/bracket-complete"),_bracketComplete2=_interopRequireDefault(_bracketComplete);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function BracketButton(){return _react2.default.createElement(_popupMenu.Button,{onClick:function onClick(){_stores2.default.Cursor.hidePopupMenu(),_stores2.default.Line.addChar((0,_bracketComplete2.default)("[")),_stores2.default.Cursor.focus()}},"[ ]")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/transform-text/bracket-complete":483,"../../stores/":520,"../popup-menu":371}],268:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_computeLine=require("../../lib/compute-line"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var SCROLL_WAIT=100,DesktopCursor=function(e){function DesktopCursor(e){_classCallCheck(this,DesktopCursor);var t=_possibleConstructorReturn(this,(DesktopCursor.__proto__||Object.getPrototypeOf(DesktopCursor)).call(this,e));return t.shouldScroll=!1,t.state={point:null},(0,_lodash.bindAll)(t,["onScrollInView","scrollInView"]),t.throttledScroll=(0,_lodash.throttle)(t.scrollInView,SCROLL_WAIT,{leading:!1}),t.subscribe(_stores2.default.LineDOM,_stores2.default.Cursor),t}return _inherits(DesktopCursor,_baseComponent2.default),_createClass(DesktopCursor,null,[{key:"propTypes",get:function get(){return{position:_propTypes2.default.object.isRequired,visible:_propTypes2.default.bool.isRequired}}}]),_createClass(DesktopCursor,[{key:"onScrollInView",value:function onScrollInView(){this.throttledScroll()}},{key:"scrollInView",value:function scrollInView(){if(this.props.visible&&this.props.position){var e=(0,_jquery2.default)(window).scrollTop(),t=(0,_jquery2.default)(this.cursor).offset().top,o=t+(0,_jquery2.default)(this.cursor).height(),r=o-e;t-e-30<0?(0,_jquery2.default)("html,body").scrollTop(t-30):r>window.innerHeight-30&&(0,_jquery2.default)("html,body").scrollTop(o-window.innerHeight+30)}}},{key:"onStoreChange",value:function onStoreChange(e){var t=e.store,o=e.event;switch(t){case _stores2.default.LineDOM:this.componentWillReceiveProps(this.props);break;case _stores2.default.Cursor:"scroll"===o&&this.onScrollInView()}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){if(this.props.position){var t=(0,_computeLine.getPointFromCharIndex)(e.position);t&&this.setState({point:t})}}},{key:"getCursorStyle",value:function getCursorStyle(){var e={};if(this.state.point){var t=this.state.point;e={top:t.y,left:t.x,height:t.height}}return this.props.visible||(e.display="none"),e}},{key:"render",value:function render(){var e=this;return _react2.default.createElement("div",{ref:function ref(t){e.cursor=t},className:"cursor",style:this.getCursorStyle()},_react2.default.createElement("svg",null,_react2.default.createElement("rect",{x:"0",y:"0",width:"1",height:"100%"})))}}]),DesktopCursor}();exports.default=DesktopCursor;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/compute-line":459,"../../stores/":520,"../base-component":261,"prop-types":186}],269:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Cursor;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_browser=require("../../lib/browser"),_desktopCursor=require("./desktop-cursor"),_desktopCursor2=_interopRequireDefault(_desktopCursor),_mobileCursor=require("./mobile-cursor"),_mobileCursor2=_interopRequireDefault(_mobileCursor);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Cursor(e){return(0,_browser.isTouchDevice)()?_react2.default.createElement(_mobileCursor2.default,e):_react2.default.createElement(_desktopCursor2.default,e)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/browser":457,"./desktop-cursor":268,"./mobile-cursor":271}],270:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HashTagButton=HashTagButton,exports.TabButton=TabButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_popupMenu=require("../popup-menu"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var addChar=function addChar(e){_stores2.default.Cursor.hidePopupMenu(),_stores2.default.Line.addChar(e),_stores2.default.Cursor.focus()};function HashTagButton(){var e=_stores2.default.Cursor.getPosition(),t=_stores2.default.Line.getAll()[e.line],r=e.char>0&&!/^\s$/.test(t.text[e.char-1])?" #":"#";return _react2.default.createElement(_popupMenu.Button,{onClick:function onClick(){return addChar(r)}},"#")}function TabButton(){return _react2.default.createElement(_popupMenu.Button,{onClick:function onClick(){return addChar("\t")}},"Tab")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../popup-menu":371}],271:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var u=t[r];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_desktopCursor=require("./desktop-cursor"),_desktopCursor2=_interopRequireDefault(_desktopCursor),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_browser=require("../../lib/browser"),_selectButton=require("./select-button"),_selectButton2=_interopRequireDefault(_selectButton),_pasteButton=require("./paste-button"),_pasteButton2=_interopRequireDefault(_pasteButton),_userIconButton=require("./user-icon-button"),_userIconButton2=_interopRequireDefault(_userIconButton),_bracketButton=require("./bracket-button"),_bracketButton2=_interopRequireDefault(_bracketButton),_markButton=require("./mark-button"),_popupMenu=require("../popup-menu"),_decorateLines=require("../../../../share/decorate-lines"),_decorateLines2=_interopRequireDefault(_decorateLines);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MobileCursor=function(e){function MobileCursor(){return _classCallCheck(this,MobileCursor),_possibleConstructorReturn(this,(MobileCursor.__proto__||Object.getPrototypeOf(MobileCursor)).apply(this,arguments))}return _inherits(MobileCursor,_desktopCursor2.default),_createClass(MobileCursor,[{key:"renderPopupMenu",value:function renderPopupMenu(){if(!_stores2.default.Cursor.visiblePopupMenu)return null;var e=(0,_decorateLines2.default)(_stores2.default.Line.getAll()),t=[];if(_stores2.default.CurrentUser.isProjectMember){var r=_stores2.default.Cursor.getPosition().line;if(0===r)t=[_react2.default.createElement(_selectButton2.default,{key:"select"}),_react2.default.createElement(_pasteButton2.default,{key:"paste"})];else if(_stores2.default.MobileSelection.userIconNums>0)t=_react2.default.createElement(_userIconButton2.default,null);else{var u=e[r];t=u.codeBlock||u.tableBlock||u.cli?[u.tableBlock&&_react2.default.createElement(_markButton.TabButton,{key:"tab"}),_react2.default.createElement(_selectButton2.default,{key:"select"}),_react2.default.createElement(_pasteButton2.default,{key:"paste"})]:[_react2.default.createElement(_bracketButton2.default,{key:"bracket"}),_react2.default.createElement(_markButton.HashTagButton,{key:"hashtag"}),_react2.default.createElement(_selectButton2.default,{key:"select"}),_react2.default.createElement(_pasteButton2.default,{key:"paste"}),_react2.default.createElement(_userIconButton2.default,{key:"icon"})]}}else t=_react2.default.createElement(_selectButton2.default,null);return _react2.default.createElement(_popupMenu.PopupMenu,{target:this.cursor},t)}},{key:"render",value:function render(){var e=this,t=this.getCursorStyle(),r=this.state.point;(r&&(0,_browser.isiOS)()&&!_stores2.default.Selection.hasSelection()&&(0,_jquery2.default)("#text-input").css({top:r.y,left:r.x-4,height:r.height}),this.props.visible)||(0,_jquery2.default)("#text-input").length>0&&(_stores2.default.Cursor.visibleScreenKeyboard=!1);return _react2.default.createElement("div",{className:"mobile-cursor"},this.renderPopupMenu(),_react2.default.createElement("div",{ref:function ref(t){e.cursor=t},className:"cursor",style:t},_react2.default.createElement("svg",null,_react2.default.createElement("rect",{x:"0",y:"0",width:"1",height:"100%"}))))}}]),MobileCursor}();exports.default=MobileCursor;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/decorate-lines":571,"../../lib/browser":457,"../../stores/":520,"../popup-menu":371,"./bracket-button":267,"./desktop-cursor":268,"./mark-button":270,"./paste-button":272,"./select-button":273,"./user-icon-button":274}],272:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_popupMenu=require("../popup-menu"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_textPasteModal=require("../modals/text-paste-modal"),_textPasteModal2=_interopRequireDefault(_textPasteModal),_transformText=require("../../lib/transform-text"),_transformText2=_interopRequireDefault(_transformText);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,o){try{var a=t[n](o),u=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(u).then(function(e){step("next",e)},function(e){step("throw",e)});e(u)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PasteButton=function(e){function PasteButton(){_classCallCheck(this,PasteButton);var e=_possibleConstructorReturn(this,(PasteButton.__proto__||Object.getPrototypeOf(PasteButton)).call(this));return e.state={showModal:!1},(0,_lodash.bindAll)(e,"onClick","onHideModal"),e}return _inherits(PasteButton,_react.Component),_createClass(PasteButton,[{key:"onClick",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return e=void 0,t.prev=1,t.next=4,navigator.clipboard.readText();case 4:e=t.sent,t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",this.setState({showModal:!0}));case 10:if(e){t.next=12;break}return t.abrupt("return");case 12:_stores2.default.Line.addChar((0,_transformText2.default)(e)),_stores2.default.Cursor.hidePopupMenu();case 14:case"end":return t.stop()}},_callee,this,[[1,7]])}));return function onClick(){return e.apply(this,arguments)}}()},{key:"onHideModal",value:function onHideModal(){this.setState({showModal:!1})}},{key:"render",value:function render(){var e=this.state.showModal;return _react2.default.createElement(_popupMenu.Button,{onClick:e?null:this.onClick},"Paste",_react2.default.createElement(_textPasteModal2.default,{show:e,onHide:this.onHideModal}))}}]),PasteButton}();exports.default=PasteButton;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/transform-text":484,"../../stores/":520,"../modals/text-paste-modal":317,"../popup-menu":371}],273:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=SelectButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_popupMenu=require("../popup-menu"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function SelectButton(){return _react2.default.createElement(_popupMenu.Button,{onClick:function onClick(e){_stores2.default.MobileSelection.createSelection(),_stores2.default.Cursor.hidePopupMenu()}},"Select")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../popup-menu":371}],274:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=UserIconButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_popupMenu=require("../popup-menu"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function UserIconButton(){var e=_stores2.default.CurrentUser.get();if(!e||!e.name)return null;return _react2.default.createElement(_popupMenu.Button,{onClick:function onClick(t){var r=_stores2.default.MobileSelection.userIconNums;if(0===r)_stores2.default.MobileSelection.incrementUserIconNums(),_stores2.default.Line.addChar("["+e.name+".icon]"),_stores2.default.Cursor.showPopupMenu({blurTextarea:!1}),_stores2.default.Cursor.focus();else{var o=1===r?"["+e.name+".icon]":"["+e.name+".icon*"+r+"]";_stores2.default.Line.deleteChar(-o.charLength),r=_stores2.default.MobileSelection.incrementUserIconNums(),_stores2.default.Line.addChar("["+e.name+".icon*"+r+"]")}}},"Icon")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../popup-menu":371}],275:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_moment="undefined"!=typeof window?window.window.moment:"undefined"!=typeof global?global.window.moment:null,_moment2=_interopRequireDefault(_moment);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DateLabel=function(e){function DateLabel(){return _classCallCheck(this,DateLabel),_possibleConstructorReturn(this,(DateLabel.__proto__||Object.getPrototypeOf(DateLabel)).apply(this,arguments))}return _inherits(DateLabel,_react.Component),_createClass(DateLabel,[{key:"render",value:function render(){var e=this.props.unixtime,t=null;try{t=new Date(1e3*e).toLocaleString()}catch(e){console.error(e.stack||e)}return _react2.default.createElement("span",{className:"date-label",title:t},_moment2.default.unix(e).fromNow())}}],[{key:"propTypes",get:function get(){return{unixtime:_propTypes2.default.number.isRequired}}}]),DateLabel}();exports.default=DateLabel;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"prop-types":186}],276:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_=require("./"),_file=require("../../lib/file"),_gyazoUpload=require("../../lib/gyazo-upload"),_gyazoUpload2=_interopRequireDefault(_gyazoUpload);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function step(a,o){try{var n=r[a](o),s=n.value}catch(e){return void t(e)}if(!n.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var GyazoUpload=function(e){function GyazoUpload(){_classCallCheck(this,GyazoUpload);var e=_possibleConstructorReturn(this,(GyazoUpload.__proto__||Object.getPrototypeOf(GyazoUpload)).call(this));return e.state={uploadProgress:0},(0,_lodash.bindAll)(e,"onDragOver","onDragLeave","onDrop"),e}return _inherits(GyazoUpload,_react.Component),_createClass(GyazoUpload,null,[{key:"propTypes",get:function get(){return{onExit:_propTypes2.default.func.isRequired}}}]),_createClass(GyazoUpload,[{key:"onDragOver",value:function onDragOver(e){e.stopPropagation(),e.preventDefault(),(0,_.setCursorPosition)(e)}},{key:"onDragLeave",value:function onDragLeave(){_stores2.default.Cursor.hide(),this.props.onExit()}},{key:"onDrop",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var r,t,a,o,n,s,i,u,l,p,c,f,d,_,y=this;return regeneratorRuntime.wrap(function _callee$(g){for(;;)switch(g.prev=g.next){case 0:if(this.setState({uploadProgress:0}),e.preventDefault(),e.stopPropagation(),!((r=[].concat(_toConsumableArray(e.dataTransfer.files)).filter(function(e){return(0,_gyazoUpload.isGyazoUploadableType)(e.type)}).sort(function(e,r){return e.name<r.name?-1:1})).length<1)){g.next=6;break}return g.abrupt("return",this.props.onExit());case 6:t=0,a=100/r.length,o=setInterval(function(){if(Math.ceil(t)>99)return y.setState({uploadProgress:100}),clearInterval(o),setTimeout(function(){return y.setState({isDragging:!1,uploadProgress:0})},100);var e=Math.min(t,y.state.uploadProgress+2);y.setState({uploadProgress:e})},50),n=!0,s=!1,i=void 0,g.prev=12,u=r[Symbol.iterator]();case 14:if(n=(l=u.next()).done){g.next=39;break}return p=l.value,t=t+a-5,c={},g.prev=18,g.next=21,(0,_file.readAsDataURLPromise)(p);case 21:return f=g.sent,g.next=24,(0,_gyazoUpload2.default)(f.target.result);case 24:c=g.sent,g.next=32;break;case 27:return g.prev=27,g.t0=g.catch(18),clearInterval(o),g.t0.redirectTo?confirm(g.t0.message)&&open(g.t0.redirectTo):alert(g.t0.message),g.abrupt("return",this.props.onExit());case 32:d=_stores2.default.Cursor.getPosition(),_="["+c.url+"]\n",0===d.line?_stores2.default.Line.insertAfterTitleLine(_):_stores2.default.Line.addChar(_),t+=5;case 36:n=!0,g.next=14;break;case 39:g.next=45;break;case 41:g.prev=41,g.t1=g.catch(12),s=!0,i=g.t1;case 45:g.prev=45,g.prev=46,!n&&u.return&&u.return();case 48:if(g.prev=48,!s){g.next=51;break}throw i;case 51:return g.finish(48);case 52:return g.finish(45);case 53:_stores2.default.Cursor.hide(),this.props.onExit();case 55:case"end":return g.stop()}},_callee,this,[[12,41,45,53],[18,27],[46,,48,52]])}));return function onDrop(r){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this;return _react2.default.createElement("div",{className:"drag-and-drop gyazo-upload",onDrop:this.onDrop,onDragEnter:function onDragEnter(e){return e.preventDefault()},onDragOver:this.onDragOver,onDragLeave:this.props.onExit},_react2.default.createElement(function Message(){return 0===e.state.uploadProgress?_react2.default.createElement("span",{className:"message"},_react2.default.createElement("i",{className:"fa fa-file-image-o"})," Drop image files to upload"):_react2.default.createElement("span",{className:"message"},_react2.default.createElement("i",{className:"fa fa-upload"})," Uploading... ",Math.floor(e.state.uploadProgress)," %")},null))}}]),GyazoUpload}();exports.default=GyazoUpload;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/file":461,"../../lib/gyazo-upload":463,"../../stores/":520,"./":277,"prop-types":186}],277:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setCursorPosition=void 0;var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_gyazoUpload=require("./gyazo-upload"),_gyazoUpload2=_interopRequireDefault(_gyazoUpload),_textDrop=require("./text-drop"),_textDrop2=_interopRequireDefault(_textDrop),_gyazoUpload3=require("../../lib/gyazo-upload"),_computeLine=require("../../lib/compute-line"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var debug=require("../../../../share/debug")(__filename),setCursorPosition=exports.setCursorPosition=(0,_lodash.throttle)(function(e){var r=e.pageX,t=e.pageY,o=(0,_jquery2.default)(".lines").offset(),n={x:r-o.left,y:t-o.top},a=(0,_computeLine.getCharIndexFromPoint)(n);_stores2.default.Cursor.setPosition(a,{source:"mouse"})},300,{trailing:!1}),DragAndDrop=function(e){function DragAndDrop(e){_classCallCheck(this,DragAndDrop);var r=_possibleConstructorReturn(this,(DragAndDrop.__proto__||Object.getPrototypeOf(DragAndDrop)).call(this,e));return r.state={uploader:null},(0,_lodash.bindAll)(r,"onDragEnter","onDragLeave"),r}return _inherits(DragAndDrop,_react.Component),_createClass(DragAndDrop,null,[{key:"propTypes",get:function get(){return{children:_propTypes2.default.node.isRequired}}}]),_createClass(DragAndDrop,[{key:"onDragEnter",value:function onDragEnter(e){if(e&&e.dataTransfer&&e.dataTransfer.types instanceof Array){if(debug("dragEnter",e.dataTransfer.types),e.dataTransfer.types.includes("Files")&&(0,_gyazoUpload3.isGyazoUploadEnable)())return _stores2.default.Cursor.show(),void this.setState({uploader:_gyazoUpload2.default});if(e.dataTransfer.types.includes("text/plain"))return _stores2.default.Cursor.show(),void this.setState({uploader:_textDrop2.default})}this.setState({uploader:null})}},{key:"onDragLeave",value:function onDragLeave(){this.setState({uploader:null})}},{key:"render",value:function render(){var e=this.state.uploader;return _react2.default.createElement(_react.Fragment,null,e&&_react2.default.createElement(e,{onExit:this.onDragLeave}),_react2.default.createElement("div",{className:"drag-and-drop-enter",onDragEnter:this.onDragEnter},this.props.children))}}]),DragAndDrop}();exports.default=DragAndDrop;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/components/drag-and-drop/index.js")
    },{"../../../../share/debug":566,"../../lib/compute-line":459,"../../lib/gyazo-upload":463,"../../stores/":520,"./gyazo-upload":276,"./text-drop":278,"prop-types":186}],278:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=TextDrop;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_=require("./"),_transformText=require("../../lib/transform-text"),_transformText2=_interopRequireDefault(_transformText);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var debug=require("../../../../share/debug")(__filename);function TextDrop(e){e.active;var r=e.onExit;return debug("render"),_react2.default.createElement("textarea",{className:"drag-and-drop text-drop",onChange:function onChange(e){debug(e.target.value),_stores2.default.Line.addChar((0,_transformText2.default)(e.target.value)+"\n"),r()},onDragEnter:function onDragEnter(e){e.stopPropagation(),e.preventDefault()},onDragOver:_.setCursorPosition,onDragLeave:r})}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/components/drag-and-drop/text-drop.js")
    },{"../../../../share/debug":566,"../../lib/transform-text":484,"../../stores/":520,"./":277}],279:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_cursor=require("./cursor/"),_cursor2=_interopRequireDefault(_cursor),_sharedCursor=require("./shared-cursor"),_sharedCursor2=_interopRequireDefault(_sharedCursor),_selections=require("./selections/"),_selections2=_interopRequireDefault(_selections),_textInput=require("./text-input/"),_textInput2=_interopRequireDefault(_textInput),_lines=require("./lines/"),_lines2=_interopRequireDefault(_lines),_desktopPointerEvent=require("./lines/desktop-pointer-event"),_desktopPointerEvent2=_interopRequireDefault(_desktopPointerEvent),_mobilePointerEvent=require("./lines/mobile-pointer-event"),_mobilePointerEvent2=_interopRequireDefault(_mobilePointerEvent),_browser=require("../lib/browser");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function PointerEvent(e){var t=e.children;return(0,_browser.isTouchDevice)()?_react2.default.createElement(_mobilePointerEvent2.default,null,t):_react2.default.createElement(_desktopPointerEvent2.default,null,t)}var Editor=function(e){function Editor(e){_classCallCheck(this,Editor);var t=_possibleConstructorReturn(this,(Editor.__proto__||Object.getPrototypeOf(Editor)).call(this,e));return t.state=t.makeState(),t.subscribe(_stores2.default.Line,_stores2.default.Cursor,_stores2.default.Selection,_stores2.default.LinePermalink),t}return _inherits(Editor,_baseComponent2.default),_createClass(Editor,[{key:"makeState",value:function makeState(){return{lines:_stores2.default.Line.getAll(),cursorPosition:_stores2.default.Cursor.getPosition(),cursorVisible:_stores2.default.Cursor.getVisible(),selectionRange:_stores2.default.Selection.getRange(),selectedText:_stores2.default.Selection.getSelectedText(),permalinkLine:_stores2.default.LinePermalink.get()}}},{key:"onStoreChange",value:function onStoreChange(){this.setState(this.makeState())}},{key:"render",value:function render(){return _react2.default.createElement("div",{className:"editor",id:"editor",style:{userSelect:"none"}},_react2.default.createElement(_cursor2.default,{position:this.state.cursorPosition,visible:this.state.cursorVisible}),_react2.default.createElement(_sharedCursor2.default,null),_react2.default.createElement(_selections2.default,{range:this.state.selectionRange}),_react2.default.createElement("div",{id:"compute-line",className:"compute-line"},_react2.default.createElement("div",{className:"line"})),_react2.default.createElement(_textInput2.default,{position:this.state.cursorPosition,selectedText:this.state.selectedText,selectionRange:this.state.selectionRange}),_react2.default.createElement(PointerEvent,null,_react2.default.createElement(_lines2.default,{lines:(0,_lodash.cloneDeep)(this.state.lines),cursorPosition:(0,_lodash.cloneDeep)(this.state.cursorPosition),cursorVisible:this.state.cursorVisible,permalinkLine:this.state.permalinkLine})))}}]),Editor}();exports.default=Editor;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../lib/browser":457,"../stores/":520,"./base-component":261,"./cursor/":269,"./lines/":304,"./lines/desktop-pointer-event":303,"./lines/mobile-pointer-event":305,"./selections/":410,"./shared-cursor":415,"./text-input/":433}],280:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_externalLink=require("./external-link"),_externalLink2=_interopRequireDefault(_externalLink),_logoutLink=require("./logout-link"),_logoutLink2=_interopRequireDefault(_logoutLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ErrorPage=function(e){function ErrorPage(){return _classCallCheck(this,ErrorPage),_possibleConstructorReturn(this,(ErrorPage.__proto__||Object.getPrototypeOf(ErrorPage)).apply(this,arguments))}return _inherits(ErrorPage,_react2.default.Component),_createClass(ErrorPage,[{key:"notFoundError",value:function notFoundError(e){var t=e.response.data.linkTo;return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,"Not found"),_react2.default.createElement("p",null,"Requested page is not found."),t&&_react2.default.createElement(function LinkTo(e){var t=e.url;return _react2.default.createElement("span",null,"Go to ",_react2.default.createElement("a",{href:t},t))},{url:t}))}},{key:"notLoggedInError",value:function notLoggedInError(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,"Hi, there!"),_react2.default.createElement("p",null,"To use Scrapbox, please log in."),_stores2.default.Login.get().strategies.map(function(e){return _react2.default.createElement("p",{key:e},_react2.default.createElement("a",{target:"_self",href:function loginUrl(e){return"/login/"+e+"?redirect="+encodeURIComponent(location.pathname)}(e),className:"btn btn-default btn-lg"},"Log in with ",(0,_lodash.capitalize)(e)))}))}},{key:"notMemberError",value:function notMemberError(){var e=_stores2.default.CurrentUser.get();return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,"Access denied"),_react2.default.createElement("p",null,"You don’t have the permission."),_react2.default.createElement("hr",null),_react2.default.createElement("p",null,"Please confirm that the account ",_react2.default.createElement("b",null,e.email)," has the right persmission."),_react2.default.createElement("p",null,"If you think you’ve logged in with your different account, please ",_react2.default.createElement(_logoutLink2.default,{redirect:location.pathname,role:"button"},"switch your account"),"."),_react2.default.createElement("p",null,"If you are not ",e.email,", please ",_react2.default.createElement(_logoutLink2.default,{redirect:location.pathname,role:"button"},"log out"),"."))}},{key:"serviceTemporarilyUnavailableError",value:function serviceTemporarilyUnavailableError(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,"We’ll be back soon."),_react2.default.createElement("p",null,"Service Temporarily Unavailable. Please try again."),_react2.default.createElement("p",null,_react2.default.createElement(_externalLink2.default,{href:"mailto:contact@scrapbox.io"},"Contact us")," if the problem persists."))}},{key:"serverError",value:function serverError(e){var t=e&&[e.message,e.response&&e.response.data.message].join(". ");return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,"Server error"),_react2.default.createElement("p",null,"The server returned an unexpected error (",e.response.status,"). Please try again."),_react2.default.createElement("p",null,_react2.default.createElement(_externalLink2.default,{href:"mailto:contact@scrapbox.io"},"Contact us")," if the problem persists."),t&&_react2.default.createElement("div",null,_react2.default.createElement("hr",null),_react2.default.createElement("code",null,t)))}},{key:"offlineError",value:function offlineError(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,"There is no Internet connection"),_react2.default.createElement("p",null,"Try:",_react2.default.createElement("br",null),"- Checking the network cables, modem, and router",_react2.default.createElement("br",null),"- Reconnecting to Wi-Fi"))}},{key:"serverConnectionError",value:function serverConnectionError(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,"The server can’t be reached"),_react2.default.createElement("p",null,"Request has been terminated."),_react2.default.createElement("p",null,"Possible causes: the network is offline, the server is down, something wrong with the proxy server, or the address is incorrect."),_react2.default.createElement("p",null,"Please reload and try again."),_react2.default.createElement("p",null,_react2.default.createElement(_externalLink2.default,{href:"mailto:contact@scrapbox.io"},"Contact us")," if the problem persists."))}},{key:"defaultError",value:function defaultError(e){return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,"Oops!"),_react2.default.createElement("p",null,"Something went wrong. Please try again."),_react2.default.createElement("p",null,_react2.default.createElement(_externalLink2.default,{href:"mailto:contact@scrapbox.io"},"Contact us")," if the problem persists."),_react2.default.createElement("hr",null),_react2.default.createElement("code",null,e.stack||e.message))}},{key:"renderDetail",value:function renderDetail(){var e=_stores2.default.Error.get();if(e.response)switch(e.response.status){case 401:return this.notLoggedInError();case 403:return this.notMemberError();case 404:return this.notFoundError(e);case 503:return this.serviceTemporarilyUnavailableError();default:return this.serverError(e)}return e.request?"Network Error"!==e.message||navigator.onLine?this.serverConnectionError():this.offlineError():this.defaultError(e)}},{key:"render",value:function render(){return _react2.default.createElement("div",{className:"container error-page"},_react2.default.createElement("div",{className:"panel panel-default"},_react2.default.createElement("div",{className:"panel-body text-center"},this.renderDetail())))}}]),ErrorPage}();exports.default=ErrorPage;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./external-link":281,"./logout-link":308}],281:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};exports.default=ExternalLink;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ExternalLink(e){return _react2.default.createElement("a",_extends({},e,{rel:"noopener noreferrer",target:"_blank"}))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{}],282:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ErrorLink;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_externalLink=require("../external-link"),_externalLink2=_interopRequireDefault(_externalLink),_=require("./");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ErrorLink(e){var t=e.latitude,r=e.longitude,n=e.zoom,i=e.title,l=(0,_.getGoogleMapUrl)({latitude:t,longitude:r,zoom:n,title:i});return _react2.default.createElement(_externalLink2.default,{href:l},decodeURIComponent(l))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../external-link":281,"./":283}],283:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=GoogleMap,exports.getGoogleMapUrl=getGoogleMapUrl;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_touchDeviceMap=require("./touch-device-map"),_touchDeviceMap2=_interopRequireDefault(_touchDeviceMap),_pointingDeviceMap=require("./pointing-device-map"),_pointingDeviceMap2=_interopRequireDefault(_pointingDeviceMap);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function GoogleMap(e){return _reactDisplaySwitch.When.case("touch_device")?_react2.default.createElement(_touchDeviceMap2.default,e):_react2.default.createElement(_pointingDeviceMap2.default,e)}function getGoogleMapUrl(e){var t=e.latitude,o=e.longitude,i=e.zoom,a=e.title,c=t+","+o;return a?"https://www.google.com/maps/search/"+encodeURIComponent(a)+"/@"+c+","+(i||15)+"z":"https://www.google.com/maps/place/"+c}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./pointing-device-map":284,"./touch-device-map":285,"react-display-switch":208}],284:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_externalLink=require("../external-link"),_externalLink2=_interopRequireDefault(_externalLink),_=require("./"),_errorLink=require("./error-link"),_errorLink2=_interopRequireDefault(_errorLink),_updatableMap=require("./updatable-map"),_updatableMap2=_interopRequireDefault(_updatableMap),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PointingDeviceMap=function(e){function PointingDeviceMap(e){_classCallCheck(this,PointingDeviceMap);var t=_possibleConstructorReturn(this,(PointingDeviceMap.__proto__||Object.getPrototypeOf(PointingDeviceMap)).call(this,e));return(0,_lodash.bindAll)(t,"onLoadMapFailed","onClick","hideModal"),t.setStateByContentWidth=(0,_lodash.throttle)(t.setStateByContentWidth.bind(t)),t.onWindowScroll=(0,_lodash.throttle)(t.onWindowScroll.bind(t)),t.state={loadMapFailed:!1,showModal:!1,showOverlayImage:!0,contentWidth:null,contentHeight:null},_stores2.default.GoogleMap.renderScriptTag(),t}return _inherits(PointingDeviceMap,_react.Component),_createClass(PointingDeviceMap,null,[{key:"propTypes",get:function get(){return{latitude:_propTypes2.default.number.isRequired,longitude:_propTypes2.default.number.isRequired,title:_propTypes2.default.string,zoom:_propTypes2.default.number,lineId:_propTypes2.default.string.isRequired,startIndex:_propTypes2.default.number.isRequired,endIndex:_propTypes2.default.number.isRequired}}}]),_createClass(PointingDeviceMap,[{key:"onLoadMapFailed",value:function onLoadMapFailed(){this.setState({loadMapFailed:!0})}},{key:"setStateByContentWidth",value:function setStateByContentWidth(){if(this.contentDom){var e=this.contentDom.offsetWidth;this.setState({contentWidth:e,contentHeight:Math.floor(3*e/4)})}}},{key:"onWindowScroll",value:function onWindowScroll(e){Math.abs(window.scrollY-this.scrollY)>window.innerHeight/5&&this.hideModal()}},{key:"onClick",value:function onClick(e){e.preventDefault(),e.target.parentNode.blur(),this.setState({showModal:!0}),window.addEventListener("resize",this.setStateByContentWidth),this.scrollY=window.scrollY,window.addEventListener("scroll",this.onWindowScroll)}},{key:"hideModal",value:function hideModal(){this.setState({showModal:!1,showOverlayImage:!0,contentHeight:null}),window.removeEventListener("resize",this.setStateByContentWidth),window.removeEventListener("scroll",this.onWindowScroll)}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.setStateByContentWidth),window.removeEventListener("scroll",this.onWindowScroll)}},{key:"renderMap",value:function renderMap(e){var t=e.zoom,n=this.props,o=n.latitude,i=n.longitude,r=n.title,a=n.lineId,l=n.startIndex,s=n.endIndex;return _react2.default.createElement(_updatableMap2.default,{onLoad:this.onMapLoad,lineId:a,startIndex:l,endIndex:s,latitude:o,longitude:i,zoom:t,title:r})}},{key:"render",value:function render(){var e=this;if(this.state.loadMapFailed)return _react2.default.createElement(_errorLink2.default,this.props);var t=this.props,n=t.latitude,o=t.longitude,i=t.title,r=t.zoom,a=this.state,l=a.showModal,s=a.contentHeight,d={center:n+","+o,markers:i,zoom:r,_csrf:window._csrf},u=(0,_.getGoogleMapUrl)({latitude:n,longitude:o,title:i,zoom:r}),p="/api/google-map/static-map?"+_querystring2.default.stringify(d),c={};s&&(c.height=s+"px");return _react2.default.createElement("span",{className:"pointing-device-map"},_react2.default.createElement(_externalLink2.default,{className:"link",href:u},_react2.default.createElement("img",{onClick:this.onClick,src:p,onError:this.onLoadMapFailed,className:"google-map image"})),_react2.default.createElement(_reactBootstrap.Modal,{className:"full-content-modal pointing-device-modal",show:l,onHide:this.hideModal},_react2.default.createElement(_reactBootstrap.Modal.Body,{onClick:this.hideModal},_react2.default.createElement("div",{className:"full-content",style:c,ref:function setContentSize(t){e.contentDom=t,l&&!s&&e.setStateByContentWidth()}},l&&this.renderMap({zoom:r})))))}}]),PointingDeviceMap}();exports.default=PointingDeviceMap;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../external-link":281,"./":283,"./error-link":282,"./updatable-map":286,"prop-types":186,"querystring":197}],285:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),_modalImage=require("../modal-image"),_modalImage2=_interopRequireDefault(_modalImage),_=require("./"),_errorLink=require("./error-link"),_errorLink2=_interopRequireDefault(_errorLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TouchDeviceMap=function(e){function TouchDeviceMap(){_classCallCheck(this,TouchDeviceMap);var e=_possibleConstructorReturn(this,(TouchDeviceMap.__proto__||Object.getPrototypeOf(TouchDeviceMap)).call(this));return e.state={loadMapFailed:!1},e.onLoadMapFailed=e.onLoadMapFailed.bind(e),e}return _inherits(TouchDeviceMap,_react.Component),_createClass(TouchDeviceMap,null,[{key:"propTypes",get:function get(){return{latitude:_propTypes2.default.number.isRequired,longitude:_propTypes2.default.number.isRequired,zoom:_propTypes2.default.number,title:_propTypes2.default.string}}}]),_createClass(TouchDeviceMap,[{key:"onLoadMapFailed",value:function onLoadMapFailed(){this.setState({loadMapFailed:!0})}},{key:"render",value:function render(){if(this.state.loadMapFailed)return _react2.default.createElement(_errorLink2.default,this.props);var e=this.props,t=e.latitude,r=e.longitude,o=e.zoom,a=e.title,i=t+","+r,n=_querystring2.default.stringify({center:i,zoom:o,markers:a,_csrf:window._csrf}),u=(0,_.getGoogleMapUrl)({latitude:t,longitude:r,zoom:o,title:a});return _react2.default.createElement(_modalImage2.default,{className:"google-map image",src:"/api/google-map/static-map?"+n,externalLink:u,onError:this.onLoadMapFailed})}}]),TouchDeviceMap}();exports.default=TouchDeviceMap;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../modal-image":310,"./":283,"./error-link":282,"prop-types":186,"querystring":197}],286:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactDisplaySwitch=require("react-display-switch"),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_deepEqual=require("deep-equal"),_deepEqual2=_interopRequireDefault(_deepEqual),_googleMap=require("../../lib/transform-text/url/google-map"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var UpdatableMap=function(e){function UpdatableMap(e){_classCallCheck(this,UpdatableMap);var t=_possibleConstructorReturn(this,(UpdatableMap.__proto__||Object.getPrototypeOf(UpdatableMap)).call(this,e));(0,_lodash.bindAll)(t,"onLoad","onClick","addMarkers","addMapListener","getZoom","renderGuideGrid");var a=e.latitude,r=e.longitude,o=e.zoom;return t.state={latitude:a,longitude:r,zoom:o,showGuideGrid:!1},t.mapParent=null,t.map=null,t}return _inherits(UpdatableMap,_react.Component),_createClass(UpdatableMap,null,[{key:"propTypes",get:function get(){return{lineId:_propTypes2.default.string.isRequired,startIndex:_propTypes2.default.number.isRequired,endIndex:_propTypes2.default.number.isRequired,latitude:_propTypes2.default.number.isRequired,longitude:_propTypes2.default.number.isRequired,zoom:_propTypes2.default.number,title:_propTypes2.default.string}}}]),_createClass(UpdatableMap,[{key:"onLoad",value:function onLoad(e){var t=this.props.title;this.mapDiv=e,this.addMapListener(),t&&this.addMarkers()}},{key:"getZoom",value:function getZoom(){return this.state.zoom||15}},{key:"getLocation",value:function getLocation(){var e=this.state,t=e.latitude,a=e.longitude;return(0,_googleMap.normalizeLatitude)(""+t)+","+(0,_googleMap.normalizeLongitude)(""+a)+",Z"+this.getZoom()}},{key:"addMarkers",value:function addMarkers(){var e=this,t=window.google;if(t&&t.maps&&this.mapDiv){var a=this.props,r=a.latitude,o=a.longitude,n=a.title.split("|"),i=new t.maps.places.PlacesService(this.map),l=!0,s=!1,u=void 0;try{for(var d,p=n[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var c=d.value;i.nearbySearch({location:{lat:r,lng:o},radius:5e4,name:c},function(a,r){0!==a.length&&r===t.maps.places.PlacesServiceStatus.OK&&new t.maps.Marker({map:e.map,position:a[0].geometry.location})})}}catch(e){s=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(s)throw u}}}}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){return!(0,_deepEqual2.default)(this.props,e)||!(0,_deepEqual2.default)(this.state,t)}},{key:"addMapListener",value:function addMapListener(){var e=this,t=window.google;if(t&&t.maps&&this.mapDiv){var a=this.props,r=a.latitude,o=a.longitude,n=new t.maps.Map(this.mapDiv,{center:{lat:r,lng:o},zoom:this.getZoom(),fullscreenControl:!1});this.map=n,n.addListener("center_changed",function(){e.setState({latitude:n.getCenter().lat().toFixed(7),longitude:n.getCenter().lng().toFixed(7)})}),n.addListener("zoom_changed",function(){e.setState({zoom:n.getZoom()})})}}},{key:"onClick",value:function onClick(){var e=this.props.title,t=e?"["+this.getLocation()+" "+e+"]":"["+this.getLocation()+"]",a=this.props,r=a.lineId,o=a.startIndex,n=a.endIndex,i=_stores2.default.Line.lines.indexById(r);if(-1!==i){var l={start:{line:i,char:o},end:{line:i,char:n}};_stores2.default.Cursor.setPosition({line:l.start.line,char:l.start.char}),_stores2.default.Line.deleteRange(l),_stores2.default.Line.addChar(t),requestAnimationFrame(function(){_stores2.default.Cursor.clear(),_stores2.default.Cursor.hide()})}}},{key:"renderGuideGrid",value:function renderGuideGrid(){var e=this.mapParent;if(!e||!this.state.showGuideGrid)return null;var t=(e.offsetHeight-300)/2,a=(e.offsetWidth-400)/2,r=[];return[{left:0,top:0,width:"100%",height:t},{left:0,bottom:0,width:"100%",height:t},{left:0,top:t,width:a,height:300},{right:0,top:t,width:a,height:300}].forEach(function(e,t){r.push(_react2.default.createElement("div",{className:"guide",style:e,key:"layer-"+t}))}),r}},{key:"render",value:function render(){var e=this,t=function preventDefaultIfNotLink(e){e.target.closest("a")||(e.preventDefault(),e.stopPropagation())};return _react2.default.createElement("div",{className:"updatable-map",onClick:t,onDoubleClick:t,ref:function ref(t){e.mapParent=t}},_react2.default.createElement("div",{className:"updatable-map-content",ref:this.onLoad}),this.renderGuideGrid(),_react2.default.createElement(_reactDisplaySwitch.When,{project_member_user:!0},_react2.default.createElement(function UpdateLocationButton(){return"page"!==_stores2.default.Layout.get()?null:_react2.default.createElement("button",{className:"btn btn-primary update-location-button",onClick:_reactDisplaySwitch.When.project_member_user?e.onClick:null,onMouseEnter:function onMouseEnter(){e.setState({showGuideGrid:!0})},onMouseLeave:function onMouseLeave(){e.setState({showGuideGrid:!1})}},"[",e.getLocation(),"]")},null)))}}]),UpdatableMap}();exports.default=UpdatableMap;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/transform-text/url/google-map":491,"../../stores/":520,"deep-equal":105,"prop-types":186,"react-display-switch":208}],287:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_pageListStyles=require("../constants/page-list-styles");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var GridSizeRange=function(e){function GridSizeRange(e){_classCallCheck(this,GridSizeRange);var t=_possibleConstructorReturn(this,(GridSizeRange.__proto__||Object.getPrototypeOf(GridSizeRange)).call(this,e));return t.state={style:_stores2.default.PageListStyle.get()},t.subscribe(_stores2.default.PageListStyle),t.onChangeRange=t.onChangeRange.bind(t),t.updateListStyle=(0,_lodash.debounce)(t.updateListStyle,150,{leading:!0}),t}return _inherits(GridSizeRange,_baseComponent2.default),_createClass(GridSizeRange,[{key:"onStoreChange",value:function onStoreChange(){var e=_stores2.default.PageListStyle.style;this.setState({style:e})}},{key:"onChangeRange",value:function onChangeRange(e){var t=Object.values(_pageListStyles.PageListStyles)[e.target.value];this.updateListStyle(t)}},{key:"updateListStyle",value:function updateListStyle(e){_stores2.default.PageListStyle.setStyle(e)}},{key:"render",value:function render(){return _react2.default.createElement("input",{className:"grid-size-range hidden-xs",type:"range",onChange:this.onChangeRange,defaultValue:Object.values(_pageListStyles.PageListStyles).indexOf(this.state.style),step:"1",min:"0",max:Object.keys(_pageListStyles.PageListStyles).length-1})}}]),GridSizeRange}();exports.default=GridSizeRange;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../constants/page-list-styles":445,"../stores/":520,"./base-component":261}],288:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_projectName=require("../../../../share/validator/project-name"),_pageTitle=require("../../../../share/validator/page-title"),_pageTitle2=require("../../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Icon=function(e){function Icon(){return _classCallCheck(this,Icon),_possibleConstructorReturn(this,(Icon.__proto__||Object.getPrototypeOf(Icon)).apply(this,arguments))}return _inherits(Icon,_react.Component),_createClass(Icon,[{key:"render",value:function render(){var e=this,t=this.props,r=t.project,o=t.page,n=t.onError;if(r&&(0,_projectName.validateProjectName)(r).isInvalid||o&&(0,_pageTitle.validatePageTitle)(o).isInvalid)return _react2.default.createElement("span",null,this.props.content);var a=this.props.alt||o,i=Math.min(this.props.size,1e3)||1,s="/"+r+"/"+(0,_pageTitle2.encodeTitleURI)(o),l="/api/pages"+s+"/icon",p=(0,_lodash.range)(0,i).map(function(t){return _react2.default.createElement("img",{className:(0,_classnames2.default)((0,_lodash.uniq)(["icon",e.props.className])),key:t,alt:a,title:a,src:l,onError:function onError(e){return 0===t&&"function"==typeof n&&n(e)}})}),u=_react2.default.createElement(_reactBootstrap.Tooltip,{id:o},a);if(!this.props.hasLink)return p[0];var c=_stores2.default.CurrentProject.get().name!==r?"_blank":null;return _react2.default.createElement(_reactBootstrap.OverlayTrigger,{className:"user-icon",placement:"top",overlay:u},_react2.default.createElement("a",{className:"link icon",rel:"route",target:c,href:s},p))}}],[{key:"defaultProps",get:function get(){return{hasLink:!0}}},{key:"propTypes",get:function get(){return{project:_propTypes2.default.string.isRequired,page:_propTypes2.default.string.isRequired,size:_propTypes2.default.number,content:_propTypes2.default.string,hasLink:_propTypes2.default.bool,onError:_propTypes2.default.func,className:_propTypes2.default.string}}}]),Icon}();exports.default=Icon;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/page-title":589,"../../../../share/validator/page-title":622,"../../../../share/validator/project-name":623,"../../stores/":520,"classnames":93,"prop-types":186}],289:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_index=require("./index"),_index2=_interopRequireDefault(_index),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var UserIcon=function(e){function UserIcon(){_classCallCheck(this,UserIcon);var e=_possibleConstructorReturn(this,(UserIcon.__proto__||Object.getPrototypeOf(UserIcon)).call(this));return e.state={loadIconFailed:!1},e}return _inherits(UserIcon,_react.Component),_createClass(UserIcon,null,[{key:"defaultProps",get:function get(){return{hasLink:!0}}},{key:"propTypes",get:function get(){return{user:_propTypes2.default.object.isRequired,hasLink:_propTypes2.default.bool}}}]),_createClass(UserIcon,[{key:"renderDefaultPhoto",value:function renderDefaultPhoto(){var e=this.props.user,t=_react2.default.createElement(_reactBootstrap.Tooltip,{id:e.id},e.displayName||e.name||"??");return _react2.default.createElement(_reactBootstrap.OverlayTrigger,{className:"user-icon",placement:"top",overlay:t},_react2.default.createElement("img",{className:"profile",alt:e.displayName||e.name,src:e.photo}))}},{key:"renderIcon",value:function renderIcon(){var e=this;if(this.state.loadIconFailed)return null;var t=this.props.user,r=_stores2.default.CurrentProject.get();return t.name&&r.name?_react2.default.createElement(_index2.default,{project:r.name,page:t.name,alt:t.displayName||t.name,hasLink:this.props.hasLink,onError:function onError(){return e.setState({loadIconFailed:!0})}}):null}},{key:"render",value:function render(){return this.renderIcon()||this.renderDefaultPhoto()}}]),UserIcon}();exports.default=UserIcon;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"./index":288,"prop-types":186}],290:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],o=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var IframeVideoPlayer=function(e){function IframeVideoPlayer(e){_classCallCheck(this,IframeVideoPlayer);var t=_possibleConstructorReturn(this,(IframeVideoPlayer.__proto__||Object.getPrototypeOf(IframeVideoPlayer)).call(this,e));return t.state={show:"page"===_stores2.default.Layout.get()},t.subscribe(_stores2.default.Layout),t.onWindowResize=t.onWindowResize.bind(t),t}return _inherits(IframeVideoPlayer,_baseComponent2.default),_createClass(IframeVideoPlayer,null,[{key:"defaultProps",get:function get(){return{params:{}}}},{key:"propTypes",get:function get(){return{service:_propTypes2.default.string.isRequired,videoId:_propTypes2.default.string.isRequired,params:_propTypes2.default.object,children:_propTypes2.default.array}}}]),_createClass(IframeVideoPlayer,[{key:"onStoreChange",value:function onStoreChange(){this.setState({show:"page"===_stores2.default.Layout.get()})}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function onWindowResize(){if(this.playerDom){var e=this.playerDom.offsetWidth;if(!e)return setTimeout(this.onWindowResize,1e3);this.playerDom.style.height=9*e/16+"px"}}},{key:"render",value:function render(){var e=this,t=this.props.children,r={display:t?"none":"inline-block"};return _react2.default.createElement("div",{className:"iframe-video-player"},t&&_react2.default.createElement("span",{className:"link"},t),_react2.default.createElement("iframe",{ref:function ref(t){e.playerDom=t},style:r,src:this.state.show?this.src:"",type:"text/html",allowFullScreen:!0}))}},{key:"src",get:function get(){var e=this.props,t=e.videoId;switch(e.service){case"vimeo":return"https://player.vimeo.com/video/"+t;case"youtube":return"https://www.youtube.com/embed/"+t+"?"+Object.entries({autoplay:0,start:this.props.params.t||0}).map(function(e){var t=_slicedToArray(e,2);return t[0]+"="+t[1]}).join("&")}}}]),IframeVideoPlayer}();exports.default=IframeVideoPlayer;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./base-component":261,"prop-types":186}],291:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_page=require("page"),_page2=_interopRequireDefault(_page),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_logoutLink=require("./logout-link"),_logoutLink2=_interopRequireDefault(_logoutLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var o=t[r](a),l=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(l).then(function(e){step("next",e)},function(e){step("throw",e)});e(l)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var InvitationPage=function(e){function InvitationPage(e){_classCallCheck(this,InvitationPage);var t=_possibleConstructorReturn(this,(InvitationPage.__proto__||Object.getPrototypeOf(InvitationPage)).call(this,e));return t.state={error:null},(0,_lodash.bindAll)(t,["onClickJoin"]),t}return _inherits(InvitationPage,_react2.default.Component),_createClass(InvitationPage,[{key:"onClickJoin",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return e=_stores2.default.Invitation.get(),t.prev=1,t.next=4,_stores2.default.Invitation.join();case 4:return t.abrupt("return",(0,_page2.default)("/"+e.project.name+"/"));case 7:t.prev=7,t.t0=t.catch(1),t.t0.response&&t.t0.response.data?this.setState({error:t.t0.response.data.message}):this.setState({error:"Can’t connect to the servers. Please try again later."});case 10:case"end":return t.stop()}},_callee,this,[[1,7]])}));return function onClickJoin(){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=_stores2.default.Invitation.get().project.displayName,t=_stores2.default.CurrentUser.get(),n=t.displayName+" ("+t.email+")";return _react2.default.createElement("div",{className:"container"},_react2.default.createElement("div",{className:"row"},_react2.default.createElement("div",{className:"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},_react2.default.createElement("div",{className:"panel panel-default"},_react2.default.createElement("div",{className:"panel-body text-center"},_react2.default.createElement("h1",null,"Join ",e),this.state.error&&_react2.default.createElement("div",{className:"alert alert-danger"},this.state.error),_react2.default.createElement("p",null,"Hi ",n,"."),_react2.default.createElement("p",null,"Welcome to Scrapbox! You are invited to join the project ",e,"."),_react2.default.createElement("p",null,"Click the button below to enjoy the brand new experience of collaboration."),_react2.default.createElement("button",{className:"btn btn-lg btn-default",onClick:this.onClickJoin},"Join"),_react2.default.createElement("hr",null),_react2.default.createElement("p",null,"If you are not ",n,", please ",_react2.default.createElement(_logoutLink2.default,{redirect:location.pathname,role:"button"},"click here"),"."))))))}}]),InvitationPage}();exports.default=InvitationPage;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./logout-link":308,"page":169}],292:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_actionLink=require("./action-link"),_actionLink2=_interopRequireDefault(_actionLink),_lang=require("../lang/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var LangSwitch=function(e){function LangSwitch(){_classCallCheck(this,LangSwitch);var e=_possibleConstructorReturn(this,(LangSwitch.__proto__||Object.getPrototypeOf(LangSwitch)).call(this));return e.state={lang:(0,_lang.getLang)()},e}return _inherits(LangSwitch,_react.Component),_createClass(LangSwitch,null,[{key:"propTypes",get:function get(){return{onChange:_propTypes2.default.func.isRequired}}}]),_createClass(LangSwitch,[{key:"onChange",value:function onChange(e){this.setState({lang:e}),(0,_lang.setLang)(e),this.props.onChange()}},{key:"render",value:function render(){var e=this,t="en"===this.state.lang?"🇺🇸":"🇯🇵";return _react2.default.createElement("div",{className:"lang-switch dropdown"},_react2.default.createElement("button",{className:"dropdown-toggle btn btn-default btn-xs","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},_react2.default.createElement("span",{className:"emoji"},t)," ",_react2.default.createElement("span",{className:"caret"})),_react2.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},_react2.default.createElement("li",null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:function onClick(){return e.onChange("en")}},"🇺🇸 English")),_react2.default.createElement("li",null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:function onClick(){return e.onChange("ja")}},"🇯🇵 日本語"))))}}]),LangSwitch}();exports.default=LangSwitch;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../lang/":449,"./action-link":257,"prop-types":186}],293:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_browser=require("../lib/browser");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=function(e){return(0,_browser.isSafari)()?_react2.default.createElement("img",e):_react2.default.createElement(LazyLoadImg,e)};var LazyLoadImg=function(e){function LazyLoadImg(){_classCallCheck(this,LazyLoadImg);var e=_possibleConstructorReturn(this,(LazyLoadImg.__proto__||Object.getPrototypeOf(LazyLoadImg)).call(this));return e.checkScroll=e.checkScroll.bind(e),e.state={display:!1},e}return _inherits(LazyLoadImg,_react.Component),_createClass(LazyLoadImg,null,[{key:"propTypes",get:function get(){return{src:_propTypes2.default.string.isRequired}}}]),_createClass(LazyLoadImg,[{key:"checkScroll",value:function checkScroll(){var e=this;this.checkTimeout||(this.checkTimeout=setTimeout(function(){var t=(0,_jquery2.default)(e.refs.img),r=t&&t.offset();if(r){var o=r.top,n=(0,_jquery2.default)(window),a=n.scrollTop(),i=n.height(),l=o<a+2*i&&a-200-i<o;requestAnimationFrame(function(){return e.setState({display:l})}),e.checkTimeout=null}},100))}},{key:"componentDidMount",value:function componentDidMount(){var e=this;requestAnimationFrame(function(){e.checkScroll(),(0,_jquery2.default)(window).on("scroll",e.checkScroll),(0,_jquery2.default)(window).on("resize",e.checkScroll)})}},{key:"componentWillUnmount",value:function componentWillUnmount(){(0,_jquery2.default)(window).off("scroll",this.checkScroll),(0,_jquery2.default)(window).off("resize",this.checkScroll)}},{key:"render",value:function render(){if(!this.state.display)return _react2.default.createElement("div",{className:"lazy-load-img",ref:"img"});var e=(0,_lodash.cloneDeep)(this.props);return e.className=(0,_classnames2.default)("lazy-load-img",e.className),_react2.default.createElement("img",_extends({},e,{ref:"img"}))}}]),LazyLoadImg}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../lib/browser":457,"classnames":93,"prop-types":186}],294:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();exports.default=LazyRender;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function LazyRender(e){var t=e.children;t instanceof Array||(t=[t]);var n=null,r=!0,o=!1,a=void 0;try{for(var i,l=t.reverse()[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value,u=c.content,s=c.loading;u||(u=c),n=_react2.default.createElement(LazyRenderItem,{loading:s},u,n)}}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return n}var LazyRenderItem=function(e){function LazyRenderItem(){_classCallCheck(this,LazyRenderItem);var e=_possibleConstructorReturn(this,(LazyRenderItem.__proto__||Object.getPrototypeOf(LazyRenderItem)).call(this));return e.state={show:!1},(0,_lodash.bindAll)(e,"checkScroll"),e}return _inherits(LazyRenderItem,_react.Component),_createClass(LazyRenderItem,null,[{key:"propTypes",get:function get(){return{children:_propTypes2.default.any.isRequired,loading:_propTypes2.default.any}}}]),_createClass(LazyRenderItem,[{key:"checkScroll",value:function checkScroll(){var e=window.scrollY+1.1*window.innerHeight>this.dom.offsetTop;this.setState({show:e})}},{key:"componentDidMount",value:function componentDidMount(){this.checkInterval=setInterval(this.checkScroll,300),requestAnimationFrame(this.checkScroll)}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearInterval(this.checkInterval)}},{key:"render",value:function render(){var e=this,t=this.state.show,n=this.props,r=n.children,o=n.loading;return _react2.default.createElement("div",{className:"lazy-render",ref:function ref(t){e.dom=t}},t?r:o)}}]),LazyRenderItem}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"prop-types":186}],295:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_propsHasChanged=require("../../lib/props-has-changed/"),_propsHasChanged2=_interopRequireDefault(_propsHasChanged),_wikify=require("../wikify");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var BaseLine=function(e){function BaseLine(){_classCallCheck(this,BaseLine);var e=_possibleConstructorReturn(this,(BaseLine.__proto__||Object.getPrototypeOf(BaseLine)).call(this));return e.charIndex=0,e}return _inherits(BaseLine,_react.Component),_createClass(BaseLine,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){return!!(0,_propsHasChanged2.default)(e,this.props)||!!(0,_propsHasChanged2.default)(t,this.state)}}],[{key:"propTypes",get:function get(){return{text:_propTypes2.default.string.isRequired}}}]),_createClass(BaseLine,[{key:"setCharIndex",value:function setCharIndex(e){var t=(0,_wikify.setCharIndex)(e,this.charIndex),n=t.result,r=t.charIndex;return this.charIndex=r,n}},{key:"componentWillUpdate",value:function componentWillUpdate(){this.charIndex=0}}]),BaseLine}();exports.default=BaseLine;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/props-has-changed/":472,"../wikify":442,"prop-types":186}],296:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_line=require("../../../../share/line"),_baseline=require("./baseline"),_baseline2=_interopRequireDefault(_baseline);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CLI=function(e){function CLI(){return _classCallCheck(this,CLI),_possibleConstructorReturn(this,(CLI.__proto__||Object.getPrototypeOf(CLI)).apply(this,arguments))}return _inherits(CLI,_baseline2.default),_createClass(CLI,[{key:"render",value:function render(){var e=this.props,t=e.prefix,r=e.command,n=e.text.match(/^\s*/)[0].length,a=this.setCharIndex((0,_lodash.fill)(Array(n),_react2.default.createElement("span",{className:"pad"},"\t")));return _react2.default.createElement("span",{className:"text"},_react2.default.createElement("span",{className:"indent-mark",style:{width:(0,_line.getIndentWidth)(n)}},a,n>0&&_react2.default.createElement("span",{className:"dot"})),_react2.default.createElement("span",{className:"indent",style:{marginLeft:(0,_line.getIndentWidth)(n)}},_react2.default.createElement("code",{className:"cli"},_react2.default.createElement("span",{className:"prefix"},this.setCharIndex(t)),this.setCharIndex(" "),_react2.default.createElement("span",{className:"command"},this.setCharIndex(r)))))}}],[{key:"propTypes",get:function get(){return{text:_propTypes2.default.string.isRequired,prefix:_propTypes2.default.string.isRequired,command:_propTypes2.default.string.isRequired}}}]),CLI}();exports.default=CLI;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/line":587,"./baseline":295,"prop-types":186}],297:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_execCopy=require("exec-copy"),_execCopy2=_interopRequireDefault(_execCopy),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_popupMenu=require("../popup-menu"),_baseline=require("./baseline"),_baseline2=_interopRequireDefault(_baseline),_line=require("../../../../share/line"),_syntaxHighlight=require("../syntax-highlight"),_syntaxHighlight2=_interopRequireDefault(_syntaxHighlight),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_pageTitle=require("../../../../share/page-title"),_codeBlock=require("../../../../share/decorate-lines/code-block");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CodeBlock=function(e){function CodeBlock(e){_classCallCheck(this,CodeBlock);var t=_possibleConstructorReturn(this,(CodeBlock.__proto__||Object.getPrototypeOf(CodeBlock)).call(this,e));return t.state={visiblePopupMenu:!1},(0,_lodash.bindAll)(t,["showPopupMenu","hidePopupMenu","copyToClipboard"]),t}return _inherits(CodeBlock,_baseline2.default),_createClass(CodeBlock,[{key:"renderCodeBody",value:function renderCodeBody(){var e=this.props.text.slice(this.props.indent)||" ",t=this.props.lang;return _react2.default.createElement(_syntaxHighlight2.default,{code:e,lang:t,charIndex:this.charIndex})}},{key:"renderCodeStart",value:function renderCodeStart(){var e=this.props.filename,t=(0,_syntaxHighlight.getFullLanguage)(this.props.lang).displayName,r=this.props.isCursorLine?this.props.text.replace(/^\s+/,""):e||t||this.props.lang,o=_stores2.default.CurrentProject.get().name,n=_stores2.default.Line.lines.getTitle(),a=void 0;if(o&&n&&e){var s="/api/code/"+o+"/"+(0,_pageTitle.encodeTitleURI)(n)+"/"+encodeURIComponent(e);a=_react2.default.createElement("a",{href:s,target:"_blank",onMouseEnter:this.showPopupMenu},this.setCharIndex(r))}else a=_react2.default.createElement("span",{onMouseEnter:this.showPopupMenu},this.setCharIndex(r));return _react2.default.createElement("span",{className:"code-block-start",ref:"start",title:t},this.state.visiblePopupMenu&&_react2.default.createElement("span",{title:"",className:"code-block-popup",onMouseLeave:this.hidePopupMenu,onClick:this.hidePopupMenu},_react2.default.createElement(_popupMenu.PopupMenu,{target:this.refs.start},_react2.default.createElement(_popupMenu.Button,{key:"copy",onClick:this.copyToClipboard},"Copy"))),a)}},{key:"copyToClipboard",value:function copyToClipboard(){var e=void 0;e=this.props.filename?(0,_codeBlock.getCodeTextByFileName)(_stores2.default.Line.getAll(),this.props.filename)||[]:(0,_codeBlock.getCodeTextStartsFromLineId)(_stores2.default.Line.getAll(),this.props.lineId)||[];try{(0,_execCopy2.default)(e.join("\n"),function(e){})}catch(e){return console.error(e.stack||e)}}},{key:"showPopupMenu",value:function showPopupMenu(e){this.props.start&&this.setState({visiblePopupMenu:!0})}},{key:"hidePopupMenu",value:function hidePopupMenu(){this.setState({visiblePopupMenu:!1})}},{key:"render",value:function render(){var e=this.props.start,t=this.props.indent;e&&(t-=1);for(var r=[],o=0;o<t;o++){var n=(0,_classnames2.default)({pad:!0,"code-block-margin":e||o<t-1});r.push(_react2.default.createElement("span",{className:n},"\t"))}r=this.setCharIndex(r);var a=[_react2.default.createElement("span",{key:"indent-mark",className:"indent-mark",style:{width:(0,_line.getIndentWidth)(t)}},r,t>0&&e&&_react2.default.createElement("span",{className:"dot"})),_react2.default.createElement("span",{key:"indent",className:"indent",style:{marginLeft:(0,_line.getIndentWidth)(t)}},_react2.default.createElement("code",null,e?this.renderCodeStart():this.renderCodeBody()))],s=_react2.default.createElement("span",{className:"text code-block"},a);return this.props.start&&(s=_react2.default.createElement("span",{className:"text code-block",onMouseLeave:this.hidePopupMenu},a)),s}}],[{key:"propTypes",get:function get(){return{lang:_propTypes2.default.string.isRequired,filename:_propTypes2.default.string,text:_propTypes2.default.string.isRequired,indent:_propTypes2.default.number.isRequired,start:_propTypes2.default.bool.isRequired,end:_propTypes2.default.bool.isRequired,isCursorLine:_propTypes2.default.bool.isRequired,lineId:_propTypes2.default.string.isRequired}}}]),CodeBlock}();exports.default=CodeBlock;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/decorate-lines/code-block":568,"../../../../share/line":587,"../../../../share/page-title":589,"../../stores/":520,"../popup-menu":371,"../syntax-highlight":429,"./baseline":295,"classnames":93,"exec-copy":139,"prop-types":186}],298:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_propsHasChanged=require("../../lib/props-has-changed/"),_propsHasChanged2=_interopRequireDefault(_propsHasChanged),_wikify=require("../wikify"),_wikify2=_interopRequireDefault(_wikify),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_cli=require("./cli"),_cli2=_interopRequireDefault(_cli),_telomere=require("./telomere/"),_telomere2=_interopRequireDefault(_telomere),_codeBlock=require("./code-block"),_codeBlock2=_interopRequireDefault(_codeBlock);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Line=function(e){function Line(e){_classCallCheck(this,Line);var t=_possibleConstructorReturn(this,(Line.__proto__||Object.getPrototypeOf(Line)).call(this,e));return t.mounted=!1,t}return _inherits(Line,_react.Component),_createClass(Line,null,[{key:"propTypes",get:function get(){return{isCursorLine:_propTypes2.default.bool.isRequired,titleLine:_propTypes2.default.bool.isRequired,id:_propTypes2.default.string.isRequired,updated:_propTypes2.default.number.isRequired,unread:_propTypes2.default.bool.isRequired,permalinkLine:_propTypes2.default.bool.isRequired,cli:_propTypes2.default.object,codeBlock:_propTypes2.default.object,numberList:_propTypes2.default.object,formulaLine:_propTypes2.default.bool,section:_propTypes2.default.object,children:_propTypes2.default.string.isRequired}}}]),_createClass(Line,[{key:"componentDidMount",value:function componentDidMount(){this.mounted=!0}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){var r=_stores2.default.DisplayStyle.get("presentation")?null:"section";return!!(0,_propsHasChanged2.default)(e,this.props,{skip:r})}},{key:"renderText",value:function renderText(){var e=this.props,t=e.isCursorLine,r=e.children;if(this.props.codeBlock){var i=this.props.codeBlock,n=i.text,o=i.lang,s=i.filename,l=i.indent,p=i.start,a=i.end,u=this.props.id;return n=this.props.children.toString(),_react2.default.createElement(_codeBlock2.default,{text:n,lang:o,filename:s,indent:l,start:p,end:a,isCursorLine:t,lineId:u})}return this.props.cli?_react2.default.createElement(_cli2.default,{text:this.props.children.toString(),prefix:this.props.cli.prefix,command:this.props.cli.command}):this.props.titleLine?_react2.default.createElement("span",{className:"text"},(0,_wikify.setCharIndex)(r.toString()||[" "]).result):_react2.default.createElement("span",{className:"text"},_react2.default.createElement(_wikify2.default,{isCursorLine:t,lineId:this.props.id},r.toString()))}},{key:"render",value:function render(){var e={},t=["line","section-"+this.props.section.number],r=this.props,i=r.unread,n=r.updated,o=r.id,s=r.permalinkLine;if(this.props.isCursorLine&&(t.push("cursor-line"),this.mounted)){var l=this.refs.line;l&&(e.minHeight=(0,_jquery2.default)(l).outerHeight(),(0,_jquery2.default)(l).find(".image, img, iframe, video").length>0&&t.push("with-image"))}return this.props.titleLine&&t.push("line-title"),this.props.section.start&&t.push("section-title"),this.props.numberList&&t.push("number-list"),this.props.formulaLine&&t.push("formula-line"),this.props.permalinkLine&&t.push("permalink"),_react2.default.createElement("div",{ref:"line",className:(0,_classnames2.default)(t),id:"L"+o,style:e},_react2.default.createElement(_telomere2.default,{unread:i,updated:n,id:o,permalink:s}),this.renderText())}}]),Line}();exports.default=Line;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/props-has-changed/":472,"../../stores/":520,"../wikify":442,"./cli":296,"./code-block":297,"./telomere/":300,"classnames":93,"prop-types":186}],299:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_=require("./"),_dateLabel=require("../../date-label"),_dateLabel2=_interopRequireDefault(_dateLabel),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function disableCallback(e){e.stopPropagation(),e.preventDefault()}var DesktopTelomere=function(e){function DesktopTelomere(e){_classCallCheck(this,DesktopTelomere);var t=_possibleConstructorReturn(this,(DesktopTelomere.__proto__||Object.getPrototypeOf(DesktopTelomere)).call(this,e));return t.state={showDescription:!1},(0,_lodash.bindAll)(t,"onClick","onMouseEnter","onMouseLeave"),t}return _inherits(DesktopTelomere,_react.Component),_createClass(DesktopTelomere,[{key:"onClick",value:function onClick(e){e.preventDefault(),_stores2.default.LinePermalink.set(this.props.id,{source:"UI"})}},{key:"onMouseEnter",value:function onMouseEnter(){this.setState({showDescription:!0})}},{key:"onMouseLeave",value:function onMouseLeave(){this.setState({showDescription:!1})}},{key:"render",value:function render(){var e=this.props,t=e.unread,o=e.updated,r=e.id,n=this.state.showDescription,a=(0,_classnames2.default)("telomere-border",{unread:t}),s={borderWidth:"0 0 0 "+(0,_.calcTelomereWidth)(o),width:n&&"auto"};return _react2.default.createElement("div",{className:"telomere desktop-telomere"},_react2.default.createElement("a",{href:"#"+r,style:s,className:a,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:disableCallback,onMouseUp:disableCallback},_react2.default.createElement(function Description(){return n?_react2.default.createElement("div",{className:"description"},_react2.default.createElement(_dateLabel2.default,{unixtime:o})," (updated)"):null},null)))}}],[{key:"propTypes",get:function get(){return{unread:_propTypes2.default.bool.isRequired,updated:_propTypes2.default.number.isRequired,permalink:_propTypes2.default.bool.isRequired,id:_propTypes2.default.string.isRequired}}}]),DesktopTelomere}();exports.default=DesktopTelomere;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"../../date-label":275,"./":300,"classnames":93,"prop-types":186}],300:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Telomere,exports.calcTelomereWidth=calcTelomereWidth;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_desktop=require("./desktop"),_desktop2=_interopRequireDefault(_desktop),_mobile=require("./mobile/"),_mobile2=_interopRequireDefault(_mobile);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Telomere(e){return _reactDisplaySwitch.When.case("touch_device")?_react2.default.createElement(_mobile2.default,e):_react2.default.createElement(_desktop2.default,e)}function calcTelomereWidth(e){var t=(Math.round(Date.now()/1e3)-e)/3600;("number"!=typeof t||t<0)&&(t=0);var r=10-Math.floor(2.3*Math.log10(t+2));return r>=1?r+"px":"1px"}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./desktop":299,"./mobile/":301,"react-display-switch":208}],301:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_reactDisplaySwitch=require("react-display-switch"),_=require("../"),_mobileOutlineEditButton=require("../../../mobile-outline-edit-button"),_dateLabel=require("../../../date-label"),_dateLabel2=_interopRequireDefault(_dateLabel),_stores=require("../../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MobileTelomere=function(e){function MobileTelomere(e){_classCallCheck(this,MobileTelomere);var t=_possibleConstructorReturn(this,(MobileTelomere.__proto__||Object.getPrototypeOf(MobileTelomere)).call(this,e));return(0,_lodash.bindAll)(t,"onClick"),t}return _inherits(MobileTelomere,_react.Component),_createClass(MobileTelomere,[{key:"onClick",value:function onClick(e){e.preventDefault(),_stores2.default.MobileOutlineEdit.reset(),_stores2.default.LinePermalink.set(this.props.id,{source:"UI"})}},{key:"getLineIndex",value:function getLineIndex(){return _stores2.default.Line.lines.indexById(this.props.id)}},{key:"moveLinesVertical",value:function moveLinesVertical(e){_stores2.default.Cursor.setPosition({line:this.getLineIndex(),char:0}),_stores2.default.Line.moveLinesVertical(e)}},{key:"render",value:function render(){var e=this,t=this.props,r=t.unread,n=t.updated,o=t.permalink,i=(0,_classnames2.default)("telomere-border",{unread:r}),l={borderWidth:"0 0 0 "+(0,_.calcTelomereWidth)(n),width:o&&"auto"};return _react2.default.createElement("div",{className:"telomere mobile-telomere"},_react2.default.createElement(function MoveLineUp(){if(!_reactDisplaySwitch.When.case("project_member_user"))return null;if(!o||"UI"!==_stores2.default.LinePermalink.source||0===e.getLineIndex())return null;return _react2.default.createElement(_mobileOutlineEditButton.MoveUpButton,{onTouchEnd:function onTouchEnd(){e.moveLinesVertical(-1)}})},null),_react2.default.createElement("div",{style:l,className:i,onClick:this.onClick},_react2.default.createElement(function Description(){return o&&"UI"===_stores2.default.LinePermalink.source?_stores2.default.Cursor.visiblePopupMenu||_stores2.default.MobileOutlineEdit.movingVertical?null:_react2.default.createElement("div",{className:"description"},_react2.default.createElement(_dateLabel2.default,{unixtime:n})," (updated)"):null},null)),_react2.default.createElement(function MoveLineDown(){if(!_reactDisplaySwitch.When.case("project_member_user"))return null;if(!o||"UI"!==_stores2.default.LinePermalink.source||e.getLineIndex()===_stores2.default.Line.lines.length-1)return null;return _react2.default.createElement(_mobileOutlineEditButton.MoveDownButton,{onTouchEnd:function onTouchEnd(){e.moveLinesVertical(1)}})},null))}}],[{key:"propTypes",get:function get(){return{unread:_propTypes2.default.bool.isRequired,updated:_propTypes2.default.number.isRequired,permalink:_propTypes2.default.bool.isRequired,id:_propTypes2.default.string.isRequired}}}]),MobileTelomere}();exports.default=MobileTelomere;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../":300,"../../../../stores/":520,"../../../date-label":275,"../../../mobile-outline-edit-button":309,"classnames":93,"prop-types":186,"react-display-switch":208}],302:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_delay=require("../../../../share/delay"),_browser=require("../../lib/browser"),_computeLine=require("../../lib/compute-line"),_modal=require("../../lib/modal"),_ime=require("../../constants/ime");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var i=t[o](r),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function isRightClick(e){return 2===e.button||e.ctrlKey||e.altKey||e.metaKey}function compareCursorPosition(e,t){var n=1e4*e.line+e.char-(1e4*t.line+t.char);return n>0?1:n<0?-1:0}var BasePointerEvent=function(e){function BasePointerEvent(e){_classCallCheck(this,BasePointerEvent);var t=_possibleConstructorReturn(this,(BasePointerEvent.__proto__||Object.getPrototypeOf(BasePointerEvent)).call(this,e));return t.state={focused:!1},(0,_lodash.bindAll)(t,"onMouseDown","onMouseUp"),t}return _inherits(BasePointerEvent,_react.Component),_createClass(BasePointerEvent,[{key:"getLines",value:function getLines(){return this.baseLines}},{key:"getCursorPoint",value:function getCursorPoint(e){var t=(0,_jquery2.default)(this.getLines().lines()).offset(),n=e.pageX||e.originalEvent.changedTouches[0].pageX,o=e.pageY||e.originalEvent.changedTouches[0].pageY;return{x:n-t.left,y:o-t.top}}},{key:"nearestCursorPosition",value:function nearestCursorPosition(e){return(0,_computeLine.getCharIndexFromPoint)(this.getCursorPoint(e))}},{key:"focusAndSelectAll",value:function focusAndSelectAll(e){var t=this;null==e&&(e=3);var n=document.getElementById("text-input");if(n.select(),n.selectionStart=0,n.selectionEnd=n.value.length,n.focus(),e>1)return setTimeout(function(){return t.focusAndSelectAll(e-1)},250)}},{key:"componentDidMount",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_delay.delay)(300);case 2:document.getElementById("text-input").addEventListener("mousedown",this.onMouseDown);case 4:case"end":return e.stop()}},_callee,this)}));return function componentDidMount(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){return regeneratorRuntime.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:_stores2.default.LineDOM.update(),document.addEventListener("mouseup",this.onMouseUp,{once:!0});case 2:case"end":return e.stop()}},_callee2,this)}));return function componentDidUpdate(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("text-input").removeEventListener("mousedown",this.onMouseDown);case 2:case"end":return e.stop()}},_callee3,this)}));return function componentWillUnmount(){return e.apply(this,arguments)}}()},{key:"onMouseDown",value:function onMouseDown(e){if(!(0,_modal.isModalOpen)()&&(_stores2.default.LinePermalink.clear(),!this.skipMouseDown(e))){var t=_stores2.default.Cursor.getPosition(),n=_stores2.default.Cursor.getVisible(),o=this.nearestCursorPosition(e);if(_stores2.default.Cursor.show(),setTimeout(function(){return _stores2.default.Cursor.setPosition(o,{source:"mouse"})},_ime.IE_COMPOSITION_DELAY),e.preventDefault(),e.stopPropagation(),!isRightClick(e)){if(e.shiftKey&&n){var r=_stores2.default.Selection.normalizeOrder(_stores2.default.Selection.getRange());_stores2.default.Selection.hasSelection(r)?compareCursorPosition(o,r.start)<0&&(r.start=r.end):r.start=t,r.end=o,_stores2.default.Selection.setRange(r)}else{var i={start:o,end:o};_stores2.default.Selection.setRange(i)}this.setState({focused:!0})}}}},{key:"onMouseUp",value:function onMouseUp(e){(0,_modal.isModalOpen)()||this.state.focused&&(document.removeEventListener("mouseup",this.onMouseUp),this.setState({focused:!1}),((0,_browser.isNotTouchDevice)()||_stores2.default.CurrentUser.isProjectMember)&&this.focusAndSelectAll(),e.preventDefault(),e.stopPropagation())}},{key:"skipMouseDown",value:function skipMouseDown(e){return"A"===e.target.tagName||("SPAN"===e.target.tagName&&"A"===e.target.parentNode.tagName||("IMG"===e.target.tagName&&"A"===e.target.parentNode.tagName||("IMG"===e.target.tagName&&"modal-image"===e.target.parentNode.className||(!("IMG"!==e.target.tagName||!isRightClick(e))||"VIDEO"===e.target.tagName))))}},{key:"render",value:function render(){var e=this;return React.createElement("div",{ref:function ref(t){e.baseLines=t}},this.props.children)}}]),BasePointerEvent}();exports.default=BasePointerEvent;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/delay":576,"../../constants/ime":443,"../../lib/browser":457,"../../lib/compute-line":459,"../../lib/modal":469,"../../stores/":520}],303:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_get=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0},_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_basePointerEvent=require("./base-pointer-event"),_basePointerEvent2=_interopRequireDefault(_basePointerEvent),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_lines=require("../lines/"),_lines2=_interopRequireDefault(_lines),_wordSeperator=require("../../lib/word-seperator");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var i=t[o](r),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DesktopPointerEvent=function(e){function DesktopPointerEvent(e){_classCallCheck(this,DesktopPointerEvent);var t=_possibleConstructorReturn(this,(DesktopPointerEvent.__proto__||Object.getPrototypeOf(DesktopPointerEvent)).call(this,e));return(0,_lodash.bindAll)(t,"onClick","onDoubleClick","onTrippleClick","onMouseMove"),t}return _inherits(DesktopPointerEvent,_basePointerEvent2.default),_createClass(DesktopPointerEvent,[{key:"getLines",value:function getLines(){return this.desktopLines}},{key:"componentDidMount",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_get(DesktopPointerEvent.prototype.__proto__||Object.getPrototypeOf(DesktopPointerEvent.prototype),"componentDidMount",this).call(this);case 2:(e=document.getElementById("text-input")).addEventListener("click",this.onClick),e.addEventListener("dblclick",this.onDoubleClick);case 5:case"end":return t.stop()}},_callee,this)}));return function componentDidMount(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_get(DesktopPointerEvent.prototype.__proto__||Object.getPrototypeOf(DesktopPointerEvent.prototype),"componentDidUpdate",this).call(this,e,t);case 2:document.addEventListener("mousemove",this.onMouseMove,{once:!0});case 3:case"end":return n.stop()}},_callee2,this)}));return function componentDidUpdate(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e;return regeneratorRuntime.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_get(DesktopPointerEvent.prototype.__proto__||Object.getPrototypeOf(DesktopPointerEvent.prototype),"componentWillUnmount",this).call(this);case 2:(e=document.getElementById("text-input"))&&(e.removeEventListener("click",this.onClick),e.removeEventListener("dblclick",this.onDoubleClick));case 4:case"end":return t.stop()}},_callee3,this)}));return function componentWillUnmount(){return e.apply(this,arguments)}}()},{key:"onMouseMove",value:function onMouseMove(e){if(document.removeEventListener("mousemove",this.onMouseMove),this.state.focused){var t=this.nearestCursorPosition(e),n=_stores2.default.Selection.getRange();n.end=t,_stores2.default.Selection.setRange(n),_stores2.default.Cursor.setPosition(t,{source:"mouse"}),e.preventDefault(),e.stopPropagation()}}},{key:"onClick",value:function onClick(e){e.detail>=3&&this.onTrippleClick(e)}},{key:"onDoubleClick",value:function onDoubleClick(e){var t=_stores2.default.Cursor.getPosition(),n=(0,_wordSeperator.wordPosition)(this.getLines().props.lines[t.line].text,t.char),o={start:{line:t.line,char:n[0]},end:{line:t.line,char:n[1]}};_stores2.default.Selection.setRange(o),_stores2.default.Cursor.setPosition(o.end,{source:"mouse"})}},{key:"onTrippleClick",value:function onTrippleClick(e){var t=_stores2.default.Cursor.getPosition(),n={start:{line:t.line,char:0},end:{line:t.line,char:this.getLines().props.lines[t.line].text.length}};_stores2.default.Selection.setRange(n),_stores2.default.Cursor.setPosition(n.end,{source:"mouse"})}},{key:"render",value:function render(){var e=this,t=this.props.children;return _react2.default.createElement("div",{onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onClick:this.onClick,onDoubleClick:this.onDoubleClick},_react2.default.createElement(_lines2.default,_extends({ref:function ref(t){e.desktopLines=t}},t.props)))}}]),DesktopPointerEvent}();exports.default=DesktopPointerEvent;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/word-seperator":496,"../../stores/":520,"../lines/":304,"./base-pointer-event":302}],304:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_propsHasChanged=require("../../lib/props-has-changed"),_propsHasChanged2=_interopRequireDefault(_propsHasChanged),_line2=require("../line/"),_line3=_interopRequireDefault(_line2),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_decorateLines=require("../../../../share/decorate-lines"),_decorateLines2=_interopRequireDefault(_decorateLines),_line4=require("../../../../share/line"),_tableBlock=require("../table-block/"),_tableBlock2=_interopRequireDefault(_tableBlock);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var Lines=function(e){function Lines(){return _classCallCheck(this,Lines),_possibleConstructorReturn(this,(Lines.__proto__||Object.getPrototypeOf(Lines)).apply(this,arguments))}return _inherits(Lines,_react.Component),_createClass(Lines,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,r){if((0,_propsHasChanged2.default)(e,this.props,{skip:["cursorPosition","lines"]}))return!0;if(this.props.cursorPosition&&e.cursorPosition&&this.props.cursorPosition.line!==e.cursorPosition.line)return!0;if(this.props.lines.length!==e.lines.length)return!0;for(var t=0;t<this.props.lines.length;t++){var i=this.props.lines[t],n=e.lines[t];if(i.id!==n.id)return!0;if(i.text!==n.text)return!0}return!1}},{key:"lines",value:function lines(){return this.refs.lines}},{key:"render",value:function render(){for(var e=(0,_decorateLines2.default)(this.props.lines),r=e[this.props.cursorPosition.line]&&e[this.props.cursorPosition.line].id,t=[],i=0;i<e.length;i++){var n=e[i],o=(n.codeBlock||!(0,_line4.isEmptyLine)(n))&&(!_stores2.default.Page.lastAccessed||n.updated>_stores2.default.Page.lastAccessed);if(n.tableBlock){for(var s=[];i<e.length;i++){var l=e[i];if(s.push(l),l.tableBlock.end)break}t.push(_react2.default.createElement(_tableBlock2.default,{key:s[0].id,cursorLineId:this.props.cursorVisible?r:null,lines:s}))}else{var a=this.props.cursorVisible&&r===n.id,u=this.props.permalinkLine===n.id;t.push(_react2.default.createElement(_line3.default,{key:n.id,id:n.id,updated:n.updated,unread:o,isCursorLine:a,titleLine:0===i,permalinkLine:u,cli:n.cli,codeBlock:n.codeBlock,tableBlock:n.tableBlock,numberList:n.numberList,formulaLine:n.formulaLine,section:n.section},n.text))}}return _react2.default.createElement("div",{className:"lines",ref:"lines"},t)}}],[{key:"propTypes",get:function get(){return{lines:_propTypes2.default.array.isRequired,cursorPosition:_propTypes2.default.object.isRequired,cursorVisible:_propTypes2.default.bool.isRequired,permalinkLine:_propTypes2.default.string}}}]),Lines}();exports.default=Lines;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/decorate-lines":571,"../../../../share/line":587,"../../lib/props-has-changed":472,"../../stores/":520,"../line/":298,"../table-block/":430,"prop-types":186}],305:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_createClass=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),_get=function get(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:get(n,t,o)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(o):void 0},_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_deepEqual=require("deep-equal"),_deepEqual2=_interopRequireDefault(_deepEqual),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_basePointerEvent=require("./base-pointer-event"),_basePointerEvent2=_interopRequireDefault(_basePointerEvent),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_lines=require("../lines/"),_lines2=_interopRequireDefault(_lines),_touchLayer=require("./touch-layer"),_touchLayer2=_interopRequireDefault(_touchLayer),_browser=require("../../lib/browser"),_modal=require("../../lib/modal");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,o){return function step(r,n){try{var i=t[r](n),u=i.value}catch(e){return void o(e)}if(!i.done)return Promise.resolve(u).then(function(e){step("next",e)},function(e){step("throw",e)});e(u)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MAX_EPS_SWIPE_PAGE_X=18,MIN_EPS_SWIPE_PAGE_X=6,TIMER_EPS=400,MobilePointerEvent=function(e){function MobilePointerEvent(e){_classCallCheck(this,MobilePointerEvent);var t=_possibleConstructorReturn(this,(MobilePointerEvent.__proto__||Object.getPrototypeOf(MobilePointerEvent)).call(this,e));return t.scrolling=!1,t.moving=!1,t.resetSwipeCursor(),t.touchLayerTouchTimer=null,(0,_lodash.bindAll)(t,"onTouchStart","onTouchStartTouchLayer","onTouchMove","onTouchEnd","onTouchMoveLines","onClick"),t}return _inherits(MobilePointerEvent,_basePointerEvent2.default),_createClass(MobilePointerEvent,[{key:"resetSwipeCursor",value:function resetSwipeCursor(e){this.startPageX=e?this.getPageX(e):0,this.cursorStartedAtTerminal=_stores2.default.Cursor.isAtLineHead()||_stores2.default.Cursor.isAtLineTail(),this.cursorStartedPositionChar=_stores2.default.Cursor.getPosition().char}},{key:"getEpsSwipePageX",value:function getEpsSwipePageX(e){var t=e.char;return Math.abs(t-this.cursorStartedPositionChar)>4?MIN_EPS_SWIPE_PAGE_X:MAX_EPS_SWIPE_PAGE_X}},{key:"getLines",value:function getLines(){return this.mobileLines}},{key:"getPageX",value:function getPageX(e){return e.pageX||e.originalEvent.changedTouches[0].pageX}},{key:"componentDidMount",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t=this;return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,_get(MobilePointerEvent.prototype.__proto__||Object.getPrototypeOf(MobilePointerEvent.prototype),"componentDidMount",this).call(this);case 2:e=(0,_jquery2.default)("#app-container"),(0,_jquery2.default)(window).on("scroll",function(){t.scrolling=!0,_stores2.default.MobileSelection.clearTouchTimer()}),e.on("touchstart",".lines, .cursor, #text-input",this.onTouchStart),e.on("touchstart","#touch-layer",this.onTouchStartTouchLayer),e.on("touchmove","#touch-layer",this.onTouchMove),e.on("touchend",".lines, #text-input, #touch-layer",this.onTouchEnd),e.on("touchmove",".lines",this.onTouchMoveLines);case 9:case"end":return o.stop()}},_callee,this)}));return function componentDidMount(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e;return regeneratorRuntime.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_get(MobilePointerEvent.prototype.__proto__||Object.getPrototypeOf(MobilePointerEvent.prototype),"componentWillUnmount",this).call(this);case 2:e=(0,_jquery2.default)("#app-container"),(0,_jquery2.default)(window).off("scroll"),e.off("touchstart",".lines, .cursor, #text-input"),e.off("touchmove",".lines, #touch-layer"),e.off("touchend",".lines, #text-input, #touch-layer"),this.clearTouchTimer(this.touchLayerTouchTimer);case 8:case"end":return t.stop()}},_callee2,this)}));return function componentWillUnmount(){return e.apply(this,arguments)}}()},{key:"onTouchStart",value:function onTouchStart(e){(0,_modal.isModalOpen)()||(this.scrolling=!1,this.resetSwipeCursor(e),"text-input"===e.target.id&&_stores2.default.Selection.hasSelection()||(_stores2.default.MobileSelection.userIconNums>0&&_stores2.default.Cursor.hidePopupMenu(),this.showPopupMenu(e)))}},{key:"onTouchMove",value:function onTouchMove(e){if(e.preventDefault(),e.stopPropagation(),_stores2.default.Selection.hasSelection()){this._touchMoveMode(!0);var t=this.nearestCursorPosition(e);_stores2.default.MobileSelection.setStartPosition(t),_stores2.default.MobileSelection.moveSelection(t)}}},{key:"onTouchMoveLines",value:function onTouchMoveLines(e){if(_stores2.default.MobileSelection.clearTouchTimer(),!this.scrolling&&!_stores2.default.MobileOutlineEdit.movingVertical){var t=this.getPageX(e),o=t-this.startPageX,r=this.getEpsSwipePageX(_stores2.default.Cursor.getPosition());o>r?(!this.cursorStartedAtTerminal&&_stores2.default.Cursor.isAtLineTail()||(_stores2.default.SuggestPopup.hide(),_stores2.default.Cursor.goRight({scrollInView:!1})),this.startPageX=t):o<-r&&(!this.cursorStartedAtTerminal&&_stores2.default.Cursor.isAtLineHead()||(_stores2.default.SuggestPopup.hide(),_stores2.default.Cursor.goLeft({scrollInView:!1})),this.startPageX=t)}}},{key:"onTouchEnd",value:function onTouchEnd(){(0,_modal.isModalOpen)()||(this._touchMoveMode(!1),this.resetSwipeCursor(),_stores2.default.MobileOutlineEdit.movingVertical&&this.scrolling||(_stores2.default.MobileOutlineEdit.reset(),_stores2.default.MobileSelection.clearSelectionIfNotMoved(),_stores2.default.MobileSelection.pauseSelection(),this.clearTouchTimer(this.touchLayerTouchTimer)))}},{key:"onTouchStartTouchLayer",value:function onTouchStartTouchLayer(e){var t=this;this.touchLayerTouchTimer=setTimeout(function(){t.moving||(e.preventDefault(),e.stopPropagation(),_stores2.default.MobileSelection.clearSelection(),t.showPopupMenu(e))},TIMER_EPS)}},{key:"onClick",value:function onClick(e){(0,_modal.isModalOpen)()||(this.closePopupMenu(),!(0,_browser.isiOS)()||_stores2.default.Cursor.visibleScreenKeyboard||_stores2.default.Selection.hasSelection()||((0,_jquery2.default)(window).scrollTop(this.getCursorPoint(e).y-window.innerHeight/6),_stores2.default.Cursor.visibleScreenKeyboard=!0))}},{key:"showPopupMenu",value:function showPopupMenu(e){var t=this.nearestCursorPosition(e);_stores2.default.MobileSelection.showPopupMenu({event:e,cursorPosition:t})}},{key:"closePopupMenu",value:function closePopupMenu(){(0,_browser.isiOS)()&&_stores2.default.MobileSelection.longTouched?_stores2.default.MobileSelection.longTouched=!1:_stores2.default.Cursor.visiblePopupMenu&&_stores2.default.Cursor.hidePopupMenu()}},{key:"clearTouchTimer",value:function clearTouchTimer(e){e&&clearTimeout(e)}},{key:"_touchMoveMode",value:function _touchMoveMode(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.moving=e,(0,_browser.isiOS)()&&(e?(0,_jquery2.default)(window).on("touchmove.noScroll",function(e){return e.preventDefault()}):(0,_jquery2.default)(window).off(".noScroll"))}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){var o=e.children.props.lines;return!_stores2.default.Selection.hasSelection()||!(0,_deepEqual2.default)(o,this.getLines().props.lines)}},{key:"render",value:function render(){var e=this,t=this.props.children;return _react2.default.createElement("div",{onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onClick:this.onClick},_react2.default.createElement(_lines2.default,_extends({ref:function ref(t){e.mobileLines=t}},t.props)),_react2.default.createElement(_touchLayer2.default,null))}}]),MobilePointerEvent}();exports.default=MobilePointerEvent;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/browser":457,"../../lib/modal":469,"../../stores/":520,"../lines/":304,"./base-pointer-event":302,"./touch-layer":306,"deep-equal":105}],306:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TouchLayer=function(e){function TouchLayer(){_classCallCheck(this,TouchLayer);var e=_possibleConstructorReturn(this,(TouchLayer.__proto__||Object.getPrototypeOf(TouchLayer)).call(this));return e.state={show:!1},e.subscribe(_stores2.default.Selection,_stores2.default.MobileOutlineEdit),e}return _inherits(TouchLayer,_baseComponent2.default),_createClass(TouchLayer,[{key:"onStoreChange",value:function onStoreChange(e){e.store;var t=_stores2.default.Selection.hasSelection()&&!_stores2.default.MobileOutlineEdit.movingVertical;this.setState({show:t})}},{key:"render",value:function render(){return this.state.show?_react2.default.createElement("div",{id:"touch-layer",className:"touch-layer"}):null}}]),TouchLayer}();exports.default=TouchLayer;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../base-component":261}],307:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var LoadingBar=function(e){function LoadingBar(){_classCallCheck(this,LoadingBar);var e=_possibleConstructorReturn(this,(LoadingBar.__proto__||Object.getPrototypeOf(LoadingBar)).call(this));return e.state={progress:0},e.subscribe(_stores2.default.APILoading),e}return _inherits(LoadingBar,_baseComponent2.default),_createClass(LoadingBar,[{key:"onStoreChange",value:function onStoreChange(e){var t=this,r=(e.store,e.event),o=this.state.progress;if(0===_stores2.default.APILoading.requestsCount)switch(r){case"response":return this.setState({progress:100}),void setTimeout(function(){t.setState({progress:0})},500);case"error":return void this.setState({progress:0})}0===o&&(o=40),o+=5,this.setState({progress:o})}},{key:"render",value:function render(){var e={width:Math.min(100,this.state.progress)+"%"};return _react2.default.createElement("div",{className:"loading-bar"},_react2.default.createElement("div",{className:"progress",style:e}))}}]),LoadingBar}();exports.default=LoadingBar;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./base-component":261}],308:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logout=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},logout=exports.logout=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,_apiClient.apiClient.post("/logout");case 3:location.href=e||"/",n.next=11;break;case 6:if(n.prev=6,n.t0=n.catch(0),"function"!=typeof t){n.next=10;break}return n.abrupt("return",t());case 10:alert("logout failed");case 11:case"end":return n.stop()}},_callee,this,[[0,6]])}));return function logout(t,n){return e.apply(this,arguments)}}();exports.default=LogoutLink;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_actionLink=require("./action-link"),_actionLink2=_interopRequireDefault(_actionLink),_apiClient=require("../lib/api-client/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}function LogoutLink(e){var t=e,n=t.redirect,r=t.onError;return e=(0,_lodash.omit)(e,["redirect","onError"]),_react2.default.createElement(_actionLink2.default,_extends({onClick:function onClick(e){return logout(n,r)}},e))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../lib/api-client/":452,"./action-link":257}],309:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MoveUpButton=MoveUpButton,exports.MoveDownButton=MoveDownButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var getButtonStyle=function getButtonStyle(e,t){var n={};return void 0!==e&&(n.left=e),void 0!==t&&(n.top=t),n};function MoveUpButton(e){var t=e.onTouchEnd,n=e.x,o=e.y,u=getButtonStyle(n,o),l=function _onTouchEnd(e){e.preventDefault(),e.stopPropagation(),t()};return _react2.default.createElement("div",{className:"move-line line-up",style:u,onTouchEnd:function onTouchEnd(e){l(e)}},_react2.default.createElement("svg",{width:"16",height:"8",style:{verticalAlign:"bottom"}},_react2.default.createElement("path",{d:"M0 8 L16 8 L8 0 Z",fill:"#8f9899"})))}function MoveDownButton(e){var t=e.onTouchEnd,n=e.x,o=e.y,u=getButtonStyle(n,o),l=function _onTouchEnd(e){e.preventDefault(),e.stopPropagation(),t()};return _react2.default.createElement("div",{className:"move-line line-down",style:u,onTouchEnd:function onTouchEnd(e){l(e)}},_react2.default.createElement("svg",{width:"16",height:"8",style:{verticalAlign:"top"}},_react2.default.createElement("path",{d:"M0 0 L16 0 L8 8 Z",fill:"#8f9899"})))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{}],310:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_externalLink=require("./external-link"),_externalLink2=_interopRequireDefault(_externalLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ModalImage=function(e){function ModalImage(e){_classCallCheck(this,ModalImage);var t=_possibleConstructorReturn(this,(ModalImage.__proto__||Object.getPrototypeOf(ModalImage)).call(this,e));return(0,_lodash.bindAll)(t,"onClick","hideModal"),t.setStateByContentWidth=(0,_lodash.throttle)(t.setStateByContentWidth.bind(t)),t.onWindowScroll=(0,_lodash.throttle)(t.onWindowScroll.bind(t)),t.state={showModal:!1,contentWidth:null},t}return _inherits(ModalImage,_react.Component),_createClass(ModalImage,null,[{key:"propTypes",get:function get(){return{src:_propTypes2.default.string.isRequired,href:_propTypes2.default.string,externalLink:_propTypes2.default.string,noUnderLine:_propTypes2.default.bool,onError:_propTypes2.default.func}}}]),_createClass(ModalImage,[{key:"setStateByContentWidth",value:function setStateByContentWidth(){if(this.contentDom){var e=this.contentDom.width;this.setState({contentWidth:e})}}},{key:"onWindowScroll",value:function onWindowScroll(e){Math.abs(window.scrollY-this.scrollY)>window.innerHeight/5&&this.hideModal()}},{key:"onClick",value:function onClick(e){e.preventDefault(),e.target.parentNode.blur(),this.setState({showModal:!0}),window.addEventListener("resize",this.setStateByContentWidth),this.scrollY=window.scrollY,window.addEventListener("scroll",this.onWindowScroll)}},{key:"hideModal",value:function hideModal(){this.setState({showModal:!1}),window.removeEventListener("resize",this.setStateByContentWidth),window.removeEventListener("scroll",this.onWindowScroll)}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.setStateByContentWidth),window.removeEventListener("scroll",this.onWindowScroll)}},{key:"render",value:function render(){var e=this,t=(0,_lodash.omit)(this.props,["href","externalLink","noUnderLine"]),n=this.props,o=n.src,r=n.href,a=n.externalLink,l=n.noUnderLine,i=n.onError,s=this.state,d=s.showModal,c=s.contentWidth,u=a&&c&&_react2.default.createElement("div",{className:"text",style:{width:c}},_react2.default.createElement("span",null,decodeURIComponent(a)));return _react2.default.createElement("span",{className:"modal-image"},_react2.default.createElement(_externalLink2.default,{className:a&&!l?"link":null,href:a||r||o},_react2.default.createElement("img",_extends({onClick:this.onClick},t,{src:o,onError:i}))),_react2.default.createElement(_reactBootstrap.Modal,{className:"full-content-modal",show:d,onHide:this.hideModal},_react2.default.createElement(_reactBootstrap.Modal.Body,{onClick:this.hideModal},_react2.default.createElement(_externalLink2.default,{className:"link",href:a||r||o},_react2.default.createElement("img",{src:o,className:"full-content",onLoad:this.setStateByContentWidth,ref:function ref(t){e.contentDom=t}}),u))))}}]),ModalImage}();exports.default=ModalImage;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./external-link":281,"prop-types":186}],311:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};exports.PenButton=PenButton,exports.UploadButton=UploadButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}function PenButton(e){var t=e.size,r=e.color,a=e.onClick,n=e.border,o=e.className,l=e.currentPen,c=_objectWithoutProperties(e,["size","color","onClick","border","className","currentPen"]);t=t||10,r=r||"#000";var s=l.size===t&&l.color===r,i=n?{stroke:n,strokeWidth:1}:{};return _react2.default.createElement("div",_extends({className:(0,_classnames2.default)("pen-button",o,{active:s}),onClick:function onButtonClick(e){return a({size:t,color:r})}},c),_react2.default.createElement("svg",{width:36,height:36,xmlns:"http://www.w3.org/2000/svg"},_react2.default.createElement("rect",{width:36,height:36,rx:s?20:10,ry:s?20:10,fill:"#fff"}),_react2.default.createElement("circle",_extends({cx:18,cy:18,r:t/2,fill:r},i))))}function UploadButton(e){var t=e.uploading,r=e.className,a=_objectWithoutProperties(e,["uploading","className"]),n=t?_react2.default.createElement("i",{className:"fa fa-spinner"}):"Upload";return _react2.default.createElement("button",_extends({type:"submit",className:(0,_classnames2.default)("btn btn-primary upload-button",r),disabled:t},a),n)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"classnames":93}],312:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_button=require("./button"),_gyazoUpload=require("../../../lib/gyazo-upload"),_gyazoUpload2=_interopRequireDefault(_gyazoUpload),_canvas=require("../../../lib/canvas");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DrawModal=function(e){function DrawModal(e){_classCallCheck(this,DrawModal);var t=_possibleConstructorReturn(this,(DrawModal.__proto__||Object.getPrototypeOf(DrawModal)).call(this));return t.state=t.initialState,t.width=400,t.height=300,t.lastCursorPoint={x:null,y:null},(0,_lodash.bindAll)(t,"upload","setupCanvasEvent","removeCanvasEvent","confirmAndHide","onStartStroke","onStopStroke","onStroke","onPenChange"),t}return _inherits(DrawModal,_react.Component),_createClass(DrawModal,null,[{key:"propTypes",get:function get(){return{show:_propTypes2.default.bool.isRequired,onHide:_propTypes2.default.func.isRequired}}}]),_createClass(DrawModal,[{key:"componentDidUpdate",value:function componentDidUpdate(e,t){this.props.show&&!e.show&&(requestAnimationFrame(this.setupCanvasEvent),this.setState(this.initialState))}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){e.show&&(this.width=Math.floor(.85*window.innerWidth),this.height=Math.floor(.85*window.innerHeight)),this.props.show&&!e.show&&this.removeCanvasEvent()}},{key:"setupCanvasEvent",value:function setupCanvasEvent(){this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.lineCap="round",this.ctx.lineJoin="round",this.canvas.addEventListener("touchstart",this.onStartStroke),this.canvas.addEventListener("touchend",this.onStopStroke),this.canvas.addEventListener("touchmove",this.onStroke),this.canvas.addEventListener("pointerdown",this.onStartStroke),this.canvas.addEventListener("pointerup",this.onStopStroke),this.canvas.addEventListener("pointermove",this.onStroke)}},{key:"removeCanvasEvent",value:function removeCanvasEvent(){this.canvas.removeEventListener("touchstart",this.onStartStroke),this.canvas.removeEventListener("touchend",this.onStopStroke),this.canvas.removeEventListener("touchmove",this.onStroke),this.canvas.removeEventListener("pointerdown",this.onStartStroke),this.canvas.removeEventListener("pointerup",this.onStopStroke),this.canvas.removeEventListener("pointermove",this.onStroke)}},{key:"onStartStroke",value:function onStartStroke(e){e.preventDefault(),this.stroking=!0,this.ctx.strokeStyle=this.state.pen.color;var t=(0,_canvas.getCursorPoint)(e),n=t.x,o=t.y,r=t.pressure;"mouse"!==e.pointerType&&r||(this.ctx.lineWidth=this.state.pen.size,this.drawLine({x:n,y:o},{x:n,y:o})),this.lastCursorPoint={x:n,y:o}}},{key:"onStopStroke",value:function onStopStroke(e){e.preventDefault(),this.stroking=!1,this.lastCursorPoint={x:null,y:null}}},{key:"onStroke",value:function onStroke(e){if(this.stroking){e.preventDefault();var t=(0,_canvas.getCursorPoint)(e),n=t.x,o=t.y,r=t.pressure;"mouse"!==e.pointerType&&r&&(this.ctx.lineWidth=this.state.pen.size*r*2),this.drawLine(this.lastCursorPoint,{x:n,y:o}),this.lastCursorPoint={x:n,y:o}}}},{key:"drawLine",value:function drawLine(e,t){this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(t.x,t.y),this.ctx.stroke(),this.ctx.closePath()}},{key:"onPenChange",value:function onPenChange(e){var t=e.color,n=e.size;this.setState({pen:{color:t,size:n}})}},{key:"upload",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,n;return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:this.setState({uploading:!0}),"image/png",e=void 0,o.prev=3,e=(0,_canvas.cropCanvas)(this.canvas).toDataURL("image/png"),o.next=13;break;case 7:return o.prev=7,o.t0=o.catch(3),console.error(o.t0.stack||o.t0),alert(o.t0.message),this.setState({uploading:!1}),o.abrupt("return");case 13:return t=void 0,o.prev=14,o.next=17,(0,_gyazoUpload2.default)(e);case 17:t=o.sent,o.next=26;break;case 20:return o.prev=20,o.t1=o.catch(14),console.error(o.t1.stack||o.t1),alert("failed to uplaod gyazo"),this.setState({uploading:!1}),o.abrupt("return");case 26:n="["+t.url+"]\n",0===_stores2.default.Cursor.getPosition().line?_stores2.default.Line.insertAfterTitleLine(n):_stores2.default.Line.addChar(n),_stores2.default.Cursor.hide(),this.setState({uploading:!1}),this.props.onHide();case 32:case"end":return o.stop()}},_callee,this,[[3,7],[14,20]])}));return function upload(){return e.apply(this,arguments)}}()},{key:"confirmAndHide",value:function confirmAndHide(){try{(0,_canvas.getCropRect)(this.canvas),confirm("Are you sure want to close drawing?")&&this.props.onHide()}catch(e){this.props.onHide()}}},{key:"render",value:function render(){var e=this,t=this.state,n=t.uploading,o=t.pen,r=this.props.show;return _react2.default.createElement(_reactBootstrap.Modal,{className:"draw-modal full-content-modal",show:r,onHide:this.confirmAndHide},_react2.default.createElement(_reactBootstrap.Modal.Body,null,_react2.default.createElement("div",{className:"toolbar",onClick:function onClick(t){return t.target===e.toolbarDOM&&e.confirmAndHide()},ref:function ref(t){e.toolbarDOM=t}},_react2.default.createElement(_button.PenButton,{size:3,color:"#000",onClick:this.onPenChange,currentPen:o}),_react2.default.createElement(_button.PenButton,{size:10,color:"#000",onClick:this.onPenChange,currentPen:o}),_react2.default.createElement(_button.PenButton,{size:10,color:"#888",onClick:this.onPenChange,currentPen:o}),_react2.default.createElement(_button.PenButton,{size:30,color:"#000",onClick:this.onPenChange,currentPen:o}),_react2.default.createElement(_button.PenButton,{size:30,color:"#888",onClick:this.onPenChange,currentPen:o}),_react2.default.createElement(_button.PenButton,{size:30,color:"#fff",border:"#000",onClick:this.onPenChange,currentPen:o}),_react2.default.createElement(_button.UploadButton,{onClick:this.upload,uploading:n})),_react2.default.createElement("canvas",{ref:function ref(t){e.canvas=t},width:this.width,height:this.height})))}},{key:"initialState",get:function get(){return{uploading:!1,pen:{color:"#000",size:3}}}}]),DrawModal}();exports.default=DrawModal;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../lib/canvas":458,"../../../lib/gyazo-upload":463,"../../../stores/":520,"./button":311,"prop-types":186}],313:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_gyazoUpload=require("../../lib/gyazo-upload"),_gyazoUpload2=_interopRequireDefault(_gyazoUpload),_file=require("../../lib/file");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function step(r,n){try{var o=t[r](n),l=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(l).then(function(e){step("next",e)},function(e){step("throw",e)});e(l)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var GyazoUploadModal=function(e){function GyazoUploadModal(){_classCallCheck(this,GyazoUploadModal);var e=_possibleConstructorReturn(this,(GyazoUploadModal.__proto__||Object.getPrototypeOf(GyazoUploadModal)).call(this));return e.state=e.initialState,(0,_lodash.bindAll)(e,"onChangeFile","onSubmit"),e}return _inherits(GyazoUploadModal,_react.Component),_createClass(GyazoUploadModal,[{key:"initialState",get:function get(){return{uploadReady:!1,waitingResponse:!1}}}],[{key:"propTypes",get:function get(){return{show:_propTypes2.default.bool.isRequired,onHide:_propTypes2.default.func.isRequired}}}]),_createClass(GyazoUploadModal,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){this.props.show!==e.show&&this.setState(this.initialState)}},{key:"onChangeFile",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,a;return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return t=e.target.files&&e.target.files[0],r.prev=1,r.next=4,(0,_file.readAsDataURLPromise)(t);case 4:a=r.sent,this.dataURL=a.target.result,this.setState({uploadReady:!0}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),console.error(r.t0.stack||r.t0);case 12:case"end":return r.stop()}},_callee,this,[[1,9]])}));return function onChangeFile(t){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,a,r;return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),this.state.uploadReady){n.next=4;break}return n.abrupt("return");case 4:return this.setState({waitingResponse:!0}),n.prev=5,n.next=8,(0,_gyazoUpload2.default)(this.dataURL);case 8:t=n.sent,a=t.url,r="["+a+"]\n",0===_stores2.default.Cursor.getPosition().line?_stores2.default.Line.insertAfterTitleLine(r):_stores2.default.Line.addChar(r),_stores2.default.Cursor.hidePopupMenu(),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(5),console.error(n.t0.stack||n.t0),alert("Failed to upload image to Gyazo.");case 20:this.props.onHide();case 21:case"end":return n.stop()}},_callee2,this,[[5,16]])}));return function onSubmit(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this,t=this.props,a=t.show,r=t.onHide,n=this.state,o=n.uploadReady,l=n.waitingResponse;return _react2.default.createElement(_reactBootstrap.Modal,{className:"gyazo-upload-modal",show:a,onHide:r},_react2.default.createElement(_reactBootstrap.Modal.Body,null,_react2.default.createElement("form",{onSubmit:this.onSubmit},_react2.default.createElement("label",null,"Upload Image"),_react2.default.createElement("div",{className:"file"},_react2.default.createElement("input",{type:"file",name:"image",accept:".png, .jpeg, .jpg, .gif",onChange:this.onChangeFile})),_react2.default.createElement(function Preview(){return o&&e.dataURL?_react2.default.createElement("div",{className:"preview text-center"},_react2.default.createElement("img",{src:e.dataURL})):null},null),_react2.default.createElement("div",{className:"upload text-right"},_react2.default.createElement(function UploadButton(){if(!o)return null;var e=l?"Uploading ":"Upload";return _react2.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:l},e,l&&_react2.default.createElement("i",{className:"fa fa-spinner"}))},null)))))}}]),GyazoUploadModal}();exports.default=GyazoUploadModal;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/file":461,"../../lib/gyazo-upload":463,"../../stores/":520,"prop-types":186}],314:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_lang=require("../../lang/"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_showMoreText=require("../show-more-text"),_showMoreText2=_interopRequireDefault(_showMoreText),_page=require("page"),_page2=_interopRequireDefault(_page),_langSwitch=require("../lang-switch"),_langSwitch2=_interopRequireDefault(_langSwitch);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function step(r,n){try{var l=t[r](n),o=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MakePrivateModal=function(e){function MakePrivateModal(e){_classCallCheck(this,MakePrivateModal);var t=_possibleConstructorReturn(this,(MakePrivateModal.__proto__||Object.getPrototypeOf(MakePrivateModal)).call(this,e));return t.state=t.createInitialState(),t.onSubmit=t.onSubmit.bind(t),t}return _inherits(MakePrivateModal,_react.Component),_createClass(MakePrivateModal,null,[{key:"propTypes",get:function get(){return{show:_propTypes2.default.bool.isRequired,onHide:_propTypes2.default.func.isRequired}}}]),_createClass(MakePrivateModal,[{key:"createInitialState",value:function createInitialState(){return{plan:""}}},{key:"componentWillReceiveProps",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:e.show&&!this.props.show&&this.setState(this.createInitialState());case 1:case"end":return t.stop()}},_callee,this)}));return function componentWillReceiveProps(t){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,a;return regeneratorRuntime.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),t=this.state.plan,a=_stores2.default.CurrentProject.get(),r.prev=3,r.next=6,_stores2.default.CurrentProject.update({plan:t,publicVisible:!1});case 6:this.props.onHide(),(0,_page2.default)("/"+a.name+"/"),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(3),console.error(r.t0),r.t0.response?alert(r.t0.response.data.message):alert("Can’t connect to the servers. Try again later.");case 14:return r.abrupt("return",!1);case 15:case"end":return r.stop()}},_callee2,this,[[3,10]])}));return function onSubmit(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this,t=this.state.plan,a=_stores2.default.CurrentProject.get(),r=a.displayName===a.name?a.displayName:a.displayName+" - "+a.name;return _react2.default.createElement(_reactBootstrap.Modal,{className:"select-plan-modal",show:this.props.show,onHide:this.props.onHide},_react2.default.createElement(_reactBootstrap.Modal.Header,{closeButton:!0},_react2.default.createElement(_reactBootstrap.Modal.Title,null,(0,_lang.t)("MakePrivateModal.title"))),_react2.default.createElement(_reactBootstrap.Modal.Body,null,_react2.default.createElement(_langSwitch2.default,{onChange:function onChange(){return e.forceUpdate()}}),_react2.default.createElement("form",{onSubmit:this.onSubmit},_react2.default.createElement("p",null,(0,_lang.t)("MakePrivateModal.desc1"),_react2.default.createElement("br",null),(0,_lang.t)("MakePrivateModal.desc2")),_react2.default.createElement("p",null,_react2.default.createElement("strong",null,(0,_lang.t)("MakePrivateModal.important"),": "),(0,_lang.t)("MakePrivateModal.choose",{projectName:r})),_react2.default.createElement("div",{className:"purpose"},_react2.default.createElement("strong",null,(0,_lang.t)("MakePrivateModal.purpose"))),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("div",{className:"radio-group"},_react2.default.createElement("div",{className:"radio-item"},_react2.default.createElement("label",{className:"radio radio-with-icon"},_react2.default.createElement("input",{type:"radio",name:"plan",checked:"business"===t,onChange:function onChange(){return e.setState({plan:"business"})}}),"Business",_react2.default.createElement("span",{className:"icon icon-business"}),_react2.default.createElement("span",{className:"pricing"},"Free for 30 days")),_react2.default.createElement("p",null,(0,_lang.t)("plan.business"),_react2.default.createElement(_showMoreText2.default,null,(0,_lang.t)("plan.business2")))),_react2.default.createElement("div",{className:"radio-item"},_react2.default.createElement("label",{className:"radio radio-with-icon"},_react2.default.createElement("input",{type:"radio",name:"plan",checked:"personal"===t,onChange:function onChange(){return e.setState({plan:"personal"})}}),"Personal or Non-commercial",_react2.default.createElement("span",{className:"icon icon-non-commercial"}),_react2.default.createElement("span",{className:"pricing"},"Free")),_react2.default.createElement("p",null,(0,_lang.t)("plan.personal"),_react2.default.createElement(_showMoreText2.default,null,(0,_lang.t)("plan.personal2")))))),_react2.default.createElement("div",{className:"alert alert-warning"},_react2.default.createElement("p",null,(0,_lang.t)("MakePrivateModal.alert"),_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,_lang.t)("MakePrivateModal.help")}}))),_react2.default.createElement("div",{className:"button-group"},_react2.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!t},(0,_lang.t)("MakePrivateModal.submit")),_react2.default.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onHide},(0,_lang.t)("MakePrivateModal.cancel"))))))}}]),MakePrivateModal}();exports.default=MakePrivateModal;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lang/":449,"../../stores/":520,"../lang-switch":292,"../show-more-text":416,"page":169,"prop-types":186}],315:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_showMoreText=require("../show-more-text"),_showMoreText2=_interopRequireDefault(_showMoreText),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_page=require("page"),_page2=_interopRequireDefault(_page),_lang=require("../../lang/"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_projectName=require("../../../../share/validator/project-name"),_langSwitch=require("../lang-switch"),_langSwitch2=_interopRequireDefault(_langSwitch);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function step(r,n){try{var l=t[r](n),o=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var NewProjectModal=function(e){function NewProjectModal(e){_classCallCheck(this,NewProjectModal);var t=_possibleConstructorReturn(this,(NewProjectModal.__proto__||Object.getPrototypeOf(NewProjectModal)).call(this,e));return t.state=t.createInitialState(),t.onSubmit=t.onSubmit.bind(t),t}return _inherits(NewProjectModal,_react.Component),_createClass(NewProjectModal,null,[{key:"propTypes",get:function get(){return{show:_propTypes2.default.bool.isRequired,onHide:_propTypes2.default.func.isRequired}}}]),_createClass(NewProjectModal,[{key:"createInitialState",value:function createInitialState(){return{error:"",projectName:"",publicVisible:!0,plan:""}}},{key:"componentWillReceiveProps",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:e.show&&!this.props.show&&this.setState(this.createInitialState());case 1:case"end":return t.stop()}},_callee,this)}));return function componentWillReceiveProps(t){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,a,r,n,l;return regeneratorRuntime.wrap(function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),t=this.state,a=t.projectName,r=t.publicVisible,n=t.plan,!(l=(0,_projectName.validateProjectName)(a)).isInvalid){o.next=6;break}return this.setState({error:l.errors[0]}),o.abrupt("return",!1);case 6:return o.prev=6,o.next=9,_stores2.default.ProjectList.create({projectName:a,publicVisible:r,plan:n});case 9:this.props.onHide(),(0,_page2.default)("/"+a+"/"),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(6),o.t0.response?this.setState({error:o.t0.response.data.message}):this.setState({error:"Can’t connect to the servers. Try again later."});case 16:return o.abrupt("return",!1);case 17:case"end":return o.stop()}},_callee2,this,[[6,13]])}));return function onSubmit(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this,t=this.state.error,a=this.state,r=a.projectName,n=a.publicVisible,l=a.plan,o=!n;return _react2.default.createElement(_reactBootstrap.Modal,{className:"new-project-modal",show:this.props.show,onHide:this.props.onHide},_react2.default.createElement(_reactBootstrap.Modal.Header,{closeButton:!0},_react2.default.createElement(_reactBootstrap.Modal.Title,null,"Create new project")),_react2.default.createElement(_reactBootstrap.Modal.Body,null,_react2.default.createElement("form",{onSubmit:this.onSubmit},_react2.default.createElement("div",{className:(0,_classnames2.default)({"form-group":!0,"has-error":t})},_react2.default.createElement("label",{className:"control-label",htmlFor:"projectName"},"Project name"),_react2.default.createElement("div",{className:"input-group"},_react2.default.createElement("div",{className:"input-group-addon"},location.protocol+"//"+location.host+"/"),_react2.default.createElement("input",{type:"text",className:"form-control",id:"projectName",value:r,onChange:function onChange(t){return e.setState({projectName:t.target.value})}})),_react2.default.createElement("span",{className:"help-block"},this.state.error)),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("div",{className:"radio-group"},_react2.default.createElement("div",{className:"radio-item"},_react2.default.createElement("label",{className:"radio"},_react2.default.createElement("input",{type:"radio",name:"publicVisible",checked:n,onChange:function onChange(){return e.setState({publicVisible:!0})}}),"Public Project",_react2.default.createElement(_reactDisplaySwitch.When,{enable_billing:!0},n&&_react2.default.createElement("span",{className:"pricing"},"Free"))),_react2.default.createElement("p",null,"Anyone can read this project, but only members can write.")),_react2.default.createElement("div",{className:"radio-item"},_react2.default.createElement("label",{className:"radio"},_react2.default.createElement("input",{type:"radio",name:"publicVisible",checked:!n,onChange:function onChange(){return e.setState({publicVisible:!1})}}),"Private Project"),_react2.default.createElement("p",null,"Only members can read and write this project.")))),_react2.default.createElement(_reactDisplaySwitch.When,{enable_billing:!0},_react2.default.createElement("div",{className:(0,_classnames2.default)("purpose-block",{closed:!o})},_react2.default.createElement(_langSwitch2.default,{onChange:function onChange(){return e.forceUpdate()}}),_react2.default.createElement("div",{className:"purpose"},_react2.default.createElement("strong",null,"Purpose")),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("div",{className:"radio-group"},_react2.default.createElement("div",{className:"radio-item"},_react2.default.createElement("label",{className:"radio radio-with-icon"},_react2.default.createElement("input",{type:"radio",name:"plan",checked:"business"===l,onChange:function onChange(){return e.setState({plan:"business"})}}),"Business",_react2.default.createElement("span",{className:"icon icon-business"}),"business"===l&&_react2.default.createElement("span",{className:"pricing"},"Try free for 30 days")),_react2.default.createElement("p",null,(0,_lang.t)("plan.business"),_react2.default.createElement(_showMoreText2.default,null,(0,_lang.t)("plan.business2")))),_react2.default.createElement("div",{className:"radio-item"},_react2.default.createElement("label",{className:"radio radio-with-icon"},_react2.default.createElement("input",{type:"radio",name:"plan",checked:"personal"===l,onChange:function onChange(){return e.setState({plan:"personal"})}}),"Personal or Non-commercial",_react2.default.createElement("span",{className:"icon icon-non-commercial"}),"personal"===l&&_react2.default.createElement("span",{className:"pricing"},"Free")),_react2.default.createElement("p",null,(0,_lang.t)("plan.personal"),_react2.default.createElement(_showMoreText2.default,null,(0,_lang.t)("plan.personal2")))))),_react2.default.createElement("div",{className:"alert alert-warning"},_react2.default.createElement("p",null,(0,_lang.t)("NewProjectModal.alert")),_react2.default.createElement("p",null,_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,_lang.t)("NewProjectModal.help")}}))))),_react2.default.createElement("div",{className:"text-center"},_react2.default.createElement("button",{type:"submit",className:"btn btn-primary"},"Create")))))}}]),NewProjectModal}();exports.default=NewProjectModal;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/validator/project-name":623,"../../lang/":449,"../../stores/":520,"../lang-switch":292,"../show-more-text":416,"classnames":93,"page":169,"prop-types":186,"react-display-switch":208}],316:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_lang=require("../../lang/"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_showMoreText=require("../show-more-text"),_showMoreText2=_interopRequireDefault(_showMoreText),_langSwitch=require("../lang-switch"),_langSwitch2=_interopRequireDefault(_langSwitch);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function step(l,n){try{var r=t[l](n),c=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var SelectPlanModal=function(e){function SelectPlanModal(e){_classCallCheck(this,SelectPlanModal);var t=_possibleConstructorReturn(this,(SelectPlanModal.__proto__||Object.getPrototypeOf(SelectPlanModal)).call(this,e));return t.state=t.createInitialState(),t.onSubmit=t.onSubmit.bind(t),t}return _inherits(SelectPlanModal,_react.Component),_createClass(SelectPlanModal,null,[{key:"propTypes",get:function get(){return{show:_propTypes2.default.bool.isRequired,onHide:_propTypes2.default.func.isRequired}}}]),_createClass(SelectPlanModal,[{key:"createInitialState",value:function createInitialState(){return{plan:""}}},{key:"componentWillReceiveProps",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:e.show&&!this.props.show&&this.setState(this.createInitialState());case 1:case"end":return t.stop()}},_callee,this)}));return function componentWillReceiveProps(t){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t;return regeneratorRuntime.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),t=this.state.plan,a.prev=2,a.next=5,_stores2.default.CurrentProject.update({plan:t});case 5:this.props.onHide(),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(2),console.error(a.t0),a.t0.response?alert(a.t0.response.data.message):alert("Can’t connect to the servers. Try again later.");case 12:return a.abrupt("return",!1);case 13:case"end":return a.stop()}},_callee2,this,[[2,8]])}));return function onSubmit(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this,t=this.state.plan,a=_stores2.default.CurrentProject.get(),l=a.displayName===a.name?a.displayName:a.displayName+" - "+a.name,n=_stores2.default.CurrentUser.hasProjectPrivilege,r=_react2.default.createElement("form",{onSubmit:this.onSubmit},_react2.default.createElement("p",null,(0,_lang.t)("SelectPlanModal.desc1")),_react2.default.createElement("p",null,(0,_lang.t)("SelectPlanModal.desc2"),_react2.default.createElement("br",null),(0,_lang.t)("SelectPlanModal.desc3")),_react2.default.createElement("p",null,_react2.default.createElement("strong",null,(0,_lang.t)("SelectPlanModal.important"),": "),(0,_lang.t)("SelectPlanModal.choose",{projectName:l})),_react2.default.createElement("div",{className:"purpose"},_react2.default.createElement("strong",null,(0,_lang.t)("SelectPlanModal.purpose"))),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("div",{className:"radio-group"},_react2.default.createElement("div",{className:"radio-item"},_react2.default.createElement("label",{className:"radio radio-with-icon"},_react2.default.createElement("input",{type:"radio",name:"plan",checked:"business"===t,onChange:function onChange(){return e.setState({plan:"business"})}}),"Business",_react2.default.createElement("span",{className:"icon icon-business"}),_react2.default.createElement("span",{className:"pricing"},"Paid")),_react2.default.createElement("p",null,(0,_lang.t)("plan.business"),_react2.default.createElement(_showMoreText2.default,null,(0,_lang.t)("plan.business2")))),_react2.default.createElement("div",{className:"radio-item"},_react2.default.createElement("label",{className:"radio radio-with-icon"},_react2.default.createElement("input",{type:"radio",name:"plan",checked:"personal"===t,onChange:function onChange(){return e.setState({plan:"personal"})}}),"Personal or Non-commercial",_react2.default.createElement("span",{className:"icon icon-non-commercial"}),_react2.default.createElement("span",{className:"pricing"},"Free")),_react2.default.createElement("p",null,(0,_lang.t)("plan.personal"),_react2.default.createElement(_showMoreText2.default,null,(0,_lang.t)("plan.personal2")))))),_react2.default.createElement("div",{className:"alert alert-warning"},_react2.default.createElement("p",null,(0,_lang.t)("SelectPlanModal.alert"))),_react2.default.createElement("p",null,_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,_lang.t)("SelectPlanModal.help")}}),_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,_lang.t)("SelectPlanModal.help2")}})),_react2.default.createElement("div",{className:"button-group"},_react2.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!t},(0,_lang.t)("SelectPlanModal.submit")),_react2.default.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onHide},(0,_lang.t)("SelectPlanModal.cancel")))),c=_react2.default.createElement("div",null,_react2.default.createElement("p",null,(0,_lang.t)("SelectPlanModal.desc1")),_react2.default.createElement("p",null,(0,_lang.t)("SelectPlanModal.desc2"),_react2.default.createElement("br",null),(0,_lang.t)("SelectPlanModal.desc3")),_react2.default.createElement("p",null,_react2.default.createElement("strong",null,(0,_lang.t)("SelectPlanModal.important"),": "),(0,_lang.t)("SelectPlanModal.choose",{projectName:l})),_react2.default.createElement("div",{className:"purpose"},_react2.default.createElement("strong",null,(0,_lang.t)("SelectPlanModal.purpose"))),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("div",{className:"radio-group"},_react2.default.createElement("div",{className:"radio-item"},_react2.default.createElement("label",{className:"radio radio-with-icon"},"Business",_react2.default.createElement("span",{className:"icon icon-business"}),_react2.default.createElement("span",{className:"pricing"},"Paid")),_react2.default.createElement("p",null,(0,_lang.t)("plan.business"),_react2.default.createElement(_showMoreText2.default,null,(0,_lang.t)("plan.business2")))),_react2.default.createElement("div",{className:"radio-item"},_react2.default.createElement("label",{className:"radio radio-with-icon"},"Personal or Non-commercial",_react2.default.createElement("span",{className:"icon icon-non-commercial"}),_react2.default.createElement("span",{className:"pricing"},"Free")),_react2.default.createElement("p",null,(0,_lang.t)("plan.personal"),_react2.default.createElement(_showMoreText2.default,null,(0,_lang.t)("plan.personal2")))))),_react2.default.createElement("div",{className:"alert alert-warning"},_react2.default.createElement("p",null,(0,_lang.t)("SelectPlanModal.forMember"),_react2.default.createElement("a",{href:"/projects/"+a.name+"/settings/members"},(0,_lang.t)("SelectPlanModal.forMemberLink")))),_react2.default.createElement("p",null,_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,_lang.t)("SelectPlanModal.help")}}),_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,_lang.t)("SelectPlanModal.help2")}})),_react2.default.createElement("div",{className:"button-group"},_react2.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.props.onHide},(0,_lang.t)("SelectPlanModal.close"))));return _react2.default.createElement(_reactBootstrap.Modal,{className:"select-plan-modal",show:this.props.show,onHide:this.props.onHide},_react2.default.createElement(_reactBootstrap.Modal.Header,{closeButton:!0},_react2.default.createElement(_reactBootstrap.Modal.Title,null,(0,_lang.t)("SelectPlanModal.title"))),_react2.default.createElement(_reactBootstrap.Modal.Body,null,_react2.default.createElement(_langSwitch2.default,{onChange:function onChange(){return e.forceUpdate()}}),n?r:c))}}]),SelectPlanModal}();exports.default=SelectPlanModal;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lang/":449,"../../stores/":520,"../lang-switch":292,"../show-more-text":416,"prop-types":186}],317:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_transformText=require("../../lib/transform-text"),_transformText2=_interopRequireDefault(_transformText);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TextPasteModal=function(e){function TextPasteModal(e){_classCallCheck(this,TextPasteModal);var t=_possibleConstructorReturn(this,(TextPasteModal.__proto__||Object.getPrototypeOf(TextPasteModal)).call(this,e));return t.state={show:!1,text:"",inputCount:0},(0,_lodash.bindAll)(t,"onChange","submit"),t}return _inherits(TextPasteModal,_react.Component),_createClass(TextPasteModal,null,[{key:"propTypes",get:function get(){return{show:_propTypes2.default.bool.isRequired,onHide:_propTypes2.default.func.isRequired}}}]),_createClass(TextPasteModal,[{key:"onChange",value:function onChange(){var e=this.state.inputCount,t=this.textarea.value;this.setState({text:t}),e<1?this.submitTimeout=setTimeout(this.submit,500):this.submitTimeout&&(clearTimeout(this.submitTimeout),this.submitTimeout=null),this.setState({inputCount:e+1})}},{key:"submit",value:function submit(){_stores2.default.Line.addChar((0,_transformText2.default)(this.state.text)),this.props.onHide(),_stores2.default.Cursor.hidePopupMenu()}},{key:"render",value:function render(){var e=this,t=this.props,o=t.show,r=t.onHide,n=this.state,a=n.text,s=n.inputCount;return _react2.default.createElement(_reactBootstrap.Modal,{className:"text-paste-modal",show:o,onHide:r},_react2.default.createElement(_reactBootstrap.Modal.Header,{closeButton:!0},_react2.default.createElement(_reactBootstrap.Modal.Title,null,"Paste here")),_react2.default.createElement(_reactBootstrap.Modal.Body,null,_react2.default.createElement("textarea",{value:a,ref:function ref(t){e.textarea=t},className:"form-control",onChange:this.onChange,onTouchStart:function onTouchStart(e){return e.target.focus()},onMouseDown:function onMouseDown(e){return e.target.focus()},style:{resize:"none"},rows:3}),_react2.default.createElement(function SubmitButton(){return s>1&&_react2.default.createElement("div",{className:"text-right"},_react2.default.createElement("button",{className:"btn btn-primary",onClick:e.submit},"submit"))},null)))}}]),TextPasteModal}();exports.default=TextPasteModal;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/transform-text":484,"../../stores/":520,"prop-types":186}],318:[function(require,module,exports){
        (function (process,global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=BrandIcon;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function BrandIcon(){var e=process.env.HEADER_ICON||"/assets/img/logo.png";return _react2.default.createElement("img",{className:"brand-icon",src:e})}

        }).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"_process":184}],319:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_brandIcon=require("../brand-icon"),_brandIcon2=_interopRequireDefault(_brandIcon),_userMenu=require("./user-menu"),_userMenu2=_interopRequireDefault(_userMenu);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var NavbarCommon=function(e){function NavbarCommon(){return _classCallCheck(this,NavbarCommon),_possibleConstructorReturn(this,(NavbarCommon.__proto__||Object.getPrototypeOf(NavbarCommon)).apply(this,arguments))}return _inherits(NavbarCommon,_react.Component),_createClass(NavbarCommon,[{key:"render",value:function render(){return _react2.default.createElement("nav",{className:"navbar navbar-default"},_react2.default.createElement("div",{className:"container"},_react2.default.createElement("div",{className:"row"},_react2.default.createElement("div",{className:"col-brand"},_react2.default.createElement("a",{className:"navbar-brand",href:"/"},_react2.default.createElement(_brandIcon2.default,null))),_react2.default.createElement("div",{className:"col-menu"},_react2.default.createElement("ul",{className:"navbar-menu"},_react2.default.createElement(_userMenu2.default,null))))))}}]),NavbarCommon}();exports.default=NavbarCommon;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../brand-icon":318,"./user-menu":320}],320:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=UserMenu;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_logoutLink=require("../../logout-link"),_logoutLink2=_interopRequireDefault(_logoutLink),_externalLink=require("../../external-link"),_externalLink2=_interopRequireDefault(_externalLink),_lang=require("../../../lib/lang"),_flags=require("../../../../../share/flags");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var AboutScrapbox=function AboutScrapbox(){return _flags.LANDING?_react2.default.createElement("li",null,_react2.default.createElement(_externalLink2.default,{href:"https://scrapbox.io/product"},"About Scrapbox")):null};function UserMenu(){var e=_stores2.default.CurrentUser.get();return e?_react2.default.createElement("li",{className:"dropdown"},_react2.default.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},e.displayName||e.email," ",_react2.default.createElement("span",{className:"caret"})),_react2.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},_react2.default.createElement("li",null,_react2.default.createElement("a",{href:"/settings/profile"},"Settings")),_react2.default.createElement("li",null,_react2.default.createElement(_logoutLink2.default,{role:"menuitem"},"Log out")),_react2.default.createElement("li",{key:"separator",role:"separator",className:"divider"}),_react2.default.createElement(AboutScrapbox,null),_react2.default.createElement("li",null,_react2.default.createElement(_externalLink2.default,{href:"ja"===_lang.lang?"https://scrapbox.io/help-jp/":"https://scrapbox.io/help/"},"Help")))):null}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../../share/flags":578,"../../../lib/lang":466,"../../../stores/":520,"../../external-link":281,"../../logout-link":308}],321:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDom="undefined"!=typeof window?window.window.ReactDOM:"undefined"!=typeof global?global.window.ReactDOM:null,_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Drawer=function(e){function Drawer(e){_classCallCheck(this,Drawer);var t=_possibleConstructorReturn(this,(Drawer.__proto__||Object.getPrototypeOf(Drawer)).call(this,e));return(0,_lodash.bindAll)(t,"hideWithAnimation","hide"),t.state={closing:!1},t.defaultStyle={},t}return _inherits(Drawer,_react.Component),_createClass(Drawer,null,[{key:"propTypes",get:function get(){return{show:_propTypes2.default.bool.isRequired,onHide:_propTypes2.default.func.isRequired,children:_propTypes2.default.array}}}]),_createClass(Drawer,[{key:"hideWithAnimation",value:function hideWithAnimation(){this.setState({closing:!0}),window.setTimeout(this.hide,300)}},{key:"hide",value:function hide(){this.lockPageScroll(!1),this.props.onHide(),this.setState({closing:!1})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.hide()}},{key:"lockPageScroll",value:function lockPageScroll(e){var t=Object.keys(this.defaultStyle),r=document.querySelector("#app-container");t.includes("appContainer")||(this.defaultStyle.appContainer={position:r.style.position});var n=document.querySelector(".navbar");t.includes("navabar")||(this.defaultStyle.navabar={position:n.style.position,top:n.style.top}),r.style.width=e?"100vw":"initial",r.style.position=e?"fixed":this.defaultStyle.appContainer.position,n.style.width=e?"100vw":"initial",n.style.position=e?"relative":this.defaultStyle.navabar.position,n.style.top=e?"0px":this.defaultStyle.navabar.top}},{key:"getDrawerMenuContainer",value:function getDrawerMenuContainer(){var e=document.querySelector("#drawer-container");if(!e){var t=document.querySelector("body");(e=document.createElement("div")).setAttribute("id","drawer-container"),t.appendChild(e)}return e}},{key:"render",value:function render(){var e=this,t=this.props,r=t.show,n=t.children;if(!r)return null;var a=this.state.closing?"drawer-close":"drawer-open";this.lockPageScroll(!0);var o=this.getDrawerMenuContainer();return(0,_reactDom.createPortal)(_react2.default.createElement("div",{className:"drawer"},_react2.default.createElement("div",{className:(0,_classnames2.default)("drawer-menu-backdrop",a),onClick:this.hideWithAnimation}),_react2.default.createElement("div",{className:(0,_classnames2.default)("drawer-menu-background",a)}),_react2.default.createElement("div",{className:(0,_classnames2.default)("drawer-menu",a),onClick:function onClick(t){var r=t.target;"a"===r.tagName.toLowerCase()&&r.href&&(window.scrollTo(0,0),e.hide())}},n)),o)}}]),Drawer}();exports.default=Drawer;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"classnames":93,"prop-types":186}],322:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=DropdownMenu;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function DropdownMenu(e){var a=e.className,n=e.children;return _react2.default.createElement("ul",{className:(0,_classnames2.default)(a,"global-menu dropdown-menu"),"aria-labelledby":"dropdownGlobalMenu"},n)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"classnames":93}],323:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=GlobalMenuButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_touchDevice=require("./touch-device"),_touchDevice2=_interopRequireDefault(_touchDevice),_pointingDevice=require("./pointing-device"),_pointingDevice2=_interopRequireDefault(_pointingDevice);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function GlobalMenuButton(e){return _reactDisplaySwitch.When.touch_device?_react2.default.createElement(_touchDevice2.default,e):_react2.default.createElement(_pointingDevice2.default,e)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./pointing-device":324,"./touch-device":325,"react-display-switch":208}],324:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=PointingDeviceGlobalMenuButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_brandIcon=require("../brand-icon"),_brandIcon2=_interopRequireDefault(_brandIcon),_globalMenu=require("../global-menu"),_globalMenu2=_interopRequireDefault(_globalMenu);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PointingDeviceGlobalMenuButton(){return _react2.default.createElement("div",{className:"col-brand dropdown global-menu-button"},_react2.default.createElement("a",{className:"navbar-brand dropdown-toggle","data-toggle":"dropdown",role:"button",tabIndex:"0","aria-haspopup":"true","aria-expanded":"false"},_react2.default.createElement(_brandIcon2.default,null),_react2.default.createElement("span",{className:"icon icon-arrow-down"})),_react2.default.createElement(_globalMenu2.default,null))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../brand-icon":318,"../global-menu":328}],325:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_baseComponent=require("../../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_brandIcon=require("../brand-icon"),_brandIcon2=_interopRequireDefault(_brandIcon),_globalMenu=require("../global-menu"),_globalMenu2=_interopRequireDefault(_globalMenu),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TouchDeviceGlobalMenuButton=function(e){function TouchDeviceGlobalMenuButton(e){_classCallCheck(this,TouchDeviceGlobalMenuButton);var t=_possibleConstructorReturn(this,(TouchDeviceGlobalMenuButton.__proto__||Object.getPrototypeOf(TouchDeviceGlobalMenuButton)).call(this,e));return(0,_lodash.bindAll)(t,"onHideDrawer","onClickBrandIcon"),t.state={showDrawer:!1},t.subscribe(_stores2.default.CurrentProject),t}return _inherits(TouchDeviceGlobalMenuButton,_baseComponent2.default),_createClass(TouchDeviceGlobalMenuButton,[{key:"onStoreChange",value:function onStoreChange(){this.setState({showDrawer:!1})}},{key:"onHideDrawer",value:function onHideDrawer(){this.setState({showDrawer:!1})}},{key:"onClickBrandIcon",value:function onClickBrandIcon(){this.setState({showDrawer:!0})}},{key:"render",value:function render(){var e=this.state.showDrawer;return _react2.default.createElement("div",{className:"col-brand global-menu-button"},_react2.default.createElement("span",{className:"navbar-brand",onClick:this.onClickBrandIcon},_react2.default.createElement(_brandIcon2.default,null)),_react2.default.createElement(_globalMenu2.default,{onHideDrawer:this.onHideDrawer,showDrawer:e}))}}]),TouchDeviceGlobalMenuButton}();exports.default=TouchDeviceGlobalMenuButton;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"../../base-component":261,"../brand-icon":318,"../global-menu":328}],326:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_newProjectModal=require("../../modals/new-project-modal"),_newProjectModal2=_interopRequireDefault(_newProjectModal),_actionLink=require("../../action-link"),_actionLink2=_interopRequireDefault(_actionLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CreateNewProjct=function(e){function CreateNewProjct(e){_classCallCheck(this,CreateNewProjct);var t=_possibleConstructorReturn(this,(CreateNewProjct.__proto__||Object.getPrototypeOf(CreateNewProjct)).call(this,e));return(0,_lodash.bindAll)(t,"onClick","onHideModal"),t.onHideModal=t.onHideModal.bind(t),t.state={showModal:!1},t}return _inherits(CreateNewProjct,_react.Component),_createClass(CreateNewProjct,[{key:"onClick",value:function onClick(){this.setState({showModal:!0})}},{key:"onHideModal",value:function onHideModal(){this.setState({showModal:!1})}},{key:"render",value:function render(){return _react2.default.createElement("li",null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:this.onClick},"Create new project ",_react2.default.createElement("span",{className:"fa fa-plus"})),_react2.default.createElement(_newProjectModal2.default,{show:this.state.showModal,onHide:this.onHideModal}))}}]),CreateNewProjct}();exports.default=CreateNewProjct;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../action-link":257,"../../modals/new-project-modal":315}],327:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Help;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_externalLink=require("../../external-link"),_externalLink2=_interopRequireDefault(_externalLink),_flags=require("../../../../../share/flags"),_lang=require("../../../lib/lang");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var WhenLandingEnable=function WhenLandingEnable(e){var t=e.children;return _flags.LANDING&&t};function Help(){var e="ja"===_lang.lang?"https://scrapbox.io/help-jp/":"https://scrapbox.io/help/";return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement("li",{role:"separator",className:"divider"}),_react2.default.createElement(WhenLandingEnable,null,_react2.default.createElement("li",null,_react2.default.createElement(_externalLink2.default,{href:"https://scrapbox.io/product"},"About Scrapbox"))),_react2.default.createElement("li",null,_react2.default.createElement(_externalLink2.default,{href:e},"Help")))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../../share/flags":578,"../../../lib/lang":466,"../../external-link":281}],328:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};exports.default=GlobalMenu;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_dropdownMenu=require("../dropdown-menu"),_dropdownMenu2=_interopRequireDefault(_dropdownMenu),_drawer=require("../drawer"),_drawer2=_interopRequireDefault(_drawer),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_projectList=require("./project-list"),_projectList2=_interopRequireDefault(_projectList),_projectWatchList=require("./project-watch-list"),_projectWatchList2=_interopRequireDefault(_projectWatchList),_createNewProject=require("./create-new-project"),_createNewProject2=_interopRequireDefault(_createNewProject),_projectSettings=require("./project-settings"),_projectSettings2=_interopRequireDefault(_projectSettings),_login=require("./login"),_login2=_interopRequireDefault(_login),_user=require("./user"),_user2=_interopRequireDefault(_user),_help=require("./help"),_help2=_interopRequireDefault(_help);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function GlobalMenu(e){return _stores2.default.CurrentUser.isGuest?_react2.default.createElement(GlobalMenuForGuest,e):_react2.default.createElement(GlobalMenuForUser,e)}function Base(e){var t=e.children,r=e.className,a=e.showDrawer,l=e.onHideDrawer;return _reactDisplaySwitch.When.touch_device?_react2.default.createElement(_drawer2.default,{onHide:l,show:a},t):_react2.default.createElement(_dropdownMenu2.default,{className:r},t)}function GlobalMenuForGuest(e){return _react2.default.createElement(Base,_extends({className:"global-menu-for-guest"},e),_react2.default.createElement(_login2.default,null),_react2.default.createElement(_help2.default,null))}function GlobalMenuForUser(e){var t=_stores2.default.CurrentUser.get(),r=_stores2.default.CurrentProject.get();return!t.name&&_stores2.default.CurrentUser.isProjectMember&&r.users.length>1?_react2.default.createElement(Base,_extends({className:"global-menu-for-user"},e),_react2.default.createElement(_user2.default,{mustEditProfile:!0,noSeparator:!0}),_react2.default.createElement(_projectList2.default,null),_react2.default.createElement(_createNewProject2.default,null),_react2.default.createElement(_projectSettings2.default,null),_react2.default.createElement(_help2.default,null),_react2.default.createElement(_projectWatchList2.default,null)):_react2.default.createElement(Base,_extends({className:"global-menu-for-user"},e),_react2.default.createElement(_projectList2.default,{noSeparator:!0}),_react2.default.createElement(_createNewProject2.default,null),_react2.default.createElement(_projectSettings2.default,null),_react2.default.createElement(_user2.default,null),_react2.default.createElement(_help2.default,null),_react2.default.createElement(_projectWatchList2.default,null))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"../drawer":321,"../dropdown-menu":322,"./create-new-project":326,"./help":327,"./login":329,"./project-list":330,"./project-settings":331,"./project-watch-list":332,"./user":333,"react-display-switch":208}],329:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Login;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Login(){return _react2.default.createElement("li",null,_react2.default.createElement("a",{href:"/",rel:"route"},"Log in"))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{}],330:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactDisplaySwitch=require("react-display-switch"),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MIN_PROJECT_LIST_SIZE=5,ProjectList=function(e){function ProjectList(e){_classCallCheck(this,ProjectList);var t=_possibleConstructorReturn(this,(ProjectList.__proto__||Object.getPrototypeOf(ProjectList)).call(this,e));return(0,_lodash.bindAll)(t,"onClickExpandButton"),t.state={expand:!1},t}return _inherits(ProjectList,_react.Component),_createClass(ProjectList,null,[{key:"propTypes",get:function get(){return{noSeparator:_propTypes2.default.bool}}}]),_createClass(ProjectList,[{key:"componentDidUpdate",value:function componentDidUpdate(e,t){t.expand&&this.setState({expand:!1})}},{key:"onClickExpandButton",value:function onClickExpandButton(e){e.preventDefault(),this.setState({expand:!0})}},{key:"render",value:function render(){var e=_stores2.default.ProjectList.get();if(!e)return null;var t=(_stores2.default.CurrentProject.get()||{}).name,r=[];if(!this.state.expand&&MIN_PROJECT_LIST_SIZE<e.length){e=(0,_lodash.cloneDeep)(e.sort(function(e,t){return e.updated>t.updated?-1:1}));var n=Math.max(MIN_PROJECT_LIST_SIZE,e.filter(function(e){return e.updated>Date.now()/1e3-259200}).length);r=e.splice(n)}var a=e.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}).map(function(e){var r=e.name===t,n=e.updated>_stores2.default.ProjectsLastAccessed.get()[e.id],a="stream"===_stores2.default.Layout.get()?"/stream/"+e.name+"/":"/"+e.name+"/",o=!e.plan&&!e.publicVisible;return _react2.default.createElement("li",{key:e.name},_react2.default.createElement("a",{href:a,className:(0,_classnames2.default)({selected:r,updated:n})},e.displayName,_react2.default.createElement(_reactDisplaySwitch.When,{enable_billing:!0},e.trialing&&" (Trial)",o&&" (Select purpose)"),_react2.default.createElement(function PrivateIcon(){return!e.publicVisible&&_react2.default.createElement("span",{className:"private-icon"},_react2.default.createElement("span",{className:"fa fa-lock"}))},null)))});if(this.props.noSeparator||a.unshift(_react2.default.createElement("li",{role:"separator",className:"divider",key:"separator"})),r.length<1)return a;var o=!!r.find(function(e){return e.updated>_stores2.default.ProjectsLastAccessed.get()[e.id]});return a.concat(_react2.default.createElement("li",{key:"expand-projects",className:"dropdown-menu-button list-menu-button"},_react2.default.createElement("a",{className:(0,_classnames2.default)({updated:o}),onClick:this.onClickExpandButton,onMouseUp:this.onClickExpandButton},"more (",r.length," projects)")))}}]),ProjectList}();exports.default=ProjectList;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"classnames":93,"prop-types":186,"react-display-switch":208}],331:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ProjectSettings;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ProjectSettings(){if(!_reactDisplaySwitch.When.project_member_user)return null;var e=_stores2.default.CurrentProject.get();if(!e)return null;var t=e.users.length,r=_reactDisplaySwitch.When.project_privilege_user?"/projects/"+e.name+"/settings/basic":"/projects/"+e.name+"/settings/members";return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement("li",{role:"separator",className:"divider"}),_react2.default.createElement("li",{className:"dropdown-header list-header"},e.displayName," (",t," ",t>1?"members":"member",")"),_react2.default.createElement("li",{className:"section section-right",style:{marginRight:0}},_react2.default.createElement("a",{href:r,rel:"route"},"Settings"),_react2.default.createElement(_reactDisplaySwitch.When,{enable_billing:!0},_react2.default.createElement("a",{href:"/projects/"+e.name+"/settings/billing",rel:"route"},"Billing")),_react2.default.createElement("a",{href:"/stream/"+e.name+"/"},"Stream")))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"react-display-switch":208}],332:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MIN_PROJECT_LIST_SIZE=5,ProjectWatchList=function(e){function ProjectWatchList(e){_classCallCheck(this,ProjectWatchList);var t=_possibleConstructorReturn(this,(ProjectWatchList.__proto__||Object.getPrototypeOf(ProjectWatchList)).call(this,e));return(0,_lodash.bindAll)(t,"onClickExpandButton"),t.state={expand:!1},t}return _inherits(ProjectWatchList,_react.Component),_createClass(ProjectWatchList,[{key:"componentDidUpdate",value:function componentDidUpdate(e,t){t.expand&&this.setState({expand:!1})}},{key:"onClickExpandButton",value:function onClickExpandButton(e){e.preventDefault(),this.setState({expand:!0})}},{key:"render",value:function render(){var e=this,t=_stores2.default.ProjectList.getWatchProjects();if(t.length<1)return null;var a=!this.state.expand&&MIN_PROJECT_LIST_SIZE<t.length,n=[];if(a){t=(0,_lodash.cloneDeep)(t.sort(function(e,t){return e.updated>t.updated?-1:1}));var r=Math.max(MIN_PROJECT_LIST_SIZE,t.filter(function(e){return e.updated>Date.now()/1e3-259200}).length);n=t.splice(r)}var o=t.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}).map(function(e){var t=e.updated>_stores2.default.ProjectsLastAccessed.get()[e.id],a="stream"===_stores2.default.Layout.get()?"/stream/"+e.name+"/":"/"+e.name+"/";return _react2.default.createElement("li",{key:e.name,className:"guest-project"},_react2.default.createElement("a",{href:a,className:(0,_classnames2.default)({updated:t})},e.displayName),_react2.default.createElement("a",{className:"button-delete",onClick:function onClickDelete(t){confirm('Are you sure you want to remove the project "'+e.name+'" from Watch List?')&&(_stores2.default.ProjectsLastAccessed.remove(e.id),_stores2.default.ProjectList.remove(e))},title:"Remove from Watch List"},_react2.default.createElement("span",{className:"fa fa-trash"})))});return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(function Header(){return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement("li",{role:"separator",className:"divider"}),_react2.default.createElement("li",{className:"dropdown-header list-header"},"Watch List"))},null),o,_react2.default.createElement(function ExpandButton(){if(n.length<1)return null;var t=!!n.find(function(e){return e.updated>_stores2.default.ProjectsLastAccessed.get()[e.id]});return _react2.default.createElement("li",{key:"expand-projects",className:"dropdown-menu-button list-menu-button"},_react2.default.createElement("a",{className:(0,_classnames2.default)({updated:t}),onClick:e.onClickExpandButton,onMouseUp:e.onClickExpandButton},"more (",n.length," projects)"))},null))}}]),ProjectWatchList}();exports.default=ProjectWatchList;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"classnames":93}],333:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=User;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_logoutLink=require("../../logout-link"),_logoutLink2=_interopRequireDefault(_logoutLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function User(e){var t=e.mustEditProfile,r=e.noSeparator;if(_stores2.default.CurrentUser.isGuest)return null;var a=_stores2.default.CurrentUser.get(),l=!a.name||t;return _react2.default.createElement(_react.Fragment,null,!r&&_react2.default.createElement("li",{role:"separator",className:"divider"}),_react2.default.createElement("li",{className:"dropdown-header list-header"},a.displayName||a.email),_react2.default.createElement("li",null,_react2.default.createElement("a",{href:"/settings/profile",rel:"route",className:(0,_classnames2.default)({highlight:l})},"Edit profile")),_react2.default.createElement("li",null,_react2.default.createElement(_logoutLink2.default,{role:"menuitem"},"Log out")))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"../../logout-link":308,"classnames":93}],334:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_searchForm=require("../search-form"),_searchForm2=_interopRequireDefault(_searchForm),_newButton=require("../new-button"),_newButton2=_interopRequireDefault(_newButton),_globalMenuButton=require("./global-menu-button/"),_globalMenuButton2=_interopRequireDefault(_globalMenuButton),_trialExpired=require("../trial-expired"),_trialExpired2=_interopRequireDefault(_trialExpired),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Navbar=function(e){function Navbar(e){_classCallCheck(this,Navbar);var t=_possibleConstructorReturn(this,(Navbar.__proto__||Object.getPrototypeOf(Navbar)).call(this,e));return(0,_lodash.bindAll)(t,["toggleSearchMobile"]),t.state={showSearchMobile:!1,project:_stores2.default.CurrentProject.get()},t.subscribe(_stores2.default.CurrentProject),t}return _inherits(Navbar,_baseComponent2.default),_createClass(Navbar,[{key:"onStoreChange",value:function onStoreChange(){this.setState({project:_stores2.default.CurrentProject.get()})}},{key:"toggleSearchMobile",value:function toggleSearchMobile(){this.setState({showSearchMobile:!this.state.showSearchMobile})}},{key:"render",value:function render(){var e=this,t=this.state.project,a=t&&t.name;return _react2.default.createElement("nav",{className:"navbar navbar-default"},_react2.default.createElement("div",{className:"container"},_react2.default.createElement("div",{className:"row"},_react2.default.createElement(_globalMenuButton2.default,null),_react2.default.createElement("div",{className:"col-search hidden-xs"},_react2.default.createElement(_trialExpired2.default,null,_react2.default.createElement("div",{className:"navbar-form"},_react2.default.createElement(_reactDisplaySwitch.When,{project_member_user:!0},_react2.default.createElement(_newButton2.default,null)),_react2.default.createElement(_searchForm2.default,{projectName:a})))),_react2.default.createElement("div",{className:"col-menu"},_react2.default.createElement("ul",{className:"navbar-menu"},_react2.default.createElement(function StreamButton(){if(t)return _react2.default.createElement("li",{className:"stream-btn hidden-xs"},_react2.default.createElement("a",{href:"/stream/"+a+"/"},_react2.default.createElement("img",{src:"/assets/img/stream.svg"})))},null),_react2.default.createElement(function SearchButtonXs(){return _react2.default.createElement("li",{className:"visible-xs"},_react2.default.createElement("a",{className:(0,_classnames2.default)("mobile-search-toggle",{active:e.state.showSearchMobile}),onClick:e.toggleSearchMobile},_react2.default.createElement("i",{className:"fa fa-search"})))},null))),_react2.default.createElement(function SearchFormXs(){return e.state.showSearchMobile?_react2.default.createElement("div",{className:"col visible-xs"},_react2.default.createElement("div",{className:"navbar-form"},_react2.default.createElement(_searchForm2.default,{forMobile:!0,projectName:a,onQuickSearchSelect:e.toggleSearchMobile,onSubmit:e.toggleSearchMobile}))):null},null))))}}]),Navbar}();exports.default=Navbar;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../base-component":261,"../new-button":338,"../search-form":405,"../trial-expired":435,"./global-menu-button/":323,"classnames":93,"react-display-switch":208}],335:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckoutForm=void 0;var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_reactStripeElements=require("react-stripe-elements"),_moment="undefined"!=typeof window?window.window.moment:"undefined"!=typeof global?global.window.moment:null,_moment2=_interopRequireDefault(_moment);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),l=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(l).then(function(e){step("next",e)},function(e){step("throw",e)});e(l)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var RawCheckoutForm=function(e){function RawCheckoutForm(){_classCallCheck(this,RawCheckoutForm);var e=_possibleConstructorReturn(this,(RawCheckoutForm.__proto__||Object.getPrototypeOf(RawCheckoutForm)).call(this));return e.state={error:null,submitting:!1},e.onSubmit=e.onSubmit.bind(e),e}return _inherits(RawCheckoutForm,_react.Component),_createClass(RawCheckoutForm,[{key:"onSubmit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,n,a;return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return e.preventDefault(),this.setState({error:null,submitting:!0}),t=this.nameInput.value,r=this.couponInput.value,o.next=6,this.props.stripe.createToken({name:t});case 6:if(n=o.sent,a=n.token){o.next=11;break}return this.setState({error:"Card is invalid",submitting:!1}),o.abrupt("return");case 11:return o.prev=11,o.next=14,_stores2.default.Billing.createAndLinkProject({token:a.id,coupon:r,name:t});case 14:return o.next=16,_stores2.default.CurrentProject.reload();case 16:o.next=22;break;case 18:return o.prev=18,o.t0=o.catch(11),o.t0.response&&o.t0.response.data?this.setState({error:o.t0.response.data.message,submitting:!1}):this.setState({error:"Can’t connect to the servers. Please try again later.",submitting:!1}),o.abrupt("return");case 22:this.setState({submitting:!1}),this.props.onSuccess();case 24:case"end":return o.stop()}},_callee,this,[[11,18]])}));return function onSubmit(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this,t=this.state,r=t.error,n=t.submitting,a=_stores2.default.CurrentProject.get();return _react2.default.createElement("form",{onSubmit:this.onSubmit},_react2.default.createElement(ErrorMessage,{message:r}),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("label",null,"Credit or debit card"),_react2.default.createElement("div",{className:"form-control",style:{paddingTop:"8px"}},_react2.default.createElement(_reactStripeElements.CardElement,{hidePostalCode:!0,style:{base:{fontSize:"14px"}}}))),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("label",{htmlFor:"name"},"Name on the receipt"),_react2.default.createElement("input",{type:"text",className:"form-control",id:"name",name:"name",ref:function ref(t){e.nameInput=t}})),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("label",{htmlFor:"coupon"},"Coupon (optional)"),_react2.default.createElement("input",{type:"text",className:"form-control",id:"coupon",name:"coupon",autoComplete:"off",ref:function ref(t){e.couponInput=t}})),_react2.default.createElement(Detail,{project:a}),_react2.default.createElement("div",{className:"text-center"},_react2.default.createElement("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:n},"Place order")))}}],[{key:"propTypes",get:function get(){return{onSuccess:_propTypes2.default.func.isRequired}}}]),RawCheckoutForm}();function ErrorMessage(e){var t=e.message;return t?_react2.default.createElement("div",{className:"alert alert-danger"},t):null}function Detail(e){var t=e.project,r=t.users.length,n=t.trialing&&t.trialDaysLeft<1,a=t.trialEnd&&_moment2.default.unix(t.trialEnd).format("YYYY-MM-DD");return _react2.default.createElement("div",{className:"well license"},_react2.default.createElement("label",null,"Order details"),_react2.default.createElement("hr",null),_react2.default.createElement("p",null,"Size: ",r," ",r>1?"people":"person"),_react2.default.createElement("p",null,"Project: ",_react2.default.createElement("i",null,_react2.default.createElement("a",{href:"/"+t.name},t.displayName))),_react2.default.createElement("p",null,"Price: ¥1000 per person, per month (without tax)"),_react2.default.createElement("p",null,"Next billing date: ",n?"Today":a))}var CheckoutForm=exports.CheckoutForm=(0,_reactStripeElements.injectStripe)(RawCheckoutForm);

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"prop-types":186,"react-stripe-elements":216}],336:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_reactStripeElements=require("react-stripe-elements"),_panel=require("./panel"),_checkoutForm=require("./checkout-form");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var NewBillingsPage=function(e){function NewBillingsPage(){_classCallCheck(this,NewBillingsPage);var e=_possibleConstructorReturn(this,(NewBillingsPage.__proto__||Object.getPrototypeOf(NewBillingsPage)).call(this));return e.onSuccess=e.onSuccess.bind(e),e.state={thankyou:!1,stripe:null},e}return _inherits(NewBillingsPage,_react.Component),_createClass(NewBillingsPage,[{key:"componentDidMount",value:function componentDidMount(){var e=this,t="pk_live_ZOqJedg3NuctNSITGRIuRICk";window.Stripe?this.setState({stripe:window.Stripe(t)}):document.querySelector("#stripe-js").addEventListener("load",function(){e.setState({stripe:window.Stripe(t)})})}},{key:"onSuccess",value:function onSuccess(){this.setState({thankyou:!0})}},{key:"render",value:function render(){var e=_stores2.default.CurrentProject.get();return this.state.thankyou?_react2.default.createElement(_panel.Panel,{project:e},_react2.default.createElement("div",{className:"thankyou-block text-center"},_react2.default.createElement("img",{src:"https://i.gyazo.com/61368a61a0dc97ce5ab3ce3b6f9704b9.png"}),_react2.default.createElement("div",{className:"head"},"Thank you!"),_react2.default.createElement("p",null,"Your payment is being processed and your project has been activated."),_react2.default.createElement("a",{className:"btn btn-primary",href:"/projects/"+e.name+"/settings/billing"},"Got it"))):_react2.default.createElement(_panel.Panel,{project:e},_react2.default.createElement(_reactStripeElements.StripeProvider,{stripe:this.state.stripe},_react2.default.createElement(_reactStripeElements.Elements,null,_react2.default.createElement(_checkoutForm.CheckoutForm,{onSuccess:this.onSuccess}))))}}]),NewBillingsPage}();exports.default=NewBillingsPage;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"./checkout-form":335,"./panel":337,"react-stripe-elements":216}],337:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Panel=Panel;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Panel(e){var a=e.project,t=e.children;return _react2.default.createElement("div",{className:"container new-billings-page"},_react2.default.createElement("div",{className:"row"},_react2.default.createElement("div",{className:"col-md-8 col-md-offset-2 col-sm-12 col-sm-offset-0"},_react2.default.createElement("ol",{className:"breadcrumb"},_react2.default.createElement("li",null,_react2.default.createElement("a",{href:"/projects/"+a.name+"/settings/billing"},a.displayName," (Billing)"))),_react2.default.createElement("h1",null,"Payment"),_react2.default.createElement("div",{className:"panel panel-default"},_react2.default.createElement("div",{className:"panel-body"},t)))))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{}],338:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_pageTitle=require("../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var NewButton=function(e){function NewButton(){_classCallCheck(this,NewButton);var e=_possibleConstructorReturn(this,(NewButton.__proto__||Object.getPrototypeOf(NewButton)).call(this));return e.state=e.makeState(),e.subscribe(_stores2.default.CurrentProject,_stores2.default.Page,_stores2.default.SearchForm,_stores2.default.Layout),e}return _inherits(NewButton,_baseComponent2.default),_createClass(NewButton,[{key:"makeState",value:function makeState(){return{projectName:_stores2.default.CurrentProject.get().name,pageTitle:_stores2.default.Page.title,searchFormValue:_stores2.default.SearchForm.get().trim(),layout:_stores2.default.Layout.get()}}},{key:"onStoreChange",value:function onStoreChange(e){e.store,e.event;this.mounted&&this.setState(this.makeState())}},{key:"render",value:function render(){var e=this.state,t=e.projectName,r=e.pageTitle,o=e.searchFormValue,n=e.layout,a="/"+t+"/new";return!o||"page"===n&&(0,_pageTitle.toTitleLc)(r)===(0,_pageTitle.toTitleLc)(o)||(a="/"+t+"/"+encodeURIComponent(o)),_react2.default.createElement("a",{className:"new-button",href:a,rel:"route",title:"New"},_react2.default.createElement("div",{className:"horizontal-line"}),_react2.default.createElement("div",{className:"vertilcal-line"}))}}]),NewButton}();exports.default=NewButton;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../share/page-title":589,"../stores/":520,"./base-component":261}],339:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_newProjectModal=require("./modals/new-project-modal"),_newProjectModal2=_interopRequireDefault(_newProjectModal),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_logoutLink=require("./logout-link"),_logoutLink2=_interopRequireDefault(_logoutLink),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var NoProjectPage=function(e){function NoProjectPage(e){_classCallCheck(this,NoProjectPage);var t=_possibleConstructorReturn(this,(NoProjectPage.__proto__||Object.getPrototypeOf(NoProjectPage)).call(this,e));return t.state={newProjectModal:!1,error:""},(0,_lodash.bindAll)(t,["onClickNewProject"]),t}return _inherits(NoProjectPage,_react2.default.Component),_createClass(NoProjectPage,[{key:"onClickNewProject",value:function onClickNewProject(){this.setState({newProjectModal:!0})}},{key:"renderError",value:function renderError(){return _react2.default.createElement("div",{className:"error"},this.state.error)}},{key:"render",value:function render(){var e=this,t=_stores2.default.CurrentUser.get();return _react2.default.createElement("div",{className:"container no-project-page"},_react2.default.createElement("div",{className:"text-center"},_react2.default.createElement("img",{className:"logo",src:"/assets/landing/img/logo.png"}),_react2.default.createElement("h1",null,"Welcome, ",t.displayName||t.email,"!"),_react2.default.createElement("div",{className:"panel-new"},_react2.default.createElement("button",{className:"btn btn-lg btn-primary",onClick:this.onClickNewProject},"Create new project"),_react2.default.createElement("p",null,"To join existing projects, ask your friends or co-workers for an invitation link.")),_react2.default.createElement("hr",{style:{borderColor:"rgba(0, 0, 0, .1)"}}),_react2.default.createElement("p",null,"If you think you’ve logged in with your different account, ",_react2.default.createElement("br",null),"please ",_react2.default.createElement(_logoutLink2.default,{role:"button"},"switch the account")," from ",t.email,".")),_react2.default.createElement(_newProjectModal2.default,{show:this.state.newProjectModal,onHide:function onHide(){e.setState({newProjectModal:!1})}}))}}]),NoProjectPage}();exports.default=NoProjectPage;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./logout-link":308,"./modals/new-project-modal":315}],340:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=PageAlert;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_titleDuplicate=require("./title-duplicate"),_titleDuplicate2=_interopRequireDefault(_titleDuplicate),_replacePageLinks=require("./replace-page-links"),_replacePageLinks2=_interopRequireDefault(_replacePageLinks);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PageAlert(){return _react2.default.createElement("div",{className:"page-alert"},_react2.default.createElement(_titleDuplicate2.default,null),_react2.default.createElement(_replacePageLinks2.default,null))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./replace-page-links":341,"./title-duplicate":342}],341:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_apiClient=require("../../lib/api-client/"),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(a,r){try{var s=t[a](r),o=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../../share/debug")(__filename),ReplacePageLinksAlert=function(e){function ReplacePageLinksAlert(e){_classCallCheck(this,ReplacePageLinksAlert);var t=_possibleConstructorReturn(this,(ReplacePageLinksAlert.__proto__||Object.getPrototypeOf(ReplacePageLinksAlert)).call(this,e));return(0,_lodash.bindAll)(t,"onSubmit","onDismiss"),t.state={oldTitle:_stores2.default.Page.title,newTitle:_stores2.default.Page.title,linksAndIconsFrom:_stores2.default.RelatedPage.linksAndIconsFrom.map(function(e){return e.title}),waitingResponse:!1},t.subscribe(_stores2.default.Page,_stores2.default.RelatedPage),t}return _inherits(ReplacePageLinksAlert,_baseComponent2.default),_createClass(ReplacePageLinksAlert,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store,n=e.event;switch(t){case _stores2.default.Page:switch(n){case"load":case"setTitle":this.setState({newTitle:_stores2.default.Page.title,oldTitle:_stores2.default.Page.title});break;case"setTitle:self":this.setState({newTitle:_stores2.default.Page.title})}break;case _stores2.default.RelatedPage:var a=_stores2.default.Page.title,r=_stores2.default.RelatedPage.linksAndIconsFrom.map(function(e){return e.title});this.setState({oldTitle:a,linksAndIconsFrom:r})}}},{key:"onSubmit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,n,a,r,s,o;return regeneratorRuntime.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return e.preventDefault(),t=this.state,n=t.oldTitle,a=t.newTitle,r=_stores2.default.CurrentProject.get(),debug("submit"),this.setState({waitingResponse:!0}),i.prev=5,i.next=8,_apiClient.apiClient.post("/api/pages/"+r.name+"/replace/links",{from:n,to:a});case 8:s=i.sent,debug(s.data.message),alert(s.data.message),i.next=19;break;case 13:return i.prev=13,i.t0=i.catch(5),o=i.t0.response?i.t0.response.data.message:i.t0.message,debug(o),alert(o),i.abrupt("return");case 19:this.setState({oldTitle:a,waitingResponse:!1}),this.refreshRelatedPages(a);case 21:case"end":return i.stop()}},_callee,this,[[5,13]])}));return function onSubmit(t){return e.apply(this,arguments)}}()},{key:"onDismiss",value:function onDismiss(){var e=this.state.newTitle;this.setState({oldTitle:e,waitingResponse:!1}),this.refreshRelatedPages(e)}},{key:"refreshRelatedPages",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t;return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return debug("refresh related pages"),n.next=3,_stores2.default.Page.fetch(e);case 3:t=n.sent,_stores2.default.RelatedPage.compileSync(t);case 5:case"end":return n.stop()}},_callee2,this)}));return function refreshRelatedPages(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this.state,t=e.oldTitle,n=e.newTitle,a=e.linksAndIconsFrom,r=e.waitingResponse;return"new"===t||a.length<1||t===n?null:_react2.default.createElement(_reactBootstrap.Alert,{bsStyle:"success",className:"replace-page-links-alert",onDismiss:this.onDismiss},_react2.default.createElement("form",{className:"links-change-form",onSubmit:this.onSubmit},_react2.default.createElement("p",null,"This page is linked from ",a.length," pages: ",a.join(", ")),_react2.default.createElement("button",{type:"submit",className:(0,_classnames2.default)(["btn","btn-primary"],{disabled:r})},"Update links from [",t,"] to [",n,"] ",r&&_react2.default.createElement("i",{className:"fa fa-spinner"}))))}}]),ReplacePageLinksAlert}();exports.default=ReplacePageLinksAlert;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/components/page-alert/replace-page-links.js")
    },{"../../../../share/debug":566,"../../lib/api-client/":452,"../../stores/":520,"../base-component":261,"classnames":93}],342:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_pageTitle=require("../../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PageTitleDuplicateAlert=function(e){function PageTitleDuplicateAlert(e){_classCallCheck(this,PageTitleDuplicateAlert);var t=_possibleConstructorReturn(this,(PageTitleDuplicateAlert.__proto__||Object.getPrototypeOf(PageTitleDuplicateAlert)).call(this,e));return t.state={isTitleDuplicated:_stores2.default.Page.isTitleDuplicated},t.subscribe(_stores2.default.Page),t}return _inherits(PageTitleDuplicateAlert,_baseComponent2.default),_createClass(PageTitleDuplicateAlert,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store;e.event;switch(t){case _stores2.default.Page:var r=_stores2.default.Page.isTitleDuplicated;this.setState({isTitleDuplicated:r})}}},{key:"render",value:function render(){if(!this.state.isTitleDuplicated)return null;var e=_stores2.default.CurrentProject.get().name,t=_stores2.default.Line.lines.getTitle();return _react2.default.createElement("div",{className:"alert alert-info title-duplicate"},'"',_react2.default.createElement("a",{href:"/"+e+"/"+(0,_pageTitle.encodeTitleURI)(t)},t),'" already exists.')}}]),PageTitleDuplicateAlert}();exports.default=PageTitleDuplicateAlert;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/page-title":589,"../../stores/":520,"../base-component":261}],343:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applySuggest=applySuggest;var _=require("./"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_pageTitle=require("../../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function applySuggest(e){var t=e.page,r=e.char,s=e.line,a=e.suggest,i=e.type,o=e.icon;switch(i){case _.PageLinkTypes.link:return _stores2.default.Cursor.setPosition({char:r,line:s}),_stores2.default.Line.deleteChar(t.charLength+2),o?_stores2.default.Line.addChar("["+a+".icon]"):!a.includes("#")&&/[[\]]/.test(a)?_stores2.default.Line.addChar("#"+(0,_pageTitle.spaceToUnderscore)(a)):_stores2.default.Line.addChar("["+a+"]");case _.PageLinkTypes.hashTag:return _stores2.default.Cursor.setPosition({char:r,line:s}),_stores2.default.Line.deleteChar(t.charLength+1),o?_stores2.default.Line.addChar("["+a+".icon]"):_stores2.default.Line.addChar("#"+(0,_pageTitle.spaceToUnderscore)(a))}}

    },{"../../../../share/page-title":589,"../../stores/":520,"./":344}],344:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageLinkTypes=void 0,exports.PageLink=PageLink;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_suggestPageLink=require("./suggest-page-link"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_projectName=require("../../../../share/validator/project-name"),_pageTitle=require("../../../../share/validator/page-title"),_pageTitle2=require("../../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PageLink(e){var a=e.project,t=e.page,r=e.line,s=e.charIndex,i=e.type,l=e.children,n=e.hasCursor,u="page-link";if(a){if((0,_projectName.validateProjectName)(a).isInvalid)return l;if(!t)return _react2.default.createElement("a",{type:i,href:"/"+a+"/",className:u,target:"_blank"},l);var o="/"+a+"/"+(0,_pageTitle2.encodeTitleURI)(t)+(r?"#"+r:"");return _react2.default.createElement("a",{type:i,href:o,className:u,target:"_blank"},l)}return t?(0,_pageTitle.validatePageTitle)(t).isInvalid?l:r?(u=(0,_classnames2.default)(u,{"empty-page-link":!isPageExists(t)}),_react2.default.createElement("a",{type:i,href:"./"+(0,_pageTitle2.encodeTitleURI)(t)+"#"+r,className:u,rel:"route"},l)):_react2.default.createElement(_suggestPageLink.SuggestPageLink,{page:t,type:i,hasCursor:n,charIndex:s},l):l}var PageLinkTypes=exports.PageLinkTypes={hashTag:"hashTag",link:"link"};function isPageExists(e){return _stores2.default.QuickSearch.exists(e)||_stores2.default.RelatedPage.exists(e)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/page-title":589,"../../../../share/validator/page-title":622,"../../../../share/validator/project-name":623,"../../stores/":520,"./suggest-page-link":345,"classnames":93}],345:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SuggestPageLink=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_get=function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,r)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(r):void 0},_createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactDisplaySwitch=require("react-display-switch"),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_=require("./"),_propsHasChanged=require("../../lib/props-has-changed"),_propsHasChanged2=_interopRequireDefault(_propsHasChanged),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_suggestPopup=require("./suggest-popup"),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_pageTitle=require("../../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var SuggestPageLink=exports.SuggestPageLink=function(e){function SuggestPageLink(){_classCallCheck(this,SuggestPageLink);var e=_possibleConstructorReturn(this,(SuggestPageLink.__proto__||Object.getPrototypeOf(SuggestPageLink)).call(this));return e.state={exist:!1},e.subscribe(_stores2.default.QuickSearch,_stores2.default.RelatedPage),e}return _inherits(SuggestPageLink,_baseComponent2.default),_createClass(SuggestPageLink,null,[{key:"propTypes",get:function get(){return{page:_propTypes2.default.string.isRequired,hasCursor:_propTypes2.default.bool.isRequired,charIndex:_propTypes2.default.number,type:_propTypes2.default.oneOf(Object.values(_.PageLinkTypes)).isRequired}}}]),_createClass(SuggestPageLink,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){this.setState({exist:this.isExist(e)})}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){return!!(0,_propsHasChanged2.default)(e,this.props,{skip:"children"})||!!(0,_propsHasChanged2.default)(t,this.state)}},{key:"componentDidMount",value:function componentDidMount(){_get(SuggestPageLink.prototype.__proto__||Object.getPrototypeOf(SuggestPageLink.prototype),"componentDidMount",this).call(this),this.setState({exist:this.isExist()})}},{key:"onStoreChange",value:function onStoreChange(e){e.store,e.event;this.setState({exist:this.isExist()})}},{key:"isExist",value:function isExist(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).page;return _stores2.default.QuickSearch.exists(e)||_stores2.default.RelatedPage.exists(e)}},{key:"render",value:function render(){var e=this,t=this.props.page,r=(0,_classnames2.default)("page-link",{"empty-page-link":!this.state.exist}),n=function Atag(){var n=(0,_lodash.omit)(e.props,["page","hasCursor","charIndex"]);return _react2.default.createElement("a",_extends({},n,{className:r,href:"./"+(0,_pageTitle.encodeTitleURI)(t),rel:"route"}))};if(!this.props.hasCursor||!_reactDisplaySwitch.When.case("project_member_user"))return _react2.default.createElement(n,null);return _react2.default.createElement("span",{ref:function ref(t){e.pageLinkDom=t}},_react2.default.createElement(n,null),_react2.default.createElement(function SuggestPopupMenu(){if(!e.props.hasCursor)return null;var t=_stores2.default.Cursor.getPosition().line;return _react2.default.createElement(_suggestPopup.SuggestPopup,{getTarget:function getTarget(){return e.pageLinkDom},page:e.props.page,char:e.props.charIndex,line:t,type:e.props.type})},null))}}]),SuggestPageLink}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/page-title":589,"../../lib/props-has-changed":472,"../../stores/":520,"../base-component":261,"./":344,"./suggest-popup":346,"classnames":93,"prop-types":186,"react-display-switch":208}],346:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SuggestPopup=void 0;var _get=function get(e,t,s){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,s)}if("value"in o)return o.value;var n=o.get;return void 0!==n?n.call(s):void 0},_createClass=function(){function defineProperties(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,s){return t&&defineProperties(e.prototype,t),s&&defineProperties(e,s),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_=require("./"),_popupMenu=require("../popup-menu"),_applySuggest=require("./apply-suggest"),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_browser=require("../../lib/browser");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var SuggestPopup=exports.SuggestPopup=function(e){function SuggestPopup(e){_classCallCheck(this,SuggestPopup);var t=_possibleConstructorReturn(this,(SuggestPopup.__proto__||Object.getPrototypeOf(SuggestPopup)).call(this,e));return t.subscribe(_stores2.default.SuggestPopup),t.state={suggests:[],index:-1,visible:!0},t}return _inherits(SuggestPopup,_baseComponent2.default),_createClass(SuggestPopup,null,[{key:"propTypes",get:function get(){return{page:_propTypes2.default.string.isRequired,char:_propTypes2.default.number.isRequired,line:_propTypes2.default.number.isRequired,type:_propTypes2.default.oneOf(Object.values(_.PageLinkTypes)).isRequired,getTarget:_propTypes2.default.func.isRequired}}}]),_createClass(SuggestPopup,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store,s=e.event;switch(t){case _stores2.default.SuggestPopup:switch(s){case"select-next":var o=this.state.index+1;o>this.state.suggests.length-1&&(o=0),this.setState({index:o});break;case"select-prev":var r=this.state.index-1;r<0&&(r=this.state.suggests.length-1),this.setState({index:r});break;case"submit":this.onSubmit(),_stores2.default.SuggestPopup.hide();break;case"submit-icon":this.onSubmit({icon:!0}),_stores2.default.SuggestPopup.hide();break;default:this.setState({visible:_stores2.default.SuggestPopup.visible})}}}},{key:"componentDidMount",value:function componentDidMount(){_get(SuggestPopup.prototype.__proto__||Object.getPrototypeOf(SuggestPopup.prototype),"componentDidMount",this).call(this),_stores2.default.SuggestPopup.visible=!0,this.setState(Object.assign({index:-1},this.getSuggests(this.props.page)))}},{key:"componentWillUnmount",value:function componentWillUnmount(){_get(SuggestPopup.prototype.__proto__||Object.getPrototypeOf(SuggestPopup.prototype),"componentWillUnmount",this).call(this),_stores2.default.SuggestPopup.visible=!1}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){this.props.page===e.page&&this.props.char===e.char&&this.props.line===e.line&&this.props.type===e.type||this.setState(Object.assign({index:-1},this.getSuggests(e.page)))}},{key:"getSuggests",value:function getSuggests(e){var t=void 0;switch(this.props.type){case _.PageLinkTypes.link:t=_stores2.default.QuickSearch.linkSuggest(e).map(function(e){return e.title});break;case _.PageLinkTypes.hashTag:t=_stores2.default.QuickSearch.hashTagSuggest(e).map(function(e){return e.title})}return{suggests:t}}},{key:"onSubmit",value:function onSubmit(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{icon:!1}).icon,t=this.props,s=t.page,o=t.char,r=t.line,n=t.type;if(!(this.state.index<0)){var u=this.state.suggests[this.state.index];u&&(0,_applySuggest.applySuggest)({page:s,char:o,line:r,suggest:u,type:n,icon:e})}}},{key:"render",value:function render(){if(_stores2.default.Cursor.visiblePopupMenu)return null;var e=this.state,t=e.suggests,s=e.index;if(!e.visible)return null;if(t.length<1||!this.props.getTarget())return _stores2.default.SuggestPopup.visible=!1,null;var o=this.props,r=o.page,n=o.char,u=o.line,i=o.type,p=(0,_lodash.range)(0,t.length).map(function(e){var o=t[e],p=s===e;return _react2.default.createElement(_popupMenu.Button,{onClick:function onClick(e){return(0,_applySuggest.applySuggest)({page:r,char:n,line:u,type:i,suggest:o})},className:(0,_classnames2.default)({selected:p}),key:o},o)});return _stores2.default.SuggestPopup.visible=!0,_react2.default.createElement(_popupMenu.PopupMenu,{target:this.props.getTarget(),className:(0,_classnames2.default)({vertical:(0,_browser.isTouchDevice)()})},(0,_browser.isTouchDevice)()?p.reverse():p)}}]),SuggestPopup}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/browser":457,"../../stores/":520,"../base-component":261,"../popup-menu":371,"./":344,"./apply-suggest":343,"classnames":93,"prop-types":186}],347:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=GridStyleItem;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_wikify=require("./wikify"),_wikify2=_interopRequireDefault(_wikify),_icon=require("./icon"),_pageListStyles=require("../../constants/page-list-styles"),_pageTitle=require("../../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function GridStyleItem(e){var t=e.page,a=e.style,r=e.empty,l="/"+_stores2.default.CurrentProject.get().name+"/"+(0,_pageTitle.encodeTitleURI)(t.title),n=t.pin,i=(0,_classnames2.default)("page-list-item","grid-style-item",{empty:r,pin:n});return _react2.default.createElement("li",{className:i},_react2.default.createElement("a",{href:l,rel:"route"},_react2.default.createElement("div",{className:"hover"}),_react2.default.createElement(Pin,{page:t}),_react2.default.createElement("div",{className:"content"},_react2.default.createElement("div",{className:"header"},_react2.default.createElement("div",{className:"title"},t.title)),_react2.default.createElement(Body,{page:t,style:a,empty:r}))))}function Pin(e){return e.page.pin?_react2.default.createElement("div",{className:"pin"}):null}function Body(e){var t=e.page,a=e.style,r=e.empty;return t.image?a===_pageListStyles.PageListStyles.GRID_LARGE?_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(Description,{page:t,fix:!0}),_react2.default.createElement(_icon.Icon,{page:t})):_react2.default.createElement(_icon.Icon,{page:t}):r?_react2.default.createElement(DescriptionLineImg,null):_react2.default.createElement(Description,{page:t})}function Description(e){var t=e.page,a=e.fix;if(!Array.isArray(t.descriptions))return null;var r=(0,_lodash.range)(0,t.descriptions.length).map(function(e){return _react2.default.createElement(_wikify2.default,{key:e},t.descriptions[e])}),l=(0,_classnames2.default)("description",{fix:a});return _react2.default.createElement("div",{className:l},a&&_react2.default.createElement("br",null),r)}function DescriptionLineImg(){var e=(0,_lodash.range)(0,5).map(function(e){return _react2.default.createElement("div",{key:e})});return _react2.default.createElement("div",{className:"description"},_react2.default.createElement("div",{className:"line-img"},e))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/page-title":589,"../../constants/page-list-styles":445,"../../stores/":520,"./icon":348,"./wikify":351,"classnames":93}],348:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Icon=Icon;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lazyLoadImg=require("../lazy-load-img"),_lazyLoadImg2=_interopRequireDefault(_lazyLoadImg),_gyazo=require("../../../../share/gyazo");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Icon(e){var a=e.page;if(!a.image)return null;var t=(0,_gyazo.toGyazoThumbnailUrl)(a.image,{size:400});return _react2.default.createElement("div",{className:"icon"},_react2.default.createElement(_lazyLoadImg2.default,{src:t}))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/gyazo":585,"../lazy-load-img":293}],349:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=PageListItem;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_listStyleItem=require("./list-style-item"),_listStyleItem2=_interopRequireDefault(_listStyleItem),_gridStyleItem=require("./grid-style-item"),_gridStyleItem2=_interopRequireDefault(_gridStyleItem),_pageListStyles=require("../../constants/page-list-styles");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PageListItem(e){if("list"===e.style)return _react2.default.createElement(_listStyleItem2.default,e);if((0,_pageListStyles.isValidPageListStyle)(e.style))return _react2.default.createElement(_gridStyleItem2.default,e);throw new Error('invalid page list style: "'+e.style+'"')}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../constants/page-list-styles":445,"./grid-style-item":347,"./list-style-item":350}],350:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ListStyleItem;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_icon=require("./icon"),_pageTitle=require("../../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ListStyleItem(e){var t=e.page,a="/"+_stores2.default.CurrentProject.get().name+"/"+(0,_pageTitle.encodeTitleURI)(t.title),r=t.pin;return _react2.default.createElement("li",{className:(0,_classnames2.default)("page-list-item","list-style-item",{pin:r})},_react2.default.createElement("a",{href:a,rel:"route"},_react2.default.createElement(_icon.Icon,{page:t}),_react2.default.createElement("div",{className:"content"},_react2.default.createElement("div",{className:t.snipet?"title-with-description":"title"},t.title),_react2.default.createElement(Description,{page:t}))))}function Description(e){var t=e.page;if(!Array.isArray(t.snipet))return null;var a=(0,_lodash.range)(0,t.snipet.length).map(function(e){var a=t.snipet[e];return _react2.default.createElement("span",{key:e,dangerouslySetInnerHTML:{__html:a}})});return _react2.default.createElement("div",{className:"description"},a)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/page-title":589,"../../stores/":520,"./icon":348,"classnames":93}],351:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Wikify;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_scrapboxParser=require("../../../../share/scrapbox-parser"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Wikify(e){var r=e.children,t=(0,_scrapboxParser.parseScrapboxSyntax)(r);return _react2.default.createElement("p",null,renderNode(t))}function renderNode(e){if("string"==typeof e)return e;if(e instanceof Array)return(0,_lodash.range)(0,e.length).map(function(r){return _react2.default.createElement("span",{key:r},renderNode(e[r]))});if(!e)return null;if(/image|gyazo|youtube/i.test(e.type))return null;switch(e.type){case"link":case"hashTag":case"url":case"audio":case"audioLink":return _react2.default.createElement("span",{className:"link"},e.children);case"urlLink":return _react2.default.createElement("span",{className:"link"},e.unit.title);case"code":return _react2.default.createElement("code",null,e.children);case"icon":case"strong-icon":var r=e.unit,t=r.project,n=r.page;t||(t=_stores2.default.CurrentProject.get().name);var a="/api/pages/"+t+"/"+encodeURIComponent(n)+"/icon";return _react2.default.createElement("img",{className:"inline-icon",src:a});case"location":return e.unit.title||null}return renderNode(e.children)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/scrapbox-parser":605,"../../stores/":520}],352:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),_get=function get(e,t,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:get(n,t,o)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(o):void 0},_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_pageListItem=require("./page-list-item/"),_pageListItem2=_interopRequireDefault(_pageListItem),_updateListIconSize2=require("../lib/update-list-icon-size"),_updateListIconSize3=_interopRequireDefault(_updateListIconSize2),_searchNotFound=require("./search-not-found"),_searchNotFound2=_interopRequireDefault(_searchNotFound);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename),PageList=function(e){function PageList(e){_classCallCheck(this,PageList);var t=_possibleConstructorReturn(this,(PageList.__proto__||Object.getPrototypeOf(PageList)).call(this,e));return t.state={pages:[]},t.requireResize=!0,(0,_lodash.bindAll)(t,"onWindowScroll","onWindowResize"),t.subscribe(_stores2.default.PageListStyle,_stores2.default.PageList),t}return _inherits(PageList,_baseComponent2.default),_createClass(PageList,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store;e.event;switch(t){case _stores2.default.PageListStyle:var o=_stores2.default.PageListStyle.get();this.setState({style:o}),this.updateListIconSize();break;case _stores2.default.PageList:var i=_stores2.default.PageList.get();this.setState({pages:i})}}},{key:"componentDidMount",value:function componentDidMount(){var e=this;_get(PageList.prototype.__proto__||Object.getPrototypeOf(PageList.prototype),"componentDidMount",this).call(this),this.setState({pages:_stores2.default.PageList.get(),style:_stores2.default.PageListStyle.get()}),window.addEventListener("scroll",this.onWindowScroll),window.addEventListener("resize",this.onWindowResize);var t=void 0;setInterval(function(){var o=document.body.clientWidth;t!==o&&(e.onWindowResize(),t=o)}),setTimeout(function(){e.updateListIconSize()},100)}},{key:"componentWillUnmount",value:function componentWillUnmount(){_get(PageList.prototype.__proto__||Object.getPrototypeOf(PageList.prototype),"componentWillUnmount",this).call(this),window.removeEventListener("scroll",this.onWindowScroll),window.removeEventListener("resize",this.onWindowResize)}},{key:"componentWillUpdate",value:function componentWillUpdate(e,t){this.state.pages.length!==t.pages.length&&(this.requireResize=!0)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.requireResize&&this.props.show&&(this.updateListIconSize(),this.requireResize=!1)}},{key:"onWindowScroll",value:function onWindowScroll(e){if(this.props.autoScroll){window.scrollY+window.innerHeight>=document.body.clientHeight-400&&(debug("scrolled to the bottom"),_stores2.default.PageList.loadNextPage())}}},{key:"onWindowResize",value:function onWindowResize(e){this.props.show?this.updateListIconSize():this.requireResize=!0}},{key:"updateListIconSize",value:function updateListIconSize(){(0,_updateListIconSize3.default)(this.refs.pageList,"page-list",_stores2.default.PageListStyle.get())}},{key:"render",value:function render(){var e=this,t=_stores2.default.PageList.isSearch?"list":this.state.style,o=this.state.pages.map(function(e){return _react2.default.createElement(_pageListItem2.default,{key:e.id,page:e,style:t})}),i=(0,_classnames2.default)(t,{grid:/^grid-/.test(t)});return _react2.default.createElement("div",{className:"page-list clearfix",ref:"pageList"},_react2.default.createElement("ul",{className:i},o,_react2.default.createElement(function ShowSearchNotFound(){return _stores2.default.PageList.isSearch&&0===e.state.pages.length?_react2.default.createElement(_searchNotFound2.default,null):null},null)))}}],[{key:"propTypes",get:function get(){return{autoScroll:_propTypes2.default.bool.isRequired,show:_propTypes2.default.bool.isRequired}}}]),PageList}();exports.default=PageList;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/components/page-list.js")
    },{"../../../share/debug":566,"../lib/update-list-icon-size":494,"../stores/":520,"./base-component":261,"./page-list-item/":349,"./search-not-found":406,"classnames":93,"prop-types":186}],353:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Author;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_=require("./"),_userIcon=require("../icon/user-icon"),_userIcon2=_interopRequireDefault(_userIcon),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Author(){var e=_stores2.default.Page.get();if(!e)return null;var r=e.collaborators&&e.collaborators.length>0;if(!e.user&&!r)return null;var t=e.collaborators.map(function(e){return _react2.default.createElement(_userIcon2.default,{key:e.id,user:e})});return _react2.default.createElement(_.Item,null,_react2.default.createElement("div",null,_react2.default.createElement("span",{className:"creator"},_react2.default.createElement(_userIcon2.default,{user:e.user})),r?"working with":"created",_react2.default.createElement("span",{className:"collaborator"},t)))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../icon/user-icon":289,"./":362}],354:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CopyAllText;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_=require("./"),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_execCopy=require("exec-copy"),_execCopy2=_interopRequireDefault(_execCopy);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function CopyAllText(){return _react2.default.createElement(_.Item,null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:function onClick(){var e=_stores2.default.Line.getAll().map(function(e){return e.text}).join("\n");(0,_execCopy2.default)(e)}},"Copy All Text"))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../action-link":257,"./":362,"exec-copy":139}],355:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CopyLink;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_execCopy=require("exec-copy"),_execCopy2=_interopRequireDefault(_execCopy),_=require("./"),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_url=require("../../lib/url");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function CopyLink(){return _react2.default.createElement(_.Item,null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:function onClick(){var e=_stores2.default.Page.get(),t=_stores2.default.CurrentProject.get().name,r=e.title;(0,_execCopy2.default)((0,_url.decodeURIForPlainText)(location.href),function(e){prompt(t+"/"+r,e)})}},"Copy link"))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/url":495,"../../stores/":520,"../action-link":257,"./":362,"exec-copy":139}],356:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=DeletePage;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_=require("./"),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function DeletePage(){return _react2.default.createElement(_.Item,null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:function onClick(){var e="Are you sure you want to delete “"+_stores2.default.Page.title+"”?";confirm(e)&&_stores2.default.Page.delete()},title:"Delete"},_react2.default.createElement("i",{className:"fa fa-trash-o"})," Delete this page"))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../action-link":257,"./":362}],357:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_=require("./"),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink),_drawModal=require("../modals/draw-modal/"),_drawModal2=_interopRequireDefault(_drawModal);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Drawing=function(e){function Drawing(){_classCallCheck(this,Drawing);var e=_possibleConstructorReturn(this,(Drawing.__proto__||Object.getPrototypeOf(Drawing)).call(this));return e.state={showModal:!1},(0,_lodash.bindAll)(e,"onClick","onHide"),e}return _inherits(Drawing,_react.Component),_createClass(Drawing,[{key:"onClick",value:function onClick(){this.setState({showModal:!0})}},{key:"onHide",value:function onHide(){this.setState({showModal:!1})}},{key:"render",value:function render(){var e=this.state.showModal;return _react2.default.createElement(_.Item,null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:this.onClick},"Drawing"),_react2.default.createElement(_drawModal2.default,{show:e,onHide:this.onHide}))}}]),Drawing}();exports.default=Drawing;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../action-link":257,"../modals/draw-modal/":312,"./":362}],358:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=DuplicatePage;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_page=require("page"),_page2=_interopRequireDefault(_page),_=require("./"),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function DuplicatePage(){return _react2.default.createElement(_.Item,null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:function onClick(){(0,_page2.default)(location.pathname+"/copy")}},"Duplicate this page"))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../action-link":257,"./":362,"page":169}],359:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_=require("./"),_2=_interopRequireDefault(_),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ExpandableMenuXs=function(e){function ExpandableMenuXs(){_classCallCheck(this,ExpandableMenuXs);var e=_possibleConstructorReturn(this,(ExpandableMenuXs.__proto__||Object.getPrototypeOf(ExpandableMenuXs)).call(this));return e.state={expand:!1,page:_stores2.default.Page.get()},(0,_lodash.bindAll)(e,"toggle"),e.subscribe(_stores2.default.Page),e}return _inherits(ExpandableMenuXs,_baseComponent2.default),_createClass(ExpandableMenuXs,[{key:"onStoreChange",value:function onStoreChange(){this.setState({page:_stores2.default.Page.get()})}},{key:"toggle",value:function toggle(){this.setState({expand:!this.state.expand})}},{key:"render",value:function render(){var e=this,t=(0,_classnames2.default)(["toggle-button",this.state.expand?"open":"closed"]);return _react2.default.createElement("div",{className:"expandable-menu visible-xs"},_react2.default.createElement(function Menus(){var t=e.state,n=t.page,a=t.expand;return n&&a?_react2.default.createElement(_2.default,{xs:!0}):null},null),_react2.default.createElement("div",{className:t,onClick:this.toggle},_react2.default.createElement("span",{className:"icon icon-arrow-left"})))}}]),ExpandableMenuXs}();exports.default=ExpandableMenuXs;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../base-component":261,"./":362,"classnames":93}],360:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtensionItems=exports.createExtensionMenus=void 0;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_=require("./"),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var createExtensionMenus=exports.createExtensionMenus=function createExtensionMenus(e){for(var t=e.onClick,n=e.position,o=void 0===n?"right":n,r=e.showTooltip,a=void 0===r||r,i=Array.from(_stores2.default.PageMenu.menus.keys()),s=[],l=0;l<i.length;l++){var c=i[l];if("default"!==c){var u=_stores2.default.PageMenu.menus.get(c),f="dropdownMenu_"+l,d=a&&_react2.default.createElement(_reactBootstrap.Tooltip,{id:"tooltip_"+f},c),p=_react2.default.createElement("img",{src:u.image,className:"extension-btn",onClick:u.onClick||t});s.push(_react2.default.createElement(_.Menu,{className:"page-menu-extension",title:c,key:f,position:o,tooltip:d,icon:p},createExtensionItems({title:c,items:u.items})))}}return s},createExtensionItems=exports.createExtensionItems=function createExtensionItems(e){for(var t=e.title,n=e.items,o=[],r=function _loop(e){var r=n[e],a="item_"+e;if(r.separator)o.push(_react2.default.createElement(_.Separator,{key:a}));else{var i=function createItem(e){o.push(_react2.default.createElement(_.Item,{key:a,className:"extension-item"},_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:r.onClick},r.image&&_react2.default.createElement("img",{src:r.image}),e)))};if("function"==typeof r.title)try{i(r.title())}catch(e){console.error(e.stack||e)}else i(r.title)}e!==n.length-1||"default"!==t||r.separator||o.push(_react2.default.createElement(_.Separator,{key:"sparator_"+e}))},a=0;a<n.length;a++)r(a);return o};

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../action-link":257,"./":362}],361:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_=require("./"),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var HideDot=function(e){function HideDot(){_classCallCheck(this,HideDot);var e=_possibleConstructorReturn(this,(HideDot.__proto__||Object.getPrototypeOf(HideDot)).call(this));return e.state=e.makeState(),e.subscribe(_stores2.default.DisplayStyle),e.onClick=e.onClick.bind(e),e}return _inherits(HideDot,_baseComponent2.default),_createClass(HideDot,[{key:"onStoreChange",value:function onStoreChange(){this.setState(this.makeState())}},{key:"makeState",value:function makeState(){return{hideDots:_stores2.default.DisplayStyle.get("hide-dots")}}},{key:"onClick",value:function onClick(){this.state.hideDots?_stores2.default.DisplayStyle.disable("hide-dots"):_stores2.default.DisplayStyle.enable("hide-dots")}},{key:"render",value:function render(){var e=this.state.hideDots?"Show dots":"Hide dots";return _react2.default.createElement(_.Item,null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:this.onClick,title:e},e))}}]),HideDot}();exports.default=HideDot;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../action-link":257,"../base-component":261,"./":362}],362:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Separator=exports.Item=exports.Menu=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_pageInfoMenu=require("./page-info-menu"),_pageInfoMenu2=_interopRequireDefault(_pageInfoMenu),_pageEditMenu=require("./page-edit-menu/"),_pageEditMenu2=_interopRequireDefault(_pageEditMenu),_extension=require("./extension"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PageMenu=function(e){function PageMenu(e){_classCallCheck(this,PageMenu);var t=_possibleConstructorReturn(this,(PageMenu.__proto__||Object.getPrototypeOf(PageMenu)).call(this,e));return t.state={page:_stores2.default.Page.get(),lines:_stores2.default.Line.lines},t.subscribe(_stores2.default.Page,_stores2.default.Line,_stores2.default.PageMenu,_stores2.default.DisplayStyle),t}return _inherits(PageMenu,_baseComponent2.default),_createClass(PageMenu,null,[{key:"propTypes",get:function get(){return{xs:_propTypes2.default.bool}}}]),_createClass(PageMenu,[{key:"onStoreChange",value:function onStoreChange(e){e.store,e.event;this.mounted&&this.setState({page:_stores2.default.Page.get(),lines:_stores2.default.Line.lines})}},{key:"render",value:function render(){var e=this;if(!this.state.page)return null;var t=(0,_extension.createExtensionMenus)({onClick:function onClick(){return e.forceUpdate()},position:this.props.xs&&"top",showTooltip:!this.props.xs});return _react2.default.createElement("div",{className:(0,_classnames2.default)(["page-menu",this.props.xs&&"xs"])},_react2.default.createElement(_pageInfoMenu2.default,{position:this.props.xs&&"top"}),_react2.default.createElement(_pageEditMenu2.default,{position:this.props.xs&&"top"}),t)}}]),PageMenu}();exports.default=PageMenu;var Menu=exports.Menu=function(e){function Menu(e){_classCallCheck(this,Menu);var t=_possibleConstructorReturn(this,(Menu.__proto__||Object.getPrototypeOf(Menu)).call(this,e));return t.state={top:0},t}return _inherits(Menu,_react.Component),_createClass(Menu,[{key:"render",value:function render(){var e=this,t=(0,_classnames2.default)("dropdown",this.props.className);return _react2.default.createElement("div",{className:t,onClick:function _onClick(t){var n=t.target.getBoundingClientRect();e.setState({top:n.bottom}),e.props.onClick&&e.props.onClick()}.bind(this)},_react2.default.createElement(MenuButton,this.props),_react2.default.createElement(ItemList,_extends({top:this.state.top},this.props)))}}],[{key:"propTypes",get:function get(){return{title:_propTypes2.default.string,icon:_propTypes2.default.object,position:_propTypes2.default.string,children:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.array]),onClick:_propTypes2.default.func,className:_propTypes2.default.string}}}]),Menu}(),MenuButton=function MenuButton(e){var t=e.title,n=e.icon,r=e.tooltip,o=_react2.default.createElement("a",{className:"tool-btn dropdown-toggle",type:"button",id:t,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},n);return r?_react2.default.createElement(_reactBootstrap.OverlayTrigger,{placement:"top",overlay:r},o):o},ItemList=function ItemList(e){var t=e.title,n=e.position,r=e.children,o=e.top,a={};return"top"===n&&(a.top=o),_react2.default.createElement("ul",{className:"dropdown-menu dropdown-menu-"+n,style:a,"aria-labelledby":t},r)},Item=exports.Item=function Item(e){var t=e.title,n=e.children,r=e.className;return _react2.default.createElement("li",{className:(0,_classnames2.default)(t,r)},n)},Separator=exports.Separator=function Separator(){return _react2.default.createElement("li",{role:"separator",className:"divider"})};

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../base-component":261,"./extension":360,"./page-edit-menu/":364,"./page-info-menu":366,"classnames":93,"prop-types":186}],363:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=PageEditMenuForGuest;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_=require("./"),_copyLink=require("../copy-link"),_copyLink2=_interopRequireDefault(_copyLink),_copyAllText=require("../copy-all-text"),_copyAllText2=_interopRequireDefault(_copyAllText),_presentation=require("../presentation"),_presentation2=_interopRequireDefault(_presentation),_hideDots=require("../hide-dots"),_hideDots2=_interopRequireDefault(_hideDots);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PageEditMenuForGuest(e){var t=e.position;return e.persistent?_react2.default.createElement(_.PageEditMenuBase,{position:t},_react2.default.createElement(_copyLink2.default,null),_react2.default.createElement(_reactDisplaySwitch.When,{touch_device:!0},_react2.default.createElement(_copyAllText2.default,null)),_react2.default.createElement(_presentation2.default,null),_react2.default.createElement(_hideDots2.default,null)):_react2.default.createElement(_.PageEditMenuBase,{position:t},_react2.default.createElement(_copyLink2.default,null))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../copy-all-text":354,"../copy-link":355,"../hide-dots":361,"../presentation":368,"./":364,"react-display-switch":208}],364:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();exports.PageEditMenuBase=PageEditMenuBase;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_projectMember=require("./project-member"),_projectMember2=_interopRequireDefault(_projectMember),_guest=require("./guest"),_guest2=_interopRequireDefault(_guest),_=require("../"),_presentation=require("../presentation"),_presentation2=_interopRequireDefault(_presentation),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PageEditMenu=function(e){function PageEditMenu(e){_classCallCheck(this,PageEditMenu);var t=_possibleConstructorReturn(this,(PageEditMenu.__proto__||Object.getPrototypeOf(PageEditMenu)).call(this,e));return t.state={persistent:_stores2.default.Page.persistent},t.subscribe(_stores2.default.Page),t}return _inherits(PageEditMenu,_baseComponent2.default),_createClass(PageEditMenu,[{key:"onStoreChange",value:function onStoreChange(){this.setState({persistent:_stores2.default.Page.persistent})}},{key:"render",value:function render(){var e=this.props.position,t=this.state.persistent;return _stores2.default.PresentationMode.isEnable?_react2.default.createElement(PageEditMenuBase,{position:e},_react2.default.createElement(_presentation2.default,null)):_stores2.default.CurrentUser.isProjectMember?_react2.default.createElement(_projectMember2.default,{position:e,persistent:t}):_react2.default.createElement(_guest2.default,{position:e,persistent:t})}}]),PageEditMenu}();function PageEditMenuBase(e){var t=e.children,r=e.position,n=void 0===r?"right":r,o=_react2.default.createElement("i",{className:"fa fa-file-text-o"});return _react2.default.createElement(_.Menu,{title:"dropdownMenuPageEdit",position:n,icon:o},t)}exports.default=PageEditMenu;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../":362,"../../../stores/":520,"../../base-component":261,"../presentation":368,"./guest":363,"./project-member":365}],365:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=PageEditMenuForProjectMember;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_=require("./"),_2=require("../"),_extension=require("../extension"),_pinPage=require("../pin-page"),_pinPage2=_interopRequireDefault(_pinPage),_deletePage=require("../delete-page"),_deletePage2=_interopRequireDefault(_deletePage),_copyLink=require("../copy-link"),_copyLink2=_interopRequireDefault(_copyLink),_copyAllText=require("../copy-all-text"),_copyAllText2=_interopRequireDefault(_copyAllText),_duplicatePage=require("../duplicate-page"),_duplicatePage2=_interopRequireDefault(_duplicatePage),_uploadImage=require("../upload-image"),_uploadImage2=_interopRequireDefault(_uploadImage),_drawing=require("../drawing"),_drawing2=_interopRequireDefault(_drawing),_presentation=require("../presentation"),_presentation2=_interopRequireDefault(_presentation),_hideDots=require("../hide-dots"),_hideDots2=_interopRequireDefault(_hideDots),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PageEditMenuForProjectMember(e){var t=e.position,a=e.persistent,l=(0,_extension.createExtensionItems)({title:"default",items:_stores2.default.PageMenu.menus.get("default").items});return a?_react2.default.createElement(_.PageEditMenuBase,{position:t},l,_react2.default.createElement(_copyLink2.default,null),_react2.default.createElement(_reactDisplaySwitch.When,{touch_device:!0},_react2.default.createElement(_copyAllText2.default,null)),_react2.default.createElement(_presentation2.default,null),_react2.default.createElement(_hideDots2.default,null),_react2.default.createElement(_reactDisplaySwitch.When,{enable_gyazo_upload:!0,and:!0,touch_device:!0},_react2.default.createElement(_uploadImage2.default,null)),_react2.default.createElement(_reactDisplaySwitch.When,{enable_gyazo_upload:!0},_react2.default.createElement(_drawing2.default,null)),_react2.default.createElement(_duplicatePage2.default,null),_react2.default.createElement(_pinPage2.default,null),_react2.default.createElement(_2.Separator,null),_react2.default.createElement(_deletePage2.default,null)):_react2.default.createElement(_.PageEditMenuBase,{position:t},_react2.default.createElement(_copyLink2.default,null),_react2.default.createElement(_reactDisplaySwitch.When,{enable_gyazo_upload:!0,and:!0,touch_device:!0},_react2.default.createElement(_uploadImage2.default,null)),_react2.default.createElement(_reactDisplaySwitch.When,{enable_gyazo_upload:!0},_react2.default.createElement(_drawing2.default,null)))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../":362,"../../../stores/":520,"../copy-all-text":354,"../copy-link":355,"../delete-page":356,"../drawing":357,"../duplicate-page":358,"../extension":360,"../hide-dots":361,"../pin-page":367,"../presentation":368,"../upload-image":369,"./":364,"react-display-switch":208}],366:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=PageInfoMenu;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_=require("./"),_author=require("./author"),_author2=_interopRequireDefault(_author),_userIcon=require("../icon/user-icon"),_userIcon2=_interopRequireDefault(_userIcon),_dateLabel=require("../date-label"),_dateLabel2=_interopRequireDefault(_dateLabel),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PageInfoMenu(e){var t=e.position,a=void 0===t?"right":t,r=_stores2.default.Page.get();if(!r)return null;var u=_react2.default.createElement(_userIcon2.default,{user:r.user,hasLink:!1});return _react2.default.createElement(_.Menu,{title:"dropdownMenuPageInfo",position:a,icon:u},_react2.default.createElement(_.Item,{name:"author"},_react2.default.createElement("div",null,"created ",_react2.default.createElement(_dateLabel2.default,{unixtime:r.created}),_react2.default.createElement("br",null),"updated ",_react2.default.createElement(_dateLabel2.default,{unixtime:r.updated}))),_react2.default.createElement(_.Separator,null),_react2.default.createElement(_author2.default,null),_react2.default.createElement(_.Separator,null),_react2.default.createElement(_.Item,null,_react2.default.createElement("div",null,_react2.default.createElement("p",null,"views: ",r.views||1))))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../date-label":275,"../icon/user-icon":289,"./":362,"./author":353}],367:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=PinPage;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_=require("./"),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PinPage(){var e=_stores2.default.Page.get();return _react2.default.createElement(_.Item,null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:function onClick(){var t=Number.MAX_SAFE_INTEGER-Math.floor(Date.now()/1e3),n=0===e.pin?t:0;_stores2.default.Page.setPin(n),_stores2.default.Sync.addChange({pin:n}),_stores2.default.Sync.finishChange()}},0===e.pin?"Pin at home":"Unpin from home"))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../action-link":257,"./":362}],368:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_=require("./"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_browser=require("../../lib/browser"),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Presentation=function(e){function Presentation(){_classCallCheck(this,Presentation);var e=_possibleConstructorReturn(this,(Presentation.__proto__||Object.getPrototypeOf(Presentation)).call(this));return e.state=e.makeState(),e.subscribe(_stores2.default.DisplayStyle),e.onClick=e.onClick.bind(e),e}return _inherits(Presentation,_baseComponent2.default),_createClass(Presentation,[{key:"makeState",value:function makeState(){return{presentation:_stores2.default.DisplayStyle.get("presentation")}}},{key:"onStoreChange",value:function onStoreChange(){this.setState(this.makeState())}},{key:"onClick",value:function onClick(){this.state.presentation?_stores2.default.DisplayStyle.disable("presentation"):_stores2.default.DisplayStyle.enable("presentation")}},{key:"render",value:function render(){return(0,_browser.isTouchDevice)()?null:_react2.default.createElement(_.Item,null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:this.onClick},this.state.presentation?"Stop":"Start"," presentation"))}}]),Presentation}();exports.default=Presentation;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/browser":457,"../../stores/":520,"../action-link":257,"../base-component":261,"./":362}],369:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_=require("./"),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink),_gyazoUploadModal=require("../modals/gyazo-upload-modal"),_gyazoUploadModal2=_interopRequireDefault(_gyazoUploadModal);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var GyazoButton=function(e){function GyazoButton(){_classCallCheck(this,GyazoButton);var e=_possibleConstructorReturn(this,(GyazoButton.__proto__||Object.getPrototypeOf(GyazoButton)).call(this));return e.state={showModal:!1},(0,_lodash.bindAll)(e,"onClick","onHideModal"),e}return _inherits(GyazoButton,_react.Component),_createClass(GyazoButton,[{key:"onClick",value:function onClick(){this.setState({showModal:!0})}},{key:"onHideModal",value:function onHideModal(){this.setState({showModal:!1})}},{key:"render",value:function render(){var e=this.state.showModal;return _react2.default.createElement(_.Item,null,_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:this.onClick},"Upload Image"),_react2.default.createElement(_gyazoUploadModal2.default,{show:e,onHide:this.onHideModal}))}}]),GyazoButton}();exports.default=GyazoButton;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../action-link":257,"../modals/gyazo-upload-modal":313,"./":362}],370:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_get=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0},_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_dragAndDrop=require("./drag-and-drop"),_dragAndDrop2=_interopRequireDefault(_dragAndDrop),_editor=require("./editor"),_editor2=_interopRequireDefault(_editor),_relatedPageList=require("./related-page-list/"),_relatedPageList2=_interopRequireDefault(_relatedPageList),_updateListIconSize2=require("../lib/update-list-icon-size"),_updateListIconSize3=_interopRequireDefault(_updateListIconSize2);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Page=function(e){function Page(e){_classCallCheck(this,Page);var t=_possibleConstructorReturn(this,(Page.__proto__||Object.getPrototypeOf(Page)).call(this,e));return t.pageId=_stores2.default.Page.id,t.state={title:_stores2.default.Page.title,persistent:_stores2.default.Page.persistent,enterAnim:!1,leaveAnim:!1,isDragging:!1},t.requireResize=!0,(0,_lodash.bindAll)(t,"onWindowResize"),t.subscribe(_stores2.default.Page),t}return _inherits(Page,_baseComponent2.default),_createClass(Page,[{key:"componentDidMount",value:function componentDidMount(){_get(Page.prototype.__proto__||Object.getPrototypeOf(Page.prototype),"componentDidMount",this).call(this),(0,_jquery2.default)(window).resize(this.onWindowResize),this.updateListIconSize()}},{key:"componentWillUnmount",value:function componentWillUnmount(){_get(Page.prototype.__proto__||Object.getPrototypeOf(Page.prototype),"componentWillUnmount",this).call(this),(0,_jquery2.default)(window).off("resize",this.onWindowResize)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.requireResize&&this.props.show&&(this.updateListIconSize(),this.requireResize=!1)}},{key:"onStoreChange",value:function onStoreChange(){var e=this;if(this.setState({persistent:_stores2.default.Page.persistent}),_stores2.default.Page.id!==this.pageId){""!==_stores2.default.Page.title?(this.setState({title:_stores2.default.Page.title,enterAnim:!0}),setTimeout(function(){e.mounted&&e.setState({enterAnim:!1})},400)):(this.setState({title:_stores2.default.Page.title,leaveAnim:!0}),setTimeout(function(){e.mounted&&e.setState({leaveAnim:!1})},400)),this.pageId=_stores2.default.Page.id}}},{key:"onWindowResize",value:function onWindowResize(e){this.props.show?this.updateListIconSize():this.requireResize=!0}},{key:"updateListIconSize",value:function updateListIconSize(){(0,_updateListIconSize3.default)(this.refs.page,"related-page-list","grid")}},{key:"render",value:function render(){return _react2.default.createElement("div",{className:(0,_classnames2.default)("page-wrapper",{enter:this.state.enterAnim,leave:this.state.leaveAnim})},_react2.default.createElement(_dragAndDrop2.default,null,_react2.default.createElement("div",{className:(0,_classnames2.default)("page",{"not-persistent":!this.state.persistent}),ref:"page"},_react2.default.createElement(_editor2.default,null))),_react2.default.createElement(_relatedPageList2.default,null))}}],[{key:"propTypes",get:function get(){return{show:_propTypes2.default.bool.isRequired}}}]),Page}();exports.default=Page;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../lib/update-list-icon-size":494,"../stores/":520,"./base-component":261,"./drag-and-drop":277,"./editor":279,"./related-page-list/":402,"classnames":93,"prop-types":186}],371:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PopupMenuAtPosition=PopupMenuAtPosition,exports.PopupMenu=PopupMenu,exports.Button=Button;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PopupMenuAtPosition(e){var t=e.x,n=e.y,a=e.children,o=e.className,u={left:t,transform:"translateX("+(90*(.5-(t+(0,_jquery2.default)(".lines").offset().left)/document.body.offsetWidth)-50)+"%)"},l={left:t},r={left:0,top:n};return _react2.default.createElement("div",{className:(0,_classnames2.default)("popup-menu",o),style:r},_react2.default.createElement("div",{className:"button-container",style:u},a),_react2.default.createElement("div",{className:"triangle",style:l}))}function PopupMenu(e){var t=e.target,n=e.children,a=e.className;if(!t)return null;var o=t.offsetLeft+t.offsetWidth/2;return _react2.default.createElement(PopupMenuAtPosition,{x:o,y:t.offsetTop,className:a},n)}function Button(e){var t=e.children,n=e.onClick,a=e.className;return _react2.default.createElement("div",{className:(0,_classnames2.default)("button",a),onMouseDown:function onMouseDown(e){e.preventDefault(),e.stopPropagation()},onClick:n},t)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"classnames":93}],372:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PresentationCSS=function(e){function PresentationCSS(){_classCallCheck(this,PresentationCSS);var e=_possibleConstructorReturn(this,(PresentationCSS.__proto__||Object.getPrototypeOf(PresentationCSS)).call(this));return e.subscribe(_stores2.default.PresentationMode,_stores2.default.DisplayStyle),e.state=e.makeState(),e}return _inherits(PresentationCSS,_baseComponent2.default),_createClass(PresentationCSS,[{key:"makeState",value:function makeState(){return{currentSection:_stores2.default.PresentationMode.currentSection,enable:_stores2.default.PresentationMode.isEnable}}},{key:"onStoreChange",value:function onStoreChange(){this.setState(this.makeState())}},{key:"render",value:function render(){if(!this.state.enable)return null;var e=".line:not(.section-"+_stores2.default.PresentationMode.currentSection+") { display: none; }";return _react2.default.createElement("style",null,e)}}]),PresentationCSS}();exports.default=PresentationCSS;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./base-component":261}],373:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactDisplaySwitch=require("react-display-switch"),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_projectSettingsForm=require("./project-settings-form"),_projectSettingsForm2=_interopRequireDefault(_projectSettingsForm),_projectProFeaturesForm=require("./project-pro-features-form"),_projectProFeaturesForm2=_interopRequireDefault(_projectProFeaturesForm),_projectMembersForm=require("./project-members-form/"),_projectMembersForm2=_interopRequireDefault(_projectMembersForm),_projectThemeForm=require("./project-theme-form"),_projectThemeForm2=_interopRequireDefault(_projectThemeForm),_projectNotificationsForm=require("./project-notifications-form"),_projectNotificationsForm2=_interopRequireDefault(_projectNotificationsForm),_projectPageDataForm=require("./project-page-data-form/"),_projectPageDataForm2=_interopRequireDefault(_projectPageDataForm),_projectBackupForm=require("./project-backup-form/"),_projectBackupForm2=_interopRequireDefault(_projectBackupForm),_projectBillingForm=require("./project-billing-form/"),_projectBillingForm2=_interopRequireDefault(_projectBillingForm),_quickLaunch=require("../quick-launch"),_quickLaunch2=_interopRequireDefault(_quickLaunch);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ProjectSettingsPage=function(e){function ProjectSettingsPage(e){_classCallCheck(this,ProjectSettingsPage);var t=_possibleConstructorReturn(this,(ProjectSettingsPage.__proto__||Object.getPrototypeOf(ProjectSettingsPage)).call(this,e)),r=_stores2.default.CurrentProject.get(),a=r.owner,o=r.billingId;return t.state={owner:a,billingId:o},t.subscribe(_stores2.default.CurrentProject),t}return _inherits(ProjectSettingsPage,_baseComponent2.default),_createClass(ProjectSettingsPage,null,[{key:"propTypes",get:function get(){return{tab:_propTypes2.default.string.isRequired}}}]),_createClass(ProjectSettingsPage,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store;e.event;switch(t){case _stores2.default.CurrentProject:var r=_stores2.default.CurrentProject.get(),a=r.owner,o=r.billingId;this.setState({owner:a,billingId:o})}}},{key:"render",value:function render(){var e=this,t=_stores2.default.CurrentProject.get().name;return _react2.default.createElement("div",{className:"container project-settings-page"},_react2.default.createElement(_quickLaunch2.default,null),_react2.default.createElement("div",{className:"row"},_react2.default.createElement("div",{className:"col-md-8 col-md-offset-2 col-sm-12 col-sm-offset-0"},_react2.default.createElement("h1",null,"Settings"),_react2.default.createElement("ul",{className:"nav nav-tabs",role:"tablist"},_react2.default.createElement("li",{role:"presentation",className:(0,_classnames2.default)({active:"members"===this.props.tab})},_react2.default.createElement("a",{href:"/projects/"+t+"/settings/members"},"Members")),_react2.default.createElement(_reactDisplaySwitch.When,{project_privilege_user:!0},_react2.default.createElement("li",{role:"presentation",className:(0,_classnames2.default)({active:"basic"===this.props.tab})},_react2.default.createElement("a",{href:"/projects/"+t+"/settings/basic"},"Settings")),_react2.default.createElement("li",{role:"presentation",className:(0,_classnames2.default)({active:"theme"===this.props.tab})},_react2.default.createElement("a",{href:"/projects/"+t+"/settings/theme"},"Theme")),_react2.default.createElement("li",{role:"presentation",className:(0,_classnames2.default)({active:"notifications"===this.props.tab})},_react2.default.createElement("a",{href:"/projects/"+t+"/settings/notifications"},"Notifications"))),_react2.default.createElement("li",{role:"presentation",className:(0,_classnames2.default)({active:"page-data"===this.props.tab})},_react2.default.createElement("a",{href:"/projects/"+t+"/settings/page-data"},"Page Data")),_react2.default.createElement(_reactDisplaySwitch.When,{project_owner_is_pro:!0,project_privilege_user:!0,and:!0,enable_google_analytics:!0},_react2.default.createElement("li",{role:"presentation",className:(0,_classnames2.default)({active:"pro"===this.props.tab})},_react2.default.createElement("a",{href:"/projects/"+t+"/settings/pro"},"Pro Features"))),_react2.default.createElement(_reactDisplaySwitch.When,{project_privilege_user:!0},_react2.default.createElement("li",{role:"presentation",className:(0,_classnames2.default)({active:"backup"===this.props.tab})},_react2.default.createElement("a",{href:"/projects/"+t+"/settings/backup"},"Backup"))),_react2.default.createElement(_reactDisplaySwitch.When,{enable_billing:!0},_react2.default.createElement("li",{role:"presentation",className:(0,_classnames2.default)({active:"billing"===this.props.tab})},_react2.default.createElement("a",{href:"/projects/"+t+"/settings/billing"},"Billing")))),_react2.default.createElement("div",{className:"tab-content"},_react2.default.createElement("div",{role:"tabpanel",className:"tab-pane active"},function tabPanel(){switch(e.props.tab){case"basic":return _react2.default.createElement(_projectSettingsForm2.default,null);case"pro":return _react2.default.createElement(_projectProFeaturesForm2.default,null);case"members":return _react2.default.createElement(_projectMembersForm2.default,null);case"theme":return _react2.default.createElement(_projectThemeForm2.default,null);case"notifications":return _react2.default.createElement(_projectNotificationsForm2.default,null);case"page-data":return _react2.default.createElement(_projectPageDataForm2.default,null);case"backup":return _react2.default.createElement(_projectBackupForm2.default,null);case"billing":return _react2.default.createElement(_projectBillingForm2.default,null)}}())))))}}]),ProjectSettingsPage}();exports.default=ProjectSettingsPage;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../base-component":261,"../quick-launch":400,"./project-backup-form/":375,"./project-billing-form/":376,"./project-members-form/":382,"./project-notifications-form":391,"./project-page-data-form/":395,"./project-pro-features-form":396,"./project-settings-form":397,"./project-theme-form":398,"classnames":93,"prop-types":186,"react-display-switch":208}],374:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackupItem=void 0;var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_moment="undefined"!=typeof window?window.window.moment:"undefined"!=typeof global?global.window.moment:null,_moment2=_interopRequireDefault(_moment),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_apiClient=require("../../../lib/api-client/"),_tooltip=require("../tooltip"),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(a,r){try{var o=t[a](r),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var BackupItem=exports.BackupItem=function(e){function BackupItem(e){_classCallCheck(this,BackupItem);var t=_possibleConstructorReturn(this,(BackupItem.__proto__||Object.getPrototypeOf(BackupItem)).call(this,e));return(0,_lodash.bindAll)(t,"fetchBackupJSON"),t.state={data:null,waitingResponse:!1},t}return _inherits(BackupItem,_react.Component),_createClass(BackupItem,[{key:"fetchBackupJSON",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,n,a,r,o;return regeneratorRuntime.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return e.preventDefault(),t=this.props.timestamp,n=_stores2.default.CurrentProject.get().name,a="/api/project-backup/"+n+"/"+t+".json",i.prev=4,this.setState({waitingResponse:!0}),i.next=8,_apiClient.apiClient.get(a);case 8:r=i.sent,o=r.data,this.setState({data:o,waitingResponse:!1}),i.next=18;break;case 13:i.prev=13,i.t0=i.catch(4),console.error(i.t0.stack||i.t0),alert(i.t0.message||i.t0),this.setState({waitingResponse:!1});case 18:case"end":return i.stop()}},_callee,this,[[4,13]])}));return function fetchBackupJSON(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this,t=this.props.timestamp,n=this.state,a=n.data,r=n.waitingResponse,o=_stores2.default.CurrentProject.get().name,i=(0,_moment2.default)(t).format("YYYY/MM/DD HH:mm:ss"),l=r?_react2.default.createElement("span",null,"Download ",_react2.default.createElement("i",{className:"fa fa-spinner"})):"Download";return _react2.default.createElement("div",{className:"backup-item"},_react2.default.createElement("span",null,i),a?_react2.default.createElement(function DownloadButton(){var e=JSON.stringify(a,null,2),n=URL.createObjectURL(new Blob([e],{type:"application/octet-stream"}));return _react2.default.createElement("a",{href:n,download:o+"_"+(0,_moment2.default)(t).format("YYYYMMDD_HHmmss")+".json",className:"btn btn-primary"},"Click to Download ",_react2.default.createElement("i",{className:"fa fa-download"}))},null):_react2.default.createElement(function FetchButton(){return _react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"download-backup"},_react2.default.createElement("button",{onClick:e.fetchBackupJSON,className:(0,_classnames2.default)("btn btn-default",{disabled:!_stores2.default.CurrentUser.hasProjectPrivilege}),disabled:r},l))},null))}}]),BackupItem}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../lib/api-client/":452,"../../../stores/":520,"../tooltip":399,"classnames":93}],375:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_get=function get(e,t,a){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:get(n,t,a)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(a):void 0},_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_reactDisplaySwitch=require("react-display-switch"),_baseComponent=require("../../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_tooltip=require("../tooltip"),_backupItem=require("./backup-item"),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ProjectBackupForm=function(e){function ProjectBackupForm(){_classCallCheck(this,ProjectBackupForm);var e=_possibleConstructorReturn(this,(ProjectBackupForm.__proto__||Object.getPrototypeOf(ProjectBackupForm)).call(this));return e.state={timestamps:[],showEnableButton:!1,enabled:void 0},e.subscribe(_stores2.default.ProjectBackup),e}return _inherits(ProjectBackupForm,_baseComponent2.default),_createClass(ProjectBackupForm,[{key:"onStoreChange",value:function onStoreChange(){var e=_stores2.default.ProjectBackup,t=e.timestamps,a=e.enabled;this.setState({timestamps:t,enabled:a,showEnableButton:!0})}},{key:"componentDidMount",value:function componentDidMount(){_get(ProjectBackupForm.prototype.__proto__||Object.getPrototypeOf(ProjectBackupForm.prototype),"componentDidMount",this).call(this),_reactDisplaySwitch.When.case("enable_project_backup")&&_stores2.default.ProjectBackup.load()}},{key:"renderRecent",value:function renderRecent(){if(this.state.timestamps.length<1)return _react2.default.createElement("p",null,"Backups does not exist yet.");var e=this.state.timestamps.map(function(e){return _react2.default.createElement(_backupItem.BackupItem,{key:e,timestamp:e})});return _react2.default.createElement("div",null,e)}},{key:"renderEnableButton",value:function renderEnableButton(){var e=this.state,t=e.enabled;return e.showEnableButton?_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"toggle-project-backup"},_react2.default.createElement("button",{className:(0,_classnames2.default)("btn",t?"btn-danger":"btn-primary"),disabled:!_reactDisplaySwitch.When.case("enable_project_backup"),onClick:_reactDisplaySwitch.When.case("enable_project_backup")?t?this.onDisable:this.onEnable:null},_react2.default.createElement("span",{className:"glyphicon glyphicon-time"}),t?" Disable":" Enable"," Backup")):null}},{key:"onEnable",value:function onEnable(){_reactDisplaySwitch.When.case("project_privilege_user")&&_stores2.default.ProjectBackup.enable()}},{key:"onDisable",value:function onDisable(){_reactDisplaySwitch.When.case("project_privilege_user")&&_stores2.default.ProjectBackup.disable()}},{key:"render",value:function render(){var e=this;return _react2.default.createElement("div",{className:"project-backup"},_react2.default.createElement("div",{className:"description"},_react2.default.createElement("h4",null,"Auto Project Backup"),_react2.default.createElement("p",{className:"help-block"},"If there is change (write or delete) to Page, automatic backup is made every day."),_react2.default.createElement("div",{className:"text-right"},this.renderEnableButton())),_react2.default.createElement(_reactDisplaySwitch.When,{enable_project_backup:!0},_react2.default.createElement(function BackupList(){return e.state.enabled?_react2.default.createElement("div",null,_react2.default.createElement("h4",null,"Recent Backups"),_react2.default.createElement("div",{className:"backup-items"},e.renderRecent())):null},null)))}}]),ProjectBackupForm}();exports.default=ProjectBackupForm;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"../../base-component":261,"../tooltip":399,"./backup-item":374,"classnames":93,"react-display-switch":208}],376:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ProjectBillingForm;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_publicProject=require("./public-project"),_privateNonProfitProject=require("./private-non-profit-project"),_privatePurposeRequiredProject=require("./private-purpose-required-project"),_privateBilledProject=require("./private-billed-project"),_privateTrialProject=require("./private-trial-project");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ProjectBillingForm(){var e=_stores2.default.CurrentProject.get();return e.billingId?_react2.default.createElement(_privateBilledProject.PrivateBilledProject,{project:e}):e.publicVisible?_react2.default.createElement(_publicProject.PublicProject,null):e.plan?"personal"===e.plan?_react2.default.createElement(_privateNonProfitProject.PrivateNonProfitProject,null):_react2.default.createElement(_privateTrialProject.PrivateTrialProject,{project:e}):_react2.default.createElement(_privatePurposeRequiredProject.PrivatePurposeRequiredProject,null)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"./private-billed-project":377,"./private-non-profit-project":378,"./private-purpose-required-project":379,"./private-trial-project":380,"./public-project":381}],377:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PrivateBilledProject=PrivateBilledProject;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_tooltip=require("../tooltip");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PrivateBilledProject(e){var t=e.project,l=void 0;switch(t.plan){case"business":l="Business";break;case"personal":l="Personal or Non-commercial";break;default:l="Undefined"}var r=_stores2.default.CurrentUser.hasProjectPrivilege,a=(0,_classnames2.default)("btn btn-default",{disabled:!r}),i=t.billing&&"past_due"===t.billing.status;return _react2.default.createElement("div",{className:"project-billing-form"},_react2.default.createElement("p",null,"Project purpose: ",_react2.default.createElement("strong",null,l)),_react2.default.createElement("p",null,"Current status: ",i?"Payment failed":"Paid subscription"),_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"setup-new-billing"},_react2.default.createElement("a",{target:"_self",href:r?"/billings/"+t.billingId:null,className:a},"See billing details")))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"../tooltip":399,"classnames":93}],378:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PrivateNonProfitProject=void 0;var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_showMoreText=require("../../show-more-text"),_showMoreText2=_interopRequireDefault(_showMoreText),_langSwitch=require("../../lang-switch"),_langSwitch2=_interopRequireDefault(_langSwitch),_lang=require("../../../lang/"),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,o){try{var a=t[n](o),i=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PrivateNonProfitProject=exports.PrivateNonProfitProject=function(e){function PrivateNonProfitProject(){_classCallCheck(this,PrivateNonProfitProject);var e=_possibleConstructorReturn(this,(PrivateNonProfitProject.__proto__||Object.getPrototypeOf(PrivateNonProfitProject)).call(this));return e.changeToBusiness=e.changeToBusiness.bind(e),e}return _inherits(PrivateNonProfitProject,_react.Component),_createClass(PrivateNonProfitProject,[{key:"changeToBusiness",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(e=(0,_lang.t)("PrivateNonProfitProject.confirmChange"),!confirm(e)){t.next=4;break}return t.next=4,_stores2.default.CurrentProject.update({plan:"business"});case 4:case"end":return t.stop()}},_callee,this)}));return function changeToBusiness(){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this;return _react2.default.createElement("div",{className:"project-billing-form"},_react2.default.createElement(_langSwitch2.default,{onChange:function onChange(){return e.forceUpdate()}}),_react2.default.createElement("p",null,(0,_lang.t)("PrivateNonProfitProject.purpose"),": ",_react2.default.createElement("strong",null,"Personal or Non-commercial")),_react2.default.createElement("hr",null),_react2.default.createElement("p",null,(0,_lang.t)("PrivateNonProfitProject.limitedPurpose")),_react2.default.createElement("p",{className:"with-icon"},_react2.default.createElement("span",{className:"icon icon-non-commercial"}),(0,_lang.t)("plan.personal"),_react2.default.createElement(_showMoreText2.default,null,(0,_lang.t)("plan.personal2"))),_react2.default.createElement("p",null,(0,_lang.t)("PrivateNonProfitProject.needToChange")),_react2.default.createElement("p",{className:"with-icon"},_react2.default.createElement("span",{className:"icon icon-business"}),(0,_lang.t)("plan.business"),_react2.default.createElement(_showMoreText2.default,null,(0,_lang.t)("plan.business2"))),_react2.default.createElement("button",{className:"btn btn-primary",onClick:this.changeToBusiness},(0,_lang.t)("PrivateNonProfitProject.submitChange")))}}]),PrivateNonProfitProject}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../lang/":449,"../../../stores/":520,"../../lang-switch":292,"../../show-more-text":416}],379:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PrivatePurposeRequiredProject=void 0;var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_selectPlanModal=require("../../modals/select-plan-modal"),_selectPlanModal2=_interopRequireDefault(_selectPlanModal),_tooltip=require("../tooltip");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PrivatePurposeRequiredProject=exports.PrivatePurposeRequiredProject=function(e){function PrivatePurposeRequiredProject(){_classCallCheck(this,PrivatePurposeRequiredProject);var e=_possibleConstructorReturn(this,(PrivatePurposeRequiredProject.__proto__||Object.getPrototypeOf(PrivatePurposeRequiredProject)).call(this));return e.state={showSelectPlanModal:!1},e}return _inherits(PrivatePurposeRequiredProject,_react.Component),_createClass(PrivatePurposeRequiredProject,[{key:"render",value:function render(){var e=this,t=_stores2.default.CurrentUser.hasProjectPrivilege,r=(0,_classnames2.default)("btn btn-primary",{disabled:!t});return _react2.default.createElement("div",{className:"project-billing-form"},_react2.default.createElement("p",null,"You haven’t chosen the purpose of this project yet.",_react2.default.createElement("br",null),"Please click the buton below and select the most accurate purpose."),_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"select-plan"},_react2.default.createElement("button",{className:r,onClick:function onClick(){return t?e.setState({showSelectPlanModal:!0}):null}},"Select Plan")),_react2.default.createElement(_selectPlanModal2.default,{show:this.state.showSelectPlanModal,onHide:function onHide(){return e.setState({showSelectPlanModal:!1})}}))}}]),PrivatePurposeRequiredProject}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"../../modals/select-plan-modal":316,"../tooltip":399,"classnames":93}],380:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PrivateTrialProject=void 0;var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_moment="undefined"!=typeof window?window.window.moment:"undefined"!=typeof global?global.window.moment:null,_moment2=_interopRequireDefault(_moment),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lang=require("../../../lang/"),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_tooltip=require("../tooltip"),_langSwitch=require("../../lang-switch"),_langSwitch2=_interopRequireDefault(_langSwitch);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PrivateTrialProject=exports.PrivateTrialProject=function(e){function PrivateTrialProject(){return _classCallCheck(this,PrivateTrialProject),_possibleConstructorReturn(this,(PrivateTrialProject.__proto__||Object.getPrototypeOf(PrivateTrialProject)).apply(this,arguments))}return _inherits(PrivateTrialProject,_react.Component),_createClass(PrivateTrialProject,[{key:"render",value:function render(){var e=this,t=this.props.project,r=_moment2.default.unix(t.trialEnd).format("YYYY-MM-DD"),a=t.trialDaysLeft<1,l=_stores2.default.CurrentUser.hasProjectPrivilege,n=(0,_classnames2.default)("btn btn-primary",{disabled:!l}),i=t.trialDaysLeft;return _react2.default.createElement("div",{className:"project-billing-form"},_react2.default.createElement(_langSwitch2.default,{onChange:function onChange(){return e.forceUpdate()}}),_react2.default.createElement("p",null,(0,_lang.t)("PrivateTrialProject.purpose"),": ",_react2.default.createElement("strong",null,"Business")),_react2.default.createElement(function Status(){return a?_react2.default.createElement("div",null,_react2.default.createElement("p",null,(0,_lang.t)("PrivateTrialProject.status"),": ",(0,_lang.t)("PrivateTrialProject.expired")),_react2.default.createElement("p",null,(0,_lang.t)("PrivateTrialProject.trialEnd"),":  ",r),_react2.default.createElement("hr",null),_react2.default.createElement("p",null,(0,_lang.t)("PrivateTrialProject.addCard")),_react2.default.createElement("p",null,(0,_lang.t)("PrivateTrialProject.noteExpired"))):_react2.default.createElement("div",null,_react2.default.createElement("p",null,(0,_lang.t)("PrivateTrialProject.status"),": ",(0,_lang.t)("PrivateTrialProject.trialing")),_react2.default.createElement("p",null,(0,_lang.t)("PrivateTrialProject.trialEnd"),": ",r," ",(0,_lang.t)("PrivateTrialProject.trialDaysLeft",{trialDaysLeft:i})),_react2.default.createElement("hr",null),_react2.default.createElement("p",null,(0,_lang.t)("PrivateTrialProject.addCard")),_react2.default.createElement("p",null,(0,_lang.t)("PrivateTrialProject.paymentStart",{trialEnd:r})),_react2.default.createElement("p",null,(0,_lang.t)("PrivateTrialProject.note"),_react2.default.createElement("br",null),(0,_lang.t)("PrivateTrialProject.note2")))},null),_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"setup-new-billing"},_react2.default.createElement("a",{target:"_self",href:l?"/billings/new/"+t.name:null,className:n},(0,_lang.t)("PrivateTrialProject.addCardSubmit"))))}}],[{key:"propTypes",get:function get(){return{project:_propTypes2.default.object.isRequired}}}]),PrivateTrialProject}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../lang/":449,"../../../stores/":520,"../../lang-switch":292,"../tooltip":399,"classnames":93,"prop-types":186}],381:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PublicProject=PublicProject;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PublicProject(){return _react2.default.createElement("div",{className:"project-billing-form"},_react2.default.createElement("p",null,"This is a public project, so you don’t need to use a paid plan."))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{}],382:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ProjectMembersForm;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_projectInvitation=require("./project-invitation"),_projectInvitation2=_interopRequireDefault(_projectInvitation),_projectMembers=require("./project-members/"),_projectMembers2=_interopRequireDefault(_projectMembers);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ProjectMembersForm(){return _react2.default.createElement("div",{className:"project-members-form"},_react2.default.createElement(_projectInvitation2.default,null),_react2.default.createElement(_projectMembers2.default,null))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./project-invitation":383,"./project-members/":386}],383:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_tooltip=require("../tooltip"),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_externalLink=require("../../external-link"),_externalLink2=_interopRequireDefault(_externalLink),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_execCopy=require("exec-copy"),_execCopy2=_interopRequireDefault(_execCopy);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var a=t[r](o),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ProjectInvitation=function(e){function ProjectInvitation(e){_classCallCheck(this,ProjectInvitation);var t=_possibleConstructorReturn(this,(ProjectInvitation.__proto__||Object.getPrototypeOf(ProjectInvitation)).call(this,e));return t.state={inviteUrl:""},(0,_lodash.bindAll)(t,["onClickCopy","onClickReset"]),t.subscribe(_stores2.default.Invitation),t}return _inherits(ProjectInvitation,_baseComponent2.default),_createClass(ProjectInvitation,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store;e.event;switch(t){case _stores2.default.Invitation:var n=_stores2.default.Invitation.get();if(!n)return;if(n.error)return void this.setState({inviteUrl:location.protocol+"//"+location.host+"/******"});this.setState({inviteUrl:location.protocol+"//"+location.host+n.url})}}},{key:"componentWillMount",value:function componentWillMount(){var e=_stores2.default.CurrentProject.get();e&&_stores2.default.Invitation.load(e.name)}},{key:"onClickCopy",value:function onClickCopy(){(0,_execCopy2.default)(this.state.inviteUrl,function(e){alert("Opps, copy failed. Please copy the link manually.\nYour browser may not support the copy to clipboard feature.")})}},{key:"onClickReset",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(e=_stores2.default.CurrentProject.get()){n.next=3;break}return n.abrupt("return");case 3:if("Are you sure you want to disable the current invitation link and create a new one?\nOther users will not be able to join with the old invitation link.",confirm("Are you sure you want to disable the current invitation link and create a new one?\nOther users will not be able to join with the old invitation link.")){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,_stores2.default.Invitation.createAndReset(e.name);case 8:if(!(t=n.sent).error){n.next=11;break}return n.abrupt("return",alert(t.error.message));case 11:case"end":return n.stop()}},_callee,this)}));return function onClickReset(){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=_stores2.default.CurrentProject.get(),t=this.state.inviteUrl,n="mailto:?subject=Invitation to "+e.displayName+" on Scrapbox&body=Follow the link to join the project: "+t;return _react2.default.createElement("div",{className:"invite-form"},_react2.default.createElement("h4",null,"Invite new members"),_react2.default.createElement("p",{className:"help-block"},"Share this link to invite members to this project:"),_react2.default.createElement("input",{type:"text",className:"form-control",value:t,readOnly:!0}),_react2.default.createElement("div",{className:"buttons"},_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"owner-tooltip-copy"},_react2.default.createElement("button",{className:(0,_classnames2.default)("btn btn-sm btn-default",{disabled:!_stores2.default.CurrentUser.hasProjectPrivilege}),onClick:this.onClickCopy},"Copy")),_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"owner-tooltip-mail"},_react2.default.createElement(_externalLink2.default,{className:(0,_classnames2.default)("btn btn-sm btn-default",{disabled:!_stores2.default.CurrentUser.hasProjectPrivilege}),href:n},"Email"))),_react2.default.createElement("div",{className:"button text-right"},_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"owner-tooltip-reset"},_react2.default.createElement("button",{className:(0,_classnames2.default)("btn btn-sm btn-danger",{disabled:!_stores2.default.CurrentUser.hasProjectPrivilege}),onClick:this.onClickReset},"Reset link"))),_react2.default.createElement("hr",null))}}]),ProjectInvitation}();exports.default=ProjectInvitation;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520,"../../base-component":261,"../../external-link":281,"../tooltip":399,"classnames":93,"exec-copy":139}],384:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MakeAdminButton=MakeAdminButton,exports.RemoveAdminButton=RemoveAdminButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../../../stores/"),_stores2=_interopRequireDefault(_stores),_tooltip=require("../../tooltip");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function MakeAdminButton(e){var t,r=(t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to add this user to the administrator group?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,_stores2.default.CurrentProject.addAdmin(n.id);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),e.t0.response&&e.t0.response.data?alert(e.t0.response.data.message):alert("Can’t connect to the servers. Please try again later.");case 10:case"end":return e.stop()}},_callee,this,[[2,7]])})),function onClick(){return t.apply(this,arguments)}),n=e.user,a=_stores2.default.CurrentUser.isProjectOwner,o=(0,_classnames2.default)("btn btn-sm btn-default btn-make-admin",{disabled:!a});return _react2.default.createElement(_tooltip.OnlyOwnerTooltip,{id:"member-make-admin-"+n.id},_react2.default.createElement("button",{className:o,onClick:r},"Make admin"))}function RemoveAdminButton(e){var t,r=(t=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to remove this user from the administrator group?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,_stores2.default.CurrentProject.removeAdmin(n.id);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),e.t0.response&&e.t0.response.data?alert(e.t0.response.data.message):alert("Can’t connect to the servers. Please try again later.");case 10:case"end":return e.stop()}},_callee2,this,[[2,7]])})),function onClick(){return t.apply(this,arguments)}),n=e.user,a=_stores2.default.CurrentUser.isProjectOwner,o=(0,_classnames2.default)("btn btn-sm btn-default btn-remove-admin",{disabled:!a});return _react2.default.createElement(_tooltip.OnlyOwnerTooltip,{id:"member-remove-admin-"+n.id},_react2.default.createElement("button",{className:o,onClick:r},"Remove admin"))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../stores/":520,"../../tooltip":399,"classnames":93}],385:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=DeleteButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../../../stores/"),_stores2=_interopRequireDefault(_stores),_tooltip=require("../../tooltip");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function DeleteButton(e){var t,r=(t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to delete this member?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,_stores2.default.CurrentProject.removeMember(n.id);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),e.t0.response&&e.t0.response.data?alert(e.t0.response.data.message):alert("Can’t connect to the servers. Please try again later.");case 10:case"end":return e.stop()}},_callee,this,[[2,7]])})),function onClick(e){return t.apply(this,arguments)}),n=e.user,a=(0,_classnames2.default)("btn btn-sm btn-default btn-delete-member",{disabled:!_stores2.default.CurrentUser.hasProjectPrivilege});return _react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"member-delete-"+n.id},_react2.default.createElement("button",{className:a,onClick:r},"Delete"))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../stores/":520,"../../tooltip":399,"classnames":93}],386:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../../../stores/"),_stores2=_interopRequireDefault(_stores),_baseComponent=require("../../../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_member=require("./member"),_member2=_interopRequireDefault(_member);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ProjectMembers=function(e){function ProjectMembers(e){_classCallCheck(this,ProjectMembers);var t=_possibleConstructorReturn(this,(ProjectMembers.__proto__||Object.getPrototypeOf(ProjectMembers)).call(this,e)),r=_stores2.default.CurrentProject.get().users;return t.state={users:r},t.subscribe(_stores2.default.CurrentProject),t}return _inherits(ProjectMembers,_baseComponent2.default),_createClass(ProjectMembers,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store;e.event;switch(t){case _stores2.default.CurrentProject:var r=_stores2.default.CurrentProject.get(),n=r.users;if(!r.isMember)return;this.setState({users:n})}}},{key:"render",value:function render(){var e=this.state.users,t=e.sort(function(e,t){return _stores2.default.CurrentProject.isAdmin(e.id)?-1:_stores2.default.CurrentProject.isAdmin(t.id)?1:void 0}).sort(function(e,t){return _stores2.default.CurrentProject.isOwner(e.id)?-1:_stores2.default.CurrentProject.isOwner(t.id)?1:void 0}).sort(function(e,t){return e.id===_stores2.default.CurrentUser.get().id?-1:t.id===_stores2.default.CurrentUser.get().id?1:void 0}).map(function(e){return _react2.default.createElement(_member2.default,{user:e,key:e.id})});return _react2.default.createElement("div",{className:"user-list"},_react2.default.createElement("h4",null,"Members who can edit ",_react2.default.createElement("small",null,"(",e.length,")")),t)}}]),ProjectMembers}();exports.default=ProjectMembers;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../stores/":520,"../../../base-component":261,"./member":388}],387:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=LeaveButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),u=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(u).then(function(e){step("next",e)},function(e){step("throw",e)});e(u)}("next")})}}function LeaveButton(){var e,t=(e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to leave this project?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,_stores2.default.CurrentProject.leave();case 5:e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(2),!e.t0.response||!e.t0.response.data){e.next=11;break}return e.abrupt("return",alert(e.t0.response.data.message));case 11:return e.abrupt("return",alert("Can’t connect to the servers. Please try again later."));case 12:location.href="/";case 13:case"end":return e.stop()}},_callee,this,[[2,7]])})),function onClick(t){return e.apply(this,arguments)});return _react2.default.createElement("button",{className:"btn btn-sm btn-default btn-delete-member",onClick:t},"Leave")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../stores/":520}],388:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Member;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../../../stores/"),_stores2=_interopRequireDefault(_stores),_leaveButton=require("./leave-button"),_leaveButton2=_interopRequireDefault(_leaveButton),_deleteButton=require("./delete-button"),_deleteButton2=_interopRequireDefault(_deleteButton),_transferOwnerButton=require("./transfer-owner-button"),_transferOwnerButton2=_interopRequireDefault(_transferOwnerButton),_pageLink=require("./page-link"),_pageLink2=_interopRequireDefault(_pageLink),_adminButton=require("./admin-button"),_userIcon=require("../../../icon/user-icon"),_userIcon2=_interopRequireDefault(_userIcon);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var UserName=function UserName(e){var t=e.user,a=_stores2.default.CurrentProject.get().name,r=t.id===_stores2.default.CurrentUser.get().id;return t.name?_react2.default.createElement("span",null,"@",_react2.default.createElement(_pageLink2.default,{project:a,page:t.name})):r?_react2.default.createElement("a",{href:"/settings/profile"},"(no username)"):"(no username)"};function Member(e){var t=e.user,a=t.id===_stores2.default.CurrentUser.get().id,r=_stores2.default.CurrentProject.isOwner(t.id),n=_stores2.default.CurrentProject.isAdmin(t.id);return _react2.default.createElement("div",{className:"user-list-item"},_react2.default.createElement("div",{className:"actions"},a&&!r&&_react2.default.createElement(_leaveButton2.default,null),!a&&!r&&_react2.default.createElement(_deleteButton2.default,{user:t}),!a&&!r&&_react2.default.createElement(_transferOwnerButton2.default,{user:t}),!a&&!r&&(n?_react2.default.createElement(_adminButton.RemoveAdminButton,{user:t}):_react2.default.createElement(_adminButton.MakeAdminButton,{user:t}))),_react2.default.createElement("div",{className:"icon"},_react2.default.createElement(_userIcon2.default,{user:t,hasLink:!1})),_react2.default.createElement("div",{className:"display-name"},t.displayName),_react2.default.createElement("div",{className:"misc"},_react2.default.createElement("span",{className:"name"},_react2.default.createElement(UserName,{user:t})),_react2.default.createElement("span",{className:"dot"},"•"),_react2.default.createElement("span",{className:"email"},t.email?t.email:"(no email)"),a&&_react2.default.createElement("span",{className:"role you"},"you"),r&&_react2.default.createElement("span",{className:"role owner"},"owner"),n&&_react2.default.createElement("span",{className:"role admin"},"admin"),t.pro&&_react2.default.createElement("span",{className:"role pro"},"pro")))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../stores/":520,"../../../icon/user-icon":289,"./admin-button":384,"./delete-button":385,"./leave-button":387,"./page-link":389,"./transfer-owner-button":390}],389:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_baseComponent=require("../../../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../../../../stores/"),_stores2=_interopRequireDefault(_stores),_pageTitle=require("../../../../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PageLink=function(e){function PageLink(){_classCallCheck(this,PageLink);var e=_possibleConstructorReturn(this,(PageLink.__proto__||Object.getPrototypeOf(PageLink)).call(this));return e.state={exist:!0},e.subscribe(_stores2.default.QuickSearch),e}return _inherits(PageLink,_baseComponent2.default),_createClass(PageLink,null,[{key:"propTypes",get:function get(){return{project:_propTypes2.default.string.isRequired,page:_propTypes2.default.string.isRequired}}}]),_createClass(PageLink,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store;e.event;switch(t){case _stores2.default.QuickSearch:var r=t.exists(this.props.page);this.setState({exist:r})}}},{key:"render",value:function render(){var e=this.props,t=e.project,r=e.page,n="/"+t+"/"+(0,_pageTitle.encodeTitleURI)(r),o=(0,_classnames2.default)("page-link",{"empty-page-link":!this.state.exist});return _react2.default.createElement("a",{href:n,className:o},r)}}]),PageLink}();exports.default=PageLink;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../../../share/page-title":589,"../../../../stores/":520,"../../../base-component":261,"classnames":93,"prop-types":186}],390:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=TransferOwnerButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../../../stores/"),_stores2=_interopRequireDefault(_stores),_tooltip=require("../../tooltip");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var s=t[n](a),o=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function TransferOwnerButton(e){var t,r=(t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to transfer ownership to this member?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,_stores2.default.CurrentProject.transferOwner(n.id);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),e.t0.response&&e.t0.response.data?alert(e.t0.response.data.message):alert("Can’t connect to the servers. Please try again later.");case 10:case"end":return e.stop()}},_callee,this,[[2,7]])})),function onClick(e){return t.apply(this,arguments)}),n=e.user,a=(0,_classnames2.default)("btn btn-sm btn-default btn-transfer-owner",{disabled:!_stores2.default.CurrentUser.isProjectOwner});return _react2.default.createElement(_tooltip.OnlyOwnerTooltip,{id:"member-transfer-owner-"+n.id},_react2.default.createElement("button",{className:a,onClick:r},"Transfer owner"))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../stores/":520,"../../tooltip":399,"classnames":93}],391:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_externalLink=require("../external-link"),_externalLink2=_interopRequireDefault(_externalLink),_tooltip=require("./tooltip"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),i=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ProjectNotificationsForm=function(e){function ProjectNotificationsForm(e){_classCallCheck(this,ProjectNotificationsForm);var t=_possibleConstructorReturn(this,(ProjectNotificationsForm.__proto__||Object.getPrototypeOf(ProjectNotificationsForm)).call(this,e));return t.state={showAdd:!1,notifications:[],error:null},(0,_lodash.bindAll)(t,["onToggleAdd","onClickDelete","onSumitAdd"]),t}return _inherits(ProjectNotificationsForm,_react.Component),_createClass(ProjectNotificationsForm,[{key:"componentDidMount",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return t=_stores2.default.CurrentProject.get(),e.t0=this,e.next=4,_stores2.default.Notification.load(t.name);case 4:e.t1=e.sent,e.t2={notifications:e.t1},e.t0.setState.call(e.t0,e.t2);case 7:case"end":return e.stop()}},_callee,this)}));return function componentDidMount(t){return e.apply(this,arguments)}}()},{key:"onToggleAdd",value:function onToggleAdd(e){e.preventDefault(),this.setState({showAdd:!this.state.showAdd,error:null})}},{key:"onClickDelete",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,r;return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(confirm("Are you sure you want to delete this notification?")){n.next=2;break}return n.abrupt("return");case 2:return t=_stores2.default.CurrentProject.get(),r=e.target.getAttribute("rel"),n.prev=4,n.next=7,_stores2.default.Notification.delete(t.name,r);case 7:this.setState({notifications:_stores2.default.Notification.get()}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(4),n.t0.response&&n.t0.response.data?alert(n.t0.response.data.message):alert("Can’t connect to the servers. Please try again later.");case 13:case"end":return n.stop()}},_callee2,this,[[4,10]])}));return function onClickDelete(t){return e.apply(this,arguments)}}()},{key:"onSumitAdd",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,r;return regeneratorRuntime.wrap(function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),t=_stores2.default.CurrentProject.get(),r={service:"slack",url:this.refs.url.value},n.prev=3,n.next=6,_stores2.default.Notification.create(t.name,r);case 6:this.setState({notifications:_stores2.default.Notification.get(),showAdd:!1,error:null}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),n.t0.response&&n.t0.response.data?this.setState({error:n.t0.response.data.message}):this.setState({error:"Can’t connect to the servers. Please try again later."});case 12:return n.abrupt("return",!1);case 13:case"end":return n.stop()}},_callee3,this,[[3,9]])}));return function onSumitAdd(t){return e.apply(this,arguments)}}()},{key:"renderAddPanel",value:function renderAddPanel(){return _react2.default.createElement("form",{className:"add-form",onSubmit:this.onSumitAdd},_react2.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:this.onToggleAdd},"×"),_react2.default.createElement("h4",null,"Setup new notification"),this.state.error&&_react2.default.createElement("div",{className:"alert alert-danger"},this.state.error),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("label",{className:"control-label",htmlFor:"url"},_react2.default.createElement(_externalLink2.default,{href:"https://my.slack.com/services/new/incoming-webhook/"},"Slack Notification")," URL"),_react2.default.createElement("input",{ref:"url",type:"text",className:"form-control",id:"url",placeholder:"https://"})),_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"add-notification"},_react2.default.createElement("button",{type:"submit",className:"btn btn-default"},"Add")),_react2.default.createElement("hr",null))}},{key:"render",value:function render(){var e=this;return _react2.default.createElement("div",{className:"project-notifications-form"},this.state.showAdd&&this.renderAddPanel(),!this.state.showAdd&&_react2.default.createElement("button",{className:"btn btn-primary add-btn",onClick:this.onToggleAdd},_react2.default.createElement("span",{className:"glyphicon glyphicon-bell"})," Add slack notification"),_react2.default.createElement("h4",null,"Available notifications"),_react2.default.createElement("div",{className:"list"},this.state.notifications.map(function(t){return _react2.default.createElement("div",{key:t.id,className:"list-item"},_react2.default.createElement("div",{className:"actions"},_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"delete-notification-"+t.id},_react2.default.createElement("button",{className:"btn btn-sm btn-default",rel:t.id,onClick:e.onClickDelete},"Delete"))),_react2.default.createElement("div",{className:"icon"},_react2.default.createElement("span",{className:"glyphicon glyphicon-bell"})),_react2.default.createElement("div",{className:"service-name"},t.service),_react2.default.createElement("div",{className:"misc"},_react2.default.createElement("span",{className:"option"},"Updates appear 90-seconds after new edits"),_react2.default.createElement("span",{className:"dot"},"•"),_react2.default.createElement("span",{className:"url"},t.url)))})))}}]),ProjectNotificationsForm}();exports.default=ProjectNotificationsForm;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../external-link":281,"./tooltip":399}],392:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=BookmarkletForm;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function generateBookmarklet(e){var t=e.project;return"javascript:"+("\n(function(){\n  var title=window.prompt('Scrap \""+document.title+'" to '+(0,_lodash.escape)(t.displayName.trim()||t.name)+".',document.title);\n  if (!title) return;\n  var lines=['','['+window.location.href+' '+document.title+']'];\n  var quote=window.getSelection().toString();\n  if (quote.trim()) lines=lines.concat(quote.split(/\\n/g).map(function(line){return ' > '+line}));\n  lines.push('');\n  var body=encodeURIComponent(lines.join('\\n'));\n  window.open('"+location.protocol+"//"+location.host+"/"+(0,_lodash.escape)(t.name)+"/'+encodeURIComponent(title.trim())+'?body='+body)\n})();").replace(/\n\s*/g,"")}function BookmarkletForm(){var e=_stores2.default.CurrentProject.get(),t=generateBookmarklet({project:e});return _react2.default.createElement("div",{className:"page-data-item"},_react2.default.createElement("label",{className:"control-label"},"Bookmarklet"),_react2.default.createElement("div",null,_react2.default.createElement("description",null,_react2.default.createElement("p",null,"Drag and Drop ",_react2.default.createElement("a",{href:t,className:"bookmarklet"},"Scrap to ",e.displayName)," to your browser's bookmark toolbar.",_react2.default.createElement("br",null),"Just click it and you can scrap any webpage to ",e.displayName,"."))))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../stores/":520}],393:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_apiClient=require("../../../lib/api-client/"),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_tooltip=require("../tooltip"),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function step(r,n){try{var o=t[r](n),l=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(l).then(function(e){step("next",e)},function(e){step("throw",e)});e(l)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ExportPagesForm=function(e){function ExportPagesForm(e){_classCallCheck(this,ExportPagesForm);var t=_possibleConstructorReturn(this,(ExportPagesForm.__proto__||Object.getPrototypeOf(ExportPagesForm)).call(this,e));return(0,_lodash.bindAll)(t,"onSubmit"),t.state={metadata:!1,data:null,waitingResponse:!1},t}return _inherits(ExportPagesForm,_react.Component),_createClass(ExportPagesForm,[{key:"onSubmit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,a,r,n,o;return regeneratorRuntime.wrap(function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return e.preventDefault(),t=this.state.metadata,a="/api/page-data/export/"+_stores2.default.CurrentProject.get().name+".json",l.prev=3,this.setState({waitingResponse:!0}),l.next=7,_apiClient.apiClient.post(a,{metadata:t});case 7:r=l.sent,n=r.data,this.setState({data:n,waitingResponse:!1}),l.next=17;break;case 12:l.prev=12,l.t0=l.catch(3),console.error(l.t0.stack||l.t0),o=[l.t0.message,l.t0.response&&l.t0.response.data.message].join(". "),alert(o);case 17:case"end":return l.stop()}},_callee,this,[[3,12]])}));return function onSubmit(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this,t=this.state,a=t.metadata,r=t.data,n=t.waitingResponse,o=n?_react2.default.createElement("span",null,"Exporting Pages ",_react2.default.createElement("i",{className:"fa fa-spinner"})):"Export Pages";return _react2.default.createElement("div",{className:"page-data-item"},_react2.default.createElement("form",{className:"export-form",onSubmit:this.onSubmit},_react2.default.createElement("label",{className:"control-label"},"Export Pages"),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("description",null,"Export all pages in this project in JSON format."),_react2.default.createElement("div",{className:"checkbox"},_react2.default.createElement("label",null,_react2.default.createElement("input",{type:"checkbox",name:"metadata",disabled:n||r,checked:a,onChange:function onChange(t){return e.setState({metadata:t.target.checked})}}),"Include metadata such as line.created and line.updated."))),_react2.default.createElement("div",{className:"text-right"},r?_react2.default.createElement(function DownloadButton(){var e=JSON.stringify(r,null,2),t=URL.createObjectURL(new Blob([e],{type:"application/octet-stream"})),a=_stores2.default.CurrentProject.get().name;return _react2.default.createElement("a",{href:t,download:a+".json",className:"btn btn-danger"},"Click to Download ",_react2.default.createElement("i",{className:"fa fa-download"}))},null):_react2.default.createElement(function SubmitButton(){return _react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"export-page"},_react2.default.createElement("button",{type:"submit",className:(0,_classnames2.default)("btn btn-primary",{disabled:!_stores2.default.CurrentUser.hasProjectPrivilege}),disabled:n},o))},null))))}}]),ExportPagesForm}();exports.default=ExportPagesForm;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../lib/api-client/":452,"../../../stores/":520,"../tooltip":399,"classnames":93}],394:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_highlight="undefined"!=typeof window?window.window.hljs:"undefined"!=typeof global?global.window.hljs:null,_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_apiClient=require("../../../lib/api-client/"),_page=require("page"),_page2=_interopRequireDefault(_page),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_tooltip=require("../tooltip"),_importPagesFile=require("../../../../../share/validator/import-pages-file");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(a,n){try{var i=t[a](n),o=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../../../share/debug")(__filename),ImportPagesForm=function(e){function ImportPagesForm(e){_classCallCheck(this,ImportPagesForm);var t=_possibleConstructorReturn(this,(ImportPagesForm.__proto__||Object.getPrototypeOf(ImportPagesForm)).call(this,e));return t.state=t.initialState,(0,_lodash.bindAll)(t,["onChangeImportFile","onSubmitImportForm","onFileLoad"]),t}return _inherits(ImportPagesForm,_react.Component),_createClass(ImportPagesForm,[{key:"onChangeImportFile",value:function onChangeImportFile(e){var t=e.target.files&&e.target.files[0];this.fileReader=new FileReader,this.setState(this.initialState),this.setState({name:t.name}),this.fileReader.addEventListener("load",this.onFileLoad,!1);try{this.fileReader.readAsText(t)}catch(e){this.setState({error:e.message||e})}}},{key:"onFileLoad",value:function onFileLoad(){var e=void 0,t=void 0;try{e=JSON.parse(this.fileReader.result);var r=(0,_importPagesFile.validateAndFixImportPagesFile)(e);if(r.isInvalid&&!r.fixed)throw r.toString();r.fixed&&(e=r.fixed)}catch(e){return this.setState({error:e.message||e})}t="Ready to import "+e.pages.length+" pages.";var a=e.pages.filter(function(e){return _stores2.default.QuickSearch.exists(e.title)});a.length>0&&(t+=" "+a.length+" pages will be overwritten: "+a.map(function(e){return e.title}).join(", "));var n=new Blob([JSON.stringify(e)]);this.setState({info:t,importReady:!0,importFile:n,error:null})}},{key:"onSubmitImportForm",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,a,n;return regeneratorRuntime.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(e.preventDefault(),t=this.state,r=t.importFile,t.importReady&&r){i.next=4;break}return i.abrupt("return");case 4:return(a=new FormData).append("import-file",r),a.append("name",r.name),this.setState({waitingResponse:!0}),i.prev=8,i.next=11,_apiClient.apiClient.post("/api/page-data/import/"+_stores2.default.CurrentProject.get().name+".json",a);case 11:i.next=18;break;case 13:return i.prev=13,i.t0=i.catch(8),n=i.t0.response?i.t0.response.data.message:i.t0.message,debug(n),i.abrupt("return",this.setState({error:n}));case 18:(0,_page2.default)("/"+_stores2.default.CurrentProject.get().name);case 19:case"end":return i.stop()}},_callee,this,[[8,13]])}));return function onSubmitImportForm(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this.state,t=e.importReady,r=e.waitingResponse,a=JSON.stringify(this.sampleData,null,2),n=(0,_highlight.highlight)("json",a,!0).value;return _react2.default.createElement("div",{className:"page-data-item"},_react2.default.createElement("form",{className:"import-form",onSubmit:this.onSubmitImportForm},_react2.default.createElement("label",{className:"control-label"},"Import Pages"),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("description",null,"Import pages from JSON file like below.",_react2.default.createElement("br",null),"Note that pages with the same title will be overwritten by the import.")),_react2.default.createElement("div",{className:"file"},_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"import-page-select"},_react2.default.createElement("input",{type:"file",name:"import-file",accept:".json",onChange:this.onChangeImportFile}))),this.state.info&&_react2.default.createElement("div",{className:"alert alert-info"},this.state.info),this.state.error&&_react2.default.createElement("div",{className:"alert alert-danger"},this.state.error),_react2.default.createElement("div",{className:"text-right"},_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"import-page-submit"},_react2.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!t||r},r?_react2.default.createElement("span",null,"Importing Pages ",_react2.default.createElement("i",{className:"fa fa-spinner"})):"Import Pages"))),_react2.default.createElement("pre",null,_react2.default.createElement("code",{dangerouslySetInnerHTML:{__html:n}}))))}},{key:"initialState",get:function get(){return{error:null,info:null,importFile:null,importReady:!1,waitingResponse:!1}}},{key:"sampleData",get:function get(){return{pages:[{title:"page1title",lines:["page1title","line2","line3"]},{title:"page2title",lines:["page2title"]}]}}}]),ImportPagesForm}();exports.default=ImportPagesForm;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/components/project-settings-page/project-page-data-form/import-pages.js")
    },{"../../../../../share/debug":566,"../../../../../share/validator/import-pages-file":620,"../../../lib/api-client/":452,"../../../stores/":520,"../tooltip":399,"page":169}],395:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ProjectPageDataForm;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_importPages=require("./import-pages"),_importPages2=_interopRequireDefault(_importPages),_exportPages=require("./export-pages"),_exportPages2=_interopRequireDefault(_exportPages),_bookmarklet=require("./bookmarklet"),_bookmarklet2=_interopRequireDefault(_bookmarklet);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ProjectPageDataForm(){return _react2.default.createElement("div",{className:"project-page-data-form"},_react2.default.createElement(_bookmarklet2.default,null),_react2.default.createElement(_exportPages2.default,null),_react2.default.createElement(_importPages2.default,null))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./bookmarklet":392,"./export-pages":393,"./import-pages":394}],396:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_tooltip=require("./tooltip"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_flags=require("../../../../share/flags");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(o,n){try{var a=t[o](n),s=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ProjectProFeaturesFrom=function(e){function ProjectProFeaturesFrom(e){_classCallCheck(this,ProjectProFeaturesFrom);var t=_possibleConstructorReturn(this,(ProjectProFeaturesFrom.__proto__||Object.getPrototypeOf(ProjectProFeaturesFrom)).call(this,e)),r=_stores2.default.CurrentProject.project.googleAnalyticsCode;return t.state={error:null,message:null,googleAnalyticsCode:r},(0,_lodash.bindAll)(t,["onSubmit","post"]),t}return _inherits(ProjectProFeaturesFrom,_react.Component),_createClass(ProjectProFeaturesFrom,[{key:"onSubmit",value:function onSubmit(e){e.preventDefault();var t={googleAnalyticsCode:this.refs.googleAnalyticsCode.value.trim()};this.post(t,!0)}},{key:"post",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r;return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,_stores2.default.CurrentProject.updatePro(e);case 3:t=o.sent,r=t.googleAnalyticsCode,this.setState({error:null,message:"Saved successfully.",googleAnalyticsCode:r||""}),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),o.t0.response&&o.t0.response.data?this.setState({error:o.t0.response.data.message,message:null}):this.setState({error:"Can’t connect to the servers. Please try again later.",message:null});case 11:return o.abrupt("return",!1);case 12:case"end":return o.stop()}},_callee,this,[[0,8]])}));return function post(t){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this;if(!_flags.ENABLE_GOOGLE_ANALYTICS)return null;var t=_stores2.default.CurrentProject.isOwnerPro&&_stores2.default.CurrentUser.hasProjectPrivilege,r=(0,_classnames2.default)("btn btn-primary",{disabled:!t});return _react2.default.createElement("div",null,_react2.default.createElement("form",{onSubmit:this.onSubmit},_react2.default.createElement(function Error(){return e.state.error?_react2.default.createElement("div",{className:"alert alert-danger"},e.state.error):null},null),_react2.default.createElement(function Message(){return e.state.message?_react2.default.createElement("div",{className:"alert alert-success"},e.state.message):null},null),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("label",{className:"control-label",htmlFor:"googleAnalyticsCode"},"Google Analytics Tracking ID"),_react2.default.createElement("input",{ref:"googleAnalyticsCode",type:"text",className:"form-control",id:"googleAnalyticsCode",value:this.state.googleAnalyticsCode||"",placeholder:"UA-*********-*",disabled:!t,onChange:function onChange(t){return e.setState({googleAnalyticsCode:t.target.value})}})),_react2.default.createElement(_tooltip.OnlyProOwnerTooltip,{id:"save-setting-pro"},_react2.default.createElement("button",{type:"submit",className:r},"Save setting"))))}}]),ProjectProFeaturesFrom}();exports.default=ProjectProFeaturesFrom;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/flags":578,"../../stores/":520,"./tooltip":399,"classnames":93}],397:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_page=require("page"),_page2=_interopRequireDefault(_page),_url=require("url"),_url2=_interopRequireDefault(_url),_reactDisplaySwitch=require("react-display-switch"),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_tooltip=require("./tooltip"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_makePrivateModal=require("../modals/make-private-modal"),_makePrivateModal2=_interopRequireDefault(_makePrivateModal);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(a,n){try{var o=t[a](n),l=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(l).then(function(e){step("next",e)},function(e){step("throw",e)});e(l)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ProjectSettingsForm=function(e){function ProjectSettingsForm(e){_classCallCheck(this,ProjectSettingsForm);var t=_possibleConstructorReturn(this,(ProjectSettingsForm.__proto__||Object.getPrototypeOf(ProjectSettingsForm)).call(this,e));return t.state={error:null,showMakePrivateModal:!1},(0,_lodash.bindAll)(t,["onSubmit","onSubmitPublic","onClickDelete","post"]),t}return _inherits(ProjectSettingsForm,_react.Component),_createClass(ProjectSettingsForm,[{key:"onSubmit",value:function onSubmit(e){e.preventDefault();var t={name:this.refs.name.value,displayName:this.refs.displayName.value};this.post(t)}},{key:"onSubmitPublic",value:function onSubmitPublic(e){e.preventDefault();var t=!_stores2.default.CurrentProject.project.publicVisible,r=_stores2.default.CurrentProject.project.name,a=void 0;a=t?"Make this project public.\nThis is a potentially destructive action.\n\nThe project data will be visible to everyone who visits "+this.httpHost+r+"\nOnly the members who have been invited to this project can edit the data.":"Make this project private.\nThis is a potentially destructive action.\n\nThe project data will be visible only to members who have been invited to this project.",a+="\n\nPlease type in the name of this project ("+r+") to confirm.";var n=prompt(a);null!==n&&(n===r?!_reactDisplaySwitch.When.case("enable_billing")||t?this.post({publicVisible:t}):this.setState({showMakePrivateModal:!0}):alert("Project name does not match."))}},{key:"post",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,_stores2.default.CurrentProject.update(e);case 3:t=r.sent,this.setState({error:null}),(0,_page2.default)("/"+t.name+"/"),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),r.t0.response&&r.t0.response.data?this.setState({error:r.t0.response.data.message}):this.setState({error:"Can’t connect to the servers. Please try again later."});case 11:return r.abrupt("return",!1);case 12:case"end":return r.stop()}},_callee,this,[[0,8]])}));return function post(t){return e.apply(this,arguments)}}()},{key:"onClickDelete",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t;return regeneratorRuntime.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(e=_stores2.default.CurrentProject.project.name,null!==(t=prompt("Are you sure you want to delete this project?\n\nAll pages and history data will be deleted and the members will be dissolved.\n\nPlease type in the name of this project ("+e+") to confirm."))){r.next=5;break}return r.abrupt("return");case 5:if(t===e){r.next=7;break}return r.abrupt("return",alert("Project name does not match."));case 7:return r.prev=7,r.next=10,_stores2.default.CurrentProject.deleteAll();case 10:location.href="/",r.next=16;break;case 13:r.prev=13,r.t0=r.catch(7),r.t0.response&&r.t0.response.data?this.setState({error:r.t0.response.data.message}):this.setState({error:"Can’t connect to the servers. Please try again later."});case 16:case"end":return r.stop()}},_callee2,this,[[7,13]])}));return function onClickDelete(){return e.apply(this,arguments)}}()},{key:"renderFromPublic",value:function renderFromPublic(){var e=_stores2.default.CurrentProject.project.publicVisible,t=void 0,r=void 0,a=void 0;e?(t="Make private",r="Make this project private",a="Make this project visible to only member."):(t="Make public",r="Make this project public",a="Make this project visible to anyone.");var n=["btn"];n.push(e?"btn-primary":"btn-warning");var o=e?"fa fa-lock":"fa fa-unlock";return _react2.default.createElement("form",{onSubmit:this.onSubmitPublic},_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"public-project"},_react2.default.createElement("button",{type:"submit",className:(0,_classnames2.default)(n),style:{float:"right"}},t," ",_react2.default.createElement("span",{className:o}))),_react2.default.createElement("label",null,r),_react2.default.createElement("p",{className:"help-block"},a)))}},{key:"render",value:function render(){var e=this,t=_stores2.default.CurrentProject.get();return _react2.default.createElement("div",null,_react2.default.createElement("form",{onSubmit:this.onSubmit},_react2.default.createElement(function Error(){return e.state.error?_react2.default.createElement("div",{className:"alert alert-danger"},e.state.error):null},null),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("label",{className:"control-label",htmlFor:"displayName"},"Project name"),_react2.default.createElement("input",{ref:"displayName",type:"text",className:"form-control",id:"displayName",defaultValue:t.displayName,placeholder:""})),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("label",{className:"control-label",htmlFor:"name"},"Project url"),_react2.default.createElement("div",{className:"input-group"},_react2.default.createElement("div",{className:"input-group-addon"},this.httpHost),_react2.default.createElement("input",{ref:"name",type:"text",className:"form-control",id:"name",defaultValue:t.name,placeholder:""})),_react2.default.createElement("p",{className:"help-block"},"Note: Once the url has been changed, the old one can no longer be accessed. You can change the project url only once per day so please be careful.")),_react2.default.createElement(_tooltip.OnlyPrivilegeTooltip,{id:"save-setting"},_react2.default.createElement("button",{type:"submit",className:"btn btn-primary"},"Save setting"))),_react2.default.createElement("hr",null),_react2.default.createElement("h4",{style:{margin:"20px 0"}},"Danger Zone"),this.renderFromPublic(),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement(_tooltip.OnlyOwnerTooltip,{id:"delete-project"},_react2.default.createElement("button",{onClick:this.onClickDelete,className:(0,_classnames2.default)("btn btn-danger",{disabled:!_stores2.default.CurrentUser.isProjectOwner}),style:{float:"right"}},"Delete this project")),_react2.default.createElement("label",null,"Delete this project"),_react2.default.createElement("p",{className:"help-block"},"Once you delete a project, there is no going back. Please be certain.")),_react2.default.createElement(_reactDisplaySwitch.When,{enable_billing:!0},_react2.default.createElement(_makePrivateModal2.default,{show:this.state.showMakePrivateModal,onHide:function onHide(){return e.setState({showMakePrivateModal:!1})}})))}},{key:"httpHost",get:function get(){var e=_url2.default.parse(location.href);return e.protocol+"//"+e.host+"/"}}]),ProjectSettingsForm}();exports.default=ProjectSettingsForm;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../modals/make-private-modal":314,"./tooltip":399,"classnames":93,"page":169,"react-display-switch":208,"url":252}],398:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_themes=require("../../constants/themes"),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),c=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ProjectThemeForm=function(e){function ProjectThemeForm(e){_classCallCheck(this,ProjectThemeForm);var t=_possibleConstructorReturn(this,(ProjectThemeForm.__proto__||Object.getPrototypeOf(ProjectThemeForm)).call(this,e));return t.state={submitting:!1,theme:""},(0,_lodash.bindAll)(t,["onChange"]),t}return _inherits(ProjectThemeForm,_react2.default.Component),_createClass(ProjectThemeForm,[{key:"componentWillMount",value:function componentWillMount(){var e=_stores2.default.CurrentProject.get();this.setState({theme:e.theme})}},{key:"onChange",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,n;return regeneratorRuntime.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return t=e.target.id.substring(6),this.setState({theme:t}),e.preventDefault(),this.setState({submitting:!0,error:""}),r={theme:t},a.prev=5,a.next=8,_stores2.default.CurrentProject.update(r);case 8:this.setState({error:null}),_stores2.default.Layout.emitChange(),a.next=17;break;case 12:a.prev=12,a.t0=a.catch(5),a.t0.response?this.setState({error:a.t0.response.data.message}):this.setState({error:"Can’t connect to the servers. Try again later."}),n=_stores2.default.CurrentProject.get(),this.setState({submitting:!1,theme:n.theme});case 17:case"end":return a.stop()}},_callee,this,[[5,12]])}));return function onChange(t){return e.apply(this,arguments)}}()},{key:"renderError",value:function renderError(){return _react2.default.createElement("div",{className:"alert alert-danger"},this.state.error)}},{key:"renderCheckmark",value:function renderCheckmark(){return _react2.default.createElement("svg",{className:"checkmark",width:"36px",height:"36px",viewBox:"0 0 36 36"},_react2.default.createElement("circle",{fill:"#39ac86",cx:"18",cy:"18",r:"18"}),_react2.default.createElement("path",{fill:"#fff",d:"M15.6921374,18.9176049 L22.9682381,11.8622902 C24.1198257,10.7125699 25.9869181,10.7125699 27.1385057,11.8622902 C28.2900933,13.0120104 28.2900933,14.8760752 27.1208334,16.0431933 L17.7520775,25.1377098 C16.6004899,26.2874301 14.7333975,26.2874301 13.5818099,25.1377098 L8.8636907,20.4272414 C7.7121031,19.2775212 7.7121031,17.4134564 8.8636907,16.2637362 C10.0152783,15.114016 11.8823707,15.114016 13.0339583,16.2637362 L15.6921374,18.9176049 Z"}))}},{key:"renderPreview",value:function renderPreview(e){var t=e.navbar,r=e.searchBox,n=e.bodyBg,a=e.newButton,o=e.newButtonBg,c=e.cardHead,l=e.cardBg;return _react2.default.createElement("svg",{className:"preview",width:"105px",height:"82px",viewBox:"0 0 100 78",version:"1.1"},_react2.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},_react2.default.createElement("g",null,_react2.default.createElement("rect",{id:"shadow",fill:"#c3c5cc",x:"0",y:"2",width:"100",height:"76",rx:"4"}),_react2.default.createElement("rect",{id:"body",fill:n,x:"0",y:"0",width:"100",height:"76",rx:"3"}),_react2.default.createElement("path",{d:"M100,19 L0,19 L7.28159498e-17,3 C-5.74179385e-16,1.34314575 1.34314575,3.04359188e-16 3,0 L97,4.4408921e-16 C98.6568542,-3.04359188e-16 100,1.34314575 100,3 L100,19 L100,19 Z",id:"navbar",fill:t}),_react2.default.createElement("path",{d:"M87,76 L87,30 C87,28.8954305 86.1045695,28 85,28 L15,28 C13.8954305,28 13,28.8954305 13,30 L13,76 L87,76 Z",id:"card-bg",fill:l}),_react2.default.createElement("circle",{id:"new-button-bg",fill:o,cx:"29.5",cy:"9.5",r:"5.5"}),_react2.default.createElement("rect",{id:"search-box",fill:r,x:"39",y:"4",width:"37",height:"11",rx:"1"}),_react2.default.createElement("path",{d:"M28.5454545,8.54545455 L26.9545455,8.54545455 C26.4273646,8.54545455 26,8.9728191 26,9.5 C26,10.0271809 26.4273646,10.4545455 26.9545455,10.4545455 L28.5454545,10.4545455 L28.5454545,12.0454545 C28.5454545,12.5726354 28.9728191,13 29.5,13 C30.0271809,13 30.4545455,12.5726354 30.4545455,12.0454545 L30.4545455,10.4545455 L32.0454545,10.4545455 C32.5726354,10.4545455 33,10.0271809 33,9.5 C33,8.9728191 32.5726354,8.54545455 32.0454545,8.54545455 L30.4545455,8.54545455 L30.4545455,6.95454545 C30.4545455,6.42736456 30.0271809,6 29.5,6 C28.9728191,6 28.5454545,6.42736456 28.5454545,6.95454545 L28.5454545,8.54545455 Z",id:"newButton",fill:a}),_react2.default.createElement("path",{d:"M86.7324356,45 C86.9026057,44.7058266 87,44.3642871 87,44 L87,30 C87,28.8954305 86.1045695,28 85,28 L15,28 C13.8954305,28 13,28.8954305 13,30 L13,44 C13,44.3642871 13.0973943,44.7058266 13.2675644,45 L86.7324356,45 L86.7324356,45 Z",id:"card-head",fill:c}))))}},{key:"render",value:function render(){var e=this;return _react2.default.createElement("div",{className:"project-theme-form"},_react2.default.createElement("form",{onSubmit:this.onSubmit},this.state.error&&this.renderError(),_react2.default.createElement("div",{className:"category-list"},_themes.themesByCategory.map(function(t){return _react2.default.createElement("div",{key:t.name},_react2.default.createElement("h4",null,t.title),_react2.default.createElement("div",{className:"theme-list clearfix"},t.themes.map(function(t){var r=e.state.theme===t.name;return _react2.default.createElement("div",{className:(0,_classnames2.default)({active:r}),key:t.name},_react2.default.createElement("a",{onClick:e.onChange,id:"theme-"+t.name},r&&e.renderCheckmark(),e.renderPreview(t.colors),"default"!==t.name&&t.title))})))}))))}}]),ProjectThemeForm}();exports.default=ProjectThemeForm;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../constants/themes":446,"../../stores/":520,"classnames":93}],399:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OnlyMemberTooltip=OnlyMemberTooltip,exports.OnlyOwnerTooltip=OnlyOwnerTooltip,exports.OnlyProOwnerTooltip=OnlyProOwnerTooltip,exports.OnlyPrivilegeTooltip=OnlyPrivilegeTooltip;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function OnlyMemberTooltip(e){var t=e.children,r=e.id,o=_stores2.default.CurrentUser.isProjectMember?"Member (you) only":"Member only",l=_react2.default.createElement(_reactBootstrap.Tooltip,{id:r},o);return _react2.default.createElement(_reactBootstrap.OverlayTrigger,{placement:"top",overlay:l},t)}function OnlyOwnerTooltip(e){var t=e.children,r=e.id,o=_stores2.default.CurrentUser.isProjectOwner?"Owner (you) only":"Owner only",l=_react2.default.createElement(_reactBootstrap.Tooltip,{id:r},o);return _react2.default.createElement(_reactBootstrap.OverlayTrigger,{placement:"top",overlay:l},t)}function OnlyProOwnerTooltip(e){var t=e.children,r=e.id,o=_stores2.default.CurrentUser,l=o.isPro,n=o.isProjectOwner,a=l&&n?"Pro-owner (you) only":"Pro-owner only",i=_react2.default.createElement(_reactBootstrap.Tooltip,{id:r},a);return _react2.default.createElement(_reactBootstrap.OverlayTrigger,{placement:"top",overlay:i},t)}function OnlyPrivilegeTooltip(e){var t=e.children,r=e.id,o=_stores2.default.CurrentProject.get();if(!o.admins||o.admins.length<1)return _react2.default.createElement(OnlyOwnerTooltip,{children:t,id:r});var l=_react2.default.createElement(_reactBootstrap.Tooltip,{id:r},"Owner and admin only");return _react2.default.createElement(_reactBootstrap.OverlayTrigger,{placement:"top",overlay:l},t)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520}],400:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDisplaySwitch=require("react-display-switch"),_reactBootstrap="undefined"!=typeof window?window.window.ReactBootstrap:"undefined"!=typeof global?global.window.ReactBootstrap:null,_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_page=require("./sort-menu/page"),_gridSizeRange=require("./grid-size-range"),_gridSizeRange2=_interopRequireDefault(_gridSizeRange),_newButton=require("./new-button"),_newButton2=_interopRequireDefault(_newButton),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_selectPlanModal=require("./modals/select-plan-modal"),_selectPlanModal2=_interopRequireDefault(_selectPlanModal);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var QuickLaunch=function(e){function QuickLaunch(e){_classCallCheck(this,QuickLaunch);var t=_possibleConstructorReturn(this,(QuickLaunch.__proto__||Object.getPrototypeOf(QuickLaunch)).call(this,e));return t.state=Object.assign(t.makeStateFromStores(),{showSelectPlanModal:!1,projectName:""}),t.subscribe(_stores2.default.CurrentProject,_stores2.default.PageList,_stores2.default.SearchForm,_stores2.default.Layout),t}return _inherits(QuickLaunch,_baseComponent2.default),_createClass(QuickLaunch,[{key:"makeStateFromStores",value:function makeStateFromStores(){var e=_stores2.default.CurrentProject.get();return{layout:_stores2.default.Layout.get(),project:e,projectName:e&&e.name,pageCount:_stores2.default.PageList.count,sort:_stores2.default.PageList.sort,searchFormValue:_stores2.default.SearchForm.get()}}},{key:"onStoreChange",value:function onStoreChange(){this.setState(this.makeStateFromStores())}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){var a=this,r=this.state.project;r&&(("list"===this.state.layout&&"list"!==t.layout||this.state.projectName!==t.projectName)&&!r.plan&&!r.publicVisible&&setTimeout(function(){a.mounted&&a.setState({showSelectPlanModal:!0})},1e3))}},{key:"render",value:function render(){var e=this,t=this.state.project,a=t.name;return _react2.default.createElement("div",{className:(0,_classnames2.default)("quick-launch","layout-"+this.state.layout)},_react2.default.createElement("div",{className:"flex-box"},_react2.default.createElement("div",{className:"flex-item"},_react2.default.createElement("div",{className:"left-box"},_react2.default.createElement("a",{className:"project-home",href:"/"+a+"/"},_react2.default.createElement("span",{className:"title"},t.displayName)),_react2.default.createElement(_reactDisplaySwitch.When,{enable_billing:!0},_react2.default.createElement(PlanBadge,{project:t,onClickSelect:function onClickSelect(){return e.setState({showSelectPlanModal:!0})}})),_react2.default.createElement(PrivateBadge,{project:t}))),"list"===this.state.layout&&_react2.default.createElement("div",{className:"flex-item text-right"},_react2.default.createElement("div",{className:"right-box"},!_stores2.default.PageList.isSearch&&_react2.default.createElement(_gridSizeRange2.default,null),_react2.default.createElement(_page.PageSortMenu,{sort:this.state.sort,onSelect:function onSelect(e){_stores2.default.PageList.sort=e}})))),_stores2.default.CurrentUser.isProjectMember&&_react2.default.createElement(_newButton2.default,null),"list"===this.state.layout&&_stores2.default.PageList.isSearch&&_react2.default.createElement("div",{className:"search-result-count"},_react2.default.createElement("b",{style:{marginRight:"3px"}},_stores2.default.PageList.isSearch?"Search":"Pages"),_react2.default.createElement("small",null,"(",this.state.pageCount,")")),_react2.default.createElement(_reactDisplaySwitch.When,{enable_billing:!0},_react2.default.createElement(_selectPlanModal2.default,{show:this.state.showSelectPlanModal,onHide:function onHide(){return e.setState({showSelectPlanModal:!1})}})))}}]),QuickLaunch}();function PrivateBadge(e){if(e.project.publicVisible)return null;var t=_react2.default.createElement(_reactBootstrap.Tooltip,{id:"private-icon"},"Only members can read & write");return _react2.default.createElement(_reactBootstrap.OverlayTrigger,{placement:"bottom",overlay:t,delayShow:500},_react2.default.createElement("span",{className:"private-badge"},_react2.default.createElement("span",{className:"fa fa-lock"})))}function PlanBadge(e){var t=e.project,a=e.onClickSelect;if(t.publicVisible)return null;if("business"===t.plan)return null;var r=_react2.default.createElement(_reactBootstrap.Tooltip,{id:"plan-icon"},function tooltipMessage(){switch(t.plan){case"business":return"Business use";case"personal":return"Free for non commercial use";default:return"Please select the purpose"}}()),n=void 0;switch(t.plan){case"business":n=_react2.default.createElement("span",{className:"plan-badge"},"Business");break;case"personal":n=_react2.default.createElement("span",{className:"plan-badge"},"Free Plan");break;default:n=_react2.default.createElement("span",{className:"plan-badge",onClick:a},"Select Purpose")}return _react2.default.createElement(_reactBootstrap.OverlayTrigger,{placement:"bottom",overlay:r,delayShow:400},n)}exports.default=QuickLaunch;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./base-component":261,"./grid-size-range":287,"./modals/select-plan-modal":316,"./new-button":338,"./sort-menu/page":418,"classnames":93,"react-display-switch":208}],401:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Ellipsis;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Ellipsis(e){var t=e.onClick;return _react2.default.createElement("li",{className:"ellipsis"},_react2.default.createElement(_actionLink2.default,{role:"button",onClick:t},_react2.default.createElement("div",{className:"circle"},_react2.default.createElement("span",{className:"icon icon-ellipsis"}))))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../action-link":257}],402:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_relatedPage=require("../sort-menu/related-page"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_links=require("./links");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var RelatedPageList=function(e){function RelatedPageList(e){_classCallCheck(this,RelatedPageList);var t=_possibleConstructorReturn(this,(RelatedPageList.__proto__||Object.getPrototypeOf(RelatedPageList)).call(this,e));return t.onStoreChange=t.onStoreChange.bind(t),t.subscribe(_stores2.default.RelatedPage),t.state={links1hop:_stores2.default.RelatedPage.links1hop,links2hop:_stores2.default.RelatedPage.links2hop,emptyLinks:_stores2.default.RelatedPage.emptyLinks,sort:_stores2.default.RelatedPage.sort},t}return _inherits(RelatedPageList,_baseComponent2.default),_createClass(RelatedPageList,[{key:"onStoreChange",value:function onStoreChange(e){this.setState({links1hop:_stores2.default.RelatedPage.links1hop,links2hop:_stores2.default.RelatedPage.links2hop,emptyLinks:_stores2.default.RelatedPage.emptyLinks,sort:_stores2.default.RelatedPage.sort})}},{key:"renderRelatedPageSortMenu",value:function renderRelatedPageSortMenu(){var e=this.state,t=e.links1hop,a=e.links2hop,r=e.sort;return"page"!==_stores2.default.Layout.get()?null:0===t.length&&0===Object.keys(a).length?_react2.default.createElement("div",{className:"page-sort-menu"},_react2.default.createElement("div",{className:"splitter"})):_react2.default.createElement(_relatedPage.RelatedPageSortMenu,{sort:r,onSelect:function onSelect(e){_stores2.default.RelatedPage.sort=e}})}},{key:"render",value:function render(){return _react2.default.createElement("div",{className:"related-page-list clearfix"},this.renderRelatedPageSortMenu(),_react2.default.createElement("ul",{className:"grid"},_react2.default.createElement(_links.Links1hop,{links:this.state.links1hop}),_react2.default.createElement(_links.Links2hop,{links:this.state.links2hop}),_react2.default.createElement(_links.EmptyLinks,{links:this.state.emptyLinks})))}}]),RelatedPageList}();exports.default=RelatedPageList;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../base-component":261,"../sort-menu/related-page":419,"./links":403}],403:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EmptyLinks=exports.Links2hop=exports.Links1hop=void 0;var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],n=!0,i=!1,l=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw l}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_relationLabel=require("./relation-label"),_ellipsis=require("./ellipsis"),_ellipsis2=_interopRequireDefault(_ellipsis),_pageListItem=require("../page-list-item/"),_pageListItem2=_interopRequireDefault(_pageListItem),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_responsive=require("../../lib/responsive");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Splitter=function Splitter(){return _react2.default.createElement("li",{className:"splitter"})},Links1hop=exports.Links1hop=function Links1hop(e){var t=e.links;if(!t||t.length<1)return null;var r=t.map(function(e){return _react2.default.createElement(_pageListItem2.default,{key:e.title,page:e,style:"grid"})});return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(Splitter,null),_react2.default.createElement(_relationLabel.LinksLabel,null),r)},Links2hop=exports.Links2hop=function(e){function Links2hop(e){_classCallCheck(this,Links2hop);var t=_possibleConstructorReturn(this,(Links2hop.__proto__||Object.getPrototypeOf(Links2hop)).call(this,e));return t.onClickEllipsis=t.onClickEllipsis.bind(t),t.limits=new Map,t.defaultLimit=(0,_responsive.whenXs)()?10:22,t.nextLimit=(0,_responsive.whenXs)()?18:96,t.pageId=_stores2.default.Page.id,t.subscribe(_stores2.default.Page),t}return _inherits(Links2hop,_baseComponent2.default),_createClass(Links2hop,[{key:"onStoreChange",value:function onStoreChange(e){this.pageId!==_stores2.default.Page.id&&(this.pageId=_stores2.default.Page.id,this.limits=new Map,this.forceUpdate())}},{key:"onClickEllipsis",value:function onClickEllipsis(e){var t=this.limits.get(e)||this.defaultLimit;this.limits.set(e,t+this.nextLimit),this.forceUpdate()}},{key:"render",value:function render(){var e=this,t=this.props.links;return t?Object.entries(t).filter(function(e){var t=_slicedToArray(e,2);t[0];return t[1].filter(function(e){return e.show}).length>0}).map(function(t){var r=_slicedToArray(t,2),n=r[0],i=r[1],l=e.limits.get(n)||e.defaultLimit,a=i.filter(function(e){return e.show}),o=a.length>l+1,s=a.slice(0,o?l:l+1).map(function(e){return _react2.default.createElement(_pageListItem2.default,{key:e.title,page:e,style:"grid"})});return _react2.default.createElement(_react.Fragment,{key:n},_react2.default.createElement(Splitter,null),_react2.default.createElement(_relationLabel.HeadwordLabel,{title:n}),s,o&&_react2.default.createElement(_ellipsis2.default,{title:n,onClick:function onClick(){return e.onClickEllipsis(n)}}))}):null}}],[{key:"propTypes",get:function get(){return{links:_propTypes2.default.object}}}]),Links2hop}(),EmptyLinks=exports.EmptyLinks=function EmptyLinks(e){var t=e.links;if(!t||t.length<1)return null;var r=t.map(function(e){var t={title:e};return _react2.default.createElement(_pageListItem2.default,{key:e,style:"grid",page:t,empty:!0})});return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(Splitter,null),_react2.default.createElement(_relationLabel.NewLinksLabel,null),r)};

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/responsive":474,"../../stores/":520,"../base-component":261,"../page-list-item/":349,"./ellipsis":401,"./relation-label":404,"prop-types":186}],404:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LinksLabel=LinksLabel,exports.NewLinksLabel=NewLinksLabel,exports.HeadwordLabel=HeadwordLabel;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_pageTitle=require("../../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function LinksLabel(){return _react2.default.createElement("li",{className:"relation-label links"},_react2.default.createElement("a",null,_react2.default.createElement("span",{className:"title"},"Links"),_react2.default.createElement("span",{className:"icon icon-link icon-lg"})),_react2.default.createElement("span",{className:"arrow"}))}function NewLinksLabel(){return _react2.default.createElement("li",{className:"relation-label empty-links"},_react2.default.createElement("a",null,_react2.default.createElement("span",{className:"title"},"New Links"),_react2.default.createElement("span",{className:"icon icon-new-link icon-lg"})),_react2.default.createElement("span",{className:"arrow"}))}function HeadwordLabel(e){var a=e.title,t=_stores2.default.CurrentProject.get().name;return _react2.default.createElement("li",{className:"relation-label headword"},_react2.default.createElement("a",{href:"/"+t+"/"+(0,_pageTitle.encodeTitleURI)(a)},_react2.default.createElement("span",{className:"title"},a),_react2.default.createElement("span",{className:"icon icon-link icon-lg"})),_react2.default.createElement("span",{className:"arrow"}))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/page-title":589,"../../stores/":520}],405:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _get=function get(e,t,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,r)}if("value"in o)return o.value;var n=o.get;return void 0!==n?n.call(r):void 0},_createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_page=require("page"),_page2=_interopRequireDefault(_page),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_key=require("../constants/key"),_pageTitle=require("../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var SearchForm=function(e){function SearchForm(){_classCallCheck(this,SearchForm);var e=_possibleConstructorReturn(this,(SearchForm.__proto__||Object.getPrototypeOf(SearchForm)).call(this));return(0,_lodash.bindAll)(e,["onSubmit","onChange","onFocus","onBlur","onKeyDown"]),e.state={quickSearchReady:_stores2.default.QuickSearch.ready,value:_stores2.default.SearchForm.get(),focus:!1,pageCount:_stores2.default.PageList.count},e.subscribe(_stores2.default.SearchForm,_stores2.default.PageList,_stores2.default.QuickSearch),e}return _inherits(SearchForm,_baseComponent2.default),_createClass(SearchForm,null,[{key:"propTypes",get:function get(){return{projectName:_propTypes2.default.string.isRequired,forMobile:_propTypes2.default.bool,onSubmit:_propTypes2.default.func,onQuickSearchSelect:_propTypes2.default.func}}}]),_createClass(SearchForm,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store;e.event;switch(t){case _stores2.default.SearchForm:var r=t.get();this.setState({value:r});break;case _stores2.default.PageList:var o=t.count;this.setState({pageCount:o});break;case _stores2.default.QuickSearch:this.setState({quickSearchReady:t.ready})}}},{key:"componentDidMount",value:function componentDidMount(){_get(SearchForm.prototype.__proto__||Object.getPrototypeOf(SearchForm.prototype),"componentDidMount",this).call(this),this.props.forMobile&&!this.state.value&&this.focusSearchInput()}},{key:"onChange",value:function onChange(e){_stores2.default.SearchForm.set(e.target.value)}},{key:"onFocus",value:function onFocus(e){clearTimeout(this.blurTimeout),this.setState({focus:!0})}},{key:"onBlur",value:function onBlur(e){var t=this;this.blurTimeout=setTimeout(function(){t.mounted&&t.setState({focus:!1})},10)}},{key:"onSubmit",value:function onSubmit(e){e.preventDefault();var t=this.props.projectName,r=this.state.value;if(!r)return(0,_page2.default)("/"+t+"/");(0,_page2.default)("/"+t+"/search/page?q="+encodeURIComponent(r)),this.setState({focus:!1}),this.props.onSubmit&&this.props.onSubmit()}},{key:"onKeyDown",value:function onKeyDown(e){e.keyCode===_key.Keys.DOWN&&this.focusResultsHead(),this.setState({focus:!0})}},{key:"focusResultsHead",value:function focusResultsHead(){var e=this.refs.searchResultsHead;e&&requestAnimationFrame(function(){return e.focus()})}},{key:"focusSearchInput",value:function focusSearchInput(){var e=this;requestAnimationFrame(function(){return e.refs.input.focus()})}},{key:"renderQuickSearch",value:function renderQuickSearch(){var e=this,t=this.props.projectName,r=this.state,o=r.value,a=r.focus,n=r.quickSearchReady;if(!o||!a)return[];if(!n)return[_react2.default.createElement("li",{key:"building-index",className:"dropdown-item building-index"},_react2.default.createElement("a",null,"Loading index..."))];for(var s=_stores2.default.QuickSearch.search(o).filter(function(e){return e.exists}).slice(0,100).map(function(e){return e.title}),u=[],i=function onClick(t){e.setState({focus:!1}),e.props.onQuickSearchSelect&&e.props.onQuickSearchSelect()},c=0;c<s.length;c++){var l=s[c],f=void 0;if(0===c){f=_react2.default.createElement("a",{href:"/"+t+"/"+(0,_pageTitle.encodeTitleURI)(l),ref:"searchResultsHead",onKeyDown:function onKeyDown(t){t.keyCode===_key.Keys.UP&&e.focusSearchInput()},onClick:i},l)}else f=_react2.default.createElement("a",{href:"/"+t+"/"+(0,_pageTitle.encodeTitleURI)(l),onClick:i},l);u.push(_react2.default.createElement("li",{key:l,className:"dropdown-item"},f))}return u}},{key:"render",value:function render(){var e=this.state.value,t=this.renderQuickSearch(),r=(0,_classnames2.default)({dropdown:!0,open:t.length>0});return _react2.default.createElement("form",{className:(0,_classnames2.default)("search-form",{"for-mobile":this.props.forMobile}),role:"search",onSubmit:this.onSubmit,onFocus:this.onFocus,onBlur:this.onBlur},_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("div",{className:r},_react2.default.createElement("input",{type:"text",className:"form-control",onKeyDown:this.onKeyDown,onChange:this.onChange,value:e,ref:"input"}),_react2.default.createElement("ul",{className:"dropdown-menu",role:"menu",style:{maxHeight:"11em",maxWidth:"100%",overflow:"auto"},ref:"dropdownMenu"},t)),_react2.default.createElement("button",{tabIndex:"-1",type:"submit",className:(0,_classnames2.default)("btn","btn-default",{focus:this.state.focus})},_react2.default.createElement("i",{className:"fa fa-search"}))))}}]),SearchForm}();exports.default=SearchForm;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../share/page-title":589,"../constants/key":444,"../stores/":520,"./base-component":261,"classnames":93,"page":169,"prop-types":186}],406:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_pageTitle=require("../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var SearchNotFound=function(e){function SearchNotFound(){return _classCallCheck(this,SearchNotFound),_possibleConstructorReturn(this,(SearchNotFound.__proto__||Object.getPrototypeOf(SearchNotFound)).apply(this,arguments))}return _inherits(SearchNotFound,_react.Component),_createClass(SearchNotFound,[{key:"render",value:function render(){var e=_stores2.default.PageList.searchQuery,t="/"+_stores2.default.CurrentProject.get().name+"/"+(0,_pageTitle.encodeTitleURI)(e);return _react2.default.createElement("div",{className:"search-not-found"},_react2.default.createElement("div",{className:"icon"},_react2.default.createElement("span",{className:"fa fa-search"})),_react2.default.createElement("p",null,"Sorry, we couldn’t find any page for ",_react2.default.createElement("b",null,e),"."),_react2.default.createElement("div",null,_react2.default.createElement("a",{href:t,rel:"route",className:"btn btn-default btn-sm"},"Create ",e,"?")))}}]),SearchNotFound}();exports.default=SearchNotFound;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../share/page-title":589,"../stores/":520}],407:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CopyButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_execCopy=require("exec-copy"),_execCopy2=_interopRequireDefault(_execCopy),_popupMenu=require("../popup-menu"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function CopyButton(){var e=_stores2.default.Selection.getSelectedText();return _react2.default.createElement(_popupMenu.Button,{onClick:function _onClick(t){(0,_execCopy2.default)(e),_stores2.default.Selection.clear(),_stores2.default.Cursor.focus()}},"Copy")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../popup-menu":371,"exec-copy":139}],408:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StrongButton=StrongButton,exports.ItalicButton=ItalicButton,exports.StrikeButton=StrikeButton,exports.PlainButton=PlainButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_textReplaceButton=require("./text-replace-button"),_textReplaceButton2=_interopRequireDefault(_textReplaceButton),_scrapboxParser=require("../../../../share/scrapbox-parser/"),_plainText=require("../../lib/scrapbox-render/plain-text");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function StrongButton(){return _react2.default.createElement(_textReplaceButton2.default,{onClick:function onClick(t){return"[* "+t+"]"}},_react2.default.createElement("strong",null,"Strong"))}function ItalicButton(){return _react2.default.createElement(_textReplaceButton2.default,{onClick:function onClick(t){return"[/ "+t+"]"}},_react2.default.createElement("i",null,"Italic"))}function StrikeButton(){return _react2.default.createElement(_textReplaceButton2.default,{onClick:function onClick(t){return"[- "+t+"]"}},_react2.default.createElement("strike",null,"Strike"))}function PlainButton(){return _react2.default.createElement(_textReplaceButton2.default,{onClick:function clearDecorations(t){return(0,_plainText.renderPlainText)((0,_scrapboxParser.parseScrapboxSyntax)(t))}},_react2.default.createElement("span",null,"Plain"))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/scrapbox-parser/":605,"../../lib/scrapbox-render/plain-text":476,"./text-replace-button":414}],409:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=DeleteButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_popupMenu=require("../popup-menu");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function DeleteButton(){return _react2.default.createElement(_popupMenu.Button,{onClick:function onClick(){_stores2.default.Line.deleteRange(_stores2.default.Selection.getRange())}},"Delete")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../popup-menu":371}],410:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_reactDisplaySwitch=require("react-display-switch"),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_deepEqual=require("deep-equal"),_deepEqual2=_interopRequireDefault(_deepEqual),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_selection=require("./selection"),_selection2=_interopRequireDefault(_selection),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_computeLine=require("../../lib/compute-line"),_browser=require("../../lib/browser"),_popupMenu=require("../popup-menu"),_tagButton=require("./tag-button"),_tagButton2=_interopRequireDefault(_tagButton),_copyButton=require("./copy-button"),_copyButton2=_interopRequireDefault(_copyButton),_deleteButton=require("./delete-button"),_deleteButton2=_interopRequireDefault(_deleteButton),_newPageButton=require("./new-page-button"),_newPageButton2=_interopRequireDefault(_newPageButton),_decoButton=require("./deco-button"),_textReplaceButton=require("./text-replace-button"),_textReplaceButton2=_interopRequireDefault(_textReplaceButton),_mobileOutlineEditButton=require("../mobile-outline-edit-button"),_decorateLines=require("../../../../share/decorate-lines"),_decorateLines2=_interopRequireDefault(_decorateLines);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var GOSA=4,Selections=function(e){function Selections(e){_classCallCheck(this,Selections);var t=_possibleConstructorReturn(this,(Selections.__proto__||Object.getPrototypeOf(Selections)).call(this,e));return t.state={startPoint:null,endPoint:null},t.subscribe(_stores2.default.LineDOM),t}return _inherits(Selections,_baseComponent2.default),_createClass(Selections,[{key:"onStoreChange",value:function onStoreChange(){this.componentWillReceiveProps(this.props)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){if(e.range){if(!_stores2.default.Selection.hasSelection(e.range))return this.setState({startPoint:null,endPoint:null});var t=_stores2.default.Selection.normalizeOrder(e.range);if(!t.start||!t.end)return null;var n=(0,_computeLine.getPointFromCharIndex)(t.start)||this.state.startPoint,r=(0,_computeLine.getPointFromCharIndex)(t.end)||this.state.endPoint;this.setState({startPoint:n,endPoint:r})}}},{key:"popupButtons",value:function popupButtons(e){var t=e.range,n=(0,_decorateLines2.default)(_stores2.default.Line.getAll())[t.start.line];if(!n)return[];var r=_stores2.default.Selection.hasMultiLinesSelection(t);if(_stores2.default.CurrentUser.isProjectMember){if((0,_browser.isTouchDevice)()){var o=[_react2.default.createElement(_copyButton2.default,{key:"copy"}),_react2.default.createElement(_deleteButton2.default,{key:"delete"})];return 0===t.start.line?o:n.codeBlock||n.tableBlock||n.cli?o:t.start.line===t.end.line?[_react2.default.createElement(_tagButton2.default,{key:"tag"})].concat(o):o}return 0===t.start.line?[]:n.codeBlock||n.tableBlock||n.cli?[]:function decoButtons(){var e=r?[_react2.default.createElement(_newPageButton2.default,{key:"newpage"}),_react2.default.createElement(_decoButton.PlainButton,{key:"plain"})]:[_react2.default.createElement(_tagButton2.default,{key:"tag"}),_react2.default.createElement(_decoButton.StrongButton,{key:"strong"}),_react2.default.createElement(_decoButton.ItalicButton,{key:"italic"}),_react2.default.createElement(_decoButton.StrikeButton,{key:"strike"}),_react2.default.createElement(_decoButton.PlainButton,{key:"plain"})],t=_stores2.default.PopupMenu.buttons.map(function(e){var t=e.title,n=e.onClick;return _react2.default.createElement(_textReplaceButton2.default,{onClick:n,key:t},t)});return[].concat(e,_toConsumableArray(t))}()}return(0,_browser.isTouchDevice)()?[_react2.default.createElement(_copyButton2.default,{key:"copy"})]:[]}},{key:"renderPopupMenu",value:function renderPopupMenu(){if(!_stores2.default.CurrentUser.isProjectMember&&!(0,_browser.isTouchDevice)())return null;if((0,_browser.isTouchDevice)()&&_stores2.default.MobileOutlineEdit.movingVertical)return null;var e=this.state,t=e.startPoint,n=e.endPoint,r=_stores2.default.Selection.normalizeOrder(this.props.range),o=this.popupButtons({range:r});if(o.length<1)return null;var i=t.y;return(0,_browser.isTouchDevice)()&&_stores2.default.Selection.hasMultiLinesSelection(r)&&(i-=15),_react2.default.createElement(_popupMenu.PopupMenuAtPosition,{x:(t.x+n.x)/2,y:i},o)}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){return!(0,_deepEqual2.default)(this.state.startPoint,t.startPoint)||!(0,_deepEqual2.default)(this.state.endPoint,t.endPoint)}},{key:"renderMoveUpButton",value:function renderMoveUpButton(){var e=this.state.startPoint;return _stores2.default.Selection.hasMultiLinesSelection(this.props.range)?_react2.default.createElement(_reactDisplaySwitch.When,{touch_device:!0,and:!0,project_member_user:!0},_react2.default.createElement(_mobileOutlineEditButton.MoveUpButton,{x:120,y:e.y-30,onTouchEnd:function onTouchEnd(){_stores2.default.Line.moveLinesVertical(-1)}})):null}},{key:"renderMoveDownButton",value:function renderMoveDownButton(){var e=this.state.endPoint;return _stores2.default.Selection.hasMultiLinesSelection(this.props.range)?_react2.default.createElement(_reactDisplaySwitch.When,{touch_device:!0,and:!0,project_member_user:!0},_react2.default.createElement(_mobileOutlineEditButton.MoveDownButton,{x:120,y:e.y+20,onTouchEnd:function onTouchEnd(){_stores2.default.Line.moveLinesVertical(1)}})):null}},{key:"render",value:function render(){var e=this.state.startPoint,t=this.state.endPoint;if(!e||!t)return null;if(t.y-e.y>e.height+GOSA){var n=(0,_jquery2.default)(".editor").width(),r={top:e.y,left:e.x,width:n-e.x,height:e.height},o={top:e.y+e.height,left:0,width:n,height:t.y-(e.y+e.height)},i={top:t.y,left:0,width:t.x,height:t.height};return _react2.default.createElement("div",{className:"selections"},this.renderPopupMenu(),this.renderMoveUpButton(),_react2.default.createElement(_selection2.default,{style:r,knobHead:!0}),_react2.default.createElement(_selection2.default,{style:o}),_react2.default.createElement(_selection2.default,{style:i,knobTail:!0}),this.renderMoveDownButton())}if(t.y-e.y>GOSA){var u=(0,_jquery2.default)(".editor").width(),a={top:e.y,left:e.x,width:u-e.x,height:t.y-e.y},l={top:t.y,left:0,width:t.x,height:t.height};return _react2.default.createElement("div",{className:"selections"},this.renderPopupMenu(),this.renderMoveUpButton(),_react2.default.createElement(_selection2.default,{style:a,knobHead:!0}),_react2.default.createElement(_selection2.default,{style:l,knobTail:!0}),this.renderMoveDownButton())}var s={top:e.y,left:e.x,width:t.x-e.x,height:e.height};return _react2.default.createElement("div",{className:"selections"},this.renderPopupMenu(),_react2.default.createElement(_selection2.default,{style:s,knobHead:!0,knobTail:!0}))}}],[{key:"propTypes",get:function get(){return{range:_propTypes2.default.object.isRequired}}}]),Selections}();exports.default=Selections;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/decorate-lines":571,"../../lib/browser":457,"../../lib/compute-line":459,"../../stores/":520,"../base-component":261,"../mobile-outline-edit-button":309,"../popup-menu":371,"./copy-button":407,"./deco-button":408,"./delete-button":409,"./new-page-button":411,"./selection":412,"./tag-button":413,"./text-replace-button":414,"deep-equal":105,"prop-types":186,"react-display-switch":208}],411:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=NewPageButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_localSettings=require("../../lib/local-settings/"),_localSettings2=_interopRequireDefault(_localSettings),_textReplaceButton=require("./text-replace-button"),_textReplaceButton2=_interopRequireDefault(_textReplaceButton),_scrapboxParser=require("../../../../share/scrapbox-parser/"),_pageTitle=require("../../lib/scrapbox-render/page-title"),_pageTitle2=require("../../../../share/page-title"),_pageTitle3=require("../../../../share/validator/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var getDefaultTitle=function getDefaultTitle(){return"Untitled "+(new Date).toLocaleString()};function findTitle(e){var t=!0,r=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var n=i.value,o=(0,_pageTitle.renderPageTitle)((0,_scrapboxParser.parseScrapboxSyntax)(n));if((0,_pageTitle3.validatePageTitle)(o).isValid)return o}}catch(e){r=!0,a=e}finally{try{!t&&l.return&&l.return()}finally{if(r)throw a}}}function NewPageButton(){return _react2.default.createElement(_textReplaceButton2.default,{onClick:function createNewPage(e){var t=e.split(/[\r\n]/g),r=findTitle(t)||getDefaultTitle(),a=_stores2.default.Line.lines.getTitle();t.unshift("from ["+a+"]");var i=_stores2.default.CurrentProject.get().name;return _localSettings2.default.set("appendPageBody",{projectName:i,lines:t}),window.open("/"+i+"/"+(0,_pageTitle2.encodeTitleURI)(r)),"["+r+"]"}},"NewPage")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/page-title":589,"../../../../share/scrapbox-parser/":605,"../../../../share/validator/page-title":622,"../../lib/local-settings/":467,"../../lib/scrapbox-render/page-title":475,"../../stores/":520,"./text-replace-button":414}],412:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_browser=require("../../lib/browser");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Selection=function(e){function Selection(){return _classCallCheck(this,Selection),_possibleConstructorReturn(this,(Selection.__proto__||Object.getPrototypeOf(Selection)).apply(this,arguments))}return _inherits(Selection,_react.Component),_createClass(Selection,[{key:"render",value:function render(){var e=this.props.style;return(0,_browser.isTouchDevice)()?_react2.default.createElement("div",{style:e,className:(0,_classnames2.default)(["selection",this.props.knobHead&&"knob-head",this.props.knobTail&&"knob-tail"])}):_react2.default.createElement("div",{className:"selection",style:e})}}],[{key:"propTypes",get:function get(){return{style:_propTypes2.default.object.isRequired,knobHead:_propTypes2.default.bool,knobTail:_propTypes2.default.bool}}}]),Selection}();exports.default=Selection;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/browser":457,"classnames":93,"prop-types":186}],413:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=TagButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_textReplaceButton=require("./text-replace-button"),_textReplaceButton2=_interopRequireDefault(_textReplaceButton),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function TagButton(){var e=_stores2.default.Selection.getSelectedText();return/^https?:\/\/[^\s]+\.(jpe?g|gif|png|svg)$/i.test(e)?_react2.default.createElement(_textReplaceButton2.default,{onClick:function onClick(e){return"["+e+"]"}},"Embed Image ",_react2.default.createElement("img",{src:e,style:{maxHeight:64}})):/^https?:\/\/[^\s]+$/i.test(e)?_react2.default.createElement(_textReplaceButton2.default,{onClick:function onClick(e){return"["+e+"]"}},"[External Link]"):_react2.default.createElement(_textReplaceButton2.default,{onClick:function onClick(e){return"["+e+"]"}},"[Link]")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"./text-replace-button":414}],414:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=TextReplaceButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_popupMenu=require("../popup-menu"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function TextReplaceButton(e){var t=e.onClick,r=e.children,o=e.className,n=_stores2.default.Selection.getSelectedText();return _react2.default.createElement(_popupMenu.Button,{onClick:function _onClick(e){var r=t(n);if("string"==typeof r){var o=_stores2.default.Selection.getRange({normalizeOrder:!0});_stores2.default.Line.deleteRange(o),_stores2.default.Line.addChar(r),_stores2.default.Selection.clear(),_stores2.default.Cursor.hide()}},className:o},"function"!=typeof r?r:r(n))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../popup-menu":371}],415:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_computeLine=require("../lib/compute-line"),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var SharedCursor=function(e){function SharedCursor(e){_classCallCheck(this,SharedCursor);var r=_possibleConstructorReturn(this,(SharedCursor.__proto__||Object.getPrototypeOf(SharedCursor)).call(this,e));return r.state={cursors:_stores2.default.SharedCursor.getAll()},r.subscribe(_stores2.default.SharedCursor),r}return _inherits(SharedCursor,_baseComponent2.default),_createClass(SharedCursor,[{key:"onStoreChange",value:function onStoreChange(){this.setState({cursors:_stores2.default.SharedCursor.getAll()})}},{key:"render",value:function render(){var e=[];for(var r in this.state.cursors){var t=this.state.cursors[r],o=(0,_computeLine.getPointFromCharIndex)(t.position,{vagueValue:!0});if(o){var n={top:o.y,left:o.x,height:o.height};t.visible||(n.display="none"),e.push(_react2.default.createElement("div",{key:r,className:"cursor",style:n},_react2.default.createElement("div",{className:"user-flag"},t.user.displayName||"Unknown")))}}return _react2.default.createElement("div",{className:"shared-cursors"},e)}}]),SharedCursor}();exports.default=SharedCursor;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../lib/compute-line":459,"../stores/":520,"./base-component":261}],416:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_actionLink=require("./action-link"),_actionLink2=_interopRequireDefault(_actionLink),_lang=require("../lang/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ShowMoreText=function(e){function ShowMoreText(e){_classCallCheck(this,ShowMoreText);var t=_possibleConstructorReturn(this,(ShowMoreText.__proto__||Object.getPrototypeOf(ShowMoreText)).call(this,e));return t.state={showMore:!1},t}return _inherits(ShowMoreText,_react.Component),_createClass(ShowMoreText,[{key:"render",value:function render(){var e=this,t=this.state.showMore;return _react2.default.createElement(_react.Fragment,null,t&&this.props.children,t?_react2.default.createElement(_actionLink2.default,{role:"button",onClick:function onClick(){return e.setState({showMore:!1})}},"« ",(0,_lang.t)("ShowMoreText.close")):_react2.default.createElement(_actionLink2.default,{role:"button",onClick:function onClick(){return e.setState({showMore:!0})}},(0,_lang.t)("ShowMoreText.detail")," »"))}}]),ShowMoreText}();exports.default=ShowMoreText;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../lang/":449,"./action-link":257}],417:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Menu=exports.Button=void 0;var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_actionLink=require("../action-link"),_actionLink2=_interopRequireDefault(_actionLink);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Button=exports.Button=function Button(e){var t=e.sort,r=e.items;return _react2.default.createElement("a",{className:"tool-btn dropdown-toggle",role:"button",tabIndex:"0",id:"dropdownMenuSort","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},r[t],_react2.default.createElement("span",{className:"caret"}))},Menu=exports.Menu=function Menu(e){var t=e.sort,r=e.items,n=e.onSelect,a=[],o=function _loop(e,r){a.push(_react2.default.createElement("li",{key:e},_react2.default.createElement(_actionLink2.default,{role:"menuitem",onClick:function onClick(){return n(e)},className:(0,_classnames2.default)({selected:t===e})},r)))},l=!0,i=!1,u=void 0;try{for(var c,d=Object.entries(r)[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var s=c.value,f=_slicedToArray(s,2);o(f[0],f[1])}}catch(e){i=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(i)throw u}}return _react2.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenuSort"},_react2.default.createElement("li",{key:"header",className:"dropdown-header"},"Sort by"),a)};

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../action-link":257,"classnames":93}],418:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();exports.PageSortMenu=PageSortMenu;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_=require("./"),_pageSort=require("../../../../share/page-sort");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function PageSortMenu(e){var t=e.sort,r=e.onSelect;return _react2.default.createElement("div",{className:"page-sort-menu"},_react2.default.createElement("div",{className:"dropdown"},_react2.default.createElement(_.Button,{sort:t,items:_pageSort.pageSorts}),_react2.default.createElement(PageSortMenuItems,{onSelect:r,items:_pageSort.pageSorts})))}var PageSortMenuItems=function(e){function PageSortMenuItems(e){_classCallCheck(this,PageSortMenuItems);var t=_possibleConstructorReturn(this,(PageSortMenuItems.__proto__||Object.getPrototypeOf(PageSortMenuItems)).call(this,e));return t.state={sort:_stores2.default.PageList.sort},t.subscribe(_stores2.default.PageList),t}return _inherits(PageSortMenuItems,_baseComponent2.default),_createClass(PageSortMenuItems,[{key:"onStoreChange",value:function onStoreChange(){this.setState({sort:_stores2.default.PageList.sort})}},{key:"render",value:function render(){var e=this.props,t=e.items,r=e.onSelect;return _react2.default.createElement(_.Menu,{sort:this.state.sort,items:t,onSelect:r})}}],[{key:"propTypes",get:function get(){return{items:_propTypes2.default.object.isRequired,onSelect:_propTypes2.default.func.isRequired}}}]),PageSortMenuItems}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/page-sort":588,"../../stores/":520,"../base-component":261,"./":417,"prop-types":186}],419:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();exports.RelatedPageSortMenu=RelatedPageSortMenu;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_=require("./"),_pageSort=require("../../../../share/page-sort");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function RelatedPageSortMenu(e){var t=e.sort,r=e.onSelect;return _react2.default.createElement("div",{className:"related-page-sort-menu page-sort-menu"},_react2.default.createElement("div",{className:"dropdown"},_react2.default.createElement(_.Button,{sort:t,items:_pageSort.relatedPageSorts}),_react2.default.createElement(RelatedPageSortMenuItems,{onSelect:r,items:_pageSort.relatedPageSorts})))}var RelatedPageSortMenuItems=function(e){function RelatedPageSortMenuItems(e){_classCallCheck(this,RelatedPageSortMenuItems);var t=_possibleConstructorReturn(this,(RelatedPageSortMenuItems.__proto__||Object.getPrototypeOf(RelatedPageSortMenuItems)).call(this,e));return t.state={sort:_stores2.default.RelatedPage.sort},t.subscribe(_stores2.default.RelatedPage),t}return _inherits(RelatedPageSortMenuItems,_baseComponent2.default),_createClass(RelatedPageSortMenuItems,[{key:"onStoreChange",value:function onStoreChange(){this.setState({sort:_stores2.default.RelatedPage.sort})}},{key:"render",value:function render(){var e=this.props,t=e.items,r=e.onSelect;return _react2.default.createElement(_.Menu,{sort:this.state.sort,items:t,onSelect:r})}}],[{key:"propTypes",get:function get(){return{items:_propTypes2.default.object.isRequired,onSelect:_propTypes2.default.func.isRequired}}}]),RelatedPageSortMenuItems}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/page-sort":588,"../../stores/":520,"../base-component":261,"./":417,"prop-types":186}],420:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}();exports.default=StatusBar,exports.Item=Item;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_syncStatusBar=require("./sync-status-bar"),_syncStatusBar2=_interopRequireDefault(_syncStatusBar),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function StatusBar(){switch(_stores2.default.Layout.get()){case"page":return _react2.default.createElement(PageStatusBar,null);case"list":return _react2.default.createElement(PageListStatusBar,null)}return null}function Item(e){var t=e.children,a=e.className;return _react2.default.createElement("span",{className:(0,_classnames2.default)("item",a)},t)}var PageStatusBar=function PageStatusBar(){return _react2.default.createElement(_syncStatusBar2.default,{className:"page-status-bar"})},PageListStatusBar=function(e){function PageListStatusBar(){_classCallCheck(this,PageListStatusBar);var e=_possibleConstructorReturn(this,(PageListStatusBar.__proto__||Object.getPrototypeOf(PageListStatusBar)).call(this));return e.state={pageCount:_stores2.default.PageList.count},e.subscribe(_stores2.default.PageList),e}return _inherits(PageListStatusBar,_baseComponent2.default),_createClass(PageListStatusBar,[{key:"onStoreChange",value:function onStoreChange(){var e=_stores2.default.PageList.count;this.setState({pageCount:e})}},{key:"render",value:function render(){return _react2.default.createElement(_syncStatusBar2.default,{className:"page-list-status-bar"},_react2.default.createElement(Item,null,this.state.pageCount," pages"))}}]),PageListStatusBar}();

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../base-component":261,"./sync-status-bar":422,"classnames":93}],421:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_=require("./"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_browser=require("../../lib/browser");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Saved=function(e){function Saved(e){_classCallCheck(this,Saved);var t=_possibleConstructorReturn(this,(Saved.__proto__||Object.getPrototypeOf(Saved)).call(this,e));return t.state={showMessageUndo:!1},t}return _inherits(Saved,_react.Component),_createClass(Saved,[{key:"renderMessageSaved",value:function renderMessageSaved(){var e=this;return _react2.default.createElement("span",{onClick:function onClick(){(0,_browser.isTouchDevice)()&&!_stores2.default.Undo.isEmpty&&e.setState({showMessageUndo:!0})}},_react2.default.createElement(_.Item,null,_react2.default.createElement("i",{className:"fa fa-check-circle"})),this.props.verbose&&_react2.default.createElement(_.Item,null,"Saved"))}},{key:"renderMessageUndo",value:function renderMessageUndo(){return _react2.default.createElement("span",{onClick:function onClick(){_stores2.default.Undo.undo()}},_react2.default.createElement(_.Item,null,"Undo this change?"))}},{key:"render",value:function render(){return this.state.showMessageUndo?this.renderMessageUndo():this.renderMessageSaved()}}],[{key:"propTypes",get:function get(){return{verbose:_propTypes2.default.bool}}}]),Saved}();exports.default=Saved;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/browser":457,"../../stores/":520,"./":420,"prop-types":186}],422:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_propsHasChanged=require("../../lib/props-has-changed/"),_propsHasChanged2=_interopRequireDefault(_propsHasChanged),_=require("./"),_saved=require("./saved"),_saved2=_interopRequireDefault(_saved),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var SyncStatusBar=function(e){function SyncStatusBar(e){_classCallCheck(this,SyncStatusBar);var t=_possibleConstructorReturn(this,(SyncStatusBar.__proto__||Object.getPrototypeOf(SyncStatusBar)).call(this,e));return t.state={hasUnpushedCommit:_stores2.default.Sync.hasUnpushedOrPushingCommit,numberOfChanges:_stores2.default.Sync.numberOfChanges,disconnected:!_stores2.default.Socket.connected,timeout:_stores2.default.Sync.wasTimeout,verbose:!1},(0,_lodash.bindAll)(t,"updateState","onBeforeUnload"),t}return _inherits(SyncStatusBar,_react.Component),_createClass(SyncStatusBar,[{key:"componentDidMount",value:function componentDidMount(){this.mounted=!0,this.interval=setInterval(this.updateState,100),window.addEventListener("beforeunload",this.onBeforeUnload)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=!1,clearInterval(this.interval),window.removeEventListener("beforeunload",this.onBeforeUnload)}},{key:"onBeforeUnload",value:function onBeforeUnload(e){if(_stores2.default.Sync.hasUnpushedOrPushingCommit){var t="Changes you made may not be saved.";return e.returnValue=t,t}}},{key:"updateState",value:function updateState(){if(this.mounted){var e=_stores2.default.Sync.hasUnpushedOrPushingCommit,t=!_stores2.default.Socket.connected,n=_stores2.default.Sync.wasTimeout,a=_stores2.default.Sync.numberOfChanges,r=_stores2.default.Sync.pushQueueCount,s={hasUnpushedCommit:e,numberOfChanges:a,disconnected:t,timeout:n};this.state.hasUnpushedCommit&&!e&&(s.savedAt=Date.now()),!this.state.hasUnpushedCommit&&e&&(s.verbose=!1),(r>1||t||n)&&e&&(s.verbose=!0),this.setState(s)}}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){return!!(0,_propsHasChanged2.default)(e,this.props)||!!(0,_propsHasChanged2.default)(t,this.state)}},{key:"renderSyncStatus",value:function renderSyncStatus(){var e=this.state,t=e.hasUnpushedCommit,n=e.numberOfChanges,a=e.disconnected,r=e.timeout,s=e.verbose,o=e.savedAt;if(_stores2.default.CurrentUser.isGuest)return null;var u=Date.now()-o<1500&&!t;if(!(a||t||r||u))return null;var l=function changeStr(e){return e+" "+(e>1?"changes":"change")},i=function Saving(){return _react2.default.createElement("span",null,_react2.default.createElement(_.Item,null,_react2.default.createElement("i",{className:"fa fa-spinner"})),(s||r)&&_react2.default.createElement(_.Item,null,"Saving ",l(n),"..."))};return a?_react2.default.createElement("span",null,_react2.default.createElement(_.Item,null,"No connection"),t&&_react2.default.createElement("span",null,_react2.default.createElement(_.Item,null,_react2.default.createElement("i",{className:"fa fa-exclamation-triangle"})),_react2.default.createElement(_.Item,null,function changeStrWithBe(e){return l(e)+" "+(e>1?"are":"is")}(n)," not saved yet"))):r?_react2.default.createElement("span",null,_react2.default.createElement(_.Item,null,"Weak connection"),t&&_react2.default.createElement(i,null)):t?_react2.default.createElement(i,null):u?_react2.default.createElement(_saved2.default,{verbose:this.state.verbose}):void 0}},{key:"render",value:function render(){var e=this.renderSyncStatus()||this.props.children;if(!e)return null;var t=!_stores2.default.CurrentUser.isGuest&&(this.state.disconnected||this.state.timeout),n=(0,_classnames2.default)("status-bar",this.props.className,{error:t});return _react2.default.createElement("div",{className:n},e)}}],[{key:"propTypes",get:function get(){return{children:_propTypes2.default.node}}}]),SyncStatusBar}();exports.default=SyncStatusBar;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/props-has-changed/":472,"../../stores/":520,"./":420,"./saved":421,"classnames":93,"prop-types":186}],423:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CodeBlock;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_syntaxHighlight=require("../syntax-highlight"),_syntaxHighlight2=_interopRequireDefault(_syntaxHighlight),_line=require("../../../../share/line/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function CodeBlock(e){var t=e.lang,a=e.filename,l=e.indent,n=e.start,r=(e.end,e.children);return _react2.default.createElement("span",{className:"line"},_react2.default.createElement("span",{key:"indent",className:"indent-mark",style:{width:(0,_line.getIndentWidth)(l-1)}},n&&l>0&&_react2.default.createElement("span",{className:"dot"})),n?_react2.default.createElement(function CodeStart(){var e=(0,_syntaxHighlight.getFullLanguage)(t).displayName,n=a||e||t;return _react2.default.createElement("span",{className:"text code-block",style:{marginLeft:(0,_line.getIndentWidth)(l-1)}},_react2.default.createElement("span",{className:"code-block-start"},_react2.default.createElement("code",null,n)))},null):_react2.default.createElement(function CodeBody(){var e=r;return _react2.default.createElement("span",{className:"text code-block",style:{marginLeft:(0,_line.getIndentWidth)(l-1)}},_react2.default.createElement("code",null,_react2.default.createElement(_syntaxHighlight2.default,{lang:t,code:e})))},null))}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/line/":587,"../syntax-highlight":429}],424:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_userIcon=require("../icon/user-icon"),_userIcon2=_interopRequireDefault(_userIcon);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var IconFilter=function(e){function IconFilter(){_classCallCheck(this,IconFilter);var e=_possibleConstructorReturn(this,(IconFilter.__proto__||Object.getPrototypeOf(IconFilter)).call(this));return e.state={enable:!1},(0,_lodash.bindAll)(e,"onClick"),e.subscribe(_stores2.default.CurrentProject),e}return _inherits(IconFilter,_baseComponent2.default),_createClass(IconFilter,null,[{key:"propTypes",get:function get(){return{count:_propTypes2.default.number.isRequired,onChange:_propTypes2.default.func.isRequired}}}]),_createClass(IconFilter,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store;e.event;switch(t){case _stores2.default.CurrentProject:this.setState({enable:!1}),this.props.onChange(this.state)}}},{key:"render",value:function render(){if(_stores2.default.CurrentUser.isGuest)return null;var e=this.props.count,t=this.state.enable,n=_stores2.default.CurrentUser.get();return n.name?_react2.default.createElement("div",{className:"icon-filter text-right"},_react2.default.createElement(Icon,{user:n,enable:t,onClick:this.onClick})," (",e,")"):null}},{key:"onClick",value:function onClick(){var e={enable:!this.state.enable};this.setState(e),this.props.onChange(e)}}]),IconFilter}();function Icon(e){var t=e.user,n=e.enable,r=e.onClick;return _react2.default.createElement("span",{className:(0,_classnames2.default)("icon",{enable:n}),onClick:r},_react2.default.createElement(_userIcon2.default,{user:t,hasLink:!1}))}exports.default=IconFilter;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"../base-component":261,"../icon/user-icon":289,"classnames":93,"prop-types":186}],425:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_lazyRender=require("../lazy-render"),_lazyRender2=_interopRequireDefault(_lazyRender),_iconFilter=require("./icon-filter"),_iconFilter2=_interopRequireDefault(_iconFilter),_timeRange=require("./time-range"),_timeRange2=_interopRequireDefault(_timeRange),_pageFilter=require("../../lib/page-filter"),_decorateLines=require("../../../../share/decorate-lines/"),_decorateLines2=_interopRequireDefault(_decorateLines);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../../share/debug")(__filename),Stream=function(e){function Stream(e){_classCallCheck(this,Stream);var t=_possibleConstructorReturn(this,(Stream.__proto__||Object.getPrototypeOf(Stream)).call(this,e));return t.subscribe(_stores2.default.Stream),t.state={pages:(_stores2.default.Stream.get()||{}).pages,iconFilter:!1},(0,_lodash.bindAll)(t,"onIconFilterChange"),t}return _inherits(Stream,_baseComponent2.default),_createClass(Stream,null,[{key:"propTypes",get:function get(){return{show:_propTypes2.default.bool.isRequired}}}]),_createClass(Stream,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store;e.event;if(debug("onStoreChange",t),t===_stores2.default.Stream){var r=t.get().pages;this.setState({pages:r})}}},{key:"onIconFilterChange",value:function onIconFilterChange(e){var t=e.enable;this.setState({iconFilter:t})}},{key:"render",value:function render(){var e=this;if(!this.props.show)return null;if(!this.state.pages||this.state.pages.length<1)return _react2.default.createElement("div",{className:"stream"},_react2.default.createElement("h1",null,"No Page"));var t=this.state.pages.map(function(e){return e.lines=(0,_decorateLines2.default)(e.lines),e}),r=Math.floor(Date.now()/1e3),n=[{time:r},{description:"Just Now",time:r-60},{description:"Recent Updates",time:r-600},{description:"Updates within 30 mins",time:r-1800},{description:"Updates within 1 hour",time:r-3600},{description:"Updates within 3 hours",time:r-10800},{description:"Updates within 6 hours",time:r-21600},{description:"Updates within 12 hours",time:r-43200},{description:"Updates within 1 day",time:r-86400},{description:"Updates within 3 days",time:r-259200},{description:"Updates within 1 week",time:r-604800},{description:"Updates within 1 month",time:r-2678400},{description:"Last Updates",time:0}],i=_stores2.default.CurrentUser.get(),a=0,o=(0,_lodash.range)(0,n.length-1).map(function(r){var o=n[r+1].description,s=n[r].time,l=n[r+1].time,u=(0,_pageFilter.filterPagesByTimeRangeOfLines)({pages:t,start:s,end:l});if(i&&i.name){var p=(0,_pageFilter.filterPagesByIcon)({pages:u,icon:i.name});a+=p.length,e.state.iconFilter&&(u=p)}return u.length<1?null:{content:_react2.default.createElement(_timeRange2.default,{description:o,pages:u,start:s,end:l,key:r}),loading:_react2.default.createElement("h1",null,"Loading ",u.length,' items for "',o,'"…')}}).filter(function(e){return!!e});return _react2.default.createElement("div",{className:"stream"},_react2.default.createElement(_iconFilter2.default,{count:a,onChange:this.onIconFilterChange}),_react2.default.createElement(_lazyRender2.default,null,o))}}]),Stream}();exports.default=Stream;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/components/stream/index.js")
    },{"../../../../share/debug":566,"../../../../share/decorate-lines/":571,"../../lib/page-filter":470,"../../stores/":520,"../base-component":261,"../lazy-render":294,"./icon-filter":424,"./time-range":427,"prop-types":186}],426:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Page;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_codeBlock=require("./code-block"),_codeBlock2=_interopRequireDefault(_codeBlock),_wikify=require("./wikify"),_wikify2=_interopRequireDefault(_wikify),_icon=require("../icon/"),_icon2=_interopRequireDefault(_icon),_pageTitle=require("../../../../share/page-title"),_line=require("../../../../share/line/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Page(e){for(var t=e.title,n=e.lines,a=e.iconsLc,r=(e.start,e.end,[[n[0]]]),i=1;i<n.length;i++){var l=n[i];l.inTimeRange!==(0,_lodash.last)(r)[0].inTimeRange&&r.push([]),(0,_lodash.last)(r).push(l)}r[0][0].inTimeRange||r.shift(),(0,_lodash.last)(r)[0].inTimeRange||r.pop();var c=null,d=(0,_lodash.range)(0,r.length).map(function(e){var t=r[e],n=t.map(function(e){return _react2.default.createElement(Line,{key:e.id},e)});return t[0].inTimeRange&&t.find(function(e){return!(0,_line.isEmptyLine)(e)})?(c||(c=t[0].id),_react2.default.createElement("div",{key:e},n)):_react2.default.createElement(HiddenLines,{key:e},n)});return _react2.default.createElement("div",{className:"page","data-title":t},_react2.default.createElement("div",{className:"lines"},_react2.default.createElement(Title,{lineId:c},t),d),_react2.default.createElement("div",{className:"icons"},_react2.default.createElement(Icons,{iconsLc:a})))}function Title(e){var t=e.children,n=e.lineId,a=t,r="/"+_stores2.default.CurrentProject.get().name+"/"+(0,_pageTitle.encodeTitleURI)(a);return n&&(r+="#"+n),_react2.default.createElement("div",{className:"line line-title"},_react2.default.createElement("a",{href:r},a))}function Line(e){var t=e.children,n=t.text,a=t.codeBlock,r=function(){if(a){var e=a.lang,t=a.filename,r=a.indent,i=a.start,l=a.end;return _react2.default.createElement(_codeBlock2.default,{lang:e,filename:t,indent:r,start:i,end:l},n)}return _react2.default.createElement(_wikify2.default,null,n)}();return _react2.default.createElement("div",{className:"line"},r)}function HiddenLines(e){e.children;return _react2.default.createElement("hr",{className:"hidden-lines"})}function Icons(e){var t=e.iconsLc,n=_stores2.default.CurrentProject.get().name,a=t&&Object.keys(t).map(function(e){return _react2.default.createElement(_icon2.default,{page:e,project:n,key:e})});return _react2.default.createElement("div",{className:"icons text-right"},a)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/line/":587,"../../../../share/page-title":589,"../../stores/":520,"../icon/":288,"./code-block":423,"./wikify":428}],427:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=TimeRange;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_page=require("./page"),_page2=_interopRequireDefault(_page);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function TimeRange(e){var t=e.description,a=e.pages,n=e.start,r=e.end,i=a.map(function(e){return _react2.default.createElement(_page2.default,{key:e.id,title:e.title,lines:e.lines,iconsLc:e.iconsLc,start:n,end:r})});return _react2.default.createElement("div",{className:"time-range"},_react2.default.createElement("h1",null,t),i)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./page":426}],428:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Wikify;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_katex="undefined"!=typeof window?window.window.katex:"undefined"!=typeof global?global.window.katex:null,_katex2=_interopRequireDefault(_katex),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_scrapboxParser=require("../../../../share/scrapbox-parser"),_syntaxHighlight=require("../syntax-highlight"),_syntaxHighlight2=_interopRequireDefault(_syntaxHighlight),_externalLink=require("../external-link"),_externalLink2=_interopRequireDefault(_externalLink),_googleMap=require("../google-map/"),_googleMap2=_interopRequireDefault(_googleMap),_gyazo=require("../../../../share/gyazo"),_url2=require("../../../../share/url"),_pageTitle=require("../../../../share/page-title"),_line=require("../../../../share/line/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Wikify(e){var t=e.children,a=(0,_scrapboxParser.parseScrapboxSyntax)(t);return _react2.default.createElement("div",null,renderNode(a))}function renderNode(e){if("string"==typeof e)return e||_react2.default.createElement("br",null);if(e instanceof Array)return(0,_lodash.range)(0,e.length).map(function(t){return _react2.default.createElement("span",{key:t},renderNode(e[t]))});if(!e)return null;switch(e.type){case"indent":var t=e.unit.tag.length;return _react2.default.createElement("span",null,_react2.default.createElement("span",{className:"indent-mark",style:{width:(0,_line.getIndentWidth)(t)}},_react2.default.createElement("span",{className:"dot"})),_react2.default.createElement("span",{className:"indent",style:{marginLeft:(0,_line.getIndentWidth)(t)}},renderNode(e.children)));case"link":case"hashTag":var a=e.unit,r=a.project,n=a.page,l=a.line;r||(r=(_stores2.default.CurrentProject.get()||{}).name),n||(n="");var i="/"+r+"/"+(0,_pageTitle.encodeTitleURI)(n);return l&&(i+="#"+l),_react2.default.createElement("a",{className:"page-link",href:i},e.children);case"url":case"audio":var u=e.unit.content;return _react2.default.createElement(_externalLink2.default,{className:"link",href:u},u);case"audioLink":var o=e.unit,c=o.link,d=o.title;return _react2.default.createElement(_externalLink2.default,{className:"link",href:c},d);case"location":var s=e.unit,_=s.latitude,f=s.longitude,g=s.zoom,m=s.title;return _react2.default.createElement(_googleMap2.default,{latitude:_,longitude:f,zoom:g,title:m});case"urlLink":var p=e.unit,h=p.link,y=p.title;return _react2.default.createElement(_externalLink2.default,{href:h,className:"link"},y||h);case"code":return _react2.default.createElement("code",null,_react2.default.createElement(_syntaxHighlight2.default,{code:e.children}));case"deco-formula":var k=e.unit.formula,w=void 0;try{w=_katex2.default.renderToString(k,{throwOnError:!0,displayMode:!0})}catch(t){return _react2.default.createElement("span",{className:"formula error"},_react2.default.createElement("code",null,e.unit.whole))}return _react2.default.createElement("span",{className:"formula",dangerouslySetInnerHTML:{__html:w}});case"icon":case"strong-icon":var x=e.unit,E=x.project,v=x.page,L=x.size;E||(E=_stores2.default.CurrentProject.get().name);var q="/api/pages/"+E+"/"+v+"/icon",N=(0,_lodash.range)(0,Math.min(L,1e3)).map(function(e){return _react2.default.createElement("img",{className:"inline-icon",src:q,key:e})});return _react2.default.createElement("a",{href:"/"+E+"/"+(0,_pageTitle.encodeTitleURI)(v)},N);case"image":case"strongImage":return _react2.default.createElement(Image,{src:(0,_gyazo.toGyazoLargeThumbnailUrl)(e.unit.content)});case"imageLink":case"strongImageLink":var b=e.unit,z=b.link,I=b.image,R=(0,_gyazo.toGyazoLargeThumbnailUrl)(I);return _react2.default.createElement(_externalLink2.default,{href:z},_react2.default.createElement(Image,{src:R}));case"gyazo":case"strongGyazo":case"gyazoLink":var T=(0,_url2.replaceProtocol)(e.unit.gyazo||e.unit.content,"https:"),M=e.unit.link||e.unit.content,D=(0,_gyazo.toGyazoLargeThumbnailUrl)(T+"/raw");return _react2.default.createElement(_externalLink2.default,{href:M},_react2.default.createElement(Image,{src:D}))}return renderNode(e.children)}function Image(e){var t=e.src;return _react2.default.createElement("img",{className:"image",src:t})}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/gyazo":585,"../../../../share/line/":587,"../../../../share/page-title":589,"../../../../share/scrapbox-parser":605,"../../../../share/url":619,"../../stores/":520,"../external-link":281,"../google-map/":283,"../syntax-highlight":429}],429:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}();exports.getFullLanguage=getFullLanguage,exports.codeHighlight=codeHighlight,exports.putCharIndexInInnerText=putCharIndexInInnerText;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_highlight="undefined"!=typeof window?window.window.hljs:"undefined"!=typeof global?global.window.hljs:null,_highlight2=_interopRequireDefault(_highlight),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_propsHasChanged=require("../lib/props-has-changed/"),_propsHasChanged2=_interopRequireDefault(_propsHasChanged),_graphemeSplitter=require("../../../share/grapheme-splitter");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var reverseAliases=new Map(Object.entries({ru:"ruby",scss:"css",less:"css",arduino:"c++",ino:"c++",processing:"java",pde:"java",el:"lisp",jl:"julia",cljc:"clojure",cljs:"clojure",cljx:"clojure",kt:"kotlin"})),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=_highlight2.default.listLanguages()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var lang=_step.value,_hljs$getLanguage=_highlight2.default.getLanguage(lang),aliases=_hljs$getLanguage.aliases;if(aliases){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=aliases[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var alias=_step2.value;reverseAliases.set(alias,lang)}}catch(e){_didIteratorError2=!0,_iteratorError2=e}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var ignoreFullLanguage=["html","zsh","scss","less"];function getFullLanguage(e){var r=reverseAliases.get(e)||e;return{name:e,fullName:r,displayName:ignoreFullLanguage.includes(e)?e:r}}var SyntaxHighlight=function(e){function SyntaxHighlight(){return _classCallCheck(this,SyntaxHighlight),_possibleConstructorReturn(this,(SyntaxHighlight.__proto__||Object.getPrototypeOf(SyntaxHighlight)).apply(this,arguments))}return _inherits(SyntaxHighlight,_react.Component),_createClass(SyntaxHighlight,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,r){return!!(0,_propsHasChanged2.default)(e,this.props)}},{key:"render",value:function render(){var e=this.props,r=e.lang,t=e.code,n=e.charIndex,o=codeHighlight({lang:r,code:t});return n&&(o=putCharIndexInInnerText(o,n)),_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:o}})}}],[{key:"propTypes",get:function get(){return{lang:_propTypes2.default.string,code:_propTypes2.default.string.isRequired,charIndex:_propTypes2.default.number}}}]),SyntaxHighlight}();function codeHighlight(e){var r=e.lang,t=e.code,n=void 0;try{if(r&&"__proto__"!==r)n=(0,_highlight.highlight)(getFullLanguage(r).fullName,t,!0).value;else{if(!/[[\](){}<>:="'.]/.test(t))throw new Error("not code");n=(0,_highlight.highlightAuto)(t).value}}catch(e){return"<span>"+(0,_lodash.escape)(t)+"</span>"}return"<span>"+n+"</span>"}function putCharIndexInInnerText(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return replaceInnerChar(e,function(e){return function putCharIndex(e){var t='<span class="c-'+r+'">'+e+"</span>";return r+=1,t}((0,_lodash.escape)(e))})}function replaceInnerChar(e,r){return e.split(/(<[^>]+>)/).map(function(e){return/^<[^>]+>$/.test(e)?e:(0,_graphemeSplitter.splitGraphemes)((0,_lodash.unescape)(e)).map(r).join("")}).join("")}exports.default=SyntaxHighlight;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../share/grapheme-splitter":580,"../lib/props-has-changed/":472,"prop-types":186}],430:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_line=require("../../../../share/line"),_tr=require("./tr"),_tr2=_interopRequireDefault(_tr),_wikify=require("../wikify"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_pageTitle=require("../../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TableBlock=function(e){function TableBlock(){return _classCallCheck(this,TableBlock),_possibleConstructorReturn(this,(TableBlock.__proto__||Object.getPrototypeOf(TableBlock)).apply(this,arguments))}return _inherits(TableBlock,_react.Component),_createClass(TableBlock,[{key:"setCharIndex",value:function setCharIndex(e){var t=(0,_wikify.setCharIndex)(e,this.charIndex),r=t.result,n=t.charIndex;return this.charIndex=n,r}},{key:"renderTableBlockStart",value:function renderTableBlockStart(){var e=this.props.lines[0],t=e.tableBlock.indent-1,r=this.props.cursorLineId===e.id,n=this.setCharIndex((0,_lodash.fill)(Array(t),_react2.default.createElement("span",{className:"pad"},"\t"))),a=r?e.text.replace(/^\s+/,""):e.tableBlock.title,l=_stores2.default.CurrentProject.get().name,i=_stores2.default.Line.lines.getTitle(),s="/api/table/"+l+"/"+(0,_pageTitle.encodeTitleURI)(i)+"/"+encodeURIComponent(a)+".csv",o=["line","section-"+e.section.number];return e.section.start&&o.push("section-title"),_react2.default.createElement("div",{id:"L"+e.id,className:(0,_classnames2.default)(o)},_react2.default.createElement("span",{className:"text"},_react2.default.createElement("span",{className:"indent-mark",style:{width:(0,_line.getIndentWidth)(t)}},n,t>0&&_react2.default.createElement("span",{className:"dot"})),_react2.default.createElement("span",{className:"indent",style:{marginLeft:(0,_line.getIndentWidth)(t)}},_react2.default.createElement("span",{className:"table-block-start"},_react2.default.createElement("a",{href:s,target:"_blank"},this.setCharIndex(a))))))}},{key:"render",value:function render(){this.charIndex=0;for(var e=this.props.lines,t=[],r=1;r<e.length;r++){var n=e[r];t.push(_react2.default.createElement(_tr2.default,{id:n.id,key:n.id,cells:n.tableBlock.cells,section:n.section,isCursorLine:n.id===this.props.cursorLineId}))}var a=void 0;if(t.length>0){var l=e[0].tableBlock.indent;a=_react2.default.createElement("table",{style:{marginLeft:(0,_line.getIndentWidth)(l-1)}},_react2.default.createElement("tbody",null,t))}return _react2.default.createElement("div",{className:"table-block"},this.renderTableBlockStart(),a)}}],[{key:"propTypes",get:function get(){return{lines:_propTypes2.default.array.isRequired,cursorLineId:_propTypes2.default.string}}}]),TableBlock}();exports.default=TableBlock;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../../share/line":587,"../../../../share/page-title":589,"../../stores/":520,"../wikify":442,"./tr":431,"classnames":93,"prop-types":186}],431:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_wikify=require("../wikify");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Tr=function(e){function Tr(){_classCallCheck(this,Tr);var e=_possibleConstructorReturn(this,(Tr.__proto__||Object.getPrototypeOf(Tr)).call(this));return e.charIndex=0,e}return _inherits(Tr,_react.Component),_createClass(Tr,[{key:"setCharIndex",value:function setCharIndex(e){var t=(0,_wikify.setCharIndex)(e,this.charIndex),r=t.result,n=t.charIndex;return this.charIndex=n,r}},{key:"componentWillUpdate",value:function componentWillUpdate(){this.charIndex=0}},{key:"render",value:function render(){for(var e=this.props,t=e.id,r=e.cells,n=e.section,o=[],a=0;a<r.length;a++){var i=r[a].replace(/\t/g," ");/^\s{0,1}$/.test(i)&&(i=[_react2.default.createElement("br",null)]),o.push(_react2.default.createElement("td",{key:a},_react2.default.createElement("span",{className:"text"},this.setCharIndex(i))))}var s=["line","section-"+n.number];return _react2.default.createElement("tr",{id:"L"+t,className:(0,_classnames2.default)(s)},o)}}],[{key:"propTypes",get:function get(){return{cells:_propTypes2.default.array.isRequired,id:_propTypes2.default.string.isRequired,isCursorLine:_propTypes2.default.bool.isRequired,section:_propTypes2.default.object.isRequired}}}]),Tr}();exports.default=Tr;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../wikify":442,"classnames":93,"prop-types":186}],432:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.default=new(function(){function EmacsCutBuffer(){_classCallCheck(this,EmacsCutBuffer),localStorage&&localStorage.emacsCutBuffer||this.set("")}return _createClass(EmacsCutBuffer,[{key:"set",value:function set(e){try{localStorage.emacsCutBuffer=e}catch(t){this.localStorageError=t,this.buffer=e}}},{key:"get",value:function get(){return this.localStorageError?this.buffer:localStorage.emacsCutBuffer}},{key:"append",value:function append(e){this.set(this.get()+e)}}]),EmacsCutBuffer}());

    },{}],433:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _get=function get(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:get(n,t,o)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(o):void 0},_createClass=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_baseComponent=require("../base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_popupMenu=require("../popup-menu"),_profileButtton=require("./profile-buttton"),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_moment="undefined"!=typeof window?window.window.moment:"undefined"!=typeof global?global.window.moment:null,_moment2=_interopRequireDefault(_moment),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_computeLine=require("../../lib/compute-line"),_decorateLines=require("../../../../share/decorate-lines"),_decorateLines2=_interopRequireDefault(_decorateLines),_keyBinding=require("../../lib/key-binding/"),_browser=require("../../lib/browser"),_line2=require("../../../../share/line"),_gyazoUpload=require("../../lib/gyazo-upload"),_gyazoUpload2=_interopRequireDefault(_gyazoUpload),_file=require("../../lib/file"),_transformText=require("../../lib/transform-text/"),_transformText2=_interopRequireDefault(_transformText),_ime=require("../../constants/ime"),_emacsCutBuffer=require("./emacs-cut-buffer"),_emacsCutBuffer2=_interopRequireDefault(_emacsCutBuffer);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,o){return function step(r,n){try{var s=t[r](n),a=s.value}catch(e){return void o(e)}if(!s.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../../share/debug")(__filename),TextInput=function(e){function TextInput(e){_classCallCheck(this,TextInput);var t=_possibleConstructorReturn(this,(TextInput.__proto__||Object.getPrototypeOf(TextInput)).call(this,e));return t.state={convertMode:!1,width:10,uploadingGyazo:!1,hideTextarea:!1,showProfilePopup:!1},t.selectedText="",t.lastCompositionMode="end",t.emacsCutContinue=!1,t.insertUserIconSize=0,t.focusTextInput=!1,(0,_lodash.bindAll)(t,["onInput","onCut","onPaste","onKeyDown","onBlur","onFocus","onCompositionStart","onCompositionUpdate","onCompositionEnd","uploadToGyazo"]),t.subscribe(_stores2.default.Cursor,_stores2.default.Selection,_stores2.default.MobileSelection),t}return _inherits(TextInput,_baseComponent2.default),_createClass(TextInput,null,[{key:"propTypes",get:function get(){return{position:_propTypes2.default.object.isRequired,selectionRange:_propTypes2.default.object.isRequired,selectedText:_propTypes2.default.string.isRequired}}}]),_createClass(TextInput,[{key:"componentDidMount",value:function componentDidMount(){_get(TextInput.prototype.__proto__||Object.getPrototypeOf(TextInput.prototype),"componentDidMount",this).call(this);var e=this.textarea;e.addEventListener("compositionstart",this.onCompositionStart,!1),e.addEventListener("compositionupdate",this.onCompositionUpdate,!1),e.addEventListener("compositionend",this.onCompositionEnd,!1)}},{key:"componentDidUpdate",value:function componentDidUpdate(){var e=this.textarea,t=this.props.selectedText;e&&this.selectedText!==t&&(e.value=t,this.selectedText=t,(0,_browser.isTouchDevice)()||this.selectAll()),(0,_browser.isTouchDevice)()&&(this.state.hideTextarea?e.blur():this.focusTextInput&&(e.focus(),this.focusTextInput=!1))}},{key:"onStoreChange",value:function onStoreChange(e){e.store;var t=e.event;if((0,_browser.isTouchDevice)()){var o=_stores2.default.Selection.hasSelection()||_stores2.default.Cursor.blurTextarea;"focusTextInput"===t&&(this.focusTextInput=!0),this.setState({hideTextarea:o,showProfilePopup:!1})}else this.setState({showProfilePopup:!1})}},{key:"isMSIE",value:function isMSIE(){return/\bTrident\/(\d+)/.exec(navigator.userAgent)}},{key:"uploadToGyazo",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return debug("upload image to Gyazo"),o.prev=1,this.setState({uploadingGyazo:!0}),o.next=5,(0,_gyazoUpload2.default)(e);case 5:t=o.sent,_stores2.default.Line.addChar("["+t.url+"]\n"),o.next=13;break;case 9:o.prev=9,o.t0=o.catch(1),console.error(o.t0.stack||o.t0),alert("Failed to upload image to Gyazo.");case 13:this.setState({uploadingGyazo:!1});case 14:case"end":return o.stop()}},_callee,this,[[1,9]])}));return function uploadToGyazo(t){return e.apply(this,arguments)}}()},{key:"onInput",value:function onInput(e){debug("onInput"),(0,_browser.isTouchDevice)()&&_stores2.default.Cursor.visiblePopupMenu&&_stores2.default.Cursor.hidePopupMenu();var t=this.textarea.value.replace(/[\r\b]/gm,"").replace(/[\u2028\u2029]/gm,"\n");if("end"===this.lastCompositionMode)debug("入力確定",t),t?(this.textarea.value="",(0,_gyazoUpload.isGyazoUploadEnable)()&&!this.state.uploadingGyazo&&(0,_gyazoUpload.isDataURIImage)(t)?this.uploadToGyazo(t):(t=(0,_transformText2.default)(t),_stores2.default.Line.addChar(t),this.setState({convertMode:!1}))):this.setState({convertMode:!1});else{debug("未変換入力中",t),this.setState({convertMode:!0});var o=0===this.props.position.line,r=(0,_computeLine.getTextRect)(t,o).width;this.setState({width:r})}}},{key:"onCut",value:function onCut(e){setTimeout(function(){_stores2.default.Line.deleteRange(_stores2.default.Selection.getRange())},10)}},{key:"onPaste",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,o,r=(t=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,o,r,n,s,a,i,u;return regeneratorRuntime.wrap(function _callee2$(l){for(;;)switch(l.prev=l.next){case 0:if(e){l.next=2;break}return l.abrupt("return");case 2:t=!0,o=!1,r=void 0,l.prev=5,n=e.items[Symbol.iterator]();case 7:if(t=(s=n.next()).done){l.next=20;break}if(a=s.value,!(0,_gyazoUpload.isGyazoUploadableType)(a.type)){l.next=15;break}return i=a.getAsFile(),l.next=13,(0,_file.readAsDataURLPromise)(i);case 13:return u=l.sent,l.abrupt("return",u.target.result);case 15:if("text/plain"!==a.type){l.next=17;break}return l.abrupt("return");case 17:t=!0,l.next=7;break;case 20:l.next=26;break;case 22:l.prev=22,l.t0=l.catch(5),o=!0,r=l.t0;case 26:l.prev=26,l.prev=27,!t&&n.return&&n.return();case 29:if(l.prev=29,!o){l.next=32;break}throw r;case 32:return l.finish(29);case 33:return l.finish(26);case 34:case"end":return l.stop()}},_callee2,this,[[5,22,26,34],[27,,29,33]])})),function getImageData(e){return t.apply(this,arguments)});return regeneratorRuntime.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:if(debug("onPaste"),(0,_gyazoUpload.isGyazoUploadEnable)()&&!this.state.uploadingGyazo){t.next=3;break}return t.abrupt("return");case 3:return o=void 0,t.prev=4,t.next=7,r(e.clipboardData);case 7:o=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.error(t.t0.stack||t.t0);case 13:if(o){t.next=15;break}return t.abrupt("return");case 15:e.preventDefault(),this.uploadToGyazo(o);case 17:case"end":return t.stop()}},_callee3,this,[[4,10]])}));return function onPaste(t){return e.apply(this,arguments)}}()},{key:"changeSelectionByKey",value:function changeSelectionByKey(e){var t=_stores2.default.Selection.getRange();_stores2.default.Selection.hasSelection(t)||(t.start=(0,_lodash.cloneDeep)(_stores2.default.Cursor.getPosition())),_stores2.default.Cursor.goByAction(e),t.end=_stores2.default.Cursor.getPosition(),_stores2.default.Selection.setRange(t)}},{key:"goCursorByKey",value:function goCursorByKey(e){var t=_stores2.default.Selection.getRange(),o=_stores2.default.Selection.hasSelection(t);if(o&&e.match(/^go-(right|left)$/))switch(t=_stores2.default.Selection.normalizeOrder(t),e){case"go-left":_stores2.default.Cursor.setPosition(t.start);break;case"go-right":_stores2.default.Cursor.setPosition(t.end)}else _stores2.default.Cursor.goByAction(e);o&&_stores2.default.Selection.clear()}},{key:"onKeyDown",value:function onKeyDown(e){if((0,_browser.isTouchDevice)()&&_stores2.default.Cursor.visiblePopupMenu&&_stores2.default.Cursor.hidePopupMenu(),"end"===this.lastCompositionMode){var t=_stores2.default.CurrentUser.get(),o=(0,_keyBinding.getShortcutKeyAction)(e);if("copy"!==o){if("insert-icon"!==o&&(this.insertUserIconSize=0),"insert-timestamp"!==o&&(this.insertTimeStampType=0),"emacs-cut"!==o&&(this.emacsCutContinue=!1),/move-line-(left|right)/.test(o)||_stores2.default.Line.moveLinesHorizontalFinish(),!o)return _stores2.default.Selection.hasSelectionAll()?e.preventDefault():void 0;switch(e.preventDefault(),o.match(/^go-/)&&(e.shiftKey?this.changeSelectionByKey(o):this.goCursorByKey(o)),o){case"select-all":_stores2.default.Selection.selectAll()}if(_stores2.default.CurrentUser.isProjectMember)switch(o){case"enter":if(this.state.convertMode)break;if(_stores2.default.Selection.hasSelectionAll())break;if(_stores2.default.SuggestPopup.visible){_stores2.default.SuggestPopup.submit();break}var r=(0,_decorateLines2.default)(_stores2.default.Line.getAll()),n=_stores2.default.Cursor.getPosition(),s=r[n.line];if(0===n.char){_stores2.default.Line.addChar("\n");break}if((s.codeBlock&&s.codeBlock.start||s.tableBlock&&s.tableBlock.start)&&n.char===s.text.charLength){_stores2.default.Line.addChar("\n"+" ".repeat((0,_line2.countIndent)(s)+1));break}if((0,_line2.countIndent)(s)>0&&(0,_line2.isEmptyLine)(s)&&!s.codeBlock){_stores2.default.Line.deleteChar(-1*(0,_line2.countIndent)(s)),_stores2.default.Line.addChar("\n");break}var a=Math.min(n.char,(0,_line2.countIndent)(s));_stores2.default.Line.addChar("\n"+" ".repeat(a));break;case"tab":if(_stores2.default.SuggestPopup.visible){_stores2.default.SuggestPopup.selectNext();break}var i=_stores2.default.Selection.getRange();i.start.char!==i.end.char||i.start.line!==i.end.line?_stores2.default.Line.moveLinesHorizontal(1):_stores2.default.Line.addChar("\t");break;case"shift-tab":if(_stores2.default.SuggestPopup.visible){_stores2.default.SuggestPopup.selectPrev();break}var u=_stores2.default.Selection.getRange();if(u.start.char!==u.end.char||u.start.line!==u.end.line)_stores2.default.Line.moveLinesHorizontal(-1);else{var l=_stores2.default.Cursor.getPosition();l.char>0&&/^\s$/.test(_stores2.default.Line.getAll()[l.line].text[l.char-1])&&_stores2.default.Line.deleteChar(-1)}break;case"escape":_stores2.default.SuggestPopup.visible&&_stores2.default.SuggestPopup.hide();break;case"move-line-right":_stores2.default.Line.moveLinesHorizontal(1);break;case"move-line-left":_stores2.default.Line.moveLinesHorizontal(-1);break;case"delete-char":_stores2.default.Line.deleteChar(1);break;case"delete-back-char":_stores2.default.Line.deleteChar(-1);break;case"emacs-cut":if(_stores2.default.Selection.hasSelectionAll())break;var c=_stores2.default.Cursor.getPosition(),d=_stores2.default.Line.getAll(),p=d[c.line];if(!p)break;if(c.line===d.length-1&&c.char>p.text.charLength-1)break;var f=p.text.charSubstr(c.char);this.emacsCutContinue?_emacsCutBuffer2.default.append(f.length>0?f:"\n"):(_emacsCutBuffer2.default.set(f),this.emacsCutContinue=!0),_stores2.default.Line.deleteChar(f.charLength||1),_stores2.default.Cursor.setPosition(c);break;case"emacs-paste":if(_stores2.default.Selection.hasSelectionAll())break;if(!_emacsCutBuffer2.default.get())break;var h=_stores2.default.Cursor.getPosition(),_=(0,_line2.countIndent)(_stores2.default.Line.getAll()[h.line]),m=_emacsCutBuffer2.default.get().replace(/\n/g,"\n"+" ".repeat(_));_stores2.default.Line.addChar(m);break;case"move-line-up":_stores2.default.Line.moveLinesVertical(-1);break;case"move-line-down":_stores2.default.Line.moveLinesVertical(1);break;case"move-block-up":_stores2.default.Line.moveBlockUp(_stores2.default.Cursor.getPosition().line);break;case"move-block-down":_stores2.default.Line.moveBlockDown(_stores2.default.Cursor.getPosition().line);break;case"move-block-left":_stores2.default.Line.moveBlockLeft(_stores2.default.Cursor.getPosition().line);break;case"move-block-right":_stores2.default.Line.moveBlockRight(_stores2.default.Cursor.getPosition().line);break;case"undo":_stores2.default.Undo.undo();break;case"redo":_stores2.default.Undo.redo();break;case"insert-icon":if(_stores2.default.Selection.hasSelectionAll())break;if(_stores2.default.SuggestPopup.visible){_stores2.default.SuggestPopup.submitIcon();break}if(!t.name){this.setState({showProfilePopup:!0});break}this.insertUserIconSize+=1;var g=function createTag(e,o){return o<1?"":o>1?"["+t.name+".icon*"+o+"]":"["+t.name+".icon]"};this.insertUserIconSize>=2&&_stores2.default.Line.deleteChar(-1*g(t.name,this.insertUserIconSize-1).charLength),_stores2.default.Line.addChar(g(t.name,this.insertUserIconSize));break;case"insert-timestamp":if(_stores2.default.Selection.hasSelectionAll())break;var b=_stores2.default.TimeStamp.getFormats(),v=function _createTag(e){var t=b[e];if("string"==typeof t)return(0,_moment2.default)().format(t);if("function"==typeof t){var o=t();return"string"==typeof o?o:"Error: not a string"}return""};this.insertTimeStampType>=1&&(_stores2.default.Line.deleteChar(-1*v(this.insertTimeStampType-1).charLength),this.insertTimeStampType>=b.length&&(this.insertTimeStampType=0)),_stores2.default.Line.addChar(v(this.insertTimeStampType)),this.insertTimeStampType+=1}}}}},{key:"selectAll",value:function selectAll(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,o=this.textarea;o.select(),o.selectionStart=0,o.selectionEnd=o.value.length,o.focus(),t>1&&setTimeout(function(){return e.selectAll(t-1)},250)}},{key:"onCompositionStart",value:function onCompositionStart(e){debug("onCompositionStart"),this.lastCompositionMode="start"}},{key:"onCompositionUpdate",value:function onCompositionUpdate(e){debug("onCompositionUpdate"),this.lastCompositionMode="update"}},{key:"onCompositionEnd",value:function onCompositionEnd(e){debug("onCompositionEnd",e),this.lastCompositionMode="end",setTimeout(this.onInput,_ime.IE_COMPOSITION_DELAY)}},{key:"onFocus",value:function onFocus(){_stores2.default.Cursor.show()}},{key:"onBlur",value:function onBlur(){_stores2.default.Cursor.hide()}},{key:"renderProfilePopup",value:function renderProfilePopup(){return this.state.showProfilePopup?_react2.default.createElement(_popupMenu.PopupMenu,{target:this.textarea},_react2.default.createElement(_profileButtton.EditProfileButton,null)):null}},{key:"render",value:function render(){var e=this,t=null,o=this.state.convertMode;if((0,_jquery2.default)(".lines .line").length>0&&(this.point=(0,_computeLine.getPointFromCharIndex)(this.props.position)||this.point,this.point&&(t={lineHeight:this.point.height+"px",width:o?this.state.width:10},(0,_browser.isiOS)()||(t.top=this.point.y,t.left=this.point.x,t.height=this.point.height)),_stores2.default.Selection.hasSelection(this.props.selectionRange)&&!o)){var r=_stores2.default.Selection.getSelectionsHeight();t={top:_stores2.default.Selection.getSelectionTop()-this.point.height,left:0,height:r+2*this.point.height,width:"100%"}}var n=(0,_classnames2.default)({"text-input":!0,hide:this.state.hideTextarea,"convert-mode":this.state.convertMode,"line-title":0===this.props.position.line});return _react2.default.createElement("div",null,this.renderProfilePopup(),_react2.default.createElement("textarea",{className:n,ref:function ref(t){e.textarea=t},id:"text-input",wrap:"off",spellCheck:"false",style:t,onInput:this.onInput,onCut:this.onCut,onPaste:this.onPaste,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,defaultValue:"",autoCapitalize:"none",readOnly:!_stores2.default.CurrentUser.isProjectMember}),_react2.default.createElement(function MessageUploadingGyazo(){return e.state.uploadingGyazo?_react2.default.createElement("div",{className:"overlay-box"},"Uploading Image ",_react2.default.createElement("i",{className:"fa fa-spinner"})):null},null))}}]),TextInput}();exports.default=TextInput;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/components/text-input/index.js")
    },{"../../../../share/debug":566,"../../../../share/decorate-lines":571,"../../../../share/line":587,"../../constants/ime":443,"../../lib/browser":457,"../../lib/compute-line":459,"../../lib/file":461,"../../lib/gyazo-upload":463,"../../lib/key-binding/":464,"../../lib/transform-text/":484,"../../stores/":520,"../base-component":261,"../popup-menu":371,"./emacs-cut-buffer":432,"./profile-buttton":434,"classnames":93,"prop-types":186}],434:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EditProfileButton=EditProfileButton;var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_page=require("page"),_page2=_interopRequireDefault(_page),_popupMenu=require("../popup-menu");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function EditProfileButton(){return _react2.default.createElement(_popupMenu.Button,{onClick:function onClick(){_page2.default.show("/settings/profile")}},"Edit profile")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../popup-menu":371,"page":169}],435:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_flags=require("../../../share/flags");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TrialExpired=function(e){function TrialExpired(){_classCallCheck(this,TrialExpired);var e=_possibleConstructorReturn(this,(TrialExpired.__proto__||Object.getPrototypeOf(TrialExpired)).call(this));return e.state={project:_stores2.default.CurrentProject.get()},e.subscribe(_stores2.default.CurrentProject),e}return _inherits(TrialExpired,_baseComponent2.default),_createClass(TrialExpired,[{key:"onStoreChange",value:function onStoreChange(){this.setState({project:_stores2.default.CurrentProject.get()})}},{key:"render",value:function render(){if(!_flags.ENABLE_BILLING)return this.props.children;var e=this.state.project;return e&&e.trialing&&e.trialDaysLeft<1?_react2.default.createElement("div",{className:"trial-expired"},this.props.children):this.props.children}}]),TrialExpired}();exports.default=TrialExpired;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../share/flags":578,"../stores/":520,"./base-component":261}],436:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_browser=require("../../lib/browser"),_localSettings=require("../../lib/local-settings/"),_localSettings2=_interopRequireDefault(_localSettings);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,i){try{var a=t[r](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ExtensionsSettings=function(e){function ExtensionsSettings(e){_classCallCheck(this,ExtensionsSettings);var t=_possibleConstructorReturn(this,(ExtensionsSettings.__proto__||Object.getPrototypeOf(ExtensionsSettings)).call(this,e));return t.state={submitting:!1,error:"",prioritizeOutlineKeys:_localSettings2.default.get("prioritizeOutlineKeys")},(0,_lodash.bindAll)(t,["save","toggleEmacsEnable","toggleUserScriptEnable","togglePrioritizeOutlineKeys"]),t}return _inherits(ExtensionsSettings,_react2.default.Component),_createClass(ExtensionsSettings,[{key:"toggleEmacsEnable",value:function toggleEmacsEnable(){var e=_stores2.default.CurrentUser.get(),t=!(e.config&&!0===e.config.emacsBinding),n=Object.assign({},e.config,{emacsBinding:t});this.save(n)}},{key:"toggleUserScriptEnable",value:function toggleUserScriptEnable(){var e=_stores2.default.CurrentUser.get(),t=!(e.config&&!0===e.config.userScript),n=Object.assign({},e.config,{userScript:t});this.save(n)}},{key:"save",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return t={config:e},this.setState({submitting:!0,error:""}),n.prev=2,n.next=5,_stores2.default.CurrentUser.update(t);case 5:this.setState({submitting:!1}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(2),n.t0.response?this.setState({error:n.t0.response.data.message}):this.setState({error:"Can’t connect to the servers. Try again later."}),this.setState({submitting:!1});case 12:case"end":return n.stop()}},_callee,this,[[2,8]])}));return function save(t){return e.apply(this,arguments)}}()},{key:"togglePrioritizeOutlineKeys",value:function togglePrioritizeOutlineKeys(){var e=!this.state.prioritizeOutlineKeys;_localSettings2.default.set("prioritizeOutlineKeys",e),this.setState({prioritizeOutlineKeys:e})}},{key:"renderEmacs",value:function renderEmacs(){var e=_stores2.default.CurrentUser.get(),t=(0,_browser.isMac)()||e.config&&e.config.emacsBinding,n=this.state.submitting||(0,_browser.isMac)();return _react2.default.createElement("div",{className:"extension-item"},_react2.default.createElement("div",{className:"icon"},_react2.default.createElement("img",{src:"https://i.gyazo.com/68d9e97a719bc60141426e155663672e.png",alt:"Emacs key binding"})),_react2.default.createElement("div",{className:"title"},"Emacs key binding"),_react2.default.createElement("div",{className:"description"},"This extension allows you to use basic emacs key bindings, eg: Ctrl-aefbpndhky. It is enabeled on Mac OS X as default."),_react2.default.createElement("div",{className:"checkbox"},_react2.default.createElement("input",{type:"checkbox",checked:t,onChange:this.toggleEmacsEnable,disabled:n}),t?"Enabled":"Enable"))}},{key:"renderOutlineEdit",value:function renderOutlineEdit(){var e=this.state.prioritizeOutlineKeys;return _react2.default.createElement("div",{className:"extension-item"},_react2.default.createElement("div",{className:"icon"},_react2.default.createElement("div",{className:"glyphicon glyphicon-cog"})),_react2.default.createElement("div",{className:"title"},"Prioritize Outline-edit key bindings"),_react2.default.createElement("div",{className:"description"},"This extension gives priority to Outline-edit key bindings over default key bindings, eg: Ctrl-up|down|left|right and Alt-up|down|left|right."),_react2.default.createElement("div",{className:"checkbox"},_react2.default.createElement("input",{type:"checkbox",checked:e,onChange:this.togglePrioritizeOutlineKeys}),e?"Enabled":"Enable"))}},{key:"renderUserScript",value:function renderUserScript(){var e=_stores2.default.CurrentUser.get(),t=e.config&&e.config.userScript,n=this.state.submitting;return _react2.default.createElement("div",{className:"extension-item"},_react2.default.createElement("div",{className:"icon"},_react2.default.createElement("div",{className:"glyphicon glyphicon-cog"})),_react2.default.createElement("div",{className:"title"},"User Script"),_react2.default.createElement("div",{className:"description"},"This extension allows you to enable User Script."),_react2.default.createElement("div",{className:"checkbox"},_react2.default.createElement("input",{type:"checkbox",checked:t,onChange:this.toggleUserScriptEnable,disabled:n}),t?"Enabled":"Enable"))}},{key:"render",value:function render(){return _react2.default.createElement("div",{className:"extensions-settings-form"},this.renderEmacs(),this.renderOutlineEdit(),this.renderUserScript())}}]),ExtensionsSettings}();exports.default=ExtensionsSettings;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../lib/browser":457,"../../lib/local-settings/":467,"../../stores/":520}],437:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_profileSettingsForm=require("./profile-settings-form"),_profileSettingsForm2=_interopRequireDefault(_profileSettingsForm),_extensionsSettingsForm=require("./extensions-settings-form"),_extensionsSettingsForm2=_interopRequireDefault(_extensionsSettingsForm),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var UserSettingsPage=function(e){function UserSettingsPage(){return _classCallCheck(this,UserSettingsPage),_possibleConstructorReturn(this,(UserSettingsPage.__proto__||Object.getPrototypeOf(UserSettingsPage)).apply(this,arguments))}return _inherits(UserSettingsPage,_react.Component),_createClass(UserSettingsPage,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"container user-settings-page"},_react2.default.createElement("div",{className:"row"},_react2.default.createElement("div",{className:"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},_react2.default.createElement("h1",null,"Personal Settings"),_react2.default.createElement("ul",{className:"nav nav-tabs",role:"tablist"},_react2.default.createElement("li",{role:"presentation",className:(0,_classnames2.default)({active:"profile"===this.props.tab})},_react2.default.createElement("a",{href:"/settings/profile"},"Profile")),_react2.default.createElement("li",{role:"presentation",className:(0,_classnames2.default)({active:"extensions"===this.props.tab})},_react2.default.createElement("a",{href:"/settings/extensions"},"Extensions"))),_react2.default.createElement("div",{className:"tab-content"},_react2.default.createElement("div",{role:"tabpanel",className:"tab-pane active"},"profile"===this.props.tab&&_react2.default.createElement(_profileSettingsForm2.default,null),"extensions"===this.props.tab&&_react2.default.createElement(_extensionsSettingsForm2.default,null))))))}}],[{key:"propTypes",get:function get(){return{tab:_propTypes2.default.string.isRequired}}}]),UserSettingsPage}();exports.default=UserSettingsPage;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./extensions-settings-form":436,"./profile-settings-form":438,"classnames":93,"prop-types":186}],438:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_page=require("page"),_page2=_interopRequireDefault(_page);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(a,n){try{var o=t[a](n),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ProfileSettingsForm=function(e){function ProfileSettingsForm(e){_classCallCheck(this,ProfileSettingsForm);var t=_possibleConstructorReturn(this,(ProfileSettingsForm.__proto__||Object.getPrototypeOf(ProfileSettingsForm)).call(this,e)),r=_stores2.default.CurrentUser.get();return t.state={name:r.name?r.name:"username",submitting:!1,error:""},(0,_lodash.bindAll)(t,["onSubmit","onChangeName"]),t}return _inherits(ProfileSettingsForm,_react2.default.Component),_createClass(ProfileSettingsForm,[{key:"onSubmit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),this.setState({submitting:!0,error:""}),t={name:this.refs.name.value,displayName:this.refs.displayName.value},r.prev=3,r.next=6,_stores2.default.CurrentUser.update(t);case 6:_stores2.default.ProjectList.lastProject&&confirm("Generate your page in this project?")?(0,_page2.default)(this.userPagePath+"/createUserPage"):(this.setState({submitting:!1}),(0,_page2.default)("/")),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(3),r.t0.response?this.setState({error:r.t0.response.data.message}):this.setState({error:"Can’t connect to the servers. Try again later."}),this.setState({submitting:!1});case 13:return r.abrupt("return",!1);case 14:case"end":return r.stop()}},_callee,this,[[3,9]])}));return function onSubmit(t){return e.apply(this,arguments)}}()},{key:"onChangeName",value:function onChangeName(){this.setState({name:this.refs.name.value||"username"})}},{key:"renderError",value:function renderError(){return _react2.default.createElement("div",{className:"alert alert-danger"},this.state.error)}},{key:"renderUserPageLink",value:function renderUserPageLink(){if(!_stores2.default.ProjectList.lastProject)return null;var e=location.protocol+"//"+location.host+this.userPagePath;return _react2.default.createElement("span",null,"Your Scrapbox page is",_react2.default.createElement("code",null,e),".",_react2.default.createElement("br",null))}},{key:"render",value:function render(){var e=_stores2.default.CurrentUser.get();return _react2.default.createElement("form",{onSubmit:this.onSubmit},this.state.error&&this.renderError(),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("label",{htmlFor:"displayName"},"Name"),_react2.default.createElement("input",{ref:"displayName",type:"text",className:"form-control input-lg",id:"displayName",placeholder:"Your name",defaultValue:e.displayName}),_react2.default.createElement("p",{className:"help-block"},"This will be displayed on your profile icon.")),_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement("label",{htmlFor:"name"},"Username"),_react2.default.createElement("div",{className:"input-group"},_react2.default.createElement("span",{className:"input-group-addon"},"@"),_react2.default.createElement("input",{ref:"name",type:"text",className:"form-control input-lg",id:"name",placeholder:"username",onChange:this.onChangeName,defaultValue:e.name})),_react2.default.createElement("p",{className:"help-block"},this.renderUserPageLink(),"You can show your icon on scrapbox page by typing ",_react2.default.createElement("code",null,"[",this.state.name,".icon]"),", ",_react2.default.createElement("br",null),"or just press key ",_react2.default.createElement("code",null,"CTRL+I"),_react2.default.createElement("br",null),"We advise you to keep this name short and not include space.")),_react2.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.submitting},"Save changes"))}},{key:"userPagePath",get:function get(){return"/"+_stores2.default.ProjectList.lastProject.name+"/"+this.state.name}}]),ProfileSettingsForm}();exports.default=ProfileSettingsForm;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../stores/":520,"page":169}],439:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var UserScriptAlert=function(e){function UserScriptAlert(e){_classCallCheck(this,UserScriptAlert);var t=_possibleConstructorReturn(this,(UserScriptAlert.__proto__||Object.getPrototypeOf(UserScriptAlert)).call(this,e));return(0,_lodash.bindAll)(t,"onSubmit"),t.subscribe(_stores2.default.UserScript),t.state={waitingForApproval:_stores2.default.UserScript.waitingForApproval},t}return _inherits(UserScriptAlert,_baseComponent2.default),_createClass(UserScriptAlert,[{key:"onStoreChange",value:function onStoreChange(e){var t=e.store;e.event;t===_stores2.default.UserScript&&this.setState({waitingForApproval:_stores2.default.UserScript.waitingForApproval})}},{key:"onSubmit",value:function onSubmit(e){e.preventDefault(),_stores2.default.UserScript.renderUserScriptTag()}},{key:"render",value:function render(){if(!_stores2.default.UserScript.shouldLoadScript)return null;if(!this.state.waitingForApproval)return null;var e=_stores2.default.CurrentUser.get(),t=_stores2.default.CurrentProject.get();return _react2.default.createElement("div",{className:"alert alert-info alert-dismissible userscript-alert text-center",role:"alert"},_react2.default.createElement("form",{onSubmit:this.onSubmit},_react2.default.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},_react2.default.createElement("span",{"aria-hidden":"true"},"×")),_react2.default.createElement("span",null,"UserScript has been updated. Please check ",_react2.default.createElement("a",{href:"/"+t.name+"/"+e.name},"your page"),"."),_react2.default.createElement("button",{type:"submit",className:"btn btn-primary"},"Load new UserScript")))}}]),UserScriptAlert}();exports.default=UserScriptAlert;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./base-component":261}],440:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_baseComponent=require("./base-component"),_baseComponent2=_interopRequireDefault(_baseComponent),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var VideoPlayer=function(e){function VideoPlayer(e){_classCallCheck(this,VideoPlayer);var t=_possibleConstructorReturn(this,(VideoPlayer.__proto__||Object.getPrototypeOf(VideoPlayer)).call(this,e));return t.subscribe(_stores2.default.Layout),t}return _inherits(VideoPlayer,_baseComponent2.default),_createClass(VideoPlayer,null,[{key:"propTypes",get:function get(){return{url:_propTypes2.default.string.isRequired,children:_propTypes2.default.array}}}]),_createClass(VideoPlayer,[{key:"onStoreChange",value:function onStoreChange(){this.video&&"page"!==_stores2.default.Layout.get()&&this.video.pause()}},{key:"render",value:function render(){var e=this,t=this.props,r=t.url,o=t.children,n={display:o?"none":"inline-block"};return _react2.default.createElement("div",{className:"video-player"},o&&_react2.default.createElement("span",{className:"image"},o),_react2.default.createElement("video",{ref:function ref(t){e.video=t},className:"video",style:n,controls:"true",loop:"true",src:r,onCanPlay:function onCanPlay(){return requestAnimationFrame(_stores2.default.LineDOM.update)}}))}}]),VideoPlayer}();exports.default=VideoPlayer;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"./base-component":261,"prop-types":186}],441:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var WelcomePage=function(e){function WelcomePage(){return _classCallCheck(this,WelcomePage),_possibleConstructorReturn(this,(WelcomePage.__proto__||Object.getPrototypeOf(WelcomePage)).apply(this,arguments))}return _inherits(WelcomePage,_react.Component),_createClass(WelcomePage,[{key:"renderButton",value:function renderButton(e){return _react2.default.createElement("a",{target:"_self",href:"/login/"+e,className:"btn btn-default btn-lg"},"Log in with ",(0,_lodash.capitalize)(e))}},{key:"render",value:function render(){var e=this,t=_stores2.default.Login.get().strategies;return _react2.default.createElement("div",{className:"container"},_react2.default.createElement("div",{className:"text-center"},_react2.default.createElement("h1",{style:{marginTop:"100px"}},"Welcome to Scrapbox"),t.map(function(t){return _react2.default.createElement("p",{key:t},e.renderButton(t))})))}}]),WelcomePage}();exports.default=WelcomePage;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520}],442:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setCharIndex=void 0;var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_katex="undefined"!=typeof window?window.window.katex:"undefined"!=typeof global?global.window.katex:null,_katex2=_interopRequireDefault(_katex),_scrapboxParser=require("../../../share/scrapbox-parser/"),_line=require("../../../share/line"),_url3=require("../../../share/url"),_gyazo2=require("../../../share/gyazo"),_graphemeSplitter=require("../../../share/grapheme-splitter"),_syntaxHighlight=require("./syntax-highlight"),_syntaxHighlight2=_interopRequireDefault(_syntaxHighlight),_audioPlayer=require("./audio-player"),_audioPlayer2=_interopRequireDefault(_audioPlayer),_audioLink=require("./audio-link"),_audioLink2=_interopRequireDefault(_audioLink),_icon=require("./icon/"),_icon2=_interopRequireDefault(_icon),_iframeVideoPlayer=require("./iframe-video-player"),_iframeVideoPlayer2=_interopRequireDefault(_iframeVideoPlayer),_videoPlayer=require("./video-player"),_videoPlayer2=_interopRequireDefault(_videoPlayer),_googleMap=require("./google-map/"),_googleMap2=_interopRequireDefault(_googleMap),_pageLink=require("./page-link/"),_externalLink=require("./external-link"),_externalLink2=_interopRequireDefault(_externalLink),_modalImage=require("./modal-image"),_modalImage2=_interopRequireDefault(_modalImage),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _setCharIndex(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if((0,_react.isValidElement)(e))return{result:_react2.default.createElement("span",{className:"c-"+t,key:t},e),charIndex:t+=1};var r=[];"string"==typeof e&&(e=(0,_graphemeSplitter.splitGraphemes)(e));var a=!0,n=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=i.value;r.push(_react2.default.createElement("span",{className:"c-"+t,key:t},c)),t+=1}}catch(e){n=!0,l=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw l}}return{result:r,charIndex:t}}exports.setCharIndex=_setCharIndex;var textLength=function textLength(e){return(0,_graphemeSplitter.splitGraphemes)(e).length},Wikify=function(e){function Wikify(){_classCallCheck(this,Wikify);var e=_possibleConstructorReturn(this,(Wikify.__proto__||Object.getPrototypeOf(Wikify)).call(this));return e.charIndex=0,e.setCharIndex=e.setCharIndex.bind(e),e}return _inherits(Wikify,_react.Component),_createClass(Wikify,[{key:"render",value:function render(){this.charIndex=0;var e=void 0;return e=this.props.isCursorLine?this.renderStringForEdit(this.props.children):this.renderStringForView(this.props.children),_react2.default.createElement("span",null,e)}},{key:"setCharIndex",value:function setCharIndex(e){var t=_setCharIndex(e,this.charIndex),r=t.result,a=t.charIndex;return this.charIndex=a,r}},{key:"emptyCharIndex",value:function emptyCharIndex(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=(0,_lodash.range)(this.charIndex,this.charIndex+e).map(function(e){return"c-"+e}).concat("empty-char-index"),r=this.charIndex;this.charIndex+=e;var a=_stores2.default.CurrentUser.isProjectMember?" ":"";return _react2.default.createElement("span",{className:(0,_classnames2.default)(t),key:"empty-char-index"+r},a)}},{key:"stringLengthInNode",value:function stringLengthInNode(e){if("string"==typeof e)return e.length;if(e instanceof Array)return e.map(this.stringLengthInNode.bind(this)).reduce(function(e,t){return e+t});switch(e.type){case"code":return e.unit.whole.length;case"quote":case"indent":return e.unit.tag.length+this.stringLengthInNode(e.children)}return this.stringLengthInNode(e.children)}},{key:"renderStringForView",value:function renderStringForView(e){if("string"!=typeof e)throw new Error("ArgumentError: not string");var t=(0,_scrapboxParser.parseScrapboxSyntax)(e);return 0===this.stringLengthInNode(t)?this.setCharIndex(_react2.default.createElement("br",{className:"empty-char-index"})):this.renderNodeForView(t)}},{key:"renderStringForEdit",value:function renderStringForEdit(e){if("string"!=typeof e)throw new Error("ArgumentError: not string");if(""===e)return this.setCharIndex(_react2.default.createElement("br",{className:"empty-char-index"}));var t=(0,_scrapboxParser.parseScrapboxSyntax)(e);return this.renderNodeForEdit(t)}},{key:"renderNodeForView",value:function renderNodeForView(e){var t=this;if("string"==typeof e)return this.setCharIndex(e);if(e instanceof Array)return(0,_lodash.range)(0,e.length).map(function(r){return _react2.default.createElement("span",{key:r},t.renderNodeForView(e[r]))});if(!e)return null;switch(e.type){case"blank":return _react2.default.createElement("span",{className:"blank"},this.emptyCharIndex(1),this.setCharIndex(e.unit.content),this.emptyCharIndex(1));case"code":if(!e.children)return _react2.default.createElement("code",null,_react2.default.createElement("span",{className:"backquote"},this.setCharIndex("``")));e.children=e.children.replace(/\\`/g,"`");var r=_react2.default.createElement("span",{className:"backquote"},this.setCharIndex(" ")),a=_react2.default.createElement(_syntaxHighlight2.default,{code:e.children,charIndex:this.charIndex});this.charIndex+=e.children.charLength;var n=_react2.default.createElement("span",{className:"backquote"},this.setCharIndex(" "));return _react2.default.createElement("code",null,r,a,n);case"deco":var l=e.unit,i=l.deco,s=l.italic,c=l.strike,o=l.underline,d=l.strong;return _react2.default.createElement("span",{className:"deco"},this.emptyCharIndex(2+i.length),function renderContent(){var r=t.renderNodeForView(e.children),a=(0,_classnames2.default)((0,_lodash.uniq)(i.split("")).map(function(e){return"deco-"+e}));return r=_react2.default.createElement("span",{className:a},r),s&&(r=_react2.default.createElement("i",null,r)),c&&(r=_react2.default.createElement("strike",null,r)),o&&(r=_react2.default.createElement("span",{style:{textDecoration:"underline"}},r)),d&&(r=_react2.default.createElement("strong",{className:"level level-"+d},r)),r}(),this.emptyCharIndex());case"strong":return _react2.default.createElement("span",{className:"strong"},this.emptyCharIndex(2),_react2.default.createElement("strong",null,this.renderNodeForView(e.children)),this.emptyCharIndex(2));case"deco-formula":var u=e.unit.formula,h=void 0;try{h=_katex2.default.renderToString(u,{throwOnError:!0,displayMode:!0})}catch(t){return _react2.default.createElement("span",{className:"formula error"},_react2.default.createElement("code",null,this.renderNodeForView(e.unit.whole)))}return _react2.default.createElement("span",{className:"formula"},this.emptyCharIndex(3),_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),this.emptyCharIndex(1));case"url":return _react2.default.createElement(_externalLink2.default,{className:"link",href:e.unit.content},this.renderNodeForView(e.children));case"youtube":case"vimeo":var m=e.unit,f=m.whole,_=m.videoId,p=m.params;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_iframeVideoPlayer2.default,{service:e.type,videoId:_,params:p}),this.emptyCharIndex(textLength(f)));case"audio":var g=e.unit.content;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_audioPlayer2.default,{url:g}),this.emptyCharIndex(textLength(e.unit.whole)));case"audioLink":var y=e.unit,x=y.whole,I=y.link,E=y.title;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_audioLink2.default,{src:I,title:E,setCharIndex:this.setCharIndex}),this.emptyCharIndex(textLength(x)));case"video":var k=e.unit.content;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_videoPlayer2.default,{url:k}),this.emptyCharIndex(textLength(e.unit.whole)));case"location":var w=e.unit,v=w.whole,C=w.latitude,N=w.longitude,L=w.zoom,b=w.title,q=textLength(v);return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_googleMap2.default,{latitude:C,longitude:N,zoom:L,title:b,lineId:this.props.lineId,startIndex:this.charIndex,endIndex:this.charIndex+q}),this.emptyCharIndex(q));case"image":var F=e.unit.content,P=(0,_gyazo2.toGyazoLargeThumbnailUrl)(F);return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_modalImage2.default,{className:"image",src:P,externalLink:F,noUnderLine:!0}),this.emptyCharIndex(textLength(e.unit.whole)));case"strongImage":var z=e.unit.content;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_modalImage2.default,{className:"strong-image",src:z}),this.emptyCharIndex(textLength(e.unit.whole)));case"gyazo":var V=(0,_url3.replaceProtocol)(e.unit.content,"https:"),T=(0,_gyazo2.toGyazoLargeThumbnailUrl)(V+"/raw");return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_modalImage2.default,{className:"image",alt:"Gyazo",src:T,href:V}),this.emptyCharIndex(textLength(e.unit.whole)));case"strongGyazo":var R=(0,_url3.replaceProtocol)(e.unit.content,"https:"),S=R+"/raw";return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_modalImage2.default,{className:"strong-image",alt:"Gyazo",src:S,href:R}),this.emptyCharIndex(textLength(e.unit.whole)));case"gyazoLink":var D=e.unit,j=D.whole,G=D.gyazo,W=D.link,O=(0,_gyazo2.toGyazoLargeThumbnailUrl)((0,_url3.replaceProtocol)(G+"/raw","https:"));return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_modalImage2.default,{className:"image",alt:"Gyazo",src:O,externalLink:W}),this.emptyCharIndex(textLength(j)));case"urlLink":var M=e.unit,A=M.link,H=M.title;return _react2.default.createElement(_externalLink2.default,{className:"link",href:A},this.emptyCharIndex(1),this.renderNodeForView(H||A),H&&this.emptyCharIndex(A.length+1),this.emptyCharIndex(1));case"imageLink":var U=e.unit,B=U.whole,J=U.link,K=U.image;return K=(0,_gyazo2.toGyazoLargeThumbnailUrl)(K),_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_modalImage2.default,{className:"image",src:K,externalLink:J}),this.emptyCharIndex(textLength(B)));case"strongImageLink":var Q=e.unit,X=Q.whole,Y=Q.link,Z=Q.image;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_modalImage2.default,{className:"strong-image image",src:Z,externalLink:Y}),this.emptyCharIndex(textLength(X)));case"strongGyazoLink":var $=e.unit,ee=$.whole,te=$.gyazo,re=$.link;return te=(0,_url3.replaceProtocol)(te+"/raw","https:"),_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_modalImage2.default,{className:"strong-image image",alt:"Gyazo",src:te,externalLink:re}),this.emptyCharIndex(textLength(ee)));case"strong-icon":case"icon":var ae=e.unit,ne=ae.project,le=ae.page,ie=ae.size,se=ae.content,ce=ae.whole;return ne||(ne=_stores2.default.CurrentProject.get().name),_react2.default.createElement("span",null,_react2.default.createElement(_icon2.default,{project:ne,page:le,size:ie,content:se,className:e.type}),this.emptyCharIndex(ce.length));case"link":var oe=e.unit,de=oe.project,ue=oe.page,he=oe.line;return[this.emptyCharIndex(),_react2.default.createElement(_pageLink.PageLink,{project:de,page:ue,type:_pageLink.PageLinkTypes.link,line:he,key:"link",charIndex:this.charIndex,hasCursor:!1},this.renderNodeForView(e.children)),this.emptyCharIndex()];case"hashTag":var me=e.unit.page;return _react2.default.createElement(_pageLink.PageLink,{page:me,type:_pageLink.PageLinkTypes.hashTag,charIndex:this.charIndex,hasCursor:!1},this.renderNodeForView(e.children));case"quote":return _react2.default.createElement("span",{className:"quote"},_react2.default.createElement("span",{className:"tag"},this.setCharIndex(e.unit.tag)),this.renderNodeForView(e.children));case"section":return _react2.default.createElement("h3",{class:"section"},this.renderNodeForView(e.children));case"indent":var fe=e.unit.tag.length,_e=this.setCharIndex((0,_lodash.fill)(Array(fe),_react2.default.createElement("span",{className:"pad"},"\t"))),pe=e.children?this.renderNodeForView(e.children):_react2.default.createElement("br",null);return _react2.default.createElement("span",null,_react2.default.createElement("span",{className:"indent-mark",style:{width:(0,_line.getIndentWidth)(fe)}},_e,_react2.default.createElement("span",{className:"dot"})),_react2.default.createElement("span",{className:"indent",style:{marginLeft:(0,_line.getIndentWidth)(fe)}},pe))}return this.renderNodeForView(e.unit.whole)}},{key:"renderNodeForEdit",value:function renderNodeForEdit(e){var t=this;if("string"==typeof e)return this.setCharIndex(e);if(e instanceof Array)return(0,_lodash.range)(0,e.length).map(function(r){return _react2.default.createElement("span",{key:r},t.renderNodeForEdit(e[r]))});if(!e)return null;switch(e.type){case"blank":return _react2.default.createElement("span",{className:"blank"},this.setCharIndex(e.unit.whole));case"code":if(!e.children)return _react2.default.createElement("code",null,_react2.default.createElement("span",{className:"backquote"},this.setCharIndex("``")));var r=_react2.default.createElement("span",{className:"backquote"},this.setCharIndex("`")),a=_react2.default.createElement(_syntaxHighlight2.default,{code:e.children,charIndex:this.charIndex});this.charIndex+=e.children.charLength;var n=_react2.default.createElement("span",{className:"backquote"},this.setCharIndex("`"));return _react2.default.createElement("code",null,r,a,n);case"deco":var l=e.unit,i=l.deco,s=l.italic,c=l.strike,o=l.underline,d=l.strong,u=[this.setCharIndex("["+i+" "),this.renderNodeForEdit(e.children),this.setCharIndex("]")],h=(0,_classnames2.default)((0,_lodash.uniq)(i.split("")).map(function(e){return"deco-"+e}));return u=_react2.default.createElement("span",{className:h},u),s&&(u=_react2.default.createElement("i",null,u)),c&&(u=_react2.default.createElement("strike",null,u)),o&&(u=_react2.default.createElement("span",{style:{textDecoration:"underline"}},u)),d&&(u=_react2.default.createElement("strong",{className:"level level-"+d},u)),_react2.default.createElement("span",{className:"deco"},u);case"strong":return _react2.default.createElement("span",{className:"strong"},this.setCharIndex("[["),_react2.default.createElement("strong",null,this.renderNodeForEdit(e.children)),this.setCharIndex("]]"));case"deco-formula":var m=e.unit.formula,f=["formula"];try{_katex2.default.renderToString(m,{throwOnError:!0,displayMode:!0})}catch(e){f.push("error")}return _react2.default.createElement("span",{className:(0,_classnames2.default)(f)},_react2.default.createElement("code",null,this.renderNodeForEdit(e.unit.whole)));case"audio":case"audioLink":return _react2.default.createElement("span",{className:"audio"},this.setCharIndex(e.unit.whole));case"strongImage":case"image":case"strongGyazo":case"gyazo":return _react2.default.createElement("span",{className:"image"},this.setCharIndex(e.unit.whole));case"video":var _=e.unit,p=_.whole,g=_.content;return _react2.default.createElement(_videoPlayer2.default,{url:g},this.setCharIndex(p));case"url":case"location":case"gyazoLink":case"urlLink":case"imageLink":case"strongImageLink":case"strongGyazoLink":return _react2.default.createElement("span",{className:"link"},this.setCharIndex(e.unit.whole));case"youtube":case"vimeo":var y=e.unit,x=y.whole,I=y.videoId,E=y.params;return _react2.default.createElement(_iframeVideoPlayer2.default,{service:e.type,videoId:I,params:E},this.setCharIndex(x));case"link":var k=e.unit,w=k.project,v=k.page,C=k.line,N=k.content,L=_stores2.default.Cursor.getPosition().char,b=this.charIndex<L&&L<this.charIndex+N.charLength+2;return _react2.default.createElement(_pageLink.PageLink,{type:_pageLink.PageLinkTypes.link,project:w,page:v,line:C,hasCursor:b,charIndex:this.charIndex},this.renderNodeForEdit(e.unit.whole));case"hashTag":var q=e.unit,F=q.page,P=q.content,z=_stores2.default.Cursor.getPosition().char,V=this.charIndex<z&&z<this.charIndex+P.charLength+2;return _react2.default.createElement(_pageLink.PageLink,{type:_pageLink.PageLinkTypes.hashTag,page:F,hasCursor:V,charIndex:this.charIndex},this.renderNodeForEdit(e.children));case"strong-icon":case"icon":return _react2.default.createElement("span",{className:e.type},this.setCharIndex(e.unit.whole));case"quote":return _react2.default.createElement("span",{className:"quote"},_react2.default.createElement("span",{className:"tag"},this.setCharIndex(e.unit.tag)),this.renderNodeForEdit(e.children));case"indent":var T=e.unit.tag.length,R=this.setCharIndex((0,_lodash.fill)(Array(T),_react2.default.createElement("span",{className:"pad"},"\t"))),S=e.children?this.renderNodeForEdit(e.children):_react2.default.createElement("br",null);return _react2.default.createElement("span",null,_react2.default.createElement("span",{className:"indent-mark",style:{width:(0,_line.getIndentWidth)(T)}},R,_react2.default.createElement("span",{className:"dot"})),_react2.default.createElement("span",{className:"indent",style:{marginLeft:(0,_line.getIndentWidth)(T)}},S))}return this.renderNodeForView(e)}}],[{key:"propTypes",get:function get(){return{children:_propTypes2.default.string.isRequired,isCursorLine:_propTypes2.default.bool.isRequired}}}]),Wikify}();exports.default=Wikify;

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../share/grapheme-splitter":580,"../../../share/gyazo":585,"../../../share/line":587,"../../../share/scrapbox-parser/":605,"../../../share/url":619,"../stores/":520,"./audio-link":259,"./audio-player":260,"./external-link":281,"./google-map/":283,"./icon/":288,"./iframe-video-player":290,"./modal-image":310,"./page-link/":344,"./syntax-highlight":429,"./video-player":440,"classnames":93,"prop-types":186}],443:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var IE_COMPOSITION_DELAY=exports.IE_COMPOSITION_DELAY=10;

    },{}],444:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var NONE=exports.NONE=0,CTRL=exports.CTRL=1,SHIFT=exports.SHIFT=2,ALT=exports.ALT=4,META=exports.META=8,Keys=exports.Keys={BACKSPACE:8,TAB:9,ENTER:13,RETURN:13,ESCAPE:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,UNDERSCORE:189,CONVERT:229,A:65,B:66,C:67,D:68,E:69,F:70,H:72,I:73,K:75,N:78,P:80,S:83,T:84,Y:89,Z:90};

    },{}],445:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var PageListStyles=exports.PageListStyles={GRID:"grid",GRID_MEDIUM:"grid-md",GRID_LARGE:"grid-lg"},isValidPageListStyle=exports.isValidPageListStyle=function isValidPageListStyle(e){return Object.values(PageListStyles).includes(e)};

    },{}],446:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var themesByCategory=exports.themesByCategory=[{name:"default",title:"Default",themes:[{name:"default",title:"Default",colors:{navbar:"#3c424e",searchBox:"rgba(255, 255, 255, .15)",bodyBg:"#dcdde0",newButton:"#fff",newButtonBg:"#42c48d",cardHead:"#f9f9f9",cardBg:"#fff"}}]},{name:"stationary",title:"Stationary",themes:[{name:"blue",title:"Blue",colors:{navbar:"#2a76e6",searchBox:"rgba(255, 255, 255, .15)",bodyBg:"#dedede",newButton:"#42c48d",newButtonBg:"#fff",cardHead:"#f5f5f5",cardBg:"#fff"}},{name:"purple",title:"Purple",colors:{navbar:"#8858ad",searchBox:"rgba(255, 255, 255, .15)",bodyBg:"#dedede",newButton:"#42c48d",newButtonBg:"#fff",cardHead:"#f5f5f5",cardBg:"#fff"}},{name:"green",title:"Green",colors:{navbar:"#29a972",searchBox:"rgba(255, 255, 255, .2)",bodyBg:"#dedede",newButton:"#42c48d",newButtonBg:"#fff",cardHead:"#f5f5f5",cardBg:"#fff"}},{name:"orange",title:"Orange",colors:{navbar:"#fc9306",searchBox:"rgba(255, 255, 255, .25)",bodyBg:"#dedede",newButton:"#42c48d",newButtonBg:"#fff",cardHead:"#f5f5f5",cardBg:"#fff"}},{name:"red",title:"Red",colors:{navbar:"#f05a5a",searchBox:"rgba(255, 255, 255, .2)",bodyBg:"#dedede",newButton:"#42c48d",newButtonBg:"#fff",cardHead:"#f5f5f5",cardBg:"#fff"}}]},{name:"hacker",title:"Hacker",themes:[{name:"hacker1",title:"Hacker 1",colors:{navbar:"#404651",searchBox:"rgba(255, 255, 255, .15)",bodyBg:"#252a30",newButton:"#2585b2",newButtonBg:"#49c4fe",cardHead:"#494d5a",cardBg:"#3f424c"}},{name:"hacker2",title:"Hacker 2",colors:{navbar:"#445a55",searchBox:"rgba(255, 255, 255, .15)",bodyBg:"#092f2c",newButton:"#217c8c",newButtonBg:"#36d6b1",cardHead:"#314a44",cardBg:"#283e39"}}]},{name:"seasons",title:"Seasons",themes:[{name:"winter",title:"Winter",colors:{navbar:"#68707f",searchBox:"rgba(255, 255, 255, .15)",bodyBg:"#bfc4cc",newButton:"#a66ef4",newButtonBg:"#fff",cardHead:"#dee4ec",cardBg:"#fff"}},{name:"summer",title:"Summer",colors:{navbar:"#ffd323",searchBox:"rgba(255, 255, 255, .4)",bodyBg:"#2bcbf3",newButton:"#f3595b",newButtonBg:"#fff",cardHead:"#1baacf",cardBg:"#fff"}},{name:"spring",title:"Spring",colors:{navbar:"#02a789",searchBox:"rgba(255, 255, 255, .25)",bodyBg:"#bdd84d",newButton:"#b44a29",newButtonBg:"#f4835f",cardHead:"#e1f68b",cardBg:"#fff"}},{name:"automn",title:"Autumn",colors:{navbar:"#553f38",searchBox:"rgba(255, 255, 255, .15)",bodyBg:"#a68a60",newButton:"#e85328",newButtonBg:"#fbf6ee",cardHead:"#876839",cardBg:"#fbf6ee"}}]},{name:"tropical",title:"Tropical",themes:[{name:"tropical",title:"Tropical",colors:{navbar:"#02a789",searchBox:"rgba(255, 255, 255, .2)",bodyBg:"#fee05e",newButton:"#5e389a",newButtonBg:"#a45aff",cardHead:"#edcb37",cardBg:"#fff"}}]},{name:"city",title:"City",themes:[{name:"kyoto",title:"Kyoto",colors:{navbar:"#523543",searchBox:"rgba(255, 255, 255, .15)",bodyBg:"#cab9a2",newButton:"#73d18b",newButtonBg:"#fff",cardHead:"#b29e83",cardBg:"#fffff2"}},{name:"newyork",title:"New York",colors:{navbar:"#12223b",searchBox:"rgba(255, 255, 255, .15)",bodyBg:"#93c3c0",newButton:"#f47a5d",newButtonBg:"#fff",cardHead:"#e8f0ed",cardBg:"#fff"}},{name:"paris",title:"Paris",colors:{navbar:"#7fd2b2",searchBox:"rgba(255, 255, 255, .3)",bodyBg:"#fc838c",newButton:"#7238cf",newButtonBg:"#fff",cardHead:"#ffe4e6",cardBg:"#fff"}}]},{name:"game",title:"Game",themes:[{name:"mred",title:"Red",colors:{navbar:"#eb3338",searchBox:"rgba(255, 255, 255, .2)",bodyBg:"#018ee0",newButton:"#fb973d",newButtonBg:"#fadc24",cardHead:"#35b5ff",cardBg:"#fff"}},{name:"lgreen",title:"Green",colors:{navbar:"#4abb0c",searchBox:"rgba(255, 255, 255, .25)",bodyBg:"#436698",newButton:"#fb973d",newButtonBg:"#fadc24",cardHead:"#21416f",cardBg:"#fff"}}]}];

    },{}],447:[function(require,module,exports){
        (function (global){
            "use strict";"undefined"!=typeof window?window.window._babelPolyfill:"undefined"!=typeof global&&global.window._babelPolyfill,require("./lib/show-legacy-browser-message"),require("./lib/setup-sentry"),require("./lib/print-all-errors"),require("./lib/setup-os"),require("./lib/setup-react-display-switch"),require("../../share/string");var _react="undefined"!=typeof window?window.window.React:"undefined"!=typeof global?global.window.React:null,_react2=_interopRequireDefault(_react),_reactDom="undefined"!=typeof window?window.window.ReactDOM:"undefined"!=typeof global?global.window.ReactDOM:null,_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_stores=require("./stores/"),_stores2=_interopRequireDefault(_stores),_app=require("./components/app"),_app2=_interopRequireDefault(_app);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}require("./routes/"),require("./lib/title-changer"),require("./lib/favicon-changer"),window.jQuery=_jquery2.default,require("bootstrap");var appContainer=document.getElementById("app-container");appContainer&&(0,_reactDom.render)(_react2.default.createElement(_app2.default,null),appContainer),window.addEventListener("beforeunload",function(){_stores2.default.PageAccess.sync()});

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../share/string":618,"./components/app":258,"./lib/favicon-changer":460,"./lib/print-all-errors":471,"./lib/setup-os":477,"./lib/setup-react-display-switch":478,"./lib/setup-sentry":479,"./lib/show-legacy-browser-message":480,"./lib/title-changer":481,"./routes/":498,"./stores/":520,"bootstrap":46}],448:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var en=exports.en={MakePrivateModal:{title:"Choose project plan",desc1:"On May 28th paid plans for business use of Scrapbox were released.",desc2:"All private projects with business-related use should start a paid subscription now.",important:"Important",choose:"Please choose the correct purpose for the project ({projectName}) from the two options below.",purpose:"Purpose",alert:"If you want to continue using a private project for business purposes, you need to get a paid subscription. You can use it free for 30 days from signing up.",help:"See details <a href='/pricing' target='_blank'>here</a>. Please <a href='/contact' target='_blank'>contact us</a> if you have any questions.",submit:"Confirm",cancel:"Cancel"},NewProjectModal:{alert:"All private projects for business use need a paid plan but will get a free 30 day trial for unlimited members.",help:"<a href='/pricing' target='_blank'>See pricing details here</a>."},plan:{business:"For business purposes such as by a registered corporation.",business2:"Includes LLCs, LLPs, partnerships, professional associations, government, religious organizations, and for-profit schools.",personal:"For individuals, families, interest groups, NPOs, classes, labs, or clubs at universities, freelancers, startups pre-incorporation, and events not hosted by a company.",personal2:"Includes not-for-profit public or private schools and solo professionals."},PrivateNonProfitProject:{purpose:"Project purpose",limitedPurpose:"This plan is for these groups of people:",needToChange:"If the purpose of this project matches any of the groups below, please change to a paid plan:",submitChange:"Switch purpose to Business",confirmChange:"For business purposes a paid subscription is required.\nYou’ll get the first 30 days free."},PrivateTrialProject:{purpose:"Project purpose",status:"Billing status",trialing:"Trial period",expired:"Trial expired",trialEnd:"Trial end",trialDaysLeft:"（{trialDaysLeft} days remaining)",addCard:"Please click below to add your card details and subscribe.",paymentStart:"",noteExpired:"",note:"When you add a card, the payment won’t be processed until the end of the trial period so you always get 30 days free.",note2:"The trial status bar will be removed immediately when you add a card so you can continue more comfortably.",addCardSubmit:"Add card details"},SelectPlanModal:{title:"Scrapbox for Business is here.",desc1:"Thank you for using Scrapbox.",desc2:"On May 28th the business version of Scrapbox was released.",desc3:"All private projects with business-related use should start a paid subscription now.",important:"Important",choose:" Please choose the purpose for this project ({projectName}) from the list below.",purpose:"Purpose",alert:"If your project is for any of the business uses, you are required to add a payment method or it will become locked.",help:"See more details <a href='/pricing' target='_blank'>here</a>.",help2:"Please <a href='/contact' target='_blank'>contact us</a> with any questions.",submit:"Confirm",cancel:"Later",close:"Close",forMember:"You can not choose because you don’t have enough previleges.",forMemberLink:"Ask your project owner."},ShowMoreText:{detail:"See details",close:"Close"}};

    },{}],449:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.t=t,exports.getLang=getLang,exports.setLang=setLang;var _ja=require("./ja"),_en=require("./en"),_localSettings=require("../lib/local-settings/"),_localSettings2=_interopRequireDefault(_localSettings);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var currentLang=_localSettings2.default.get("lang")||getBrowserLanguage()||"en";function t(e,t){var n=void 0;switch(currentLang){case"ja":n=_ja.ja;break;case"en":n=_en.en;break;default:return console.warn("lang: "+currentLang+" does not exist"),e}var r=e.split("."),a=n,l=!0,u=!1,o=void 0;try{for(var g,i=r[Symbol.iterator]();!(l=(g=i.next()).done);l=!0){var s=g.value;if(!a.hasOwnProperty(s))return console.warn("lang: "+currentLang+" does not have "+e),e;a=a[s]}}catch(e){u=!0,o=e}finally{try{!l&&i.return&&i.return()}finally{if(u)throw o}}for(var c in t)a=a.replace("{"+c+"}",t[c]);return a.match(/\.$/)&&(a+=" "),a}function getLang(){return currentLang}function setLang(e){_localSettings2.default.set("lang",e),currentLang=e}function getBrowserLanguage(){var e=navigator.language;return e?(e=e.substr(0,2),["en","ja"].includes(e)?e:null):null}

    },{"../lib/local-settings/":467,"./en":448,"./ja":450}],450:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ja=exports.ja={MakePrivateModal:{title:"プロジェクトの目的をお選びください",desc1:"2018年5月28日より、Scrapboxの有償プランの適用が開始されました。",desc2:"非公開かつ営利目的のご利用に関しては、今後有償になります。",important:"重要",choose:"このプロジェクト({projectName})に関して、以下のどちらの目的に合致するか選択をお願いします。",purpose:"目的",alert:"非公開かつ営利目的でのご利用は有償になります。30日間は、無料でお試しできます。",help:"詳しくは<a href='/pricing' target='_blank'>価格</a>と<a href='/terms' target='_blank'>利用規約</a>をご覧ください。",submit:"同意して保存",cancel:"キャンセル"},NewProjectModal:{alert:"非公開かつ営利目的でのご利用は有償になりますが、チームの規模や機能には制限なく、30日間無料でお試しいただけます。",help:"<a href='/pricing' target='_blank'>価格はこちらをご覧ください。</a>"},plan:{business:"登記された会社または事業において営利目的で使用します。",business2:"有限会社、LLP、LLC、行政機関、一般社団法人、宗教法人、予備校、学習塾、株式会社立大学はこちらです。",personal:"個人、家族、趣味のグループ、NPO、大学での授業・研究室・サークル、フリーランス、登記前の組織、企業の主催によらないイベント等で利用します。",personal2:"公立および私立の小中高大学は同じ扱いです。仕事でも一人で利用する場合はこちらです。"},PrivateNonProfitProject:{purpose:"このプロジェクトの利用目的",limitedPurpose:"このプランは、以下の目的においてのみ無料で利用できます。",needToChange:"もし現在の利用が以下の条件に該当する場合は、目的を変更してください。",submitChange:"ビジネス目的に変更",confirmChange:"ビジネス利用は有料になります。変更しますか？\n変更後、30日以内にお支払いを完了してください。"},PrivateTrialProject:{purpose:"このプロジェクトの利用目的",status:"現状の状態",trialing:"試用中",expired:"試用期間超過",trialEnd:"試用期間の終了日時",trialDaysLeft:"（残り{trialDaysLeft}日）",addCard:"以下のボタンを押して、クレジットカードを登録してください。",paymentStart:"{trialEnd}から課金が開始されます。",noteExpired:"課金が開始されます。",note:"いつ入力しても課金開始日は変わりませんので、料金は変わりません。",note2:"登録すると、ただちに「試用中」の表示を消すことができ、快適に利用できます。",addCardSubmit:"クレジットカードを追加"},SelectPlanModal:{title:"Scrapbox の有償プランが始まりました。",desc1:"日頃、Scrapboxをご愛用いただきありがとうございます。",desc2:"2018年5月28日より、Scrapboxの有償プランの適用が開始されました。",desc3:"非公開かつ営利目的のご利用に関しては、今後有償になります。",important:"重要",choose:"このプロジェクト({projectName})に関して、以下のどちらの目的に合致するか選択をお願いします。",purpose:"目的",alert:"非公開かつ営利目的でご利用のプロジェクトを継続してご利用になるには、お支払いが必要です。",help:"詳細は、<a href='/pricing' target='_blank'>こちら</a>をご覧ください。",help2:"ご不明な点は、お気軽に<a href='/contact' target='_blank'>お問い合わせ</a>ください。",submit:"同意して保存",cancel:"回答を保留",close:"閉じる",forMember:"あなたはプロジェクトのオーナーではないので、選択できません。",forMemberLink:"プロジェクトのオーナーにお尋ねください。"},ShowMoreText:{detail:"詳細",close:"閉じる"}};

    },{}],451:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWithCache=void 0;var getWithCache=exports.getWithCache=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r,n=t.useCache;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!cache.has(e)){t.next=3;break}return debug("hit cache",e),t.abrupt("return",Object.assign({},cache.get(e),{cache:!0}));case 3:return t.next=5,_.apiClient.get(e);case 5:return 200===(r=t.sent).status&&cache.set(e,r),t.abrupt("return",r);case 8:case"end":return t.stop()}},_callee,this)}));return function getWithCache(t,r){return e.apply(this,arguments)}}(),_=require("./");function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var c=t[n](a),u=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(u).then(function(e){step("next",e)},function(e){step("throw",e)});e(u)}("next")})}}var debug=require("../../../../share/debug")(__filename),cache=new Map;

        }).call(this,"/src/client/js/lib/api-client/cache.js")
    },{"../../../../share/debug":566,"./":452}],452:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defferedInterceptor=exports.apiClient=void 0;var _axios=require("axios"),_axios2=_interopRequireDefault(_axios),_interceptors=require("./interceptors"),_logger=require("./interceptors/logger"),_csrf=require("./interceptors/csrf");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var apiClient=exports.apiClient=_axios2.default.create({timeout:6e4}),defferedInterceptor=exports.defferedInterceptor={request:new _interceptors.DefferedInterceptor,requestError:new _interceptors.DefferedInterceptor,response:new _interceptors.DefferedInterceptor,responseError:new _interceptors.DefferedInterceptor};apiClient.interceptors.request.use((0,_interceptors.combineInterceptors)(_csrf.setCsrfToken,_logger.requestLogger,defferedInterceptor.request.get),(0,_interceptors.combineErrorInterceptors)(_logger.requestErrorLogger,defferedInterceptor.requestError.get)),apiClient.interceptors.response.use((0,_interceptors.combineInterceptors)(_logger.responseLogger,defferedInterceptor.response.get),(0,_interceptors.combineErrorInterceptors)(_logger.responseErrorLogger,defferedInterceptor.responseError.get));

    },{"./interceptors":454,"./interceptors/csrf":453,"./interceptors/logger":455,"axios":19}],453:[function(require,module,exports){
        "use strict";function setCsrfToken(e){return["post","put","delete"].includes(e.method)&&window._csrf&&(e.headers["X-CSRF-TOKEN"]=window._csrf),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setCsrfToken=setCsrfToken;

    },{}],454:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var combineInterceptors=exports.combineInterceptors=function combineInterceptors(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e){return[e].concat(r).reduce(function(e,r){return r(e)})}},combineErrorInterceptors=exports.combineErrorInterceptors=function combineErrorInterceptors(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return combineInterceptors.apply(void 0,r.concat([function(e){return Promise.reject(e)}]))},DefferedInterceptor=exports.DefferedInterceptor=function(){function DefferedInterceptor(){_classCallCheck(this,DefferedInterceptor),this.interceptors=[],this.get=this.get.bind(this)}return _createClass(DefferedInterceptor,[{key:"register",value:function register(e){this.interceptors.push(e)}},{key:"get",value:function get(e){return this.interceptors.length<1?e:combineInterceptors.apply(void 0,_toConsumableArray(this.interceptors))(e)}}]),DefferedInterceptor}();

    },{}],455:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestLogger=requestLogger,exports.requestErrorLogger=requestErrorLogger,exports.responseLogger=responseLogger,exports.responseErrorLogger=responseErrorLogger;var debug=require("../../../../../share/debug")(__filename);function requestLogger(r){var e=r.method.toUpperCase(),o=r.url;return debug(e+" "+o,r),r}function requestErrorLogger(r){return r.stack&&console.error(r.stack),debug("request error",r),r}function responseLogger(r){var e=r.config.method.toUpperCase(),o=r.config.url;return debug("response of "+e+" "+o,r),r}function responseErrorLogger(r){return r.stack&&console.error(r.stack),debug("response error",r),r}

        }).call(this,"/src/client/js/lib/api-client/interceptors/logger.js")
    },{"../../../../../share/debug":566}],456:[function(require,module,exports){
        "use strict";function appendStyle(e,t){var d=document.createElement("style");d.id=e,d.appendChild(document.createTextNode(t));var n=document.getElementById(e);n?document.head.replaceChild(d,n):document.head.appendChild(d)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=appendStyle;

    },{}],457:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMac=isMac,exports.isNotMac=isNotMac,exports.isiOS=isiOS,exports.isAndroid=isAndroid,exports.isWindowsPhone=isWindowsPhone,exports.isTouchDevice=isTouchDevice,exports.isNotTouchDevice=isNotTouchDevice,exports.isLegacyBrowser=isLegacyBrowser,exports.isOperaCoast=isOperaCoast,exports.isSafari=isSafari;var _browserInfo=require("browser-info"),_browserInfo2=_interopRequireDefault(_browserInfo),_reactDisplaySwitch=require("react-display-switch");function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}var info={};try{info=(0,_browserInfo2.default)()}catch(i){console.error(i.stack||i)}function isMac(){return"OS X"===info.os}function isNotMac(){return!isMac()}function isiOS(){return"iOS"===info.os}function isAndroid(){return"Android"===info.os}function isWindowsPhone(){return"Windows Phone"===info.os}function isTouchDevice(){return isiOS()||isAndroid()||isWindowsPhone()}function isNotTouchDevice(){return!isTouchDevice()}function isLegacyBrowser(){return"Chrome"===info.name&&info.version<50||"Safari"===info.name&&info.version<10||"Firefox"===info.name&&info.version<50||"IE"===info.name}function isOperaCoast(){return"OperaCoast"===info.name}function isSafari(){return"Safari"===info.name}_reactDisplaySwitch.When.case("mac",isMac),_reactDisplaySwitch.When.case("iOS",isiOS),_reactDisplaySwitch.When.case("android",isAndroid),_reactDisplaySwitch.When.case("windows_phone",isWindowsPhone),_reactDisplaySwitch.When.case("touch_device",isTouchDevice),_reactDisplaySwitch.When.case("safari",isSafari);

    },{"browser-info":60,"react-display-switch":208}],458:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,r){var e=[],o=!0,i=!1,n=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(e.push(a.value),!r||e.length!==r);o=!0);}catch(t){i=!0,n=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw n}}return e}(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.cropCanvas=cropCanvas,exports.getCursorPoint=getCursorPoint;var getCropRect=exports.getCropRect=function getCropRect(t){for(var r=void 0,e=void 0,o=void 0,i=void 0,n=t.getContext("2d").getImageData(0,0,t.width,t.height).data,a=0;a<t.height;a++)for(var c=0;c<t.width;c++){var d=4*(c+a*t.width),u=n.slice(d,d+3),s=_slicedToArray(u,3),h=s[0],g=s[1],v=s[2];(h<255||g<255||v<255)&&(void 0===e&&(e=a),(void 0===i||i<a)&&(i=a),(void 0===r||r>c)&&(r=c),(void 0===o||o<c)&&(o=c))}if(void 0===r||void 0===e||void 0===o||void 0===i)throw new Error("Nothing is drawn on canvas.");return{left:r,top:e,right:o,bottom:i}};function addMarginToRect(t){var r=t.rect,e=t.margin,o=t.maxWidth,i=t.maxHeight;return r.top-=e,r.top<0&&(r.top=0),r.left-=e,r.left<0&&(r.left=0),r.right+=e,r.right>o-1&&(r.right=o-1),r.bottom+=e,r.bottom>i-1&&(r.bottom=i-1),r}function cropCanvas(t){var r=addMarginToRect({rect:getCropRect(t),margin:5,maxWidth:t.width,maxHeight:t.height}),e=r.left,o=r.top,i=r.right-e,n=r.bottom-o,a=document.createElement("canvas");return a.width=i,a.height=n,a.getContext("2d").drawImage(t,e,o,i,n,0,0,i,n),a}function getCursorPoint(t){if(t.touches){var r=t.target.getBoundingClientRect(),e=r.left,o=r.top;return{x:t.touches[0].clientX-e,y:t.touches[0].clientY-o,pressure:t.touches[0].force}}return{x:t.offsetX,y:t.offsetY,pressure:t.pressure}}

    },{}],459:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPointFromCharIndex=getPointFromCharIndex,exports.getLineIndexFromPoint=getLineIndexFromPoint,exports.getCharIndexFromPoint=getCharIndexFromPoint,exports.getTextRect=getTextRect;var _jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getPointFromCharIndex(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).vagueValue,n=_stores2.default.Line.getAll()[e.line];if(n){var i=n.text;if(void 0!==i){if(!((0,_jquery2.default)(".lines .line").eq(e.line).length<=0)){var o=e.char,r=o>0&&o===i.charLength,l=r?i.charLength-1:o,a=(0,_jquery2.default)("#L"+n.id+" span.c-"+l);if(a.length<=0&&(r||t)&&(a=(0,_jquery2.default)("#L"+n.id+" .text *:last")),!(a.length<=0)){var f=(0,_jquery2.default)(".lines").offset(),d=a.offset().left-f.left,h=a.offset().top-f.top,u=a.height();return r&&(d+=a.outerWidth()),"SPAN"!==a.prop("tagName")&&(u=20),{x:parseInt(d,10),y:parseInt(h,10),height:parseInt(u,10)}}}}else console.warn("WARNING: text data is null")}}function getLineIndexFromPoint(e){var t=0,n=0,i=(0,_jquery2.default)(".lines").offset(),o=(0,_jquery2.default)(".lines .line"),r=o.length-1;if(o.length>100){var l=Math.floor(o.length/10);for(n=l;n<o.length&&!((0,_jquery2.default)(o[n]).offset().top-i.top>e.y);n+=l);n-=l}for(;n<o.length;){var a=o[n],f=(0,_jquery2.default)(a).offset(),d={top:f.top-i.top,left:f.left-i.left,height:(0,_jquery2.default)(a).height()};if(e.y<d.top+d.height||n>=r){if(e.y-=d.top,t=n,0===n){var h=d.top+d.height-28;e.y>h&&(e.y=h)}break}n+=1}return t}function getCharIndexFromPoint(e){for(var t=getLineIndexFromPoint(e),n=_stores2.default.Line.getAll()[t],i=n.text,o=i.charLength,r={left:0,top:0,width:0},l=0;l<i.charLength;l++){var a=(0,_jquery2.default)("#L"+n.id+" span.c-"+l),f=a.position();if(!a||!f)break;f.width=a.width(),f.height=a.height();var d=f.top>r.top&&f.left<r.left;if(d){if(e.x>r.left+r.width/2&&e.y<r.top+r.height){o=l;break}r.left=0}if(e.y<f.top+f.height){var h=f.left-r.left;if(l>0&&!d&&e.x>0&&e.x<f.left-h/2){o=l-1;break}if(e.x<f.left+f.width/2){o=l;break}}r=(0,_lodash.clone)(f)}return{line:t,char:o}}function getDOMNode(){return(0,_jquery2.default)("#compute-line .line")}function getTextRect(e,t){t?getDOMNode().addClass("line-title"):getDOMNode().removeClass("line-title");var n=""===e?" ":e,i=(0,_jquery2.default)("<span/>").text(n).html();getDOMNode().html("<span>"+i+"</span>");var o=getDOMNode().find("span");return""===e?{width:0,height:o.height()}:{width:o.width()+5,height:o.height()}}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520}],460:[function(require,module,exports){
        "use strict";var _stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_gyazo=require("../../../share/gyazo");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var findFaviconTag=function findFaviconTag(){return document.getElementById("favicon")},defaultUrl=findFaviconTag().href;function updateFavicon(){var e=(0,_gyazo.toGyazoThumbnailUrl)(_stores2.default.CurrentProject.get().image);findFaviconTag().href=e||defaultUrl}_stores2.default.CurrentProject.addChangeListener(updateFavicon);

    },{"../../../share/gyazo":585,"../stores/":520}],461:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var readAsDataURLPromise=exports.readAsDataURLPromise=function readAsDataURLPromise(e){return new Promise(function(r,a){var t=new FileReader;t.onload=function(e){return r(e)};try{t.readAsDataURL(e)}catch(e){a(e)}})};

    },{}],462:[function(require,module,exports){
        "use strict";function formatMoney(r){var t=r.currency,e=r.amount;return formatCurrency(t)+formatAmount({currency:t,amount:e})}function formatCurrency(r){switch(r){case"usd":return"$";case"jpy":return"¥";default:return r.toUpperCase()}}function formatAmount(r){var t=r.currency,e=r.amount;return"usd"===t?String((e/100).toFixed(2)):e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=formatMoney;

    },{}],463:[function(require,module,exports){
        (function (process,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isGyazoUploadableType=void 0,exports.isDataURIImage=isDataURIImage,exports.isGyazoUploadEnable=isGyazoUploadEnable;var _axios=require("axios"),_axios2=_interopRequireDefault(_axios),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_reactDisplaySwitch=require("react-display-switch");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var a=e.apply(this,arguments);return new Promise(function(e,t){return function step(r,n){try{var o=a[r](n),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}var debug=require("../../../share/debug")(__filename),gyazoClient=_axios2.default.create({timeout:6e4,withCredentials:!0});gyazoClient.interceptors.request.use(function(e){return debug("request",e.url,e),e}),exports.default=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var a,t,r,n,o,s,i,u;return regeneratorRuntime.wrap(function _callee$(p){for(;;)switch(p.prev=p.next){case 0:return"https://upload.gyazo.com/api/upload/easy_auth",(a=new URLSearchParams).append("referer_url",location.href),a.append("client_id","6bcc31e5cf908ed538bd471b1736035bd65f02c5a81946e488d4f1f73c9f44e7"),a.append("image_url",e),a.append("title",_stores2.default.Line.lines.getTitle()),(t=process.env.GYAZO_TEAMS_TEAM_NAME)&&(a.append("team_name",t),a.append("no_redirect","1")),r="",p.prev=9,p.next=12,gyazoClient.post("https://upload.gyazo.com/api/upload/easy_auth",a);case 12:return n=p.sent,p.next=15,gyazoClient.get(n.data.get_image_url);case 15:o=p.sent,r=o.data&&o.data.url||o.request.responseURL,p.next=30;break;case 19:if(p.prev=19,p.t0=p.catch(9),s=t?"Gyazo Teams":"Gyazo",i=t?t+".gyazo.com":"gyazo.com",!p.t0.response||403!==p.t0.response.status){p.next=29;break}throw(u=new Error("Cannot upload an image.\nPlease log in to "+s+".")).redirectTo="https://"+i+"/login",u;case 29:throw new Error("Something wrong with upload. Please retry it.");case 30:return p.abrupt("return",{url:r,imageId:r.match(/[a-f0-9]{32}/)[0]});case 31:case"end":return p.stop()}},_callee,this,[[9,19]])}));return function gyazoUpload(a){return e.apply(this,arguments)}}();var isGyazoUploadableType=exports.isGyazoUploadableType=function isGyazoUploadableType(e){return/^image\/(jpe?g|gif|png)$/i.test(e)};function isDataURIImage(e){return/^data:image\/(jpe?g|gif|png);base64,[a-zA-Z\d+\/=]+$/.test(e)}function isGyazoUploadEnable(){return _stores2.default.CurrentUser.isProjectMember&&!0}_reactDisplaySwitch.When.case("enable_gyazo_upload",isGyazoUploadEnable);

        }).call(this,require('_process'),"/src/client/js/lib/gyazo-upload.js")
    },{"../../../share/debug":566,"../stores/":520,"_process":184,"axios":19,"react-display-switch":208}],464:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShortcutKeyAction=getShortcutKeyAction;var _shortcut=require("./shortcut"),_key=require("../../constants/key");function getShortcutKeyAction(e){var t=!0,r=!1,y=void 0;try{for(var o,c=(0,_shortcut.getShortcutKeys)()[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var n=o.value;if(check(n,e))return n.action}}catch(e){r=!0,y=e}finally{try{!t&&c.return&&c.return()}finally{if(r)throw y}}}function check(e,t){return(!e.code||e.code===t.keyCode)&&((!e.key||e.key===t.key)&&((t.ctrlKey?_key.CTRL:_key.NONE)|(t.altKey?_key.ALT:_key.NONE)|(t.metaKey?_key.META:_key.NONE)|(t.shiftKey?_key.SHIFT:_key.NONE))===(e.flags||_key.NONE))}

    },{"../../constants/key":444,"./shortcut":465}],465:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.outlineKeys=void 0,exports.getShortcutKeys=getShortcutKeys;var _browser=require("../browser"),_key=require("../../constants/key"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_localSettings=require("../local-settings/"),_localSettings2=_interopRequireDefault(_localSettings);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var o=0,y=Array(e.length);o<e.length;o++)y[o]=e[o];return y}return Array.from(e)}function getShortcutKeys(){var e=_stores2.default.CurrentUser.get(),o=[].concat(defaultKeys);return((0,_browser.isMac)()||e&&e.config&&e.config.emacsBinding)&&(o=o.concat(emacsKeys)),o=(0,_browser.isMac)()?o.concat(macKeys):o.concat(notMacKeys),_localSettings2.default.get("prioritizeOutlineKeys")?[].concat(outlineKeys,_toConsumableArray(o)):[].concat(_toConsumableArray(o),outlineKeys)}var defaultKeys=[].concat(_toConsumableArray([_key.NONE,_key.SHIFT].map(function(e){return{action:"go-line-head",code:_key.Keys.HOME,flags:e}})),_toConsumableArray([_key.NONE,_key.SHIFT].map(function(e){return{action:"go-line-tail",code:_key.Keys.END,flags:e}})),_toConsumableArray([_key.NONE,_key.SHIFT].map(function(e){return{action:"go-left",code:_key.Keys.LEFT,flags:e}})),_toConsumableArray([_key.NONE,_key.SHIFT].map(function(e){return{action:"go-right",code:_key.Keys.RIGHT,flags:e}})),_toConsumableArray([_key.NONE,_key.SHIFT].map(function(e){return{action:"go-up",code:_key.Keys.UP,flags:e}})),_toConsumableArray([_key.NONE,_key.SHIFT].map(function(e){return{action:"go-down",code:_key.Keys.DOWN,flags:e}})),_toConsumableArray([_key.NONE,_key.SHIFT].map(function(e){return{action:"go-pageup",code:_key.Keys.PAGEUP,flags:e}})),_toConsumableArray([_key.NONE,_key.SHIFT].map(function(e){return{action:"go-pagedown",code:_key.Keys.PAGEDOWN,flags:e}})),[{action:"enter",code:_key.Keys.ENTER},{action:"tab",code:_key.Keys.TAB},{action:"shift-tab",code:_key.Keys.TAB,flags:_key.SHIFT},{action:"escape",code:_key.Keys.ESCAPE},{action:"delete-char",code:_key.Keys.DELETE},{action:"delete-back-char",code:_key.Keys.BACKSPACE},{action:"insert-icon",code:_key.Keys.I,flags:_key.CTRL}]),emacsKeys=[].concat(_toConsumableArray([_key.CTRL,_key.CTRL|_key.SHIFT].map(function(e){return{action:"go-left",code:_key.Keys.B,flags:e}})),_toConsumableArray([_key.CTRL,_key.CTRL|_key.SHIFT].map(function(e){return{action:"go-right",code:_key.Keys.F,flags:e}})),_toConsumableArray([_key.CTRL,_key.CTRL|_key.SHIFT].map(function(e){return{action:"go-line-head",code:_key.Keys.A,flags:e}})),_toConsumableArray([_key.CTRL,_key.CTRL|_key.SHIFT].map(function(e){return{action:"go-line-tail",code:_key.Keys.E,flags:e}})),_toConsumableArray([_key.CTRL,_key.CTRL|_key.SHIFT].map(function(e){return{action:"go-up",code:_key.Keys.P,flags:e}})),_toConsumableArray([_key.CTRL,_key.CTRL|_key.SHIFT].map(function(e){return{action:"go-down",code:_key.Keys.N,flags:e}})),[{action:"delete-char",code:_key.Keys.D,flags:_key.CTRL},{action:"delete-back-char",code:_key.Keys.H,flags:_key.CTRL},{action:"emacs-cut",code:_key.Keys.K,flags:_key.CTRL},{action:"emacs-paste",code:_key.Keys.Y,flags:_key.CTRL},{action:"undo",code:_key.Keys.UNDERSCORE,flags:_key.CTRL}]),macKeys=[].concat(_toConsumableArray([_key.ALT,_key.ALT|_key.SHIFT].map(function(e){return{action:"go-word-left",code:_key.Keys.LEFT,flags:e}})),_toConsumableArray([_key.ALT,_key.ALT|_key.SHIFT].map(function(e){return{action:"go-word-right",code:_key.Keys.RIGHT,flags:e}})),_toConsumableArray([_key.META,_key.META|_key.SHIFT].map(function(e){return{action:"go-line-head",code:_key.Keys.LEFT,flags:e}})),_toConsumableArray([_key.META,_key.META|_key.SHIFT].map(function(e){return{action:"go-line-tail",code:_key.Keys.RIGHT,flags:e}})),_toConsumableArray([_key.META,_key.META|_key.SHIFT].map(function(e){return{action:"go-top",code:_key.Keys.UP,flags:e}})),_toConsumableArray([_key.META,_key.META|_key.SHIFT].map(function(e){return{action:"go-bottom",code:_key.Keys.DOWN,flags:e}})),[{action:"copy",code:_key.Keys.C,flags:_key.META},{action:"browser-save-page",code:_key.Keys.S,flags:_key.META},{action:"select-all",code:_key.Keys.A,flags:_key.META},{action:"undo",code:_key.Keys.Z,flags:_key.META},{action:"redo",code:_key.Keys.Z,flags:_key.META|_key.SHIFT},{action:"insert-timestamp",code:_key.Keys.T,flags:_key.CTRL}]),notMacKeys=[].concat(_toConsumableArray([_key.CTRL,_key.SHIFT|_key.CTRL].map(function(e){return{action:"go-word-left",code:_key.Keys.LEFT,flags:e}})),_toConsumableArray([_key.CTRL,_key.SHIFT|_key.CTRL].map(function(e){return{action:"go-word-right",code:_key.Keys.RIGHT,flags:e}})),[{action:"copy",code:_key.Keys.C,flags:_key.CTRL},{action:"browser-save-page",code:_key.Keys.S,flags:_key.CTRL},{action:"select-all",code:_key.Keys.A,flags:_key.CTRL},{action:"select-all",code:_key.Keys.A,flags:_key.CTRL|_key.SHIFT},{action:"undo",code:_key.Keys.Z,flags:_key.CTRL},{action:"redo",code:_key.Keys.Z,flags:_key.CTRL|_key.SHIFT},{action:"insert-timestamp",code:_key.Keys.T,flags:_key.ALT}]),outlineKeys=exports.outlineKeys=[{action:"move-block-up",code:_key.Keys.UP,flags:_key.ALT},{action:"move-block-down",code:_key.Keys.DOWN,flags:_key.ALT},{action:"move-block-right",code:_key.Keys.RIGHT,flags:_key.ALT},{action:"move-block-left",code:_key.Keys.LEFT,flags:_key.ALT},{action:"move-line-left",code:_key.Keys.LEFT,flags:_key.CTRL},{action:"move-line-right",code:_key.Keys.RIGHT,flags:_key.CTRL},{action:"move-line-up",code:_key.Keys.UP,flags:_key.CTRL},{action:"move-line-down",code:_key.Keys.DOWN,flags:_key.CTRL}];

    },{"../../constants/key":444,"../../stores/":520,"../browser":457,"../local-settings/":467}],466:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var lang=exports.lang=function(){if(navigator.languages instanceof Array){if(/^ja/i.test(navigator.languages[0]))return"ja"}else if(/^ja/i.test(navigator.language))return"ja";return"en"}();

    },{}],467:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_settings=require("./settings"),_settings2=_interopRequireDefault(_settings);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var LocalSettings=function(){function LocalSettings(){_classCallCheck(this,LocalSettings),this.settings={}}return _createClass(LocalSettings,[{key:"register",value:function register(e){if(!e.key||"string"!=typeof e.key)throw new Error('"key" is required');if(void 0===e.default)throw new Error('"default" is required');if(this.settings[e.key])throw new Error(e.key+" is already registerd");this.settings[e.key]=e}},{key:"set",value:function set(e,t){if(!this.settings[e])throw new Error('"'+e+'" is not registerd key');try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e.stack)}}},{key:"get",value:function get(e){var t=this.settings[e];if(!t)throw new Error('"'+e+'" is not registerd key');try{var r=JSON.parse(localStorage.getItem(e));return null==r?t.default:r}catch(e){return t.default}}}]),LocalSettings}(),localSettings=new LocalSettings;exports.default=localSettings;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=_settings2.default[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var setting=_step.value;localSettings.register(setting)}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}

    },{"./settings":468}],468:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=[{key:"prioritizeOutlineKeys",default:!1},{key:"pageListStyle",default:"grid"},{key:"pageSort",default:"updated"},{key:"relatedPageSort",default:"related"},{key:"lastProject",default:null},{key:"projectsLastAccessed",default:{}},{key:"userScriptSHA1",default:{}},{key:"appendPageBody",default:null},{key:"lang",default:null}];

    },{}],469:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isModalOpen=isModalOpen;var _hasDom=require("has-dom"),_hasDom2=_interopRequireDefault(_hasDom);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isModalOpen(){return(0,_hasDom2.default)()&&document.getElementsByClassName("modal-backdrop").length>0}

    },{"has-dom":143}],470:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterPagesByTimeRangeOfLines=filterPagesByTimeRangeOfLines,exports.filterPagesByIcon=filterPagesByIcon;var _lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_pageTitle=require("../../../share/page-title"),_line=require("../../../share/line/");function isLineInTimeRange(e){var n=e.line,i=e.start,t=e.end;return i>=n.updated&&n.updated>t}function checkLinesTimestamp(e){var n=e.page,i=e.start,t=e.end;n.start=i,n.end=t,n.inTimeRange=!1;for(var a=1;a<n.lines.length;a++){var r=n.lines[a],s=isLineInTimeRange({line:r,start:i,end:t});r.inTimeRange=s,!s||n.inTimeRange||(0,_line.isEmptyLine)(r)||(n.inTimeRange=!0)}}function filterPagesByTimeRangeOfLines(e){var n=e.pages,i=e.start,t=e.end;return n.map(_lodash.cloneDeep).map(function(e){return checkLinesTimestamp({page:e,start:i,end:t}),e}).filter(function(e){return e.inTimeRange})}function hasIcon(e){var n=e.page,i=e.icon;return!!n.iconsLc&&Object.keys(n.iconsLc).includes((0,_pageTitle.toTitleLc)(i))}function filterPagesByIcon(e){var n=e.pages,i=e.icon;return n.filter(function(e){return hasIcon({page:e,icon:i})})}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../share/line/":587,"../../../share/page-title":589}],471:[function(require,module,exports){
        "use strict";window.addEventListener("unhandledrejection",function(e){console.error("Unhandled Rejection",e)});

    },{}],472:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.default=propsHasChanged;var _shallowEqual=require("./shallow-equal"),_shallowEqual2=_interopRequireDefault(_shallowEqual);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function propsHasChanged(e,r,t){var o=t&&t.skip;if("object"!==(void 0===e?"undefined":_typeof(e))||"object"!==(void 0===r?"undefined":_typeof(r)))return e!==r;if(!e||!r)return e!==r;if(Array.isArray(e)||Array.isArray(r))return!(0,_shallowEqual2.default)(e,r);if(Object.keys(e).length!==Object.keys(r).length)return!0;for(var u in e)if((Array.isArray(o)?!o.includes(u):o!==u)&&!(0,_shallowEqual2.default)(e[u],r[u]))return!0;return!1}

    },{"./shallow-equal":473}],473:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function shallowEqual(e,t,r){if("object"!==(void 0===e?"undefined":_typeof(e))||"object"!==(void 0===t?"undefined":_typeof(t)))return e===t;if(!e||!t)return e===t;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(Array.isArray(t))return!1;if(e instanceof Date)return t instanceof Date&&e.getTime()===t.getTime();if(t instanceof Date)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e)if(e[o]!==t[o])return!1;return!0}exports.default=shallowEqual;

    },{}],474:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whenXs=whenXs;var _hasDom=require("has-dom"),_hasDom2=_interopRequireDefault(_hasDom);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var screenXsMax=768,clientWidth=void 0;function update(){clientWidth=document.body.clientWidth}function whenXs(){return(0,_hasDom2.default)()&&clientWidth<screenXsMax}(0,_hasDom2.default)()&&(window.addEventListener("resize",update),update());

    },{"has-dom":143}],475:[function(require,module,exports){
        "use strict";function renderPageTitle(e){return render(e).trim().replace(/[[\]]/g,"")}function render(e){return"string"==typeof e?e:e instanceof Array?e.map(function(e){return render(e)}).join(""):/(image|gyazo|video|youtube|vimeo)/i.test(e.type)?"":/icon/i.test(e.type)?e.unit.page:"deco-formula"===e.type?e.children.replace(/^\$\s+/,""):"hashTag"===e.type?e.unit.page:/url|location/i.test(e.type)?e.unit.title||"":render(e.children)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderPageTitle=renderPageTitle;

    },{}],476:[function(require,module,exports){
        "use strict";function renderPlainText(e){return"string"==typeof e?e:e instanceof Array?e.map(function(e){return renderPlainText(e)}).join(""):/(image|gyazo|icon)/i.test(e.type)?e.unit.whole:"deco-formula"===e.type?e.children.replace(/^\$\s+/,""):"hashTag"===e.type?e.unit.content:("indent"===e.type?e.unit.tag:"")+renderPlainText(e.children)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderPlainText=renderPlainText;

    },{}],477:[function(require,module,exports){
        "use strict";function getOSFromUserAgent(t){if(t){var e=t.match(/(Mac|Windows|Android|iPhone|iPad)/i);if(e)return"iPhone"===e[0]||"iPad"===e[0]?"ios":e[0].toLowerCase()}}!function(){var t=getOSFromUserAgent(navigator.userAgent);t&&document.documentElement.setAttribute("data-os",t)}();

    },{}],478:[function(require,module,exports){
        (function (__filename){
            "use strict";var _reactDisplaySwitch=require("react-display-switch"),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_flags=require("../../../share/flags");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var debug=require("../../../share/debug")(__filename);debug("setup"),_reactDisplaySwitch.When.case("login_user",function(){return!_stores2.default.CurrentUser.isGuest}),_reactDisplaySwitch.When.case("not_login_user",function(){return!_reactDisplaySwitch.When.case("login_user")}),_reactDisplaySwitch.When.case("project_member_user",function(){return _stores2.default.CurrentUser.isProjectMember}),_reactDisplaySwitch.When.case("project_privilege_user",function(){return _stores2.default.CurrentUser.hasProjectPrivilege}),_reactDisplaySwitch.When.case("project_owner_is_pro",function(){return _stores2.default.CurrentProject.isOwnerPro}),_reactDisplaySwitch.When.case("enable_google_analytics",function(){return _flags.ENABLE_GOOGLE_ANALYTICS}),_reactDisplaySwitch.When.case("enable_billing",function(){return _flags.ENABLE_BILLING}),_reactDisplaySwitch.When.case("enable_project_backup",function(){return _flags.ENABLE_PROJECT_BACKUP});

        }).call(this,"/src/client/js/lib/setup-react-display-switch.js")
    },{"../../../share/debug":566,"../../../share/flags":578,"../stores/":520,"react-display-switch":208}],479:[function(require,module,exports){
        (function (__filename){
            "use strict";var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var a=[],t=!0,u=!1,i=void 0;try{for(var n,o=r[Symbol.iterator]();!(t=(n=o.next()).done)&&(a.push(n.value),!e||a.length!==e);t=!0);}catch(r){u=!0,i=r}finally{try{!t&&o.return&&o.return()}finally{if(u)throw i}}return a}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_ravenJs=require("raven-js"),_ravenJs2=_interopRequireDefault(_ravenJs),_url=require("url"),_url2=_interopRequireDefault(_url),_package=require("../../../../package.json"),_package2=_interopRequireDefault(_package),_browser=require("./browser");function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}var debug=require("../../../share/debug")(__filename);function toPublicDSN(r){var e=_url2.default.parse(r);return e.auth&&(e.auth=e.auth.split(":")[0]),e.format()}function isCDNJSFullyLoaded(){var r=!0,e=!1,a=void 0;try{for(var t,u=Object.values(_package2.default["browserify-shim"])[Symbol.iterator]();!(r=(t=u.next()).done);r=!0){var i=t.value,n=i.match(/^global:(.+)$/)||[],o=_slicedToArray(n,2)[1];if(o&&!window.hasOwnProperty(o))return debug("CDNJS load error",i),!1}}catch(r){e=!0,a=r}finally{try{!r&&u.return&&u.return()}finally{if(e)throw a}}return!0}!function(){if(isCDNJSFullyLoaded()){if((0,_browser.isLegacyBrowser)())return debug("Legacy Browser");if((0,_browser.isOperaCoast)())return debug("OperaCoast has OperaIce bug");debug("install"),_ravenJs2.default.config(toPublicDSN("https://a1e18d1b37504a1a847ea4d4b7e154f4:90f89d76a6154969a2a5ca8784b8e02f@sentry.io/192116"),{ignoreUrls:[/\/api\/code\/([^\/]+)\/([^\/]+)\/script\.js$/]}).install()}}();

        }).call(this,"/src/client/js/lib/setup-sentry.js")
    },{"../../../../package.json":256,"../../../share/debug":566,"./browser":457,"raven-js":203,"url":252}],480:[function(require,module,exports){
        "use strict";var _browser=require("./browser");(0,_browser.isLegacyBrowser)()&&alert("Your browser is too old.\nFor security reasons, we recommend updating to the latest version of Chrome, Firefox or Safari.");

    },{"./browser":457}],481:[function(require,module,exports){
        "use strict";var _stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function onStoreChange(){document.title=createTitle()||"Scrapbox"}function createTitle(){var e=[];switch(_stores2.default.Layout.get()){case"page":var t=_stores2.default.CurrentProject.get();t&&(e.unshift(t.displayName),_stores2.default.Page.persistent&&e.unshift(_stores2.default.Page.title));break;case"list":case"stream":var r=_stores2.default.CurrentProject.get();r&&(e.unshift(r.displayName),_stores2.default.PageList.isSearch&&e.unshift(_stores2.default.PageList.searchQuery));break;case"invitation-page":e.unshift("Invitation","Scrapbox")}return e.join(" - ")}_stores2.default.Layout.addChangeListener(onStoreChange),_stores2.default.CurrentProject.addChangeListener(onStoreChange),_stores2.default.Page.addChangeListener(onStoreChange);

    },{"../stores/":520}],482:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=adjustIndent;var _stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_line=require("../../../../share/line");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function adjustIndent(e,t){if(!/\n/.test(e))return t();var r=_stores2.default.Cursor.getPosition();if(!(0,_line.isEmptyLine)(_stores2.default.Line.getAll()[r.line]))return t();for(var n=e.split(/\n/),s=1;s<n.length;s++)n[s]=" ".repeat(r.char)+n[s];return n.join("\n")}

    },{"../../../../share/line":587,"../../stores/":520}],483:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=bracketComplete;var _browser=require("../../lib/browser"),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_decorateLines=require("../../../../share/decorate-lines"),_decorateLines2=_interopRequireDefault(_decorateLines);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function bracketComplete(e,t){if("["!==e)return t();if(_stores2.default.Selection.hasSelectionAll())return"[";var r=(0,_decorateLines2.default)(_stores2.default.Line.getAll()),o=_stores2.default.Cursor.getPosition(),s=r[o.line];return s.codeBlock||s.cli||s.tableBlock?"[":(0,_browser.isTouchDevice)()||s.text.charLength===o.char||" "===s.text[o.char]||"["===s.text[o.char-1]&&"]"===s.text[o.char]?(setTimeout(function(){_stores2.default.Cursor.setPosition({line:o.line,char:o.char-1})},50),"[]"):"["}

    },{"../../../../share/decorate-lines":571,"../../lib/browser":457,"../../stores/":520}],484:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _combineMiddlewares=require("combine-middlewares"),_combineMiddlewares2=_interopRequireDefault(_combineMiddlewares),_url=require("./url"),_adjustIndent=require("./adjust-indent"),_adjustIndent2=_interopRequireDefault(_adjustIndent),_bracketComplete=require("./bracket-complete"),_bracketComplete2=_interopRequireDefault(_bracketComplete),_selectionComplete=require("./selection-complete"),_selectionComplete2=_interopRequireDefault(_selectionComplete),_lastBlankLine=require("./last-blank-line"),_lastBlankLine2=_interopRequireDefault(_lastBlankLine),_quoteMultiLines=require("./quote-multi-lines"),_quoteMultiLines2=_interopRequireDefault(_quoteMultiLines),_plain=require("./plain");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default=(0,_combineMiddlewares2.default)(_selectionComplete2.default,_lastBlankLine2.default,_bracketComplete2.default,_quoteMultiLines2.default,_adjustIndent2.default,_url.transformUrl,_plain.plain);

    },{"./adjust-indent":482,"./bracket-complete":483,"./last-blank-line":485,"./plain":486,"./quote-multi-lines":487,"./selection-complete":488,"./url":492,"combine-middlewares":94}],485:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=lastBlankLine;var _stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function lastBlankLine(e,t){var r=_stores2.default.Cursor.getPosition();if(0===r.line)return t();var s=_stores2.default.Line.getAll();return r.line!==s.length-1||/[\r\n]/.test(e)||_stores2.default.Line.insertAfterLastLine(""),t()}

    },{"../../stores/":520}],486:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var plain=exports.plain=function plain(e){return e};

    },{}],487:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=quoteMultiLines;var _stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_line=require("../../../../share/line"),_decorateLines=require("../../../../share/decorate-lines"),_decorateLines2=_interopRequireDefault(_decorateLines);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function quoteMultiLines(e,t){if(!/\n/.test(e))return t();var r=_stores2.default.Cursor.getPosition(),i=(0,_decorateLines2.default)(_stores2.default.Line.getAll())[r.line];if(i.codeBlock||i.tableBlock||i.cli)return t();if(!/^\s*>/.test(i.text.slice(0,r.char)))return t();for(var n=(0,_line.countIndent)(i),s=e.split(/\n/),o=1;o<s.length;o++)s[o]=" ".repeat(n)+"> "+s[o];return s.join("\n")}

    },{"../../../../share/decorate-lines":571,"../../../../share/line":587,"../../stores/":520}],488:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=selectionComplete;var _stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores),_decorateLines=require("../../../../share/decorate-lines"),_decorateLines2=_interopRequireDefault(_decorateLines);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var isDeco=function isDeco(e){return["*","/","-","_"].includes(e)};function selectionComplete(e,t){if(!_stores2.default.Selection.hasSingleLineSelection())return t();if(!isDeco(e)&&"["!==e)return t();var r=(0,_decorateLines2.default)(_stores2.default.Line.getAll())[_stores2.default.Cursor.getPosition().line];if(r.codeBlock||r.cli||r.tableBlock)return t();var s=_stores2.default.Selection.getRange({normalizeOrder:!0}),o=s.start,i=s.end;return _stores2.default.Selection.clear(),_stores2.default.Cursor.setPosition(o),_stores2.default.Line.addChar("["),i.char+=1,isDeco(e)&&(_stores2.default.Line.addChar(e+" "),i.char+=e.length+1),_stores2.default.Cursor.setPosition(i),"]"}

    },{"../../../../share/decorate-lines":571,"../../stores/":520}],489:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeEncodedUrl=void 0;var _url=require("../../url"),decodeEncodedUrl=exports.decodeEncodedUrl=function decodeEncodedUrl(e,r){try{return(0,_url.decodeURIForPlainText)(e)}catch(e){return r()}};

    },{"../../url":495}],490:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.urlToEmbedContent=urlToEmbedContent;var _scrapboxParser=require("../../../../../share/scrapbox-parser/"),embedTypes=["gyazo","image","youtube","vimeo","video","audio"];function urlToEmbedContent(e,r){var o=(0,_scrapboxParser.parseScrapboxSyntax)("["+e+"]");return embedTypes.includes(o.type)?"["+e+"]\n":r()}

    },{"../../../../../share/scrapbox-parser/":605}],491:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],o=!0,a=!1,n=void 0;try{for(var i,u=r[Symbol.iterator]();!(o=(i=u.next()).done)&&(t.push(i.value),!e||t.length!==e);o=!0);}catch(r){a=!0,n=r}finally{try{!o&&u.return&&u.return()}finally{if(a)throw n}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.normalizeLatitude=normalizeLatitude,exports.normalizeLongitude=normalizeLongitude,exports.googleMapUrlToLocation=googleMapUrlToLocation;var _url=require("url"),_url2=_interopRequireDefault(_url);function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function normalizeLatitude(r){return r.startsWith("-")?r.replace(/^-/,"S"):"N"+r}function normalizeLongitude(r){return r.startsWith("-")?r.replace(/^-/,"W"):"E"+r}function googleMapUrlToLocation(r,e){var t=_url2.default.parse(r),o=t.host,a=t.pathname;if(!o.match(/^www\.google\./)||!a.match(/\/maps\//))return e();var n=a.match(/\/@?([+-]?\d+(?:\.\d+)?),([+-]?\d+(?:\.\d+))/)||[],i=_slicedToArray(n,3),u=i[1],l=i[2],c=a.match(/,(\d+(?:\.\d+)?)z/)||[],d=_slicedToArray(c,2)[1],s=a.match(/\/place\/(.+?)\//)||[],p=_slicedToArray(s,2)[1];return u&&l?"["+normalizeLatitude(u)+","+normalizeLongitude(l)+(d=d?",Z"+parseInt(d):"")+(p=p?" "+decodeURIComponent(p):"")+"]\n":e()}

    },{"url":252}],492:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformUrl=transformUrl;var _combineMiddlewares=require("combine-middlewares"),_combineMiddlewares2=_interopRequireDefault(_combineMiddlewares),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_decorateLines=require("../../../../../share/decorate-lines"),_decorateLines2=_interopRequireDefault(_decorateLines),_googleMap=require("./google-map"),_scrapbox=require("./scrapbox"),_embedContent=require("./embed-content"),_decode=require("./decode");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var isUrl=function isUrl(e){return/^https?:\/\/[^\s]+$/.test(e)};function cursorIsNotInBracketOrBlock(e){var r=_stores2.default.Cursor.getPosition(),o=(0,_decorateLines2.default)(_stores2.default.Line.getAll())[r.line];return!(o.codeBlock||o.cli||o.tableBlock)&&("["!==o.text[r.char-1]&&"]"!==o.text[r.char]&&("`"!==o.text[r.char-1]&&"`"!==o.text[r.char]))}function transformUrl(e,r){return isUrl(e)&&cursorIsNotInBracketOrBlock(e)?(0,_combineMiddlewares2.default)(_scrapbox.scrapboxUrlToPageLink,_googleMap.googleMapUrlToLocation,_embedContent.urlToEmbedContent,_decode.decodeEncodedUrl,r)(e):r()}

    },{"../../../../../share/decorate-lines":571,"../../../stores/":520,"./decode":489,"./embed-content":490,"./google-map":491,"./scrapbox":493,"combine-middlewares":94}],493:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,r){var t=[],a=!0,o=!1,i=void 0;try{for(var n,u=e[Symbol.iterator]();!(a=(n=u.next()).done)&&(t.push(n.value),!r||t.length!==r);a=!0);}catch(e){o=!0,i=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw i}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.scrapboxUrlToPageLink=scrapboxUrlToPageLink;var _url=require("url"),_url2=_interopRequireDefault(_url),_stores=require("../../../stores/"),_stores2=_interopRequireDefault(_stores),_pageTitle=require("../../../../../share/page-title"),_projectName=require("../../../../../share/validator/project-name");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function scrapboxUrlToPageLink(e,r){var t=_url2.default.parse(e),a=t.host,o=t.pathname,i=t.hash||"";if(a!==location.host)return r();var n=o.match(new RegExp("^/([a-zA-Z\\d\\-]{2,})(?:/?|/([^/\\?]+))$"))||[],u=_slicedToArray(n,3),s=u[1],l=u[2];if((0,_projectName.validateProjectName)(s).isInvalid)return r();if(!l)return"[/"+s+"]";var c=decodeURIComponent(l);return c=_stores2.default.QuickSearch.exists(c)?_stores2.default.QuickSearch.find(c).title:(0,_pageTitle.revertTitleLc)(c),s.toLowerCase()===_stores2.default.CurrentProject.get().name.toLowerCase()?!c.includes("#")&&/[[\]]/.test(c)?"#"+(0,_pageTitle.spaceToUnderscore)(c):"["+c+i+"]":"[/"+s+"/"+c+i+"]"}

    },{"../../../../../share/page-title":589,"../../../../../share/validator/project-name":623,"../../../stores/":520,"url":252}],494:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=updateListIconSize;var _appendStyle=require("./append-style"),_appendStyle2=_interopRequireDefault(_appendStyle),_responsive=require("./responsive");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var debug=require("../../../share/debug")(__filename),oldWidthSet={};function updateListIconSize(e,t,i){if(!e)return!1;var r=e.getBoundingClientRect();if(!r||0===r.width)return!1;var n=r.width;if(debug("width:",n),!["related-page-list","page-list"].includes(t))return!1;if(oldWidthSet[t]===n+"_"+i)return debug("same width",t),!0;oldWidthSet[t]=n+"_"+i;var d=140,a=1.1;switch(i){case"grid-md":d=170,a=1.17;break;case"grid-lg":d=220,a=1.17}var s=(0,_responsive.whenXs)()?8:14,l=Math.floor((n+s)/(d+s)),u=n-(l*d+(l-1)*s),p=(0,_responsive.whenXs)()?100:5,o=Math.floor(u/(l+(l-1)/p)),_=d+o,h=s+o/p,f="\n  ."+t+" .grid li {\n    visibility: visible;\n    width: "+_+"px;\n    height: "+Math.floor(_*a)+"px;\n    margin: 0 "+h+"px "+h+"px 0;\n  }";return(0,_appendStyle2.default)("list_icon_size_"+t,f),!0}

        }).call(this,"/src/client/js/lib/update-list-icon-size.js")
    },{"../../../share/debug":566,"./append-style":456,"./responsive":474}],495:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var noDecodeChars=["[","]"],isNoDecodeChar=function isNoDecodeChar(e){return/\s/.test(e)||noDecodeChars.includes(e)},decodeURIForPlainText=exports.decodeURIForPlainText=function decodeURIForPlainText(e){return decodeURI(e).split("").map(function(e){return isNoDecodeChar(e)?encodeURI(e):e}).join("")};

    },{}],496:[function(require,module,exports){
        "use strict";function wordPosition(r,t){var e=splitWord(r),o=0,i=!0,n=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value.str.length;if(o+s>t)return[o,o+s];o+=s}}catch(r){n=!0,a=r}finally{try{!i&&l.return&&l.return()}finally{if(n)throw a}}return[o,o]}function wordTailPosition(r,t){var e=splitWord(r),o=0,i=!0,n=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value,y=s.str.length;if(o+y>t&&"space"!==s.type)return o+y;o+=y}}catch(r){n=!0,a=r}finally{try{!i&&l.return&&l.return()}finally{if(n)throw a}}return r.length}function wordHeadPosition(r,t){var e=splitWord(r),o=r.length,i=!0,n=!1,a=void 0;try{for(var u,l=e.reverse()[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value,y=s.str.length;if(o-y<t&&"space"!==s.type)return o-y;o-=y}}catch(r){n=!0,a=r}finally{try{!i&&l.return&&l.return()}finally{if(n)throw a}}return 0}function charType(r){var t={space:/^[\s]+$/,alphabet_number:/^[0-9a-zA-Z\u00C0-\u024F]+$/,cyril:/^[\u0400-\u04F0\u0500-\u052F\u2DE0-\u2DFF\uA640-\uA690]+$/,ascii:/^[\u0021-\u007E]+$/,zenkaku_kigou:/^[\u3001-\u303F]+$/,hiragana:/^[\u3040-\u309F]+$/,katanaka:/^[\u30A0-\u30FF]+$/,zenkaku_ascii:/^[\uFF01-\uFF60]+$/,hankaku_kana:/^[\uFF65-\uFF9F]+$/};for(var e in t)if(t[e].test(r))return e;return"other"}function splitWord(r){var t=[],e=r.split(""),o=void 0,i="",n=!0,a=!1,u=void 0;try{for(var l,s=e[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var y=l.value,d=charType(y);o&&o!==d&&(t.push({str:i,type:o}),i=""),o=d,i+=y}}catch(r){a=!0,u=r}finally{try{!n&&s.return&&s.return()}finally{if(a)throw u}}return""!==i&&t.push({str:i,type:o}),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.wordPosition=wordPosition,exports.wordTailPosition=wordTailPosition,exports.wordHeadPosition=wordHeadPosition;

    },{}],497:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=billingsRoute;var _auth=require("./middlewares/auth"),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function billingsRoute(e){e("/billings/new/:projectName",_auth.loggedInUserOnly,_auth.projectPrivilegeOnly,create),e("/billings/:billingId",_auth.loggedInUserOnly,show)}var create=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return r=e.params.projectName,t.prev=1,_stores2.default.Billing.setProjectName(r),t.next=5,_stores2.default.CurrentProject.load(r);case 5:_stores2.default.Layout.set("billings-new"),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0.stack||t.t0),_stores2.default.Error.set(t.t0),_stores2.default.Layout.set("error-page");case 13:case"end":return t.stop()}},_callee,void 0,[[1,8]])}));return function create(t,r){return e.apply(this,arguments)}}(),show=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var r;return regeneratorRuntime.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return r=e.params.billingId,t.prev=1,t.next=4,_stores2.default.Billing.load(r);case 4:_stores2.default.Layout.set("billings-info"),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0.stack||t.t0),_stores2.default.Error.set(t.t0),_stores2.default.Layout.set("error-page");case 12:case"end":return t.stop()}},_callee2,void 0,[[1,7]])}));return function show(t,r){return e.apply(this,arguments)}}();

    },{"../stores/":520,"./middlewares/auth":499}],498:[function(require,module,exports){
        "use strict";var _page=require("page"),_page2=_interopRequireDefault(_page),_store=require("./middlewares/store"),_query=require("./middlewares/query"),_auth=require("./middlewares/auth"),_opensearch=require("./opensearch"),_opensearch2=_interopRequireDefault(_opensearch),_projectList=require("./project-list"),_projectList2=_interopRequireDefault(_projectList),_page3=require("./page"),_pageList=require("./page-list"),_pageList2=_interopRequireDefault(_pageList),_stream=require("./stream"),_stream2=_interopRequireDefault(_stream),_personalSettings=require("./personal-settings"),_personalSettings2=_interopRequireDefault(_personalSettings),_projectSettings=require("./project-settings"),_projectSettings2=_interopRequireDefault(_projectSettings),_projectInvitation=require("./project-invitation"),_projectInvitation2=_interopRequireDefault(_projectInvitation),_billings=require("./billings"),_billings2=_interopRequireDefault(_billings);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(0,_page2.default)("*",_query.parseQueryString,_query.removeUtmQuery,_store.initializeStores),(0,_billings2.default)(_page2.default),(0,_opensearch2.default)(_page2.default),(0,_projectList2.default)(_page2.default),(0,_projectInvitation2.default)(_page2.default),(0,_projectSettings2.default)(_page2.default),(0,_personalSettings2.default)(_page2.default),(0,_stream2.default)(_page2.default),(0,_pageList2.default)(_page2.default),(0,_page2.default)("/:projectName/:pageTitle(.*)/copy",_auth.loggedInUserOnly,_auth.projectMemberOnly,function(e){var t=e.params,a=t.projectName,r=t.pageTitle;(0,_page3.copyPage)(a,r)}),(0,_page2.default)("/:projectName/:pageTitle(.*)/createUserPage",_auth.loggedInUserOnly,_auth.projectMemberOnly,function(e){var t=e.params,a=t.projectName,r=t.pageTitle;(0,_page3.createUserPage)(a,r)}),(0,_page2.default)("/:projectName/:pageTitle(.*)",function(e){var t=e.params,a=t.projectName,r=t.pageTitle,i=e.query.body,p=e.hash;(0,_page3.showPage)(a,r,{body:i,lineId:p})}),(0,_page2.default)({decodeURLComponents:!1});

    },{"./billings":497,"./middlewares/auth":499,"./middlewares/query":500,"./middlewares/store":501,"./opensearch":502,"./page":504,"./page-list":503,"./personal-settings":505,"./project-invitation":506,"./project-list":507,"./project-settings":508,"./stream":509,"page":169}],499:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.projectOwnerOnly=exports.projectPrivilegeOnly=exports.projectMemberOnly=void 0,exports.loggedInUserOnly=loggedInUserOnly;var _stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function step(n,o){try{var s=r[n](o),u=s.value}catch(e){return void t(e)}if(!s.done)return Promise.resolve(u).then(function(e){step("next",e)},function(e){step("throw",e)});e(u)}("next")})}}function loggedInUserOnly(e,r){return _stores2.default.CurrentUser.isGuest?_stores2.default.Layout.set("welcome-page"):r()}function showErrorPage(e){_stores2.default.Error.set(e),_stores2.default.Layout.set("error-page")}var generateProjectAuthMiddleware=function generateProjectAuthMiddleware(e){return r=_asyncToGenerator(regeneratorRuntime.mark(function _callee(r,t){var n;return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:if(n=r.params.projectName){o.next=4;break}return console.error("cannot get :projectName from PageRouter path"),o.abrupt("return",showErrorPage({response:{status:404}}));case 4:return o.prev=4,o.next=7,_stores2.default.CurrentProject.load(n);case 7:o.next=13;break;case 9:return o.prev=9,o.t0=o.catch(4),console.error(o.t0.stack||o.t0),o.abrupt("return",showErrorPage(o.t0));case 13:if(e()){o.next=15;break}return o.abrupt("return",showErrorPage({response:{status:403}}));case 15:t();case 16:case"end":return o.stop()}},_callee,void 0,[[4,9]])})),function(e,t){return r.apply(this,arguments)};var r},projectMemberOnly=exports.projectMemberOnly=generateProjectAuthMiddleware(function(){return _stores2.default.CurrentUser.isProjectMember}),projectPrivilegeOnly=exports.projectPrivilegeOnly=generateProjectAuthMiddleware(function(){return _stores2.default.CurrentUser.isProjectOwner||_stores2.default.CurrentUser.isProjectAdmin}),projectOwnerOnly=exports.projectOwnerOnly=generateProjectAuthMiddleware(function(){return _stores2.default.CurrentUser.isProjectOwner});

    },{"../../stores/":520}],500:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,r){var t=[],a=!0,u=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(t.push(i.value),!r||t.length!==r);a=!0);}catch(e){u=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(u)throw n}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.parseQueryString=parseQueryString,exports.removeUtmQuery=removeUtmQuery;var _page=require("page"),_page2=_interopRequireDefault(_page),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var debug=require("../../../../share/debug")(__filename);function parseQueryString(e,r){e.query=_querystring2.default.parse(e.querystring),r()}function removeUtmQuery(e,r){var t={},a={pathname:location.pathname,params:{}},u=!1,n=!0,i=!1,o=void 0;try{for(var s,l=Object.entries(e.query)[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var y=s.value,f=_slicedToArray(y,2),p=f[0],_=f[1];/^utm_+/.test(p)?(u=!0,a.params[p]=_):t[p]=_}}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}if(u&&_stores2.default.GoogleAnalytics.setUtm(a),!u)return r();var c=_querystring2.default.stringify(t),g=e.pathname;return c&&(g+="?"+c),e.hash&&(g+="#"+e.hash),debug("removed utm_* params",g),_page2.default.replace(g)}

        }).call(this,"/src/client/js/routes/middlewares/query.js")
    },{"../../../../share/debug":566,"../../stores/":520,"page":169,"querystring":197}],501:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initializeStores=void 0;var initializeStores=exports.initializeStores=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,r){return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([_stores2.default.CurrentUser.load(),_stores2.default.Login.load()]);case 3:e.next=11;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error(e.t0.stack||e.t0),_stores2.default.Error.set(e.t0),_stores2.default.Layout.set("error-page"),e.abrupt("return");case 11:r();case 12:case"end":return e.stop()}},_callee,this,[[0,5]])}));return function initializeStores(r,t){return e.apply(this,arguments)}}(),_stores=require("../../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function step(n,o){try{var s=r[n](o),i=s.value}catch(e){return void t(e)}if(!s.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}

    },{"../../stores/":520}],502:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=opensearchRoute;var _stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_auth=require("./middlewares/auth");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function step(n,a){try{var u=r[n](a),o=u.value}catch(e){return void t(e)}if(!u.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function opensearchRoute(e){var r,t=(r=_asyncToGenerator(regeneratorRuntime.mark(function _callee(r,t){var n,a;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.query.q){t.next=3;break}return t.abrupt("return",e("/"));case 3:return t.next=5,_stores2.default.ProjectList.load();case 5:if(a=_stores2.default.ProjectList.lastProject){t.next=8;break}return t.abrupt("return",e("/"));case 8:e.replace("/"+a.name+"/search/page?q="+n);case 9:case"end":return t.stop()}},_callee,this)})),function redirectOpenSearch(e,t){return r.apply(this,arguments)});e("/opensearch",_auth.loggedInUserOnly,t)}

    },{"../stores/":520,"./middlewares/auth":499}],503:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var show=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r,a,o;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return r=e.params.projectName,a=e.query.q,t.prev=2,t.next=5,_stores2.default.CurrentProject.load(r);case 5:return e.path==="/"+r&&_page2.default.replace("/"+_stores2.default.CurrentProject.name+"/",null,null,!1),"block"===(o=(0,_jquery2.default)(".page-wrapper")).css("display")&&o.addClass("leave"),_stores2.default.PageAccess.sync(),t.next=11,_stores2.default.PageList.load(a,{skip:0,useCache:!0});case 11:t.sent.cache&&requestAnimationFrame(function(){return _stores2.default.PageList.load(a,{skip:0,useCache:!1})}),setTimeout(function(){window.scrollTo(0,0),_stores2.default.Layout.set("list"),_stores2.default.GoogleAnalytics.sendPageview({title:""})},100),t.next=21;break;case 16:t.prev=16,t.t0=t.catch(2),console.error(t.t0.stack||t.t0),_stores2.default.Error.set(t.t0),_stores2.default.Layout.set("error-page");case 21:case"end":return t.stop()}},_callee,this,[[2,16]])}));return function show(t,r){return e.apply(this,arguments)}}();exports.default=pageListRoute;var _jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_page=require("page"),_page2=_interopRequireDefault(_page),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(a,o){try{var n=t[a](o),s=n.value}catch(e){return void r(e)}if(!n.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function pageListRoute(e){e("/:projectName/",show),e("/:projectName/search/page",show)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../stores/":520,"page":169}],504:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUserPage=exports.copyPage=exports.showPage=void 0;var showPage=exports.showPage=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r,n,a,o,s,u,l,i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=c.body,f=c.lineId;return regeneratorRuntime.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,_stores2.default.CurrentProject.name!==e||_stores2.default.Page.title!==t){c.next=4;break}return _stores2.default.LinePermalink.set(f,{source:"URL"}),c.abrupt("return");case 4:return c.next=6,_stores2.default.CurrentProject.load(e);case 6:return _stores2.default.PageAccess.sync(),_stores2.default.Selection.clear(),_stores2.default.Cursor.clear(),_stores2.default.LinePermalink.set(f,{source:"URL"}),c.next=12,_stores2.default.Page.load(t);case 12:r=c.sent,(encodeURIComponent(t)!==(0,_pageTitle.encodeTitleURI)(r.title)||t.includes(" ")||e!==_stores2.default.CurrentProject.name)&&(n="/"+_stores2.default.CurrentProject.name+"/"+(0,_pageTitle.encodeTitleURI)(r.title),f&&(n+="#"+f),_page2.default.replace(n,null,null,!1)),(0,_jquery2.default)(".page-wrapper").addClass("enter"),window.scrollTo(0,0),_stores2.default.CurrentUser.isProjectMember&&!r.persistent&&"new"===r.title&&setTimeout(function(){_stores2.default.Cursor.show(),_stores2.default.Cursor.setPosition({line:0,char:0}),(0,_jquery2.default)("textarea").focus(),(0,_jquery2.default)("textarea").focus(),(0,_jquery2.default)("textarea").focus()},100),_stores2.default.Layout.set("page"),a=d,_localSettings2.default.get("appendPageBody")&&(o=_localSettings2.default.get("appendPageBody"),s=o.projectName,u=o.lines,s===_stores2.default.CurrentProject.name&&(a=u.join("\n"),_localSettings2.default.set("appendPageBody",null))),a&&(l=_stores2.default.Line.insertAfterLastLine(a),(i=l[1]||l[0])&&_stores2.default.LinePermalink.set(i,{source:"URL"})),_stores2.default.GoogleAnalytics.sendPageview({title:t}),c.next=30;break;case 25:c.prev=25,c.t0=c.catch(0),console.error(c.t0.stack||c.t0),_stores2.default.Error.set(c.t0),_stores2.default.Layout.set("error-page");case 30:case"end":return c.stop()}},_callee,this,[[0,25]])}));return function showPage(t,r){return e.apply(this,arguments)}}(),copyPage=exports.copyPage=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var r,n;return regeneratorRuntime.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,showPage(e,"new");case 2:return a.next=4,_stores2.default.Page.fetch(t);case 4:r=a.sent,(n=(0,_lodash.cloneDeep)(r.lines.map(function(e){return e.text})))[0]+=" (copy)",_stores2.default.Line.addChar(n.join("\n"),{line:0,char:0});case 8:case"end":return a.stop()}},_callee2,this)}));return function copyPage(t,r){return e.apply(this,arguments)}}(),createUserPage=exports.createUserPage=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e,t){var r,n,a,o;return regeneratorRuntime.wrap(function _callee3$(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,showPage(e,t);case 2:r=_stores2.default.Page.get(),n=_stores2.default.CurrentUser.get(),(!r.persistent||r.lines.filter(function(e){return e.text.trim()}).length<2)&&n&&(a=["","this is "+n.name+"’s page","","#member"],n.photo&&(o=n.photo||"",o=n.photo.replace(/\?.+$/,""),/\.(png|jpe?g|gif|svg)$/i.test(o)||(o+="#.png"),a=["","["+o+"]"].concat(a)),_stores2.default.Line.addChar(a.join("\n"),{line:0,char:1e3})),_page2.default.replace("/"+e+"/"+t,null,null,!1);case 7:case"end":return s.stop()}},_callee3,this)}));return function createUserPage(t,r){return e.apply(this,arguments)}}(),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_page=require("page"),_page2=_interopRequireDefault(_page),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_localSettings=require("../lib/local-settings/"),_localSettings2=_interopRequireDefault(_localSettings),_pageTitle=require("../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../share/page-title":589,"../lib/local-settings/":467,"../stores/":520,"page":169}],505:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=personalSettingsRoute;var _stores=require("../stores/"),_stores2=_interopRequireDefault(_stores),_auth=require("./middlewares/auth");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,o){try{var s=t[n](o),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}function personalSettingsRoute(e){for(var t=["profile","extensions"],r=0;r<t.length;r++){var n=t[r];e("/settings/"+n,_auth.loggedInUserOnly,show(n))}}var show=function show(e){return t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(t,r){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_stores2.default.ProjectList.load();case 3:_stores2.default.Layout.set("settings-"+e+"-page"),t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0.stack||t.t0),_stores2.default.Error.set(t.t0),_stores2.default.Layout.set("error-page");case 11:case"end":return t.stop()}},_callee,void 0,[[0,6]])})),function(e,r){return t.apply(this,arguments)};var t};

    },{"../stores/":520,"./middlewares/auth":499}],506:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=projectInvitationRoute;var _stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,o){try{var a=t[n](o),s=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function projectInvitationRoute(e){var t,r=this;e("/projects/:projectName/invitations/:code",(t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(t,n){var o,a,s;return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return o=t.params,a=o.projectName,s=o.code,r.prev=1,r.next=4,_stores2.default.Invitation.loadByCode(a,s);case 4:if(!r.sent.isMember){r.next=7;break}return r.abrupt("return",e("/"+a+"/"));case 7:_stores2.default.Layout.set("invitation-page"),r.next=15;break;case 10:r.prev=10,r.t0=r.catch(1),console.error(r.t0.stack||r.t0),_stores2.default.Error.set(r.t0),_stores2.default.Layout.set("error-page");case 15:case"end":return r.stop()}},_callee,r,[[1,10]])})),function(e,r){return t.apply(this,arguments)}))}

    },{"../stores/":520}],507:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=projectListRoute;var _flags=require("../../../share/flags"),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(s,o){try{var a=t[s](o),n=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(n).then(function(e){step("next",e)},function(e){step("throw",e)});e(n)}("next")})}}function projectListRoute(e){var t,r=(t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(t,r){var s;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(!_flags.LANDING||!_stores2.default.CurrentUser.isGuest){t.next=3;break}return location.href="/product",t.abrupt("return");case 3:return t.prev=3,_stores2.default.PageAccess.sync(),t.next=7,_stores2.default.ProjectList.load();case 7:if(window.scrollTo(0,0),!(s=_stores2.default.ProjectList.lastProject)){t.next=13;break}return t.abrupt("return",e.replace("/"+s.name+"/"));case 13:if(!(_stores2.default.ProjectList.get().length>0)){t.next=15;break}return t.abrupt("return",e.replace("/"+_stores2.default.ProjectList.get()[0].name+"/"));case 15:_stores2.default.Layout.set("no-project-page"),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(3),_stores2.default.Error.set(t.t0),401===t.t0.status?_stores2.default.Layout.set("welcome-page"):(console.error(t.t0.stack||t.t0),_stores2.default.Layout.set("error-page"));case 22:case"end":return t.stop()}},_callee,this,[[3,18]])})),function showProjectList(e,r){return t.apply(this,arguments)});e("/",r)}

    },{"../../../share/flags":578,"../stores/":520}],508:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=projectSettingsRoute;var _auth=require("./middlewares/auth"),_stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(o,n){try{var a=t[o](n),s=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function projectSettingsRoute(e){for(var t=["basic","pro","theme","notifications","backup"],r=0;r<t.length;r++){var o=t[r];e("/projects/:projectName/settings/"+o,_auth.loggedInUserOnly,_auth.projectPrivilegeOnly,show(o))}for(var n=["members","page-data","billing"],a=0;a<n.length;a++){var s=n[a];e("/projects/:projectName/settings/"+s,_auth.loggedInUserOnly,_auth.projectMemberOnly,show(s))}}var show=function show(e){return t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(t,r){var o;return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return o=t.params.projectName,r.prev=1,r.next=4,_stores2.default.CurrentProject.load(o);case 4:_stores2.default.Layout.set("project-settings-"+e+"-page"),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(1),console.error(r.t0.stack||r.t0),_stores2.default.Error.set(r.t0),_stores2.default.Layout.set("error-page");case 12:case"end":return r.stop()}},_callee,void 0,[[1,7]])})),function(e,r){return t.apply(this,arguments)};var t};

    },{"../stores/":520,"./middlewares/auth":499}],509:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var show=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return r=e.params.projectName,t.prev=1,t.next=4,_stores2.default.CurrentProject.load(r);case 4:return t.next=6,_stores2.default.Stream.load();case 6:_stores2.default.Layout.set("stream"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0.stack||t.t0),_stores2.default.Error.set(t.t0),_stores2.default.Layout.set("error-page");case 14:case"end":return t.stop()}},_callee,this,[[1,9]])}));return function show(t,r){return e.apply(this,arguments)}}();exports.default=streamRoute;var _stores=require("../stores/"),_stores2=_interopRequireDefault(_stores);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,o){try{var s=t[n](o),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}function streamRoute(e){e("/stream/:projectName/",show)}

    },{"../stores/":520}],510:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_apiClient=require("../lib/api-client/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function APILoading(){_classCallCheck(this,APILoading);var e=_possibleConstructorReturn(this,(APILoading.__proto__||Object.getPrototypeOf(APILoading)).call(this));return e.requestId=0,e.requests={},(0,_lodash.bindAll)(e,"createNewId","onReqeustInterceptor","onResponseInterceptor","onErrorInterceptor"),e}return _inherits(APILoading,_baseStore2.default),_createClass(APILoading,[{key:"initialize",value:function initialize(){_apiClient.defferedInterceptor.request.register(this.onReqeustInterceptor),_apiClient.defferedInterceptor.requestError.register(this.onErrorInterceptor),_apiClient.defferedInterceptor.response.register(this.onResponseInterceptor),_apiClient.defferedInterceptor.responseError.register(this.onErrorInterceptor)}},{key:"createNewId",value:function createNewId(){return++this.requestId}},{key:"onReqeustInterceptor",value:function onReqeustInterceptor(e){var t=this,r=this.createNewId();return e.__requestId=r,this.requests[r]=e,requestAnimationFrame(function(){return t.emitChange("request")}),e}},{key:"onResponseInterceptor",value:function onResponseInterceptor(e){var t=this;return delete this.requests[e.config.__requestId],requestAnimationFrame(function(){return t.emitChange("response")}),e}},{key:"onErrorInterceptor",value:function onErrorInterceptor(e){var t=this;return this.requests={},requestAnimationFrame(function(){return t.emitChange("error")}),e}},{key:"requestsCount",get:function get(){return Object.keys(this.requests).length}}]),APILoading}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../lib/api-client/":452,"./base-store":511}],511:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var BaseStore=function(){function BaseStore(){_classCallCheck(this,BaseStore),this._onChangeListeners=[]}return _createClass(BaseStore,[{key:"addChangeListener",value:function addChangeListener(e){if("function"!=typeof e)throw new Error("callback must be a function");if(this._onChangeListeners.includes(e))throw new Error("already registerd");this._onChangeListeners.push(e)}},{key:"removeChangeListener",value:function removeChangeListener(e){this._onChangeListeners=this._onChangeListeners.filter(function(n){return n!==e})}},{key:"emitChange",value:function emitChange(e){var n=!0,t=!1,r=void 0;try{for(var a,i=this._onChangeListeners[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){(0,a.value)({store:this,event:e})}}catch(e){t=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(t)throw r}}}},{key:"listenersCount",get:function get(){return this._onChangeListeners.length}}]),BaseStore}();exports.default=BaseStore;

    },{}],512:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_apiClient=require("../lib/api-client/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(i,r){try{var a=t[i](r),l=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(l).then(function(e){step("next",e)},function(e){step("throw",e)});e(l)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function Billing(){_classCallCheck(this,Billing);var e=_possibleConstructorReturn(this,(Billing.__proto__||Object.getPrototypeOf(Billing)).call(this));return e.id=null,e.billing=null,e.projectName=null,e}return _inherits(Billing,_baseStore2.default),_createClass(Billing,[{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,n;return regeneratorRuntime.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return this.id=e,i.next=3,_apiClient.apiClient.get("/api/billings/"+e);case 3:t=i.sent,n=t.data,this.billing=n,this.emitChange();case 7:case"end":return i.stop()}},_callee,this)}));return function load(t){return e.apply(this,arguments)}}()},{key:"get",value:function get(){return this.billing}},{key:"setProjectName",value:function setProjectName(e){this.projectName=e}},{key:"createAndLinkProject",value:function createAndLinkProject(e){return _apiClient.apiClient.post("/api/billings/projects/"+this.projectName,e)}},{key:"getProjectDetail",value:function getProjectDetail(){return _apiClient.apiClient.get("/api/projects/"+this.projectName)}},{key:"getQuantityEstimate",value:function getQuantityEstimate(e){var t=e.billing,n=e.project;return n?_apiClient.apiClient.get("/api/billings/"+t.id+"/quantity/"+n.name):_apiClient.apiClient.get("/api/billings/"+t.id+"/quantity")}},{key:"create",value:function create(e){return _apiClient.apiClient.post("/api/billings",e)}},{key:"link",value:function link(e){var t=e.billing,n=e.project;return _apiClient.apiClient.post("/api/billings/projects/"+n.name+"/"+t.id)}},{key:"unlink",value:function unlink(e){var t=e.project;return _apiClient.apiClient.delete("/api/billings/projects/"+t.name)}},{key:"update",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,n;return regeneratorRuntime.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,_apiClient.apiClient.post("/api/billings/"+this.id,e);case 2:t=i.sent,n=t.data,Object.assign(this.billing,n),this.emitChange();case 6:case"end":return i.stop()}},_callee2,this)}));return function update(t){return e.apply(this,arguments)}}()},{key:"addAdmin",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,n;return regeneratorRuntime.wrap(function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,_apiClient.apiClient.post("/api/billings/"+this.id+"/admins",{email:e});case 2:t=i.sent,n=t.data,Object.assign(this.billing,n),this.emitChange();case 6:case"end":return i.stop()}},_callee3,this)}));return function addAdmin(t){return e.apply(this,arguments)}}()},{key:"deleteAdmin",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e){var t,n;return regeneratorRuntime.wrap(function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,_apiClient.apiClient.delete("/api/billings/"+this.id+"/admins/"+e);case 2:t=i.sent,n=t.data,Object.assign(this.billing,n),this.emitChange();case 6:case"end":return i.stop()}},_callee4,this)}));return function deleteAdmin(t){return e.apply(this,arguments)}}()},{key:"sendReceipt",value:function sendReceipt(e){return _apiClient.apiClient.post("/api/billings/"+this.id+"/charges/"+e+"/send_receipt")}}]),Billing}());

    },{"../lib/api-client/":452,"./base-store":511}],513:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_=require("./"),_2=_interopRequireDefault(_),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_apiClient=require("../lib/api-client/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var i=t[n](a),o=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function CurrentProject(){_classCallCheck(this,CurrentProject);var e=_possibleConstructorReturn(this,(CurrentProject.__proto__||Object.getPrototypeOf(CurrentProject)).call(this));return e.project=null,e}return _inherits(CurrentProject,_baseStore2.default),_createClass(CurrentProject,[{key:"initialize",value:function initialize(){_2.default.CurrentUser.addChangeListener(this.onChangeCurrentUser.bind(this))}},{key:"onChangeCurrentUser",value:function onChangeCurrentUser(){var e=this;if(this.project&&this.project.users){var t=_2.default.CurrentUser.get();this.project.users.forEach(function(r){r.id===t.id&&(r.displayName=t.displayName,r.name=t.name,e.emitChange())})}}},{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(!this.project||this.project.name!==e){n.next=2;break}return n.abrupt("return",this.project);case 2:return n.next=4,_apiClient.apiClient.get("/api/projects/"+e);case 4:return t=n.sent,r=t.data,_2.default.Sync.flushChange(),this.project=r,this.emitChange(),n.abrupt("return",this.project);case 10:case"end":return n.stop()}},_callee,this)}));return function load(t){return e.apply(this,arguments)}}()},{key:"reload",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t;return regeneratorRuntime.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_apiClient.apiClient.get("/api/projects/"+this.project.name);case 2:return e=r.sent,t=e.data,this.project=t,this.emitChange(),r.abrupt("return",this.project);case 7:case"end":return r.stop()}},_callee2,this)}));return function reload(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,r;return regeneratorRuntime.wrap(function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_apiClient.apiClient.post("/api/projects/"+this.project.name,e);case 2:return t=n.sent,r=t.data,this.project=r,this.emitChange(),n.abrupt("return",this.project);case 7:case"end":return n.stop()}},_callee3,this)}));return function update(t){return e.apply(this,arguments)}}()},{key:"updatePro",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e){var t,r;return regeneratorRuntime.wrap(function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_apiClient.apiClient.post("/api/projects/"+this.project.name+"/pro",e);case 2:return t=n.sent,r=t.data,this.project=r,this.emitChange(),n.abrupt("return",this.project);case 7:case"end":return n.stop()}},_callee4,this)}));return function updatePro(t){return e.apply(this,arguments)}}()},{key:"removeMember",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(e){var t,r;return regeneratorRuntime.wrap(function _callee5$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_apiClient.apiClient.delete("/api/projects/"+this.project.name+"/members/"+e);case 2:return t=n.sent,r=t.data,this.project=r,this.emitChange(),n.abrupt("return",this.project);case 7:case"end":return n.stop()}},_callee5,this)}));return function removeMember(t){return e.apply(this,arguments)}}()},{key:"addAdmin",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(e){var t,r;return regeneratorRuntime.wrap(function _callee6$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_apiClient.apiClient.post("/api/projects/"+this.project.name+"/members/admins/"+e);case 2:return t=n.sent,r=t.data,this.project=r,this.emitChange(),n.abrupt("return",this.project);case 7:case"end":return n.stop()}},_callee6,this)}));return function addAdmin(t){return e.apply(this,arguments)}}()},{key:"removeAdmin",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(e){var t,r;return regeneratorRuntime.wrap(function _callee7$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_apiClient.apiClient.delete("/api/projects/"+this.project.name+"/members/admins/"+e);case 2:return t=n.sent,r=t.data,this.project=r,this.emitChange(),n.abrupt("return",this.project);case 7:case"end":return n.stop()}},_callee7,this)}));return function removeAdmin(t){return e.apply(this,arguments)}}()},{key:"transferOwner",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(e){var t,r;return regeneratorRuntime.wrap(function _callee8$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_apiClient.apiClient.post("/api/projects/"+this.project.name+"/members/transferOwner/"+e);case 2:return t=n.sent,r=t.data,this.project=r,this.emitChange(),n.abrupt("return",this.project);case 7:case"end":return n.stop()}},_callee8,this)}));return function transferOwner(t){return e.apply(this,arguments)}}()},{key:"leave",value:function leave(){return _apiClient.apiClient.post("/api/projects/"+this.project.name+"/members/leave")}},{key:"deleteAll",value:function deleteAll(){return _apiClient.apiClient.delete("/api/projects/"+this.project.name)}},{key:"get",value:function get(){return this.project}},{key:"isOwner",value:function isOwner(e){return this.project&&this.project.owner===e}},{key:"isAdmin",value:function isAdmin(e){return this.project&&this.project.admins&&this.project.admins.includes(e)}},{key:"name",get:function get(){return this.project&&this.project.name}},{key:"isOwnerPro",get:function get(){var e=this;return this.project.users.find(function(t){return t.id===e.project.owner}).pro}}]),CurrentProject}());

    },{"../lib/api-client/":452,"./":520,"./base-store":511}],514:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_=require("./"),_2=_interopRequireDefault(_),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_apiClient=require("../lib/api-client/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,i){try{var u=t[n](i),s=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function CurrentUser(){_classCallCheck(this,CurrentUser);var e=_possibleConstructorReturn(this,(CurrentUser.__proto__||Object.getPrototypeOf(CurrentUser)).call(this));return e._user=null,e.isGuest=!1,e}return _inherits(CurrentUser,_baseStore2.default),_createClass(CurrentUser,[{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t;return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(!this._user&&!this.isGuest){r.next=2;break}return r.abrupt("return",this._user);case 2:return r.next=4,_apiClient.apiClient.get("/api/users/me");case 4:if(e=r.sent,t=e.data,this.isGuest=t.isGuest,window._csrf=t.csrfToken,!this.isGuest){r.next=10;break}return r.abrupt("return",null);case 10:return this._user=t,this.emitChange(),r.abrupt("return",this._user);case 13:case"end":return r.stop()}},_callee,this)}));return function load(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,r;return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_apiClient.apiClient.post("/api/users/me",e);case 2:return t=n.sent,r=t.data,this._user=r,this.emitChange(),n.abrupt("return",this._user);case 7:case"end":return n.stop()}},_callee2,this)}));return function update(t){return e.apply(this,arguments)}}()},{key:"get",value:function get(){return this._user}},{key:"isProjectMember",get:function get(){if(!this._user)return!1;var e=_2.default.CurrentProject.get();return!!e&&e.isMember}},{key:"isProjectOwner",get:function get(){return this._user&&_2.default.CurrentProject.isOwner(this._user.id)}},{key:"isProjectAdmin",get:function get(){return this._user&&_2.default.CurrentProject.isAdmin(this._user.id)}},{key:"hasProjectPrivilege",get:function get(){return this.isProjectOwner||this.isProjectAdmin}},{key:"isPro",get:function get(){return this._user&&!!this._user.pro}}]),CurrentUser}());

    },{"../lib/api-client/":452,"./":520,"./base-store":511}],515:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),_get=function get(t,e,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:get(a,e,i)}if("value"in o)return o.value;var n=o.get;return void 0!==n?n.call(i):void 0},_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_=require("./"),_2=_interopRequireDefault(_),_computeLine=require("../lib/compute-line"),_wordSeperator=require("../lib/word-seperator"),_line=require("../../../share/line/");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var PUSH_DEBOUNCE_TIME=300;exports.default=new(function(t){function Cursor(){_classCallCheck(this,Cursor);var t=_possibleConstructorReturn(this,(Cursor.__proto__||Object.getPrototypeOf(Cursor)).call(this));return t.clear(),t}return _inherits(Cursor,_baseStore2.default),_createClass(Cursor,[{key:"clear",value:function clear(){this.data={line:0,char:0},this.temporalHorizontalPoint=0,this.visible=!1,this.visibleScreenKeyboard=!1,this.visiblePopupMenu=!1,this.blurTextarea=!1}},{key:"getPosition",value:function getPosition(){return this.data}},{key:"getVisible",value:function getVisible(){return this.visible}},{key:"updateTemporalHorizontalPoint",value:function updateTemporalHorizontalPoint(){var t=(0,_computeLine.getPointFromCharIndex)(this.data);t&&(this.temporalHorizontalPoint=t.x)}},{key:"setPosition",value:function setPosition(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scrollInView:!0},i=e.scrollInView,o=e.source;this.data=(0,_lodash.cloneDeep)(t),this.fixPosition(),this.updateTemporalHorizontalPoint(),i&&this.emitScroll(),this.visible=!0,this.emitChange({source:o})}},{key:"showPopupMenu",value:function showPopupMenu(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{blurTextarea:!0}).blurTextarea;this.blurTextarea=t,this.visiblePopupMenu=!0,this.emitChange()}},{key:"hidePopupMenu",value:function hidePopupMenu(){this.blurTextarea=!1,this.visiblePopupMenu=!1,this.emitChange()}},{key:"fixPosition",value:function fixPosition(){this.data.line>=this.lines.length&&(this.data.line=this.lines.length-1);var t=this.lines[this.data.line].text.charLength;t<this.data.char&&(this.data.char=t)}},{key:"isAtLineHead",value:function isAtLineHead(){return this.visible&&0===this.data.char}},{key:"isAtLineTail",value:function isAtLineTail(){return this.visible&&this.data.char>=this.lines[this.data.line].text.charLength}},{key:"show",value:function show(){this.visible=!0,this.emitChange()}},{key:"focus",value:function focus(){this.visible=!0,this.emitChange("focusTextInput")}},{key:"hide",value:function hide(){this.visible=!1,this.emitChange()}},{key:"goUp",value:function goUp(){var t=(0,_computeLine.getPointFromCharIndex)(this.data),e=1===this.data.line?20:16,i={x:this.temporalHorizontalPoint,y:t.y-e},o=(0,_computeLine.getCharIndexFromPoint)(i);0===this.data.line&&this.data.char<=o.char&&(o.char=0),o.line===this.data.line&&o.char===this.data.char&&o.line>0&&(o.line-=1),this.data=o,this.fixPosition(),this.emitScroll(),this.emitChange()}},{key:"goPageUp",value:function goPageUp(){var t=(0,_computeLine.getPointFromCharIndex)(this.data),e={x:this.temporalHorizontalPoint,y:t.y-window.innerHeight},i=(0,_computeLine.getCharIndexFromPoint)(e);0===this.data.line&&this.data.char<=i.char&&(i.char=0),i.line===this.data.line&&i.char===this.data.char&&i.line>0&&(i.line-=1),this.data=i,this.fixPosition(),this.emitScroll(),this.emitChange()}},{key:"goDown",value:function goDown(){var t=(0,_computeLine.getPointFromCharIndex)(this.data),e={x:this.temporalHorizontalPoint,y:t.y+t.height+16},i=(0,_computeLine.getCharIndexFromPoint)(e);i.line===this.data.line&&i.char===this.data.char&&this.lines.length-1>i.line&&(i.line+=1),this.data=i,this.fixPosition(),this.emitScroll(),this.emitChange()}},{key:"goPageDown",value:function goPageDown(){var t=(0,_computeLine.getPointFromCharIndex)(this.data),e={x:this.temporalHorizontalPoint,y:t.y+window.innerHeight+16},i=(0,_computeLine.getCharIndexFromPoint)(e);i.line===this.data.line&&i.char===this.data.char&&this.lines.length-1>i.line&&(i.line+=1),this.data=i,this.fixPosition(),this.emitScroll(),this.emitChange()}},{key:"goNextLineHead",value:function goNextLineHead(){this.data.line>=this.lines.length-1||(this.data.char=0,this.data.line+=1,this.updateTemporalHorizontalPoint(),this.emitScroll(),this.emitChange())}},{key:"goPrevLineTail",value:function goPrevLineTail(){this.data.line<=0||(this.data.char=this.lines[this.data.line-1].text.charLength,this.data.line-=1,this.updateTemporalHorizontalPoint(),this.emitScroll(),this.emitChange())}},{key:"goLeft",value:function goLeft(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scrollInView:!0}).scrollInView;if(this.data.char<=0)return this.goPrevLineTail();this.data.char-=1,this.updateTemporalHorizontalPoint(),t&&this.emitScroll(),this.emitChange()}},{key:"goRight",value:function goRight(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scrollInView:!0}).scrollInView;if(this.isAtLineTail())return this.goNextLineHead();this.data.char+=1,this.updateTemporalHorizontalPoint(),t&&this.emitScroll(),this.emitChange()}},{key:"goTop",value:function goTop(){this.data.char=0,this.data.line=0,this.emitScroll(),this.emitChange()}},{key:"goBottom",value:function goBottom(){this.data.char=this.lines[this.lines.length-1].text.charLength,this.data.line=this.lines.length-1,this.emitScroll(),this.emitChange()}},{key:"getWordHead",value:function getWordHead(){if(this.data.char<=0)return this.goPrevLineTail();var t=this.lines[this.data.line].text;return(0,_wordSeperator.wordHeadPosition)(t,this.data.char)}},{key:"goWordLeft",value:function goWordLeft(){this.data.char=this.getWordHead(),this.updateTemporalHorizontalPoint(),this.emitScroll(),this.emitChange()}},{key:"getWordTail",value:function getWordTail(){if(this.isAtLineTail())return this.goNextLineHead();var t=this.lines[this.data.line].text;return(0,_wordSeperator.wordTailPosition)(t,this.data.char)}},{key:"goWordRight",value:function goWordRight(){this.data.char=this.getWordTail(),this.updateTemporalHorizontalPoint(),this.emitScroll(),this.emitChange()}},{key:"goLineHead",value:function goLineHead(){var t=(0,_line.countIndent)(this.lines[this.data.line]);this.data.char=t>=this.data.char?0:t,this.updateTemporalHorizontalPoint(),this.emitScroll(),this.emitChange()}},{key:"goLineTail",value:function goLineTail(){this.data.char=this.lines[this.data.line].text.charLength,this.updateTemporalHorizontalPoint(),this.emitScroll(),this.emitChange()}},{key:"goByAction",value:function goByAction(t){switch(t){case"go-up":this.goUp();break;case"go-down":this.goDown();break;case"go-left":this.goLeft();break;case"go-right":this.goRight();break;case"go-top":this.goTop();break;case"go-bottom":this.goBottom();break;case"go-word-left":this.goWordLeft();break;case"go-word-right":this.goWordRight();break;case"go-line-head":this.goLineHead();break;case"go-line-tail":this.goLineTail();break;case"go-pageup":this.goPageUp();break;case"go-pagedown":this.goPageDown()}}},{key:"emitScroll",value:function emitScroll(){_get(Cursor.prototype.__proto__||Object.getPrototypeOf(Cursor.prototype),"emitChange",this).call(this,"scroll")}},{key:"emitChange",value:function emitChange(t){_get(Cursor.prototype.__proto__||Object.getPrototypeOf(Cursor.prototype),"emitChange",this).call(this,t),this.sync()}},{key:"sync",value:function sync(){_2.default.Sync.hasUnpushedCommit?(this.debounced||(this.debounced=(0,_lodash.debounce)(this.syncNow,PUSH_DEBOUNCE_TIME)),this.debounced()):this.syncNow()}},{key:"syncNow",value:function syncNow(){if(_2.default.CurrentUser.isProjectMember){var t=_2.default.CurrentUser.get();if(t){var e={user:{id:t.id,displayName:t.displayName},pageId:this.page.id,position:this.data,visible:this.visible};_2.default.Socket.get().emit("cursor",e)}}}},{key:"page",get:function get(){return _2.default.Page}},{key:"lines",get:function get(){return _2.default.Line.getAll()}}]),Cursor}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../share/line/":587,"../lib/compute-line":459,"../lib/word-seperator":496,"./":520,"./base-store":511}],516:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_hasDom=require("has-dom"),_hasDom2=_interopRequireDefault(_hasDom),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function DisplayStyle(){_classCallCheck(this,DisplayStyle);var e=_possibleConstructorReturn(this,(DisplayStyle.__proto__||Object.getPrototypeOf(DisplayStyle)).call(this));return e.style={"hide-dots":!1,presentation:!1},e.updateDocument(),e}return _inherits(DisplayStyle,_baseStore2.default),_createClass(DisplayStyle,[{key:"check",value:function check(e){if(!this.style.hasOwnProperty(e))throw new Error('"'+e+'" is not style.')}},{key:"enable",value:function enable(e){this.check(e),this.style[e]=!0,this.updateDocument(),this.emitChange()}},{key:"disable",value:function disable(e){this.check(e),this.style[e]=!1,this.updateDocument(),this.emitChange()}},{key:"get",value:function get(e){return this.check(e),this.style[e]}},{key:"updateDocument",value:function updateDocument(){if((0,_hasDom2.default)()){debug(this.style);var e=Object.entries(this.style).filter(function(e){var t=_slicedToArray(e,2);t[0];return t[1]}).map(function(e){var t=_slicedToArray(e,2),r=t[0];t[1];return r}).join(" ");document.documentElement.setAttribute("data-display-style",e)}}}]),DisplayStyle}());

        }).call(this,"/src/client/js/stores/display-style.js")
    },{"../../../share/debug":566,"./base-store":511,"has-dom":143}],517:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.default=new(function(e){function Error(){_classCallCheck(this,Error);var e=_possibleConstructorReturn(this,(Error.__proto__||Object.getPrototypeOf(Error)).call(this));return e._error=null,e}return _inherits(Error,_baseStore2.default),_createClass(Error,[{key:"get",value:function get(){return this._error}},{key:"set",value:function set(e){this._error=e,this.emitChange()}}]),Error}());

    },{"./base-store":511}],518:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),_flags=require("../../../share/flags");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function GoogleAnalytics(){_classCallCheck(this,GoogleAnalytics);var e=_possibleConstructorReturn(this,(GoogleAnalytics.__proto__||Object.getPrototypeOf(GoogleAnalytics)).call(this));return e.resetUtm(),e}return _inherits(GoogleAnalytics,_baseStore2.default),_createClass(GoogleAnalytics,[{key:"initialize",value:function initialize(){var e=this;_2.default.CurrentProject.addChangeListener(function(){e.onChangeProject()})}},{key:"resetUtm",value:function resetUtm(){this.utm={pathname:"",params:{}}}},{key:"setUtm",value:function setUtm(e){var t=e.pathname,r=e.params;this.utm={pathname:t,params:r}}},{key:"onChangeProject",value:function onChangeProject(){var e=_2.default.CurrentProject.get();if(e){var t=e.id,r=e.name,a=e.googleAnalyticsCode;this.createTracker({projectId:t,projectName:r,googleAnalyticsCode:a})}}},{key:"createTrackerName",value:function createTrackerName(e){return"ga_"+e}},{key:"createTracker",value:function createTracker(e){var t=e.projectId,r=e.projectName,a=e.googleAnalyticsCode;_flags.ENABLE_GOOGLE_ANALYTICS&&window.ga&&a&&(window.ga("create",{trackingId:a,name:this.createTrackerName(t),cookieDomain:"auto"}),debug("created: "+r),window.ga(function(){debug("tracker length: "+window.ga.getAll().length)}))}},{key:"sendPageview",value:function sendPageview(e){var t=e.title,r=_2.default.CurrentProject.get();if(r&&_flags.ENABLE_GOOGLE_ANALYTICS&&"new"!==t){var a=r.id,n=r.name,o=r.googleAnalyticsCode;if(window.ga&&o&&o.length>0){var i=location.pathname,s=this.utm.params,l={title:t||"/",page:"/"+t,hitCallback:function hitCallback(){debug("sent /"+n+"/"+t,s)}};i===this.utm.pathname&&Object.keys(s).length>0&&(l.location=i+"?"+_querystring2.default.stringify(s)),this.resetUtm(),window.ga(this.createTrackerName(a)+".send","pageview",l)}}}}]),GoogleAnalytics}());

        }).call(this,"/src/client/js/stores/google-analytics.js")
    },{"../../../share/debug":566,"../../../share/flags":578,"./":520,"./base-store":511,"querystring":197}],519:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function GoogleMap(){return _classCallCheck(this,GoogleMap),_possibleConstructorReturn(this,(GoogleMap.__proto__||Object.getPrototypeOf(GoogleMap)).apply(this,arguments))}return _inherits(GoogleMap,_baseStore2.default),_createClass(GoogleMap,[{key:"renderScriptTag",value:function renderScriptTag(){var e=document.getElementById("google-map-script");e||(debug("render google-map-script tag"),(e=document.createElement("script")).async=!0,e.setAttribute("src","/api/google-map/js-map?_csrf="+window._csrf),e.id="google-map-script",document.getElementsByTagName("body")[0].appendChild(e))}}]),GoogleMap}());

        }).call(this,"/src/client/js/stores/google-map.js")
    },{"../../../share/debug":566,"./base-store":511}],520:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _apiLoading=require("./api-loading"),_apiLoading2=_interopRequireDefault(_apiLoading),_billing=require("./billing"),_billing2=_interopRequireDefault(_billing),_currentProject=require("./current-project"),_currentProject2=_interopRequireDefault(_currentProject),_currentUser=require("./current-user"),_currentUser2=_interopRequireDefault(_currentUser),_cursor=require("./cursor"),_cursor2=_interopRequireDefault(_cursor),_displayStyle=require("./display-style"),_displayStyle2=_interopRequireDefault(_displayStyle),_error=require("./error"),_error2=_interopRequireDefault(_error),_googleAnalytics=require("./google-analytics"),_googleAnalytics2=_interopRequireDefault(_googleAnalytics),_googleMap=require("./google-map"),_googleMap2=_interopRequireDefault(_googleMap),_invitation=require("./invitation"),_invitation2=_interopRequireDefault(_invitation),_layout=require("./layout"),_layout2=_interopRequireDefault(_layout),_line=require("./line"),_line2=_interopRequireDefault(_line),_lineDom=require("./line-dom"),_lineDom2=_interopRequireDefault(_lineDom),_linePermalink=require("./line-permalink"),_linePermalink2=_interopRequireDefault(_linePermalink),_login=require("./login"),_login2=_interopRequireDefault(_login),_mobileOutlineEdit=require("./mobile-outline-edit"),_mobileOutlineEdit2=_interopRequireDefault(_mobileOutlineEdit),_mobileSelection=require("./mobile-selection"),_mobileSelection2=_interopRequireDefault(_mobileSelection),_notification=require("./notification"),_notification2=_interopRequireDefault(_notification),_page=require("./page"),_page2=_interopRequireDefault(_page),_pageAccess=require("./page-access"),_pageAccess2=_interopRequireDefault(_pageAccess),_pageList=require("./page-list"),_pageList2=_interopRequireDefault(_pageList),_pageListStyle=require("./page-list-style"),_pageListStyle2=_interopRequireDefault(_pageListStyle),_pageMenu=require("./page-menu"),_pageMenu2=_interopRequireDefault(_pageMenu),_popupMenu=require("./popup-menu"),_popupMenu2=_interopRequireDefault(_popupMenu),_presentationMode=require("./presentation-mode"),_presentationMode2=_interopRequireDefault(_presentationMode),_projectBackup=require("./project-backup"),_projectBackup2=_interopRequireDefault(_projectBackup),_projectList=require("./project-list"),_projectList2=_interopRequireDefault(_projectList),_projectsLastAccessed=require("./projects-last-accessed"),_projectsLastAccessed2=_interopRequireDefault(_projectsLastAccessed),_quickSearch=require("./quick-search"),_quickSearch2=_interopRequireDefault(_quickSearch),_relatedPage=require("./related-page"),_relatedPage2=_interopRequireDefault(_relatedPage),_searchForm=require("./search-form"),_searchForm2=_interopRequireDefault(_searchForm),_selection=require("./selection"),_selection2=_interopRequireDefault(_selection),_sharedCursor=require("./shared-cursor"),_sharedCursor2=_interopRequireDefault(_sharedCursor),_socket=require("./socket/"),_socket2=_interopRequireDefault(_socket),_stream=require("./stream"),_stream2=_interopRequireDefault(_stream),_suggestPopup=require("./suggest-popup"),_suggestPopup2=_interopRequireDefault(_suggestPopup),_sync=require("./sync"),_sync2=_interopRequireDefault(_sync),_timestamp=require("./timestamp"),_timestamp2=_interopRequireDefault(_timestamp),_undo=require("./undo"),_undo2=_interopRequireDefault(_undo),_userscript=require("./userscript"),_userscript2=_interopRequireDefault(_userscript);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Stores={APILoading:_apiLoading2.default,Billing:_billing2.default,CurrentProject:_currentProject2.default,CurrentUser:_currentUser2.default,Cursor:_cursor2.default,DisplayStyle:_displayStyle2.default,Error:_error2.default,GoogleAnalytics:_googleAnalytics2.default,GoogleMap:_googleMap2.default,Invitation:_invitation2.default,Layout:_layout2.default,Line:_line2.default,LineDOM:_lineDom2.default,LinePermalink:_linePermalink2.default,Login:_login2.default,MobileOutlineEdit:_mobileOutlineEdit2.default,MobileSelection:_mobileSelection2.default,Notification:_notification2.default,Page:_page2.default,PageAccess:_pageAccess2.default,PageList:_pageList2.default,PageListStyle:_pageListStyle2.default,PageMenu:_pageMenu2.default,PopupMenu:_popupMenu2.default,PresentationMode:_presentationMode2.default,ProjectBackup:_projectBackup2.default,ProjectList:_projectList2.default,ProjectsLastAccessed:_projectsLastAccessed2.default,QuickSearch:_quickSearch2.default,RelatedPage:_relatedPage2.default,SearchForm:_searchForm2.default,Selection:_selection2.default,SharedCursor:_sharedCursor2.default,Socket:_socket2.default,Stream:_stream2.default,SuggestPopup:_suggestPopup2.default,Sync:_sync2.default,TimeStamp:_timestamp2.default,Undo:_undo2.default,UserScript:_userscript2.default};exports.default=Stores;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=Object.values(Stores)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var store=_step.value;store.initialize&&store.initialize()}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}

    },{"./api-loading":510,"./billing":512,"./current-project":513,"./current-user":514,"./cursor":515,"./display-style":516,"./error":517,"./google-analytics":518,"./google-map":519,"./invitation":521,"./layout":522,"./line":526,"./line-dom":524,"./line-permalink":525,"./login":527,"./mobile-outline-edit":528,"./mobile-selection":529,"./notification":530,"./page":535,"./page-access":531,"./page-list":533,"./page-list-style":532,"./page-menu":534,"./popup-menu":536,"./presentation-mode":537,"./project-backup":538,"./project-list":539,"./projects-last-accessed":540,"./quick-search":541,"./related-page":542,"./search-form":543,"./selection":544,"./shared-cursor":545,"./socket/":548,"./stream":552,"./suggest-popup":553,"./sync":554,"./timestamp":557,"./undo":558,"./userscript":559}],521:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_apiClient=require("../lib/api-client/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,i){try{var a=t[r](i),o=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function Invitation(){_classCallCheck(this,Invitation);var e=_possibleConstructorReturn(this,(Invitation.__proto__||Object.getPrototypeOf(Invitation)).call(this));return e._invitation=null,e}return _inherits(Invitation,_baseStore2.default),_createClass(Invitation,[{key:"loadByCode",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var n,r;return regeneratorRuntime.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,_apiClient.apiClient.get("/api/projects/"+e+"/invitations/"+t);case 2:return n=i.sent,r=n.data,this._invitation=r,this.emitChange(),i.abrupt("return",this._invitation);case 7:case"end":return i.stop()}},_callee,this)}));return function loadByCode(t,n){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,n,r;return regeneratorRuntime.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,_apiClient.apiClient.get("/api/projects/"+e+"/invitations");case 3:t=i.sent,n=t.data,this._invitation=n,i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),r=i.t0.response?i.t0.response.data.message:i.t0.message,this._invitation={error:{message:r}};case 12:return this.emitChange(),i.abrupt("return",this._invitation);case 14:case"end":return i.stop()}},_callee2,this,[[0,8]])}));return function load(t){return e.apply(this,arguments)}}()},{key:"join",value:function join(e,t){return _apiClient.apiClient.post("/api/projects/"+this._invitation.project.name+"/invitations/"+this._invitation.code)}},{key:"createAndReset",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,n,r;return regeneratorRuntime.wrap(function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,_apiClient.apiClient.post("/api/projects/"+e+"/invitations");case 3:t=i.sent,n=t.data,this._invitation=n,i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),r=i.t0.response?i.t0.response.data.message:i.t0.message,this._invitation={error:{message:r}};case 12:return this.emitChange(),i.abrupt("return",this._invitation);case 14:case"end":return i.stop()}},_callee3,this,[[0,8]])}));return function createAndReset(t){return e.apply(this,arguments)}}()},{key:"get",value:function get(){return this._invitation}}]),Invitation}());

    },{"../lib/api-client/":452,"./base-store":511}],522:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function Layout(){_classCallCheck(this,Layout);var e=_possibleConstructorReturn(this,(Layout.__proto__||Object.getPrototypeOf(Layout)).call(this));return e._layout="launch",e}return _inherits(Layout,_baseStore2.default),_createClass(Layout,[{key:"get",value:function get(){return this._layout}},{key:"set",value:function set(e){this._layout=e,this.emitChange()}}]),Layout}());

    },{"./base-store":511}],523:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),_=require("./"),_2=_interopRequireDefault(_),_page=require("../../../share/page"),_commit=require("../../../share/commit/"),_pageTitle=require("../../../share/validator/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var now=function now(){return Math.round(Date.now()/1e3)},LineArray=function(){function LineArray(e){_classCallCheck(this,LineArray),this.lines=e||[]}return _createClass(LineArray,[{key:"indexById",value:function indexById(e){var t=0,i=!0,n=!1,r=void 0;try{for(var a,l=this.lines[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){if(a.value.id===e)return t;t++}}catch(e){n=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(n)throw r}}return-1}},{key:"at",value:function at(e){return this.lines[e]}},{key:"all",value:function all(){return this.lines}},{key:"insert",value:function insert(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.indexById(t.id)>-1)throw new Error("duplicated line id");var n=e<this.lines.length?this.lines[e].id:"_end";if(t.created=now(),t.updated=now(),this.lines.splice(e,0,t),i){var r=t.id,a=t.text,l=_commit.InsertChange.create({positionId:n,lineId:r,text:a}),o=_commit.DeleteChange.create({lineId:r});_2.default.Sync.insert(l),_2.default.Undo.append({forward:l,reverse:o})}}},{key:"delete",value:function _delete(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.at(e).id,n=this.at(e).text,r=this.at(this.indexById(i)+1),a=r?r.id:"_end";if(this.lines.splice(e,1),t){var l=_commit.DeleteChange.create({lineId:i}),o=_commit.InsertChange.create({positionId:a,lineId:i,text:n});_2.default.Sync.delete(l),_2.default.Undo.append({forward:l,reverse:o})}}},{key:"update",value:function update(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.at(e).text!==t){this.at(e).updated=now();var n=this.at(e).text;if(this.at(e).text=t,i){var r=this.at(e).id,a=_commit.UpdateChange.create({lineId:r,text:t}),l=_commit.UpdateChange.create({lineId:r,text:n});_2.default.Sync.update(a),_2.default.Undo.append({forward:a,reverse:l})}}}},{key:"patchChanges",value:function patchChanges(e,t){var i=!0,n=!1,r=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var o=a.value;if(o)if(o._insert){var d="_end"===o._insert?this.lines.length:this.indexById(o._insert);if(d<0)throw new Error("can not insert. "+o._insert+" is not found");this.insert(d,o.lines,!1),t&&t(d,1,o)}else if(o._update){var s=this.indexById(o._update);if(s<0)throw new Error("can not update. "+o._update+" is not found");this.update(s,o.lines.text,!1)}else if(o._delete){var u=this.indexById(o._delete);if(u<0)throw new Error("can not delete. "+o._delete+" is not found");this.delete(u,!1),t&&t(u,-1,o)}}}catch(e){n=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(n)throw r}}}},{key:"getTitle",value:function getTitle(){var e="Untitled",t=!0,i=!1,n=void 0;try{for(var r,a=this.lines[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var l=r.value.text.trim().slice(0,_pageTitle.maxPageTitleLength.value);if((0,_pageTitle.validatePageTitle)(l).isValid){e=l;break}}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}return"new"===e.toLowerCase()&&(e+="_"),e}},{key:"getPageMetadata",value:function getPageMetadata(){return(0,_page.getPageMetadataFromLines)(this.lines)}},{key:"length",get:function get(){return this.lines.length}}]),LineArray}();exports.default=LineArray;

    },{"../../../share/commit/":563,"../../../share/page":590,"../../../share/validator/page-title":622,"./":520}],524:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function LineDOM(){_classCallCheck(this,LineDOM);var e=_possibleConstructorReturn(this,(LineDOM.__proto__||Object.getPrototypeOf(LineDOM)).call(this));return e.update=e.update.bind(e),e}return _inherits(LineDOM,_baseStore2.default),_createClass(LineDOM,[{key:"update",value:function update(){this.emitChange()}}]),LineDOM}());

    },{"./base-store":511}],525:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery),_page=require("page"),_page2=_interopRequireDefault(_page),_=require("./"),_2=_interopRequireDefault(_),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_id=require("../../../share/id"),_pageTitle=require("../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function LinePermalink(){_classCallCheck(this,LinePermalink);var e=_possibleConstructorReturn(this,(LinePermalink.__proto__||Object.getPrototypeOf(LinePermalink)).call(this));return e.id=null,e.source=null,e.addChangeListener(function(){return e.updateURL()}),e}return _inherits(LinePermalink,_baseStore2.default),_createClass(LinePermalink,[{key:"initialize",value:function initialize(){var e=this;_2.default.Page.addChangeListener(function(t){t.event,t.store;setTimeout(function(){return e.scroll()},1e3)}),_2.default.Layout.addChangeListener(function(t){t.event;"page"!==t.store.get()&&e.clear()})}},{key:"clear",value:function clear(){null!==this.id&&(this.id=null,this.emitChange())}},{key:"set",value:function set(e,t){var r=t.source;(0,_id.isIdString)(e)&&(debug("set "+e),this.id=e,this.source=r,this.scroll(),this.emitChange())}},{key:"get",value:function get(){return this.id}},{key:"scroll",value:function scroll(){if(this.id){var e=(0,_jquery2.default)(".lines #L"+this.id);if(!(e.length<1)){var t=e.offset().top;window.scrollY<t&&t<window.scrollY+window.innerHeight-10||window.scrollTo(0,t-50)}}}},{key:"updateURL",value:function updateURL(){if("page"===_2.default.Layout.get()&&(location.hash.replace(/^#/,"")||null)!==this.id){var e=_2.default.CurrentProject.get().name,t=_2.default.Page.title,r="/"+e+"/"+(0,_pageTitle.encodeTitleURI)(t);this.id&&(r+="#"+this.id),_page2.default.replace(r,null,null,!1)}}}]),LinePermalink}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/line-permalink.js")
    },{"../../../share/debug":566,"../../../share/id":586,"../../../share/page-title":589,"./":520,"./base-store":511,"page":169}],526:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_=require("./"),_2=_interopRequireDefault(_),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_lineArray=require("./line-array"),_lineArray2=_interopRequireDefault(_lineArray),_id2=require("../../../share/id"),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_browser=require("../lib/browser");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function Line(){_classCallCheck(this,Line);var e=_possibleConstructorReturn(this,(Line.__proto__||Object.getPrototypeOf(Line)).call(this));return e.lines=new _lineArray2.default,e.moveLinesHorizontalStartIsLineHead=null,e.moveLinesHorizontalEndIsLineHead=null,e}return _inherits(Line,_baseStore2.default),_createClass(Line,[{key:"initialize",value:function initialize(){var e=this;_2.default.CurrentUser.addChangeListener(function(){e.generateNewId=(0,_id2.IdGenerator)({userId:_2.default.CurrentUser.get().id})}),_2.default.Cursor&&_2.default.Cursor.addChangeListener(function(t){t.store;var n=t.event;n&&"mouse"===n.source&&e.moveLinesHorizontalFinish()})}},{key:"setLines",value:function setLines(e){this.lines=new _lineArray2.default(e),this.emitChange()}},{key:"getAll",value:function getAll(){return this.lines.all()}},{key:"insertAfterTitleLine",value:function insertAfterTitleLine(e){var t=this;return e.split(/[\r\n]/).reverse().map(function(e){var n=t.generateNewId(),i=_2.default.CurrentUser.get().id;return t.lines.insert(1,{id:n,text:e,userId:i}),n})}},{key:"insertAfterLastLine",value:function insertAfterLastLine(e){var t=this;return e.split(/[\r\n]/).map(function(e){var n=t.generateNewId(),i=_2.default.CurrentUser.get().id;return t.lines.insert(t.lines.length,{id:n,text:e,userId:i}),n})}},{key:"addChar",value:function addChar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_2.default.Cursor.getPosition(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_2.default.Selection.getRange(),i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(_2.default.CurrentUser.isProjectMember){n&&_2.default.Selection.hasSelection(n)&&(t=this._deleteRange(n)),t.line>=this.lines.length&&(this.insertAfterLastLine(""),t={line:this.lines.length-1,char:0});var r=e.split("\n"),l=this.lines.at(t.line).text,a=l.charSubstr(0,t.char),s=l.charSubstr(t.char),o=""===a,u=0,h=!0,d=!1,f=void 0;try{for(var c,g=r[Symbol.iterator]();!(h=(c=g.next()).done);h=!0){var v=c.value,_="";if(0===u&&(_+=a),_+=v,u===r.length-1&&(_+=s),o)if(u<r.length-1){var m=this.generateNewId();this.lines.insert(t.line+u,{id:m,text:_,userId:_2.default.CurrentUser.get().id})}else this.lines.update(t.line+u,_);else if(0===u)this.lines.update(t.line,_);else{var p=this.generateNewId();this.lines.insert(t.line+u,{id:p,text:_,userId:_2.default.CurrentUser.get().id})}u+=1}}catch(e){d=!0,f=e}finally{try{!h&&g.return&&g.return()}finally{if(d)throw f}}i&&(r.length>1?t.char=r[r.length-1].length:t.char+=r[0].charLength,t.line+=r.length-1,requestAnimationFrame(function(){return _2.default.Cursor.setPosition(t)})),this.emitChange()}}},{key:"_deleteRange",value:function _deleteRange(e){if(_2.default.CurrentUser.isProjectMember&&!((e=_2.default.Selection.normalizeOrder(e)).end.line>=this.lines.length)){var t=this.lines.at(e.start.line).text.charSubstr(0,e.start.char)+this.lines.at(e.end.line).text.charSubstr(e.end.char);this.lines.update(e.start.line,t);var n=e.end.line-e.start.line;if(n>0)for(var i=0;i<n;i++)this.lines.delete(e.end.line-i);var r={line:e.start.line,char:e.start.char};return _2.default.Cursor.setPosition(r),_2.default.Selection.clear(),r}}},{key:"deleteRange",value:function deleteRange(e){if(_2.default.CurrentUser.isProjectMember){var t=this._deleteRange(e);return this.emitChange(),t}}},{key:"deleteChar",value:function deleteChar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_2.default.Cursor.getPosition(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_2.default.Selection.getRange(),i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(_2.default.CurrentUser.isProjectMember&&!(t.line>=this.lines.length)){var r=void 0,l=void 0,a=void 0;if(n&&_2.default.Selection.hasSelection(n))return this.deleteRange(n);e>0?_2.default.Cursor.isAtLineTail()?t.line<this.lines.all().length-1&&(this.lines.at(t.line).text.length<=0?this.lines.delete(t.line):(this.lines.at(t.line+1).text.length>0&&(a=this.lines.at(t.line).text+this.lines.at(t.line+1).text,this.lines.update(t.line,a)),this.lines.delete(t.line+1))):(l=(l=this.lines.at(t.line).text).charSubstr(0,t.char)+l.charSubstr(t.char+e),this.lines.update(t.line,l)):0===t.char?t.line>0&&((r=this.lines.at(t.line-1).text.charLength)<=0?this.lines.delete(t.line-1):(this.lines.at(t.line).text.length>0&&(a=this.lines.at(t.line-1).text+this.lines.at(t.line).text,this.lines.update(t.line-1,a)),this.lines.delete(t.line)),i&&(t={line:t.line-1,char:r},_2.default.Cursor.setPosition(t))):(l=(l=this.lines.at(t.line).text).charSubstr(0,t.char+e)+l.charSubstr(t.char),this.lines.update(t.line,l),i&&(t.char+=e,_2.default.Cursor.setPosition(t))),this.emitChange()}}},{key:"mergeChanges",value:function mergeChanges(e,t){debug("mergeChanges");var n=_2.default.Cursor.getPosition(),i=_2.default.Page.lines;i.patchChanges(e,function(e,t,r){n.line>=e&&(n.line+=t),_2.default.Sync.rebase({receivedChange:r,lineNumber:e,originalLines:i})}),_2.default.Sync.updateParentId({pageId:_2.default.Page.id,commitId:t}),_2.default.Page.commitId=t;var r=(0,_lodash.cloneDeep)(i);if(_2.default.Sync.hasUnpushedCommit){var l=!0,a=!1,s=void 0;try{for(var o,u=_2.default.Sync.commits[Symbol.iterator]();!(l=(o=u.next()).done);l=!0){var h=o.value;r.patchChanges(h.changes)}}catch(e){a=!0,s=e}finally{try{!l&&u.return&&u.return()}finally{if(a)throw s}}}this.lines=r,this.emitChange(),_2.default.Cursor.getVisible()&&_2.default.Cursor.setPosition(n,{scrollInView:!1})}},{key:"getIndent",value:function getIndent(e){return this.lines.at(e).text.match(/^(\s*)/)[0].length}},{key:"getBlock",value:function getBlock(e){for(var t=this.getIndent(e),n={indent:t,start:e,end:e,get length(){return this.end-this.start+1}},i=e+1;i<this.lines.length;i++){var r=this.getIndent(i);if(0===t){if(0===r){if(this.lines.at(i).text.length>0)break;continue}}else{if(/^\s*$/.test(this.lines.at(i).text))continue;if(t>=r)break}n.end=i}return n}},{key:"moveBlockDown",value:function moveBlockDown(e){var t=this;if(!(e>=this.lines.length)){var n=this.getBlock(e);if(!(n.end+1>=this.lines.length)){var i=(0,_lodash.range)(n.end+1,this.lines.length).find(function(e){return 0===n.indent||0!==t.lines.at(e).text.length});if(this.getIndent(n.start)===this.getIndent(i)){for(var r=this.getBlock(i),l=(0,_lodash.range)(n.start,n.end+1).map(function(e){return t.lines.at(e)}),a=(0,_lodash.range)(n.end+1,r.start).map(function(e){return t.lines.at(e)}),s=0;s<n.length+a.length;s++)this.lines.delete(n.start);for(var o=0;o<a.length;o++){var u=(0,_lodash.cloneDeep)(a[o]);u.id=this.generateNewId(),this.lines.insert(n.start+r.length+o,u)}for(var h=0;h<l.length;h++){var d=(0,_lodash.cloneDeep)(l[h]);d.id=this.generateNewId(),this.lines.insert(n.start+r.length+a.length+h,d)}var f=_2.default.Cursor.getPosition();f.line+=r.length+a.length,_2.default.Cursor.setPosition(f,{scrollInView:!0})}}}}},{key:"moveBlockUp",value:function moveBlockUp(e){var t=this;if(!(e>=this.lines.length)){for(var n=this.getBlock(e),i=void 0,r=n.start-1;r>=0;r--){if(0!==this.lines.at(r).text.length&&this.getIndent(r)<n.indent)return;if(this.getIndent(r)===n.indent&&(0===n.indent||""!==this.lines.at(r).text)){i=this.getBlock(r);break}}if(i){for(var l=(0,_lodash.range)(i.end+1,n.start).map(function(e){return t.lines.at(e)}),a=(0,_lodash.range)(n.start,n.end+1).map(function(e){return t.lines.at(e)}),s=0;s<n.length+l.length;s++)this.lines.delete(i.end+1);for(var o=0;o<a.length;o++){var u=(0,_lodash.cloneDeep)(a[o]);u.id=this.generateNewId(),this.lines.insert(i.start+o,u)}for(var h=0;h<l.length;h++){var d=(0,_lodash.cloneDeep)(l[h]);d.id=this.generateNewId(),this.lines.insert(i.start+a.length+h,d)}var f=_2.default.Cursor.getPosition();f.line=i.start,_2.default.Cursor.setPosition(f,{scrollInView:!0})}}}},{key:"moveBlockLeft",value:function moveBlockLeft(e){var t=this.getBlock(e);if(!(t.indent<1)){for(var n=t.start;n<=t.end;n++)this.deleteChar(-1,{line:n,char:1},null,!1);var i=_2.default.Cursor.getPosition();i.char<1||(i.char-=1,_2.default.Cursor.setPosition(i))}}},{key:"moveBlockRight",value:function moveBlockRight(e){for(var t=this.getBlock(e),n=t.start;n<=t.end;n++)this.addChar(" ".repeat(1),{line:n,char:0},null,!1);var i=_2.default.Cursor.getPosition();i.char+=1,_2.default.Cursor.setPosition(i)}},{key:"moveLinesHorizontalFinish",value:function moveLinesHorizontalFinish(){this.moveLinesHorizontalStartIsLineHead=null,this.moveLinesHorizontalEndIsLineHead=null}},{key:"moveLinesHorizontal",value:function moveLinesHorizontal(e){if(0!==e){if("number"!=typeof e)throw new Error("direction must be number");var t=(0,_lodash.cloneDeep)(_2.default.Cursor.getPosition()),n=_2.default.Selection.getRange({normalizeOrder:!0}),i=n.start,r=n.end;null===this.moveLinesHorizontalStartIsLineHead&&(this.moveLinesHorizontalStartIsLineHead=i.line!==r.line&&0===i.char),null===this.moveLinesHorizontalEndIsLineHead&&(this.moveLinesHorizontalEndIsLineHead=i.line!==r.line&&0===r.char),i.line===r.line&&(i.line=r.line=t.line);var l=this.moveLinesHorizontalEndIsLineHead?r.line-1:r.line;if(e<0)for(var a=i.line;a<l+1;a++)if(this.lines.at(a).text.length>0&&this.getIndent(a)<-1*e)return;for(var s=i.line;s<l+1;s++)s!==i.line&&0===this.lines.at(s).text.length||(e>0?this.addChar(" ".repeat(e),{line:s,char:0},null,!1):this.deleteChar(e,{line:s,char:-1*e},null,!1));this.moveLinesHorizontalStartIsLineHead||(i.char=(0,_lodash.max)([0,i.char+e])),this.moveLinesHorizontalEndIsLineHead||(r.char=(0,_lodash.max)([0,r.char+e])),_2.default.Selection.setRange({start:i,end:r}),t.line===r.line&&this.moveLinesHorizontalEndIsLineHead?_2.default.Cursor.setPosition(r):(t.char=(0,_lodash.max)([0,t.char+e]),_2.default.Cursor.setPosition(t))}}},{key:"moveLinesVertical",value:function moveLinesVertical(e){var t=this;if(0!==e){e<-1?e=-1:e>1&&(e=1);var n=void 0,i=void 0;if(!((n=i=_2.default.Cursor.getPosition().line)>=this.lines.length)){if(_2.default.Selection.hasSelection()){var r=_2.default.Selection.getRange({normalizeOrder:!0});n=r.start.line,i=r.end.line}if(0!==e&&!(e<0&&n<1||e>0&&i>this.lines.length-2)){for(var l=(0,_lodash.range)(n,i+1).map(function(e){return t.lines.at(e)}),a=0;a<l.length;a++)this.lines.delete(n);for(var s=null,o=0;o<l.length;o++){var u=(0,_lodash.cloneDeep)(l[o]);u.id=this.generateNewId(),0===o&&(s=u.id),this.lines.insert(n+e+o,u)}var h=null;if(_2.default.Selection.hasSelection()&&((h=_2.default.Selection.getRange({normalizeOrder:!0})).start.line+=e,h.end.line+=e,_2.default.Selection.setRange(h)),h){var d=e<0?h.start:h.end;_2.default.Cursor.setPosition(d,{scrollInView:!0})}else{var f=_2.default.Cursor.getPosition();f.line+=e,_2.default.Cursor.setPosition(f,{scrollInView:!0})}(0,_browser.isTouchDevice)()&&s&&(_2.default.MobileOutlineEdit.movingVertical=!0,_2.default.Selection.hasSelection()||_2.default.LinePermalink.set(s,{source:"UI"}))}}}}}]),Line}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/line.js")
    },{"../../../share/debug":566,"../../../share/id":586,"../lib/browser":457,"./":520,"./base-store":511,"./line-array":523}],527:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_apiClient=require("../lib/api-client/");function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var i=t[r](a),o=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.default=new(function(){function Login(){_classCallCheck(this,Login),this._data=null}return _createClass(Login,[{key:"get",value:function get(){return this._data}},{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(!this._data){n.next=2;break}return n.abrupt("return",this._data);case 2:return n.next=4,_apiClient.apiClient.get("/api/login/strategies");case 4:return e=n.sent,t=e.data,this._data=t,n.abrupt("return",this._data);case 8:case"end":return n.stop()}},_callee,this)}));return function load(){return e.apply(this,arguments)}}()}]),Login}());

    },{"../lib/api-client/":452}],528:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function MobileOutlineEdit(){_classCallCheck(this,MobileOutlineEdit);var e=_possibleConstructorReturn(this,(MobileOutlineEdit.__proto__||Object.getPrototypeOf(MobileOutlineEdit)).call(this));return e.reset(),e}return _inherits(MobileOutlineEdit,_baseStore2.default),_createClass(MobileOutlineEdit,[{key:"reset",value:function reset(){this.movingVertical=!1}},{key:"movingVertical",set:function set(e){this._movingVertical=e,this.emitChange()},get:function get(){return this._movingVertical}}]),MobileOutlineEdit}());

    },{"./base-store":511}],529:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_deepEqual=require("deep-equal"),_deepEqual2=_interopRequireDefault(_deepEqual),_browserInfo=require("browser-info"),_browserInfo2=_interopRequireDefault(_browserInfo);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function MobileSelection(){_classCallCheck(this,MobileSelection);var e=_possibleConstructorReturn(this,(MobileSelection.__proto__||Object.getPrototypeOf(MobileSelection)).call(this));return e.TIMER_EPS=400,e.HEAD=-1,e.TAIL=1,e.startCursorPosition=null,e.longTouched=!1,e}return _inherits(MobileSelection,_baseStore2.default),_createClass(MobileSelection,[{key:"resetUserIconNums",value:function resetUserIconNums(){this.userIconNums=0}},{key:"incrementUserIconNums",value:function incrementUserIconNums(){return this.userIconNums+=1,this.userIconNums}},{key:"clearTouchTimer",value:function clearTouchTimer(){this.touchTimer&&clearTimeout(this.touchTimer)}},{key:"initialize",value:function initialize(){this.touchTimer=null,this.movingSide=0,this.rangeBefore=null,this.resetUserIconNums(),_2.default.MobileOutlineEdit.reset()}},{key:"setStartPosition",value:function setStartPosition(e){this.startCursorPosition=(0,_lodash.cloneDeep)(e)}},{key:"showPopupMenu",value:function showPopupMenu(e){var t=this,i=e.event,n=e.cursorPosition;this.clearTouchTimer(),this.touchTimer=setTimeout(function(){i.preventDefault(),i.stopPropagation(),t.initialize(),t.longTouched=!0,_2.default.Cursor.showPopupMenu(),_2.default.Cursor.setPosition(n)},this.TIMER_EPS)}},{key:"wordRange",value:function wordRange(e){var t=(0,_lodash.cloneDeep)(e),i=(0,_lodash.cloneDeep)(e);return _2.default.Cursor.isAtLineHead()&&_2.default.Cursor.isAtLineTail()?(t.line>0&&(t.line=t.line-1,t.char=0,i.char=0),{start:t,end:i}):_2.default.Cursor.isAtLineHead()?(t.char=0,i.char=_2.default.Cursor.getWordTail(),{start:t,end:i}):_2.default.Cursor.isAtLineTail()?(t.char=_2.default.Cursor.getWordHead(),{start:t,end:i}):(t.char=_2.default.Cursor.getWordHead(),i.char=_2.default.Cursor.getWordTail(),{start:t,end:i})}},{key:"createSelection",value:function createSelection(){var e=this,t=_2.default.Cursor.getPosition();this.clearTouchTimer(),this.touchTimer=requestAnimationFrame(function(){e.initialize();var i=e.wordRange(t);_2.default.Cursor.setPosition(t),_2.default.Cursor.setPosition(i.end,{source:"mouse"}),_2.default.Selection.setRange(i),_2.default.Cursor.hide(),e.emitChange()}),this.emitChange()}},{key:"detectMovingSide",value:function detectMovingSide(e){var t=e.range,i=this.startCursorPosition;return i.line===t.start.line&&t.start.line===t.end.line?Math.abs(i.char-t.start.char)<Math.abs(i.char-t.end.char)?this.HEAD:this.TAIL:i.line<=t.start.line?this.HEAD:i.line>=t.end.line?this.TAIL:Math.abs(i.line-t.start.line)<Math.abs(i.line-t.end.line)?this.HEAD:this.TAIL}},{key:"moveSelection",value:function moveSelection(e){var t={},i=_2.default.Selection.getRange();this.movingSide||(this.movingSide=this.detectMovingSide({range:i})),this.movingSide===this.HEAD?(t.start=e,t.end=i.end):(t.start=i.start,t.end=e),(0,_deepEqual2.default)(t.start,t.end)||(_2.default.Selection.setRange(t),_2.default.MobileOutlineEdit.reset(),this.emitChange())}},{key:"pauseSelection",value:function pauseSelection(){this.clearTouchTimer(),this.movingSide=0;var e=_2.default.Selection.getRange({normalizeOrder:!0});_2.default.Selection.setRange(e),this.emitChange()}},{key:"clearSelectionIfNotMoved",value:function clearSelectionIfNotMoved(){var e=_2.default.Selection.getRange();this.rangeBefore||(this.rangeBefore=(0,_lodash.cloneDeep)(e)),_2.default.Selection.hasSelection(e)&&!this.movingSide&&(0,_deepEqual2.default)(this.rangeBefore,e)?this.clearSelection():this.rangeBefore=(0,_lodash.cloneDeep)(e)}},{key:"clearSelection",value:function clearSelection(){_2.default.Selection.clear(),_2.default.Cursor.hide()}},{key:"getMovingSide",value:function getMovingSide(){return this.movingSide}},{key:"os",get:function get(){return(0,_browserInfo2.default)().os}}]),MobileSelection}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./":520,"./base-store":511,"browser-info":60,"deep-equal":105}],530:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_apiClient=require("../lib/api-client/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,i){try{var o=t[r](i),a=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function Notification(){_classCallCheck(this,Notification);var e=_possibleConstructorReturn(this,(Notification.__proto__||Object.getPrototypeOf(Notification)).call(this));return e._notifications=[],e}return _inherits(Notification,_baseStore2.default),_createClass(Notification,[{key:"clear",value:function clear(){this._notifications=[],this.emitChange()}},{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,n;return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_apiClient.apiClient.get("/api/projects/"+e+"/notifications");case 2:return t=r.sent,n=t.data,this._notifications=n,this.emitChange(),r.abrupt("return",this._notifications);case 7:case"end":return r.stop()}},_callee,this)}));return function load(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var n,r;return regeneratorRuntime.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,_apiClient.apiClient.post("/api/projects/"+e+"/notifications",t);case 2:return n=i.sent,r=n.data,this._notifications.push(r),this.emitChange(),i.abrupt("return",r);case 7:case"end":return i.stop()}},_callee2,this)}));return function create(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e,t){var n;return regeneratorRuntime.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_apiClient.apiClient.delete("/api/projects/"+e+"/notifications/"+t);case 2:return(n=this._notifications.findIndex(function(e){return e.id===t}))>=0&&this._notifications.splice(n,1),this.emitChange(),r.abrupt("return",this._notifications);case 6:case"end":return r.stop()}},_callee3,this)}));return function _delete(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function get(){return this._notifications}}]),Notification}());

    },{"../lib/api-client/":452,"./base-store":511}],531:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}(),_=require("./"),_2=_interopRequireDefault(_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var debug=require("../../../share/debug")(__filename);exports.default=new(function(){function PageAccess(){_classCallCheck(this,PageAccess)}return _createClass(PageAccess,[{key:"sync",value:function sync(){var e=_2.default.Page.id;e&&(_2.default.CurrentUser.get()&&(debug({pageId:e,userId:_2.default.CurrentUser.get().id,projectId:_2.default.CurrentProject.get().id}),_2.default.Socket.get().emit("page-access",{pageId:e,userId:_2.default.CurrentUser.get().id,projectId:_2.default.CurrentProject.get().id})))}}]),PageAccess}());

        }).call(this,"/src/client/js/stores/page-access.js")
    },{"../../../share/debug":566,"./":520}],532:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_localSettings=require("../lib/local-settings/"),_localSettings2=_interopRequireDefault(_localSettings),_responsive=require("../lib/responsive"),_pageListStyles=require("../constants/page-list-styles");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var KEY="pageListStyle";exports.default=new(function(e){function PageListStyle(){_classCallCheck(this,PageListStyle);var e=_possibleConstructorReturn(this,(PageListStyle.__proto__||Object.getPrototypeOf(PageListStyle)).call(this));return(0,_pageListStyles.isValidPageListStyle)(_localSettings2.default.get(KEY))||e.setStyle(_pageListStyles.PageListStyles.GRID),e}return _inherits(PageListStyle,_baseStore2.default),_createClass(PageListStyle,[{key:"setStyle",value:function setStyle(e){if(!_pageListStyles.isValidPageListStyle)throw new Error('invalid page list style "'+e);_localSettings2.default.set(KEY,e),this.emitChange()}},{key:"get",value:function get(){return(0,_responsive.whenXs)()?_pageListStyles.PageListStyles.GRID:_localSettings2.default.get(KEY)}}]),PageListStyle}());

    },{"../constants/page-list-styles":445,"../lib/local-settings/":467,"../lib/responsive":474,"./base-store":511}],533:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_cache=require("../lib/api-client/cache"),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),_=require("./"),_2=_interopRequireDefault(_),_responsive=require("../lib/responsive"),_localSettings=require("../lib/local-settings/"),_localSettings2=_interopRequireDefault(_localSettings);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(i,n){try{var a=t[i](n),s=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function PageList(){_classCallCheck(this,PageList);var e=_possibleConstructorReturn(this,(PageList.__proto__||Object.getPrototypeOf(PageList)).call(this));return e.data=[],e.count=0,e.skip=0,e.limit=(0,_responsive.whenXs)()?30:100,e.limitSearch=30,e._sort=_localSettings2.default.get("pageSort"),e.searchQuery="",e.loading=!1,e}return _inherits(PageList,_baseStore2.default),_createClass(PageList,[{key:"get",value:function get(){return this.data}},{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,i,n,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skip:0,useCache:!0},o=s.skip,u=s.useCache;return regeneratorRuntime.wrap(function _callee$(s){for(;;)switch(s.prev=s.next){case 0:return debug("load"),r=_2.default.CurrentProject.get().name,this.searchQuery=e,this.loading=!0,this.skip=o,i=_querystring2.default.stringify({skip:o,sort:this._sort,limit:e?this.limitSearch:this.limit,q:e}),n=e?"/api/pages/"+r+"/search/query?"+i:"/api/pages/"+r+"?"+i,s.next=9,(0,_cache.getWithCache)(n,{useCache:u});case 9:return a=s.sent,debug("pageList successfully loaded",a.data),0===o&&(this.data=[]),(t=this.data).splice.apply(t,[a.data.skip,a.data.limit].concat(_toConsumableArray(a.data.pages))),this.count=a.data.count,this.loading=!1,this.emitChange(),s.abrupt("return",a);case 17:case"end":return s.stop()}},_callee,this)}));return function load(t){return e.apply(this,arguments)}}()},{key:"hasNextPage",value:function hasNextPage(){return this.data&&this.count>this.data.length}},{key:"loadNextPage",value:function loadNextPage(){this.loading||this.hasNextPage()&&this.load(null,{skip:this.skip+this.limit})}},{key:"isSearch",get:function get(){return!!this.searchQuery}},{key:"sort",get:function get(){return this._sort},set:function set(e){this._sort=e,_localSettings2.default.set("pageSort",e),this.emitChange(),this.load(this.searchQuery)}}]),PageList}());

        }).call(this,"/src/client/js/stores/page-list.js")
    },{"../../../share/debug":566,"../lib/api-client/cache":451,"../lib/local-settings/":467,"../lib/responsive":474,"./":520,"./base-store":511,"querystring":197}],534:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function PageMenu(){_classCallCheck(this,PageMenu);var e=_possibleConstructorReturn(this,(PageMenu.__proto__||Object.getPrototypeOf(PageMenu)).call(this));return(0,_lodash.bindAll)(e,["addItem","reset"]),e.reset(),e}return _inherits(PageMenu,_baseStore2.default),_createClass(PageMenu,[{key:"initialize",value:function initialize(){_2.default.CurrentProject.addChangeListener(this.reset)}},{key:"reset",value:function reset(){this.menuName="default",this.menus=new Map(Object.entries({default:{image:null,items:[]}}))}},{key:"pageMenu",value:function pageMenu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.menuName=e,this}},{key:"removeAllItems",value:function removeAllItems(){this.menus.has(this.menuName)&&(this.menus.get(this.menuName).items=[])}},{key:"addSeparator",value:function addSeparator(){this._addToMenu({separator:!0}),this.emitChange()}},{key:"addItem",value:function addItem(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=e.image,i=e.onClick;if(!t)throw new Error("title is empty");if("function"!=typeof i)throw new Error("onClick is not a function");this._addToMenu({title:t,image:n,onClick:i,separator:!1}),this.emitChange()}},{key:"_addToMenu",value:function _addToMenu(e){if(e)return this.menus.has(this.menuName)?void this.menus.get(this.menuName).items.push(e):console.error('PageMenu("'+this.menuName+'") is not exists.')}},{key:"addMenu",value:function addMenu(e){var t=e.title,n=void 0===t?"default":t,i=e.image,r=e.onClick;if(!n)throw new Error("title is empty");if("string"!=typeof n)throw new Error("title is not a string");if(!i)throw new Error("image is empty");this.menus.has(n)||this.menus.set(n,{image:i,items:[],onClick:r}),this.emitChange()}}]),PageMenu}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./":520,"./base-store":511}],535:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),_page=require("page"),_page2=_interopRequireDefault(_page),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_apiClient=require("../lib/api-client/"),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_lineArray=require("./line-array"),_lineArray2=_interopRequireDefault(_lineArray),_pageTitle=require("../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function step(n,r){try{var a=t[n](r),s=a.value}catch(e){return void i(e)}if(!a.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function Page(){_classCallCheck(this,Page);var e=_possibleConstructorReturn(this,(Page.__proto__||Object.getPrototypeOf(Page)).call(this));return e.reset(),e}return _inherits(Page,_baseStore2.default),_createClass(Page,[{key:"initialize",value:function initialize(){var e=this;_2.default.Layout.addChangeListener(function(t){var i=t.store;t.event;"page"!==i.get()&&e.reset()})}},{key:"get",value:function get(){return this.data}},{key:"fetch",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,i;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return t=_2.default.CurrentProject.get().name,n.next=3,_apiClient.apiClient.get("/api/pages/"+t+"/"+(0,_pageTitle.encodeTitleURI)(e));case 3:return i=n.sent,n.abrupt("return",i.data);case 5:case"end":return n.stop()}},_callee,this)}));return function fetch(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t;return regeneratorRuntime.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.fetch(e);case 2:return t=i.sent,debug(t.title,t.id),_2.default.Sync.flushChange(),this.id=t.id,this.title=t.title,this.persistent=t.persistent,this.deleted=t.deleted,this.lines=new _lineArray2.default((0,_lodash.cloneDeep)(t.lines)),this.links=t.links,this.icons=t.icons,this.image=t.image,this.descriptions=t.descriptions,this.commitId=t.commitId,this.data=t,this.lastAccessed=t.lastAccessed,_2.default.Line.setLines(t.lines),_2.default.RelatedPage.compileSync({links:t.links,relatedPages:t.relatedPages}),this.emitChange("load"),i.abrupt("return",t);case 21:case"end":return i.stop()}},_callee2,this)}));return function load(t){return e.apply(this,arguments)}}()},{key:"reset",value:function reset(){this.id&&_2.default.Sync.flushChange(),this.id=null,this.title="",this.persistent=!1,this.deleted=!1,this.lines=new _lineArray2.default,this.links=[],this.icons={},this.image=null,this.descriptions=[],this.commitId=null,this.data=null,this.lastAccessed=null,this.emitChange()}},{key:"setTitle",value:function setTitle(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).from;this.title=e,"self"===t?this.emitChange("setTitle:self"):this.emitChange("setTitle")}},{key:"setPin",value:function setPin(e){this.data.pin=e,this.emitChange()}},{key:"delete",value:function _delete(){debug("deleted!!!"),_2.default.Sync.addChange({deleted:!0}),_2.default.Sync.finishChange()}},{key:"canDelete",value:function canDelete(){return this.persistent}},{key:"patch",value:function patch(e){var t=!0,i=!1,n=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;if(s.pageId!==this.id)return void console.warn("pageId mismatch");if(s.parentId!==this.commitId)return void console.warn("local HEAD and commit parent are mismatch");_2.default.Line.mergeChanges(s.changes,s.id),this.patchChanges(s.changes)}}catch(e){i=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}}},{key:"patchChanges",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,i,n,r,a,s,l,u,o,c,h,d=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).from;return regeneratorRuntime.wrap(function _callee3$(f){for(;;)switch(f.prev=f.next){case 0:for(t=_2.default.CurrentProject.get().name,i={},n=!0,r=!1,a=void 0,f.prev=5,s=e[Symbol.iterator]();!(n=(l=s.next()).done);n=!0)(u=l.value).lines||Object.assign(i,u);f.next=13;break;case 9:f.prev=9,f.t0=f.catch(5),r=!0,a=f.t0;case 13:f.prev=13,f.prev=14,!n&&s.return&&s.return();case 16:if(f.prev=16,!r){f.next=19;break}throw a;case 19:return f.finish(16);case 20:return f.finish(13);case 21:if(!i.deleted){f.next=26;break}return debug("page has been deleted",this.title),(0,_page2.default)("/"+t+"/"),_2.default.QuickSearch.delete(this.id),f.abrupt("return");case 26:if(i.title&&(_2.default.QuickSearch.update({id:this.id,title:i.title}),i.title!==this.title&&(debug("title has been changed:",i.title),this.setTitle(i.title,{from:d}),_page2.default.replace("/"+t+"/"+(0,_pageTitle.encodeTitleURI)(i.title),null,null,!1))),"number"==typeof i.pin&&i.pin!==this.pin&&(debug("pin has been changed:",i.pin),this.setPin(i.pin)),!i.links){f.next=38;break}return _2.default.QuickSearch.update({id:this.id,links:i.links}),this.links=i.links,debug("refresh related pages"),f.next=34,this.fetch(this.title);case 34:o=f.sent,c=o.links,h=o.relatedPages,_2.default.RelatedPage.compile({links:c,relatedPages:h});case 38:i.icons&&(this.icons=i.icons,debug("refresh icons")),i.hasOwnProperty("image")&&(this.image=i.image,debug("refresh image")),i.descriptions&&(this.descriptions=i.descriptions,debug("refresh descriptions")),this.persistent||(this.persistent=!0,this.emitChange());case 42:case"end":return f.stop()}},_callee3,this,[[5,9,13,21],[14,,16,20]])}));return function patchChanges(t){return e.apply(this,arguments)}}()},{key:"isTitleDuplicated",get:function get(){return!!this.persistent&&new RegExp("^"+(0,_lodash.escapeRegExp)(_2.default.Line.lines.getTitle())+"_\\d+$").test(this.title)}}]),Page}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/page.js")
    },{"../../../share/debug":566,"../../../share/page-title":589,"../lib/api-client/":452,"./":520,"./base-store":511,"./line-array":523,"page":169}],536:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_=require("./"),_2=_interopRequireDefault(_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.default=new(function(){function PopupMenu(){_classCallCheck(this,PopupMenu),(0,_lodash.bindAll)(this,["addButton","reset"]),this.reset()}return _createClass(PopupMenu,[{key:"initialize",value:function initialize(){_2.default.CurrentProject.addChangeListener(this.reset)}},{key:"reset",value:function reset(){this.buttons=[]}},{key:"addButton",value:function addButton(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=e.onClick;if(!t)throw new Error("title is empty");if("function"!=typeof n)throw new Error("onClick is not a function");this.buttons.push({title:t,onClick:n})}}]),PopupMenu}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./":520}],537:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_key=require("../constants/key"),_section=require("../../../share/decorate-lines/section");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function PresentationMode(){_classCallCheck(this,PresentationMode);var e=_possibleConstructorReturn(this,(PresentationMode.__proto__||Object.getPrototypeOf(PresentationMode)).call(this));return e.sections={},(0,_lodash.bindAll)(e,"onKeyDown"),e}return _inherits(PresentationMode,_baseStore2.default),_createClass(PresentationMode,[{key:"initialize",value:function initialize(){var e=this;_2.default.DisplayStyle.addChangeListener(function(){e.isEnable?window.addEventListener("keydown",e.onKeyDown,!1):window.removeEventListener("keydown",e.onKeyDown,!1)})}},{key:"goNextSection",value:function goNextSection(){this.currentSection<this.lastSection&&(this.currentSection+=1,this.emitChange(),requestAnimationFrame(function(){return window.scrollTo(0,0)}))}},{key:"goPrevSection",value:function goPrevSection(){this.currentSection>0&&(this.currentSection-=1,this.emitChange(),requestAnimationFrame(function(){return window.scrollTo(0,0)}))}},{key:"onKeyDown",value:function onKeyDown(e){switch(e.keyCode){case _key.Keys.LEFT:this.goPrevSection();break;case _key.Keys.RIGHT:this.goNextSection();break;case _key.Keys.ESCAPE:_2.default.DisplayStyle.disable("presentation")}}},{key:"isEnable",get:function get(){return _2.default.DisplayStyle.get("presentation")}},{key:"currentSection",get:function get(){return this.sections[_2.default.Page.id]||0},set:function set(e){this.sections[_2.default.Page.id]=e,this.emitChange()}},{key:"lastSection",get:function get(){var e=(0,_section.decorateSection)((0,_lodash.cloneDeep)(_2.default.Line.getAll()));return(0,_lodash.last)(e).section.number}}]),PresentationMode}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../../../share/decorate-lines/section":573,"../constants/key":444,"./":520,"./base-store":511}],538:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_apiClient=require("../lib/api-client/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var i=t[n](a),o=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function ProjectBackup(){_classCallCheck(this,ProjectBackup);var e=_possibleConstructorReturn(this,(ProjectBackup.__proto__||Object.getPrototypeOf(ProjectBackup)).call(this));return e.timestamps=[],e.enabled=!1,e}return _inherits(ProjectBackup,_baseStore2.default),_createClass(ProjectBackup,[{key:"disable",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,r;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e=_2.default.CurrentProject.get().name,t="/api/project-backup/"+e+"/disable",n.next=4,_apiClient.apiClient.get(t);case 4:r=n.sent,this.enabled=r.data.backupEnable,this.emitChange();case 7:case"end":return n.stop()}},_callee,this)}));return function disable(){return e.apply(this,arguments)}}()},{key:"enable",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,r,n,a,i;return regeneratorRuntime.wrap(function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:return e=_2.default.CurrentProject.get().name,t="/api/project-backup/"+e+"/enable",o.next=4,_apiClient.apiClient.get(t);case 4:r=o.sent,n=r.data,a=n.backups,i=n.backupEnable,this.enabled=i,this.timestamps=a.map(function(e){return e.backuped}),this.emitChange();case 9:case"end":return o.stop()}},_callee2,this)}));return function enable(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e,t,r,n,a,i;return regeneratorRuntime.wrap(function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:return debug("load"),e=_2.default.CurrentProject.get().name,t="/api/project-backup/"+e+"/list",o.next=5,_apiClient.apiClient.get(t);case 5:r=o.sent,debug("projectBackupList successfully loaded",r.data.length),n=r.data,a=n.backups,i=n.backupEnable,this.timestamps=a.map(function(e){return e.backuped}),this.enabled=i,this.emitChange();case 11:case"end":return o.stop()}},_callee3,this)}));return function load(){return e.apply(this,arguments)}}()}]),ProjectBackup}());

        }).call(this,"/src/client/js/stores/project-backup.js")
    },{"../../../share/debug":566,"../lib/api-client/":452,"./":520,"./base-store":511}],539:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_apiClient=require("../lib/api-client/"),_=require("./"),_2=_interopRequireDefault(_),_localSettings=require("../lib/local-settings/"),_localSettings2=_interopRequireDefault(_localSettings);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,i){try{var o=t[n](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function ProjectList(){_classCallCheck(this,ProjectList);var e=_possibleConstructorReturn(this,(ProjectList.__proto__||Object.getPrototypeOf(ProjectList)).call(this));return e._projects=[],(0,_lodash.bindAll)(e,["saveLastProject","reloadProjectInfo","onSyncSuccess"]),e}return _inherits(ProjectList,_baseStore2.default),_createClass(ProjectList,[{key:"initialize",value:function initialize(){var e=this;_2.default.CurrentUser.addChangeListener(function(){_2.default.CurrentUser.isGuest||e.load()}),_2.default.CurrentProject.addChangeListener(this.saveLastProject),_2.default.CurrentProject.addChangeListener(this.reloadProjectInfo),_2.default.Sync.on("syncSuccess",this.onSyncSuccess)}},{key:"onSyncSuccess",value:function onSyncSuccess(){var e=_2.default.CurrentProject.get();if(e){var t=this._projects.find(function(t){return t.id===e.id});t&&(t.updated=Math.floor(Date.now()/1e3),this.emitChange())}}},{key:"reloadProjectInfo",value:function reloadProjectInfo(){var e=_2.default.CurrentProject.get(),t=this.findById(e.id);t&&(t.name=e.name,t.displayName=e.displayName,t.publicVisible=e.publicVisible,t.theme=e.theme,t.plan=e.plan,t.trialing=e.trialing,t.billingId=e.billingId,this.emitChange())}},{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,r;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,_lodash.toPairs)(_localSettings2.default.get("projectsLastAccessed")).filter(function(e){var t=_slicedToArray(e,2),r=t[0];t[1];return/^[a-f\d]{24}$/.test(r)}).sort(function(e,t){return e[1]>t[1]?-1:1}).map(function(e){return e[0]}).slice(0,100),n.next=3,_apiClient.apiClient.get("/api/projects",{params:{ids:e}});case 3:return t=n.sent,r=t.data,this._projects=r.projects,this.emitChange(),n.abrupt("return",this.projects);case 8:case"end":return n.stop()}},_callee,this)}));return function load(){return e.apply(this,arguments)}}()},{key:"findById",value:function findById(e){return e?this._projects.find(function(t){return t.id===e}):null}},{key:"saveLastProject",value:function saveLastProject(){var e=_2.default.CurrentProject.get();e&&_2.default.CurrentUser.isProjectMember&&_localSettings2.default.set("lastProject",e.id)}},{key:"create",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,r,n=e.projectName,i=e.publicVisible,o=e.plan;return regeneratorRuntime.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_apiClient.apiClient.post("/api/projects",{projectName:n,publicVisible:i,plan:o});case 2:t=e.sent,r=t.data,this.add(r);case 5:case"end":return e.stop()}},_callee2,this)}));return function create(t){return e.apply(this,arguments)}}()},{key:"add",value:function add(e){this._projects.unshift(e),this.emitChange()}},{key:"remove",value:function remove(e){if(!e||!e.id)throw new Error("invalid project");this._projects=this._projects.filter(function(t){return t.id!==e.id}),this.emitChange()}},{key:"getAll",value:function getAll(){return this._projects}},{key:"get",value:function get(){return this._projects.filter(function(e){return e.isMember})}},{key:"getWatchProjects",value:function getWatchProjects(){return this._projects.filter(function(e){return!e.isMember})}},{key:"lastProjectId",get:function get(){return _localSettings2.default.get("lastProject")}},{key:"lastProject",get:function get(){return this.findById(this.lastProjectId)}}]),ProjectList}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../lib/api-client/":452,"../lib/local-settings/":467,"./":520,"./base-store":511}],540:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_=require("./"),_2=_interopRequireDefault(_),_localSettings=require("../lib/local-settings/"),_localSettings2=_interopRequireDefault(_localSettings);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var debug=require("../../../share/debug")(__filename);exports.default=new(function(){function ProjectsLastAccessed(){_classCallCheck(this,ProjectsLastAccessed),this.key="projectsLastAccessed",(0,_lodash.bindAll)(this,"reset","startTimer","stopTimer","saveProjectsLastAccessed")}return _createClass(ProjectsLastAccessed,[{key:"initialize",value:function initialize(){_2.default.ProjectList.addChangeListener(this.reset),_2.default.CurrentProject.addChangeListener(this.startTimer)}},{key:"get",value:function get(){return _localSettings2.default.get(this.key)}},{key:"set",value:function set(e){_localSettings2.default.set(this.key,e)}},{key:"remove",value:function remove(e){var t=this.get();delete t[e],this.set(t);var r=_2.default.CurrentProject.get();r&&r.id===e&&this.stopTimer()}},{key:"reset",value:function reset(){_2.default.ProjectList.removeChangeListener(this.reset);var e=this.get(),t=!0,r=!1,s=void 0;try{for(var i,a=_2.default.ProjectList.get()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var n=i.value;e[n.id]||(e[n.id]=Math.floor(Date.now()/1e3))}}catch(e){r=!0,s=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw s}}this.set(e)}},{key:"startTimer",value:function startTimer(){this.timer||(this.timer=setInterval(this.saveProjectsLastAccessed,1e3),debug("start timer"))}},{key:"stopTimer",value:function stopTimer(){this.timer&&(clearInterval(this.timer),this.timer=null,debug("stop timer"))}},{key:"saveProjectsLastAccessed",value:function saveProjectsLastAccessed(){var e=_2.default.CurrentProject.get();if(e){var t=this.get();t[e.id]=Math.floor(Date.now()/1e3),this.set(t)}}}]),ProjectsLastAccessed}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/projects-last-accessed.js")
    },{"../../../share/debug":566,"../lib/local-settings/":467,"./":520}],541:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_hasDom=require("has-dom"),_hasDom2=_interopRequireDefault(_hasDom),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_arrayPermutationSimple=require("array-permutation-simple"),_arrayPermutationSimple2=_interopRequireDefault(_arrayPermutationSimple),_asearch=require("asearch"),_asearch2=_interopRequireDefault(_asearch),_asyncSingleton=require("async-singleton"),_asyncSingleton2=_interopRequireDefault(_asyncSingleton),_apiClient=require("../lib/api-client/"),_pageTitle=require("../../../share/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,i){try{var a=t[n](i),o=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function QuickSearch(){_classCallCheck(this,QuickSearch);var e=_possibleConstructorReturn(this,(QuickSearch.__proto__||Object.getPrototypeOf(QuickSearch)).call(this));return e.load=(0,_asyncSingleton2.default)(e.load.bind(e),{trailing:!1}),e.compile=(0,_asyncSingleton2.default)(e.compile.bind(e),{trailing:!0}),(0,_hasDom2.default)()&&Worker&&(e.worker=new Worker("/assets/dedicated-worker.js")),e}return _inherits(QuickSearch,_baseStore2.default),_createClass(QuickSearch,[{key:"initialize",value:function initialize(){var e=this;_2.default.CurrentProject.addChangeListener(function(){e.ready=!1,e.source=null,e.pages=[],e.titleLcMap=new Map,e.emitChange(),requestAnimationFrame(function(){return e.load()})}),_2.default.Socket.addChangeListener(function(t){"reconnect"===t.event&&e.load()}),_2.default.Page.addChangeListener(function(){return e.compile()})}},{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_2.default.CurrentProject.get().name;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return debug("load "+r),n.next=3,_apiClient.apiClient.get("/api/pages/"+r+"/search/titles");case 3:return e=n.sent,t=e.data,this.source=t,n.abrupt("return",this.compile());case 7:case"end":return n.stop()}},_callee,this)}));return function load(){return e.apply(this,arguments)}}()},{key:"compile",value:function compile(){var e=this;if(this.worker&&this.source)return new Promise(function(t,r){debug("start compile "+e.source.length+" pages"),e.worker.onmessage=function(n){var i=n.data,a=i.title,o=i.result;if("quick-search:compile"===a){var u=o.pages,l=o.titleLcMap;return Array.isArray(u)?l instanceof Map?(debug("compiled "+u.length+" pages"),e.pages=u,e.titleLcMap=l,e.ready=!0,requestAnimationFrame(function(){return e.emitChange()}),t(u)):r(new Error("invalid result: titleLcHash is not exists")):r(new Error("invalid result: pages is not an Array"))}},e.worker.postMessage({title:"quick-search:compile",body:{pages:e.source,currentPageId:_2.default.Page.id}})})}},{key:"update",value:function update(e){var t=e.id,r=e.title,n=e.links,i=void 0===n?[]:n;if(debug("update",{id:t,title:r,links:i}),this.source){var a=this.source.find(function(e){return e.id===t}),o=Math.floor(Date.now()/1e3);a?(r&&(a.title=r),i&&(a.links=i),a.updated=o):this.source.unshift({id:t,title:r,links:i,updated:o}),this.compile()}}},{key:"delete",value:function _delete(e){debug("delete",e),this.source=this.source.filter(function(t){return t.id!==e}),this.compile()}},{key:"updateLink",value:function updateLink(e){var t=e.from,r=e.to,n=(0,_pageTitle.toTitleLc)(t),i=!0,a=!1,o=void 0;try{for(var u,l=this.source[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;s.links=s.links.map(function(e){return(0,_pageTitle.toTitleLc)(e)===n?r:e})}}catch(e){a=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}this.compile()}},{key:"findById",value:function findById(e){return this.pages.find(function(t){return t.id===e})}},{key:"find",value:function find(e){var t=(0,_pageTitle.toTitleLc)(e);return this.pages.find(function(e){return e.titleLc===t})}},{key:"exists",value:function exists(e){return this.titleLcMap.has((0,_pageTitle.toTitleLc)(e))}},{key:"regexSearch",value:function regexSearch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\s+/g;if(e.length<1)return this.pages;var r=e.split(t).map(_lodash.escapeRegExp),n=void 0;return n=r.length<5?new RegExp("("+(0,_arrayPermutationSimple2.default)(r).map(function(e){return e.join(".*")}).join("|")+")","i"):new RegExp((0,_lodash.escapeRegExp)(e).replace(t,".*"),"i"),this.pages.filter(function(e){return n.test(e.title)}).sort(function(e,t){return e.title.length-t.title.length})}},{key:"ambiguousSearch",value:function ambiguousSearch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e.length<1)return this.pages;var t=new _asearch2.default(" "+e+" ");return this.pages.filter(function(e){return t.match(e.title,1)}).sort(function(e,t){return e.title.length-t.title.length})}},{key:"search",value:function search(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],r=this.regexSearch(e,t);return e.length<3?r:r.length>10?r:(0,_lodash.uniqBy)(r.concat(this.ambiguousSearch(e)),"titleLc")}},{key:"linkSuggest",value:function linkSuggest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],r=Object.assign({},{limit:5},t),n=r.limit,i=r.splitter,a=new RegExp("^"+(0,_lodash.escapeRegExp)(e),"i");return this.search(e,i).filter(function(t){return t.title!==_2.default.Page.title&&t.title!==e}).sort(this.sortByIcons).sort(function(e,t){return a.test(e.title)?a.test(t.title)?e.title.length-t.title.length:-1:a.test(t.title)?1:0}).slice(0,n)}},{key:"hashTagSuggest",value:function hashTagSuggest(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:5}).limit,n=[];if(/^_+/.test(t)){var i=new RegExp("^"+(0,_lodash.escapeRegExp)(t),"i");n=this.pages.filter(function(e){return(0,_pageTitle.spaceToUnderscore)(e.title)!==t&&e.title!==_2.default.Page.title&&i.test(e.title)}).sort(function(e,t){return e.title.length-t.title.length})}return/^_+$/.test(t)?n:n.length>=r?n:((e=n).push.apply(e,_toConsumableArray(this.linkSuggest(t,{limit:r-n.length,splitter:/_+/g}).filter(function(e){return(0,_pageTitle.spaceToUnderscore)(e.title)!==t}))),(0,_lodash.uniqBy)(n,"id"))}},{key:"sortByIcons",get:function get(){var e=new Map,t=!0,r=!1,n=void 0;try{for(var i,a=Object.entries(_2.default.Page.icons)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,u=_slicedToArray(o,2),l=u[0],s=u[1],c=l.toLowerCase();e.has(c)?e.set(c,e.get(c)+s):e.set(c,s)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}return function(t,r){var n=e.get(t.titleLc)||0;return(e.get(r.titleLc)||0)-n}}}]),QuickSearch}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/quick-search.js")
    },{"../../../share/debug":566,"../../../share/page-title":589,"../lib/api-client/":452,"./":520,"./base-store":511,"array-permutation-simple":1,"asearch":2,"async-singleton":17,"has-dom":143}],542:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_hasDom=require("has-dom"),_hasDom2=_interopRequireDefault(_hasDom),_asyncSingleton=require("async-singleton"),_asyncSingleton2=_interopRequireDefault(_asyncSingleton),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_pageTitle=require("../../../share/page-title"),_relatedPages=require("../../../share/related-pages"),_localSettings=require("../lib/local-settings/"),_localSettings2=_interopRequireDefault(_localSettings);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function RelatedPage(){_classCallCheck(this,RelatedPage);var e=_possibleConstructorReturn(this,(RelatedPage.__proto__||Object.getPrototypeOf(RelatedPage)).call(this));return e._sort=_localSettings2.default.get("relatedPageSort"),e._links=[],e._relatedPages=null,e.compile=(0,_asyncSingleton2.default)(e.compile.bind(e),{trailing:!0}),(0,_hasDom2.default)()&&Worker&&(e.worker=new Worker("/assets/dedicated-worker.js")),e}return _inherits(RelatedPage,_baseStore2.default),_createClass(RelatedPage,[{key:"compileSync",value:function compileSync(e){var t=e.links,r=e.relatedPages;debug("set",r),this._links=t,this._relatedPages=r;var i=_2.default.Page.title,s=this._sort,n=(0,_relatedPages.compileRelatedPages)({currentPageTitle:i,links:t,relatedPages:r,sort:s}),a=n.links1hop,o=n.links2hop,l=n.icons1hop,u=n.existPagesLc,c=n.emptyLinks;Object.assign(this,{links1hop:a,links2hop:o,icons1hop:l,existPagesLc:u,emptyLinks:c}),this.emitChange()}},{key:"compile",value:function compile(e){var t=this,r=e.links,i=e.relatedPages;if(this.worker)return debug("compile",i),this._links=r,this._relatedPages=i,new Promise(function(e,s){t.worker.onmessage=function(r){var i=r.data,n=i.title,a=i.result;if("related-page:compile"===n){var o=a.links1hop,l=a.links2hop,u=a.existPagesLc,c=a.emptyLinks;return o&&l&&u&&c?(debug("compile done",{links1hop:o,links2hop:l}),Object.assign(t,{links1hop:o,links2hop:l,existPagesLc:u,emptyLinks:c}),t.emitChange(),e(r.data)):s(new Error("invalid result"))}};var n=_2.default.Page.title,a=t._sort;t.worker.postMessage({title:"related-page:compile",body:{currentPageTitle:n,links:r,relatedPages:i,sort:a}})})}},{key:"exists",value:function exists(e){return!!this.existPagesLc&&this.existPagesLc.includes((0,_pageTitle.toTitleLc)(e))}},{key:"linksAndIconsFrom",get:function get(){var e=(0,_pageTitle.toTitleLc)(_2.default.Page.title);return[].concat(_toConsumableArray((this.links1hop||[]).filter(function(t){return t.linksLc.includes(e)})),_toConsumableArray(this.icons1hop||[]))}},{key:"sort",get:function get(){return this._sort},set:function set(e){this._sort=e,_localSettings2.default.set("relatedPageSort",e),this._relatedPages&&this.compile({links:this._links,relatedPages:this._relatedPages})}}]),RelatedPage}());

        }).call(this,"/src/client/js/stores/related-page.js")
    },{"../../../share/debug":566,"../../../share/page-title":589,"../../../share/related-pages":592,"../lib/local-settings/":467,"./":520,"./base-store":511,"async-singleton":17,"has-dom":143}],543:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function SearchForm(){_classCallCheck(this,SearchForm);var e=_possibleConstructorReturn(this,(SearchForm.__proto__||Object.getPrototypeOf(SearchForm)).call(this));return(0,_lodash.bindAll)(e,"onLayoutStoreChange"),e.reset(),e}return _inherits(SearchForm,_baseStore2.default),_createClass(SearchForm,[{key:"initialize",value:function initialize(){_2.default.Layout.addChangeListener(this.onLayoutStoreChange)}},{key:"reset",value:function reset(){this._value="",this.emitChange()}},{key:"get",value:function get(){return this._value}},{key:"set",value:function set(e){if("string"!=typeof e)throw new Error("ArgumentError: value is not a string");this._value=e,this.emitChange()}},{key:"onLayoutStoreChange",value:function onLayoutStoreChange(){"list"===_2.default.Layout.get()&&(_2.default.PageList.isSearch||this.reset())}}]),SearchForm}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./":520,"./base-store":511}],544:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_jquery="undefined"!=typeof window?window.window.$:"undefined"!=typeof global?global.window.$:null,_jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function Selection(){_classCallCheck(this,Selection);var e=_possibleConstructorReturn(this,(Selection.__proto__||Object.getPrototypeOf(Selection)).call(this));return e.data={start:{line:0,char:0},end:{line:0,char:0}},e}return _inherits(Selection,_baseStore2.default),_createClass(Selection,[{key:"getRange",value:function getRange(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).normalizeOrder?this.normalizeOrder(this.data):this.data}},{key:"setRange",value:function setRange(e){if(!e.start||!e.end)throw new Error("invalid range");this.data=(0,_lodash.cloneDeep)(e),this.emitChange()}},{key:"clear",value:function clear(){this.data={start:{line:0,char:0},end:{line:0,char:0}},this.emitChange()}},{key:"normalizeOrder",value:function normalizeOrder(e){if(1e4*e.end.line+e.end.char<1e4*e.start.line+e.start.char){var t=e.start;return{start:(0,_lodash.cloneDeep)(e.end),end:(0,_lodash.cloneDeep)(t)}}return e}},{key:"getSelectedText",value:function getSelectedText(){if(!this.hasSelection(this.data))return"";var e=this.normalizeOrder(this.data);if(e.start.line===e.end.line){var t=this.lines[e.start.line].text;return t=t.charSubstr(e.start.char,e.end.char-e.start.char)}for(var n=[],r=void 0,i=e.start.line;i<=e.end.line;i++){var a=(r=this.lines[i])?r.text:void 0;if(void 0===a)return"";i===e.start.line&&i===e.end.line?a=a.charSubstr(e.start.char,e.end.char-e.start.char):i===e.start.line?a=a.charSubstr(e.start.char):i===e.end.line&&(a=a.charSubstr(0,e.end.char)),n.push(a)}return n.join("\n")}},{key:"getSelectionsHeight",value:function getSelectionsHeight(){var e=(0,_jquery2.default)(".selection");if(0===e.length)return 0;var t=e[0],n=e[e.length-1];return n.offsetTop+n.offsetHeight-t.offsetTop}},{key:"getSelectionTop",value:function getSelectionTop(){var e=(0,_jquery2.default)(".selection");return 0===e.length?0:e[0].offsetTop}},{key:"selectAll",value:function selectAll(){var e=this.lines[this.lines.length-1].text.charLength,t=this.lines.length-1;return this.setRange({start:{line:0,char:0},end:{line:t,char:e}})}},{key:"hasSelection",value:function hasSelection(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data;return!(e.start.line===e.end.line&&e.start.char===e.end.char)}},{key:"hasSingleLineSelection",value:function hasSingleLineSelection(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data;return e.start.line===e.end.line&&e.start.char!==e.end.char}},{key:"hasMultiLinesSelection",value:function hasMultiLinesSelection(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data;return e.start.line!==e.end.line}},{key:"hasSelectionAll",value:function hasSelectionAll(){if(!this.hasSelection())return!1;var e=this.normalizeOrder(this.data),t=e.start,n=e.end;return 0===t.line&&0===t.char&&n.line===this.lines.length-1&&n.char===this.lines[n.line].text.charLength}},{key:"lines",get:function get(){return _2.default.Line.getAll()}}]),Selection}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./":520,"./base-store":511}],545:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function SharedCursor(){_classCallCheck(this,SharedCursor);var e=_possibleConstructorReturn(this,(SharedCursor.__proto__||Object.getPrototypeOf(SharedCursor)).call(this));return(0,_lodash.bindAll)(e,"clear","onSync"),e.clear(),e}return _inherits(SharedCursor,_baseStore2.default),_createClass(SharedCursor,[{key:"initialize",value:function initialize(){_2.default.Page.addChangeListener(this.clear)}},{key:"clear",value:function clear(){debug("clear"),this.cursors={},this.emitChange()}},{key:"getAll",value:function getAll(){return this.cursors}},{key:"onSync",value:function onSync(e){e.pageId!==_2.default.Page.id?delete this.cursors[e.socketId]:this.cursors[e.socketId]=e,this.debounced||(this.debounced=(0,_lodash.debounce)(this.emitChange,100)),this.debounced()}}]),SharedCursor}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/shared-cursor.js")
    },{"../../../share/debug":566,"./":520,"./base-store":511}],546:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CommitSocket;var _=require("../"),_2=_interopRequireDefault(_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var debug=require("../../../../share/debug")(__filename);function CommitSocket(e){e.on("commit",function(e){debug("received commit",e),"page"===e.kind&&e.changes&&e.changes.length>0&&_2.default.Sync.queue.addPriority("patch",[e]),null!=e.cursor&&_2.default.SharedCursor.onSync(e)}),e.on("projectUpdatesStream:commit",function(e){"page"===e.kind&&_2.default.Stream.patch(e)}),e.once("disconnect",function(){e.on("connect",function(){"page"===_2.default.Layout.get()&&_2.default.Sync.queue.addPriority("pull")})})}

        }).call(this,"/src/client/js/stores/socket/commit.js")
    },{"../":520,"../../../../share/debug":566}],547:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=CursorSocket;var _=require("../"),_2=_interopRequireDefault(_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var debug=require("../../../../share/debug")(__filename);function CursorSocket(e){e.on("cursor",function(e){debug("received",e),_2.default.SharedCursor.onSync(e)})}

        }).call(this,"/src/client/js/stores/socket/cursor.js")
    },{"../":520,"../../../../share/debug":566}],548:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_socket="undefined"!=typeof window?window.window.io:"undefined"!=typeof global?global.window.io:null,_socket2=_interopRequireDefault(_socket),_baseStore=require("../base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("../"),_2=_interopRequireDefault(_),_joinRoom=require("./join-room"),_joinRoom2=_interopRequireDefault(_joinRoom),_commit=require("./commit"),_commit2=_interopRequireDefault(_commit),_cursor=require("./cursor"),_cursor2=_interopRequireDefault(_cursor),_quickSearch=require("./quick-search"),_quickSearch2=_interopRequireDefault(_quickSearch),_protocolCompatibility=require("./protocol-compatibility"),_protocolCompatibility2=_interopRequireDefault(_protocolCompatibility);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../../share/debug")(__filename);exports.default=new(function(e){function Socket(){_classCallCheck(this,Socket);var e=_possibleConstructorReturn(this,(Socket.__proto__||Object.getPrototypeOf(Socket)).call(this));return(0,_lodash.bindAll)(e,["setup","onUserChange"]),e._socket=null,e.connected=!1,e}return _inherits(Socket,_baseStore2.default),_createClass(Socket,[{key:"initialize",value:function initialize(){_2.default.CurrentUser.addChangeListener(this.onUserChange)}},{key:"onUserChange",value:function onUserChange(){if(_2.default.CurrentUser.get()){this._socket=(0,_socket2.default)(location.origin,{reconnectionDelay:5e3,transports:["websocket"]}),this.setup(this._socket)}_2.default.CurrentUser.removeChangeListener(this.onUserChange)}},{key:"get",value:function get(){return this._socket}},{key:"setup",value:function setup(e){var t=this;e.on("connect",function(){debug("connected!!"),t.connected=!0,t.emitChange("connect")}),e.on("disconnect",function(){debug("disconnected!"),t.connected=!1,t.emitChange("disconnect")}),e.on("reconnect",function(){debug("reconnected!"),t.connected=!0,t.emitChange("reconnect")}),(0,_protocolCompatibility2.default)(e),(0,_joinRoom2.default)(e),(0,_commit2.default)(e),(0,_cursor2.default)(e),(0,_quickSearch2.default)(e)}}]),Socket}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/socket/index.js")
    },{"../":520,"../../../../share/debug":566,"../base-store":511,"./commit":546,"./cursor":547,"./join-room":549,"./protocol-compatibility":550,"./quick-search":551}],549:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=JoinRoomSocket;var _socket=require("socket.io-request"),_socket2=_interopRequireDefault(_socket),_=require("../"),_2=_interopRequireDefault(_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,o){try{var a=t[n](o),u=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(u).then(function(e){step("next",e)},function(e){step("throw",e)});e(u)}("next")})}}var debug=require("../../../../share/debug")(__filename);function JoinRoomSocket(e){var t,r=(t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(t){var r,n=t.pageId,o=t.projectId,a=t.projectUpdatesStream;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,_socket2.default)(e,{timeout:5e3}).request("room:join",{pageId:n,projectId:o,projectUpdatesStream:a});case 3:r=t.sent,debug("room:join",r),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",console.error("room:join failed",t.t0.stack||t.t0.errors||t.t0));case 10:case"end":return t.stop()}},_callee,this,[[0,7]])})),function joinRoom(e){return t.apply(this,arguments)});function changeRoom(){if(_2.default.Socket.connected){var e=_2.default.Layout.get(),t=(_2.default.CurrentProject.get()||{}).id,n="page"!==e?null:(_2.default.Page.get()||{}).id;return r({projectId:t,pageId:n,projectUpdatesStream:"stream"===e})}}e.on("connect",changeRoom),e.once("connect",function(){_2.default.Page.addChangeListener(function(e){var t=e.event;/^setTitle/.test(t)||changeRoom()}),_2.default.CurrentProject.addChangeListener(changeRoom),_2.default.Layout.addChangeListener(changeRoom)})}

        }).call(this,"/src/client/js/stores/socket/join-room.js")
    },{"../":520,"../../../../share/debug":566,"socket.io-request":248}],550:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=checkProtocolCompatibility;var _protocolVersion=require("../../../../share/protocol-version");function _asyncToGenerator(e){return function(){var o=e.apply(this,arguments);return new Promise(function(e,r){return function step(t,n){try{var c=o[t](n),i=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var debug=require("../../../../share/debug")(__filename);function checkProtocolCompatibility(e){e.on("connect",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:debug("checkProtocolCompatibility",_protocolVersion.PROTOCOL_VERSION),e.emit("protocol-version",_protocolVersion.PROTOCOL_VERSION,function(e){e.ok?debug("ok"):(debug(e.error,"reload browser"),location.reload())});case 2:case"end":return o.stop()}},_callee,this)})))}

        }).call(this,"/src/client/js/stores/socket/protocol-compatibility.js")
    },{"../../../../share/debug":566,"../../../../share/protocol-version":591}],551:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=QuickSearchSocket;var _=require("../"),_2=_interopRequireDefault(_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var debug=require("../../../../share/debug")(__filename);function QuickSearchSocket(e){e.on("quick-search:commit",function(e){debug("commit",e);var r=e.pageId,t=e.projectId;if(_2.default.CurrentProject.get().id===t){if(e.changes.find(function(e){return e.deleted}))return _2.default.QuickSearch.delete(r);var u={},a=!0,i=!1,n=void 0;try{for(var c,o=e.changes[Symbol.iterator]();!(a=(c=o.next()).done);a=!0)for(var l=c.value,f=["title","links"],d=0;d<f.length;d++){var _=f[d];l[_]&&(u[_]=l[_])}}catch(e){i=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw n}}Object.keys(u).length>0&&(u.id=r,_2.default.QuickSearch.update(u))}}),e.on("quick-search:replace-link",function(e){var r=e.from,t=e.to;debug("replace-link",{from:r,to:t}),_2.default.QuickSearch.updateLink({from:r,to:t})})}

        }).call(this,"/src/client/js/stores/socket/quick-search.js")
    },{"../":520,"../../../../share/debug":566}],552:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_=require("./"),_2=_interopRequireDefault(_),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_apiClient=require("../lib/api-client/");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,i){try{var a=t[r](i),o=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(o).then(function(e){step("next",e)},function(e){step("throw",e)});e(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename),now=function now(){return Math.floor(Date.now()/1e3)};exports.default=new(function(e){function Stream(){_classCallCheck(this,Stream);var e=_possibleConstructorReturn(this,(Stream.__proto__||Object.getPrototypeOf(Stream)).call(this));return e.data=null,e.emitChangeThrottled=(0,_lodash.throttle)(e.emitChange,5e3,{leading:!0,trailing:!0}),e}return _inherits(Stream,_baseStore2.default),_createClass(Stream,[{key:"initialize",value:function initialize(){var e=this;_2.default.Socket.addChangeListener(function(t){"reconnect"===t.event&&"stream"===_2.default.Layout.get()&&e.load()})}},{key:"get",value:function get(){return this.data}},{key:"load",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,n;return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return e=_2.default.CurrentProject.get().name,debug("load "+e),r.prev=2,r.next=5,_apiClient.apiClient.get("/api/stream/"+e+"/");case 5:t=r.sent,n=t.data,this.data=n,r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),console.error(r.t0.stack||r.t0);case 13:debug(this.data),this.emitChange();case 15:case"end":return r.stop()}},_callee,this,[[2,10]])}));return function load(){return e.apply(this,arguments)}}()},{key:"emitChangeOnTop",value:function emitChangeOnTop(){window.scrollY>2*window.innerHeight||this.emitChangeThrottled()}},{key:"patch",value:function patch(e){if(debug("patch",e),!(e.changes.length<1)){if(e.changes.find(function(e){return e.deleted}))return this.data.pages=this.data.pages.filter(function(t){return t.id!==e.pageId}),void this.emitChange();var t=this.data.pages.find(function(t){return t.id===e.pageId});if(!t){var n=_2.default.QuickSearch.findById(e.pageId),r=n?n.title:null;t={id:e.pageId,title:r,lines:[],icons:{}},r&&t.lines.push({text:r}),this.data.pages.unshift(t)}var i=function _loop(e){if(!e)return"continue";if(e._update){var n=t.lines.find(function(t){return t.id===e._update});return n?(n.text=e.lines.text,n.updated=now()):t.lines.push({id:e._update,text:e.lines.text,created:now(),updated:now()}),"continue"}if(e._insert){var r=t.lines.map(function(e){return e.id}).indexOf(e._insert),i={id:e.lines.id,text:e.lines.text,created:now(),updated:now()};return r>=0?t.lines.splice(r,0,i):t.lines.push(i),"continue"}if(e._delete)return t.lines=t.lines.filter(function(t){return t.id!==e._delete}),"continue";if(e.title)return t.title=e.title,"continue";if(e.icons){var a={},o=!0,u=!1,l=void 0;try{for(var s,c=Object.entries(e.icons)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var f=s.value,d=_slicedToArray(f,2),p=d[0],h=d[1];a.hasOwnProperty(p)?a[p]+=h:a[p]=h}}catch(e){u=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(u)throw l}}return t.iconsLc=a,"continue"}},a=!0,o=!1,u=void 0;try{for(var l,s=e.changes[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)i(l.value)}catch(e){o=!0,u=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw u}}this.emitChangeOnTop()}}}]),Stream}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/stream.js")
    },{"../../../share/debug":566,"../lib/api-client/":452,"./":520,"./base-store":511}],553:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=new(function(e){function SuggestPopup(){_classCallCheck(this,SuggestPopup);var e=_possibleConstructorReturn(this,(SuggestPopup.__proto__||Object.getPrototypeOf(SuggestPopup)).call(this));return e.visible=!1,e}return _inherits(SuggestPopup,_baseStore2.default),_createClass(SuggestPopup,[{key:"initialize",value:function initialize(){var e=this;_2.default.Selection.addChangeListener(function(t){t.store.hasSelection()&&e.hide()})}},{key:"hide",value:function hide(){this.visible=!1,this.emitChange()}},{key:"selectNext",value:function selectNext(){this.emitChange("select-next")}},{key:"selectPrev",value:function selectPrev(){this.emitChange("select-prev")}},{key:"submit",value:function submit(){this.emitChange("submit")}},{key:"submitIcon",value:function submitIcon(){this.emitChange("submit-icon")}}]),SuggestPopup}());

    },{"./":520,"./base-store":511}],554:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_socket=require("socket.io-request"),_socket2=_interopRequireDefault(_socket),_commit=require("../../../../share/commit/"),_compressChanges=require("../../../../share/commit/page/compress-changes"),_compressChanges2=_interopRequireDefault(_compressChanges),_commit2=require("../../../../share/error/commit"),_=require("../"),_2=_interopRequireDefault(_),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_deepEqual=require("deep-equal"),_deepEqual2=_interopRequireDefault(_deepEqual),_events=require("events"),_apiClient=require("../../lib/api-client/"),_delay=require("../../../../share/delay"),_queue=require("./queue"),_queue2=_interopRequireDefault(_queue),_resolveConflict=require("./resolve-conflict"),_resolveConflict2=_interopRequireDefault(_resolveConflict);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(a,n){try{var i=t[a](n),s=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../../share/debug")(__filename),PUSH_DEBOUNCE_TIME=300,PUSH_TIMEOUT=1e4;exports.default=new(function(e){function Sync(){_classCallCheck(this,Sync);var e=_possibleConstructorReturn(this,(Sync.__proto__||Object.getPrototypeOf(Sync)).call(this));return e.commits=[],e.queue=new _queue2.default(e.onExecute.bind(e)),e.cursor=null,e._pushingCommit=null,e._wasTimeout=!1,e.titleDupTryCount={},e.finishLater=(0,_lodash.debounce)(e.finishChange,PUSH_DEBOUNCE_TIME),e}return _inherits(Sync,_events.EventEmitter),_createClass(Sync,[{key:"showValidationError",value:function showValidationError(e){var t="Failed to save. Please reload your browser. \n\n"+e.toString();alert(t),console.error(e.toString())}},{key:"insert",value:function insert(e){var t=_commit.InsertChange.validate(e);if(t.isInvalid)return this.showValidationError(t);this.addChange(e),this.finishLater()}},{key:"update",value:function update(e){var t=_commit.UpdateChange.validate(e);if(t.isInvalid)return this.showValidationError(t);this.addChange(e),this.finishLater()}},{key:"delete",value:function _delete(e){var t=_commit.DeleteChange.validate(e);if(t.isInvalid)return this.showValidationError(t);this.addChange(e),this.finishLater()}},{key:"addChange",value:function addChange(e){this.hasUnpushedCommit&&(0,_lodash.last)(this.commits).pageId===_2.default.Page.id&&!(0,_lodash.last)(this.commits).freeze||this.commits.push(_commit.PageCommit.create({parentId:_2.default.Page.commitId,changes:[],cursor:this.cursor,pageId:_2.default.Page.id,userId:_2.default.CurrentUser.get().id,projectId:_2.default.CurrentProject.get().id})),(0,_lodash.last)(this.commits).changes.push(e)}},{key:"updateParentId",value:function updateParentId(e){var t=e.pageId,r=e.commitId,a=!0,n=!1,i=void 0;try{for(var s,u=this.commits[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var o=s.value;o.pageId===t&&(debug("update unpushed commit’s parentId"),o.parentId=r)}}catch(e){n=!0,i=e}finally{try{!a&&u.return&&u.return()}finally{if(n)throw i}}}},{key:"rebase",value:function rebase(e){var t=e.receivedChange,r=e.lineNumber,a=e.originalLines;if(debug("rebase"),this.hasUnpushedCommit){var n=!0,i=!1,s=void 0;try{for(var u,o=this.commits[Symbol.iterator]();!(n=(u=o.next()).done);n=!0){var c=u.value;c.pageId===_2.default.Page.id&&(0,_resolveConflict2.default)(c,{receivedChange:t,lineNumber:r,originalLines:a.lines})}}catch(e){i=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}}}},{key:"setCursor",value:function setCursor(e){this.cursor=e}},{key:"flushChange",value:function flushChange(){debug("flush change"),this.finishLater.flush()}},{key:"finishChange",value:function finishChange(){debug("finish change"),this.titleDupTryCount[_2.default.Page.id]=0,this.setMetadata(),this.setTitle(),this.queue.add("push")}},{key:"setMetadata",value:function setMetadata(){var e=_2.default.Line.lines.getPageMetadata(),t=e.links,r=e.icons,a=e.images,n=e.descriptions,i=a[0]||null,s=this.getLastMetadata();(0,_deepEqual2.default)(s.links,t)||(debug("links changed"),this.addChange({links:t})),(0,_deepEqual2.default)(s.icons,r)||(debug("icons changed"),this.addChange({icons:r})),s.image!==i&&(debug("image changed"),this.addChange({image:i})),(0,_deepEqual2.default)(s.descriptions,n)||(debug("descriptions changed"),this.addChange({descriptions:n}))}},{key:"getLastMetadata",value:function getLastMetadata(){for(var e={},t=["links","icons","image","descriptions"],r=0;r<t.length;r++){var a=t[r],n=_2.default.Page[a],i=this.getLastPropertyInQueue(a);e[a]=void 0!==i?i:n}return e}},{key:"getLastPropertyInQueue",value:function getLastPropertyInQueue(e){for(var t=this.commits.length-1;t>-1;t--){var r=this.commits[t],a=this.getLastPropertyInCommit(r,e);if(void 0!==a)return a}if(this._pushingCommit){var n=this.getLastPropertyInCommit(this._pushingCommit,e);if(void 0!==n)return n}}},{key:"getLastPropertyInCommit",value:function getLastPropertyInCommit(e,t){if(e.pageId===_2.default.Page.id)for(var r=e.changes.length-1;r>-1;r--){var a=e.changes[r];if(a.hasOwnProperty(t))return a[t]}}},{key:"suggestUnDupTitle",value:function suggestUnDupTitle(e){return this.titleDupTryCount[e]+=1,_2.default.Line.lines.getTitle()+"_"+(this.titleDupTryCount[e]+1)}},{key:"setTitle",value:function setTitle(){var e=_2.default.Line.lines.getTitle(),t=_2.default.Page.lines.getTitle(),r=this.getLastPropertyInQueue("title");e===(void 0!==r?r:t)&&_2.default.Page.persistent||(debug("title changed",e),this.addChange({title:e}))}},{key:"onExecute",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t,r){var a;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:debug("execute",e),a=void 0,n.prev=2,n.t0=e,n.next="pull"===n.t0?6:"patch"===n.t0?9:"push"===n.t0?11:14;break;case 6:return n.next=8,this._pull();case 8:return n.abrupt("break",14);case 9:return this._patch(t),n.abrupt("break",14);case 11:return n.next=13,this._push(function(e){a=e});case 13:return n.abrupt("break",14);case 14:n.t1=a,n.next="pullLater"===n.t1?17:"pause"===n.t1?22:24;break;case 17:return n.next=19,this.queue.onTaskAdd("patch",{timeout:1e3});case 19:return n.sent||(debug("did not receive commit via websocket in second"),this.queue.addPriority("pull")),n.abrupt("break",26);case 22:return n.next=24,(0,_delay.delay)(3e3);case 24:return this.hasUnpushedCommit?this.queue.add("push"):this.queue.remove("push"),n.abrupt("break",26);case 26:n.next=32;break;case 28:throw n.prev=28,n.t2=n.catch(2),alert("Oops, sorry. Cannot "+e+" the changes. Please report us if the problem persists.\n-------\n"+n.t2.message),n.t2;case 32:return n.prev=32,"push"===e&&(this._pushingCommit=null,this._wasTimeout="pause"===a),r(),n.finish(32);case 36:case"end":return n.stop()}},_callee,this,[[2,28,32,36]])}));return function onExecute(t,r,a){return e.apply(this,arguments)}}()},{key:"_push",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,r,a,n,i,s;return regeneratorRuntime.wrap(function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:if(debug("push"),this.hasUnpushedCommit){u.next=3;break}return u.abrupt("return");case 3:if(this.flushChange(),t=_commit.PageCommit.compress(this.commits.shift()),this._pushingCommit=t,t.freeze=!0,!(r=_commit.PageCommit.validate(t)).isInvalid){u.next=10;break}return u.abrupt("return",this.showValidationError(r));case 10:if(!(t.changes.length<=0)){u.next=12;break}return u.abrupt("return");case 12:return a=void 0,u.prev=13,debug("request",t),u.next=17,(0,_socket2.default)(_2.default.Socket.get(),{timeout:PUSH_TIMEOUT}).request("commit",t);case 17:a=u.sent,u.next=47;break;case 20:u.prev=20,u.t0=u.catch(13),debug("rejected: "+u.t0.name+", "+u.t0.message),n=function shouldAbandonOtherPage(){return t.pageId!==_2.default.Page.id&&(alert("Cannot save the last edit of the previous page."),!0)},u.t1=u.t0.name,u.next=u.t1===_socket.TimeoutError.name?27:u.t1===_socket.SocketIOError.name?31:u.t1===_commit2.DuplicateTitleError.name?34:u.t1===_commit2.NotFastForwardError.name?40:45;break;case 27:return t.freeze=!0,this.commits.unshift(t),e("pause"),u.abrupt("break",46);case 31:return this.commits.unshift(t),e("pause"),u.abrupt("break",46);case 34:if(!n()){u.next=36;break}return u.abrupt("return");case 36:return i=this.suggestUnDupTitle(t.pageId),t.changes.push({title:i}),this.commits.unshift(t),u.abrupt("break",46);case 40:if(!n()){u.next=42;break}return u.abrupt("return");case 42:return this.commits.unshift(t),e("pullLater"),u.abrupt("break",46);case 45:throw u.t0;case 46:return u.abrupt("return");case 47:debug("succeeded",a),this.emit("syncSuccess"),s=a.commitId,_2.default.Page.id===t.pageId&&(_2.default.Page.lines.patchChanges(t.changes),_2.default.Page.patchChanges(t.changes,{from:"self"}),_2.default.Page.commitId=s),this.hasUnpushedCommit&&this.updateParentId({pageId:t.pageId,commitId:s}),this.cursor=null,this.titleDupTryCount[t.pageId]=0;case 54:case"end":return u.stop()}},_callee2,this,[[13,20]])}));return function _push(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e,t,r,a,n;return regeneratorRuntime.wrap(function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:return e=_2.default.Page.commitId||"",t=_2.default.CurrentProject.get().name,i.next=4,_apiClient.apiClient.get("/api/commits/"+t+"/"+_2.default.Page.id,{timeout:1e4,params:{head:e}});case 4:return r=i.sent,a=r.data,n=a.commits,debug("fetched commits",e,n),i.abrupt("return",n);case 9:case"end":return i.stop()}},_callee3,this)}));return function fetch(){return e.apply(this,arguments)}}()},{key:"_pull",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var e;return regeneratorRuntime.wrap(function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return debug("pull"),e=void 0,t.prev=2,t.next=5,this.fetch();case 5:e=t.sent,t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(2),console.error(t.t0.stack||t.t0),t.abrupt("return");case 12:this._patch(e);case 13:case"end":return t.stop()}},_callee4,this,[[2,8]])}));return function _pull(){return e.apply(this,arguments)}}()},{key:"_patch",value:function _patch(e){debug("patch"),_2.default.Page.patch(e)}},{key:"hasUnpushedCommit",get:function get(){return this.commits.length>0}},{key:"hasUnpushedOrPushingCommit",get:function get(){return this.commits.length>0||!!this._pushingCommit}},{key:"pushQueueCount",get:function get(){return this.queue.count("push")}},{key:"numberOfChanges",get:function get(){return(this._pushingCommit?this._pushingCommit.changes.length:0)+this.commits.map(function(e){return(0,_compressChanges2.default)(e.changes).length}).reduce(function(e,t){return e+t},0)}},{key:"wasTimeout",get:function get(){return this._wasTimeout}}]),Sync}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/sync/index.js")
    },{"../":520,"../../../../share/commit/":563,"../../../../share/commit/page/compress-changes":564,"../../../../share/debug":566,"../../../../share/delay":576,"../../../../share/error/commit":577,"../../lib/api-client/":452,"./queue":555,"./resolve-conflict":556,"deep-equal":105,"events":137,"socket.io-request":248}],555:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),_rwlock=require("rwlock"),_rwlock2=_interopRequireDefault(_rwlock),_events=require("events");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Queue=function(e){function Queue(e){_classCallCheck(this,Queue);var t=_possibleConstructorReturn(this,(Queue.__proto__||Object.getPrototypeOf(Queue)).call(this));if("function"!=typeof e)throw new Error("Set execute function");return t.onExecute=e,t.lock=new _rwlock2.default,t.queue=[],t}return _inherits(Queue,_events.EventEmitter),_createClass(Queue,[{key:"remove",value:function remove(e){this.queue=this.queue.filter(function(t){return t.task!==e})}},{key:"count",value:function count(e){return this.queue.filter(function(t){return t.task===e}).length}},{key:"add",value:function add(e,t){this.queue.push({task:e,data:t}),this.emit("add",e),this._waitExecute()}},{key:"addPriority",value:function addPriority(e,t){this.queue.unshift({task:e,data:t}),this.emit("add",e),this._waitExecute()}},{key:"_waitExecute",value:function _waitExecute(){var e=this;this.lock.writeLock(function(t){if(e.queue.length<1)return t();var n=e.queue.shift(),u=n.task,r=n.data;e.onExecute(u,r,t)})}},{key:"onTaskAdd",value:function onTaskAdd(e,t){var n=this,u=t.timeout;return new Promise(function(t,r){var o=function finish(e){clearTimeout(a),n.removeListener("add",i),t(e)},i=function onAdd(t){t===e&&o(!0)},a=setTimeout(function(){o(!1)},u);n.on("add",i),n.queue.find(function(t){return t.task===e})&&o(!0)})}}]),Queue}();exports.default=Queue;

    },{"events":137,"rwlock":236}],556:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=resolveConflict;var debug=require("../../../../share/debug")(__filename);function resolveConflict(e,i){var t=i.receivedChange,n=i.lineNumber,r=i.originalLines;if(t){if(t._delete){for(var l=e.changes.length-1;l>=0;l--){var d=e.changes[l];d&&(d._update!==t._delete&&d._delete!==t._delete||(debug("conflict! trying to update or delete the deleted line",l),debug("discard",d),e.changes.splice(l,1)))}var a,s=(a=r[n])?a.id:"_end",o=null,c=!0,u=!1,g=void 0;try{for(var f,h=e.changes[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var _=f.value;_&&(_._insert===s&&(o||(o=_.lines.id)),_._insert===t._delete&&(debug("conflict! the insert position line is deleted",_),debug("swap the insert position",o||s),_._insert=o||s))}}catch(e){u=!0,g=e}finally{try{!c&&h.return&&h.return()}finally{if(u)throw g}}}if(t._insert)for(var v=e.changes.length-1;v>=0;v--){var b=e.changes[v];b&&(b._insert&&b.lines.id===t.lines.id&&(debug("conflict! trying to insert the duplicated line id data",v),debug("discard",b),e.changes.splice(v,1)))}}}

        }).call(this,"/src/client/js/stores/sync/resolve-conflict.js")
    },{"../../../../share/debug":566}],557:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_=require("./"),_2=_interopRequireDefault(_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.default=new(function(){function TimeStamp(){var e=this;_classCallCheck(this,TimeStamp),this.initialize(),(0,_lodash.bindAll)(this,["addFormat","removeAllFormats"]),setTimeout(function(){_2.default.CurrentProject.addChangeListener(function(){return e.initialize()})})}return _createClass(TimeStamp,[{key:"initialize",value:function initialize(){this.defaultFormats=["YYYY/M/D","[[]YYYY/M[]]/D","YYYY/M/D HH:mm"],this.customFormats=[]}},{key:"getFormats",value:function getFormats(){return[].concat(_toConsumableArray(this.customFormats),_toConsumableArray(this.defaultFormats))}},{key:"addFormat",value:function addFormat(e){if(!e)throw new Error("timestamp format is empty");if("string"==typeof e)this.customFormats.push(e);else{if("function"!=typeof e)throw new Error("timestamp format is not a string or function");this.customFormats.push(e)}}},{key:"removeAllFormats",value:function removeAllFormats(){this.defaultFormats=[],this.customFormats=[]}}]),TimeStamp}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./":520}],558:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_=require("./"),_2=_interopRequireDefault(_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var debug=require("../../../share/debug")(__filename),BUNDLE_DEBOUNCE_TIME=200;exports.default=new(function(){function Undo(){var e=this;_classCallCheck(this,Undo),this.bundleLater=(0,_lodash.debounce)(this.bundle,BUNDLE_DEBOUNCE_TIME),this.initialize=this.initialize.bind(this),this.initialize(),setTimeout(function(){_2.default.Page.addChangeListener(function(n){"load"===n.event&&e.initialize()})})}return _createClass(Undo,[{key:"initialize",value:function initialize(){this.undoList=[],this.redoList=[],this.changes=[],this.bundleLater.cancel()}}]),_createClass(Undo,[{key:"append",value:function append(e){var n=e.forward,t=e.reverse;n&&t&&(this.changes.push({forward:n,reverse:t}),this.bundleLater())}},{key:"bundle",value:function bundle(){this.undoList.push(this.changes),this.changes=[],this.redoList=[]}},{key:"undo",value:function undo(){this.bundleLater.flush();var e=this.undoList.pop();e&&(debug("undo",e),this.redoList.push(e),this.apply(e.map(function(e){return e.reverse}).reverse()))}},{key:"redo",value:function redo(){this.bundleLater.flush();var e=this.redoList.pop();e&&(debug("redo",e),this.undoList.push(e),this.apply(e.map(function(e){return e.forward})))}},{key:"apply",value:function apply(e){var n=(0,_lodash.cloneDeep)(_2.default.Line.lines.all());try{_2.default.Line.lines.patchChanges(e),_2.default.Line.emitChange()}catch(e){return debug("can not undo. conflicted"),void _2.default.Line.setLines(n)}_2.default.Cursor.fixPosition();var t=!0,i=!1,a=void 0;try{for(var r,u=e[Symbol.iterator]();!(t=(r=u.next()).done);t=!0){var o=r.value;_2.default.Sync.addChange(o)}}catch(e){i=!0,a=e}finally{try{!t&&u.return&&u.return()}finally{if(i)throw a}}_2.default.Sync.finishLater()}},{key:"isEmpty",get:function get(){return 0===this.undoList.length}}]),Undo}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/undo.js")
    },{"../../../share/debug":566,"./":520}],559:[function(require,module,exports){
        (function (global,__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_hasDom=require("has-dom"),_hasDom2=_interopRequireDefault(_hasDom),_crypto=require("crypto"),_crypto2=_interopRequireDefault(_crypto),_baseStore=require("./base-store"),_baseStore2=_interopRequireDefault(_baseStore),_=require("./"),_2=_interopRequireDefault(_),_apiClient=require("../lib/api-client/"),_localSettings=require("../lib/local-settings/"),_localSettings2=_interopRequireDefault(_localSettings),_scrapboxParser=require("../../../share/scrapbox-parser"),_decorateLines=require("../../../share/decorate-lines/"),_decorateLines2=_interopRequireDefault(_decorateLines);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(n,a){try{var o=t[n](a),i=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var debug=require("../../../share/debug")(__filename);exports.default=new(function(e){function UserScript(){_classCallCheck(this,UserScript);var e=_possibleConstructorReturn(this,(UserScript.__proto__||Object.getPrototypeOf(UserScript)).call(this));return e.waitingForApproval=!1,e.sha1hash=null,(0,_lodash.bindAll)(e,"reload"),e}return _inherits(UserScript,_baseStore2.default),_createClass(UserScript,[{key:"initialize",value:function initialize(){this.setup(),_2.default.CurrentProject.addChangeListener(this.reload)}},{key:"setup",value:function setup(){(0,_hasDom2.default)()&&(window.scrapbox||(window.scrapbox={}),window.scrapbox.PopupMenu||(window.scrapbox.PopupMenu={addButton:_2.default.PopupMenu.addButton}),window.scrapbox.PageMenu||(window.scrapbox.PageMenu=function(e){return _2.default.PageMenu.pageMenu(e)},window.scrapbox.PageMenu.addMenu=function(e){var t=e.title,r=e.image,n=e.onClick;return _2.default.PageMenu.addMenu({title:t,image:r,onClick:n})},window.scrapbox.PageMenu.addItem=function(e){var t=e.title,r=e.image,n=e.onClick;return _2.default.PageMenu.pageMenu("default").addItem({title:t,image:r,onClick:n})},window.scrapbox.PageMenu.addSeparator=function(){return _2.default.PageMenu.pageMenu("default").addSeparator()},window.scrapbox.PageMenu.removeAllItems=function(){return _2.default.PageMenu.pageMenu("default").removeAllItems()}),window.scrapbox.TimeStamp||(window.scrapbox.TimeStamp={addFormat:_2.default.TimeStamp.addFormat,removeAllFormats:_2.default.TimeStamp.removeAllFormats}),window.scrapbox.Page||(window.scrapbox.Page={get lines(){return"page"!==_2.default.Layout.get()?null:(0,_decorateLines2.default)(_2.default.Line.getAll()).map(function(e){return e.title||e.codeBlock||e.tableBlock||e.cli?e:(e.nodes=(0,_scrapboxParser.parseScrapboxSyntax)(e.text),e)})},get title(){return"page"!==_2.default.Layout.get()?null:_2.default.Page.title}}),window.scrapbox.Project||(window.scrapbox.Project={get name(){return _2.default.CurrentProject.get().name}}),window.scrapbox.Layout||window.scrapbox.__defineGetter__("Layout",function(){return _2.default.Layout.get()}))}},{key:"reload",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t;return regeneratorRuntime.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(this.removeUserScriptTag(),this.waitingForApproval=!1,this.emitChange(),this.shouldLoadScript){r.next=5;break}return r.abrupt("return");case 5:return e=_2.default.CurrentProject.get(),t=void 0,r.prev=7,r.next=10,this.fetchAsText();case 10:t=r.sent.data,r.next=16;break;case 13:return r.prev=13,r.t0=r.catch(7),r.abrupt("return",console.error(r.t0.stack||r.t0));case 16:if(this.sha1hash=_crypto2.default.createHash("sha1").update(t,"binary").digest("hex"),this.sha1hash===_localSettings2.default.get("userScriptSHA1")[e.id]){r.next=22;break}return this.waitingForApproval=!0,debug("waintingForApproval"),this.emitChange(),r.abrupt("return");case 22:this.renderUserScriptTag();case 23:case"end":return r.stop()}},_callee,this,[[7,13]])}));return function reload(){return e.apply(this,arguments)}}()},{key:"fetchAsText",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_apiClient.apiClient.get(this.src));case 1:case"end":return e.stop()}},_callee2,this)}));return function fetchAsText(){return e.apply(this,arguments)}}()},{key:"removeUserScriptTag",value:function removeUserScriptTag(){for(var e=document.getElementsByTagName("body")[0],t=["user-script","user-script-nomodule"],r=0;r<t.length;r++){var n=t[r],a=document.getElementById(n);a&&e.removeChild(a)}}},{key:"renderUserScriptTag",value:function renderUserScriptTag(){if(this.shouldLoadScript){debug("render script tag");var e=_2.default.CurrentProject.get(),t=_localSettings2.default.get("userScriptSHA1");t[e.id]=this.sha1hash,_localSettings2.default.set("userScriptSHA1",t);var r=document.createElement("script");r.async=!0,r.setAttribute("src",this.src),r.setAttribute("type","module"),r.setAttribute("crossorigin","use-credentials"),r.id="user-script";var n=document.createElement("script");n.noModule=!0,n.async=!0,n.setAttribute("src",this.src),n.id="user-script-nomodule";var a=document.getElementsByTagName("body")[0];a.appendChild(r),a.appendChild(n),this.waitingForApproval=!1,this.emitChange()}}},{key:"shouldLoadScript",get:function get(){var e=_2.default.CurrentUser.get();return!!(e&&e.config&&e.config.userScript)&&(_2.default.CurrentUser.isProjectMember&&!!this.src)}},{key:"src",get:function get(){var e=_2.default.CurrentProject.get(),t=_2.default.CurrentUser.get();return e&&e.name&&t&&t.name?"/api/code/"+e.name+"/"+t.name+"/script.js?"+Date.now():null}}]),UserScript}());

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},"/src/client/js/stores/userscript.js")
    },{"../../../share/debug":566,"../../../share/decorate-lines/":571,"../../../share/scrapbox-parser":605,"../lib/api-client/":452,"../lib/local-settings/":467,"./":520,"./base-store":511,"crypto":102,"has-dom":143}],560:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_id=require("../../id"),_result=require("../../validator/result"),_result2=_interopRequireDefault(_result);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var DeleteChange={validate:function validate(e){var t=new _result2.default;return e&&"object"===(void 0===e?"undefined":_typeof(e))?((0,_id.isIdString)(e._delete)||t.errors.push('change._delete is not valid lineId "'+e._delete+'"'),"number"!=typeof e.lines&&t.errors.push('change.lines is not number "'+e.lines+'"'),t):(t.errors.push(e+" is not a DeleteChange"),t)},create:function create(e){return{_delete:e.lineId,lines:-1}}};exports.default=DeleteChange;

    },{"../../id":586,"../../validator/result":624}],561:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_id=require("../../id"),_result=require("../../validator/result"),_result2=_interopRequireDefault(_result);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var InsertChange={validate:function validate(e){var t=new _result2.default;return e&&"object"===(void 0===e?"undefined":_typeof(e))?("_end"===e._insert||(0,_id.isIdString)(e._insert)||t.errors.push('change._insert is not valid lineId "'+e._insert+'"'),e.lines?((0,_id.isIdString)(e.lines.id)||t.errors.push('change.lines.id is not valid lineId "'+e.lines.id+'"'),"string"!=typeof e.lines.text&&t.errors.push('change.lines.text is not string "'+e.lines.text+'"'),/[\r\n\u2028\u2029]/.test(e.lines.text)&&t.errors.push('change.lines.text cannot include line-feed "'+e.lines.text+'"'),t):(t.errors.push("change.lines does not exists"),t)):(t.errors.push(e+" is not an InsertChange"),t)},create:function create(e){return{_insert:e.positionId,lines:{id:e.lineId,text:e.text}}}};exports.default=InsertChange;

    },{"../../id":586,"../../validator/result":624}],562:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_id=require("../../id"),_result=require("../../validator/result"),_result2=_interopRequireDefault(_result);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var UpdateChange={validate:function validate(e){var t=new _result2.default;return e&&"object"===(void 0===e?"undefined":_typeof(e))?((0,_id.isIdString)(e._update)||t.errors.push('change._update is not valid lineId "'+e._update+'"'),e.lines?("string"!=typeof e.lines.text&&t.errors.push('change.lines.text is not string "'+e.lines.text+'"'),/[\r\n\u2028\u2029]/.test(e.lines.text)&&t.errors.push('change.lines.text cannot include line-feed "'+e.lines.text+'"'),t):(t.errors.push("change.lines does not exists"),t)):(t.errors.push(e+" is not an UpdateChange."),t)},create:function create(e){return{_update:e.lineId,lines:{text:e.text}}}};exports.default=UpdateChange;

    },{"../../id":586,"../../validator/result":624}],563:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteChange=exports.UpdateChange=exports.InsertChange=exports.PageCommit=void 0;var _page=require("./page/"),_page2=_interopRequireDefault(_page),_insert=require("./change/insert"),_insert2=_interopRequireDefault(_insert),_update=require("./change/update"),_update2=_interopRequireDefault(_update),_delete=require("./change/delete"),_delete2=_interopRequireDefault(_delete);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.PageCommit=_page2.default,exports.InsertChange=_insert2.default,exports.UpdateChange=_update2.default,exports.DeleteChange=_delete2.default;

    },{"./change/delete":560,"./change/insert":561,"./change/update":562,"./page/":565}],564:[function(require,module,exports){
        "use strict";function compressChanges(e){if(e.find(function(e){return e.deleted}))return[{deleted:!0}];for(var l=(e=e.concat()).length-1;l>-1;l--){var n=e[l];if(n)if(n._delete){for(var r=l-1;r>-1;r--)if(null!==e[r])if(e[r]._update!==n._delete){if(e[r]._insert&&e[r].lines.id===n._delete){e[r]=null,e[l]=null;break}}else e[r]=null}else if(n._update){for(var t=l-1;t>-1;t--)if(null!==e[t])if(e[t]._update!==n._update){if(e[t]._insert&&e[t].lines.id===n._update){e[t].lines.text=n.lines.text,e[l]=null;break}}else e[t]=null}else if(n._insert){for(var i=l-1;i>-1;i--)if(null!==e[i]&&e[i]._delete&&e[i]._delete===n.lines.id){e[i]=null,e[l]=null;break}}else for(var s=["title","image","links","icons","descriptions"],u=0;u<s.length;u++){var f=s[u];if(n.hasOwnProperty(f)){for(var a=l-1;a>-1;a--)null!==e[a]&&e[a].hasOwnProperty(f)&&(e[a]=null);break}}}return e.filter(function(e){return e})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=compressChanges;

    },{}],565:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _id=require("../../id"),_result=require("../../validator/result"),_result2=_interopRequireDefault(_result),_compressChanges=require("./compress-changes"),_compressChanges2=_interopRequireDefault(_compressChanges);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var PageCommit={compress:function compress(e){return e.changes=(0,_compressChanges2.default)(e.changes),e},validate:function validate(e){var r=new _result2.default;return e?("page"!==e.kind&&r.errors.push('commit.kind is "'+e.kind+'"'),e.parentId&&!(0,_id.isIdString)(e.parentId)&&r.errors.push('commit.parentId is not valid ID "'+e.parentId+'"'),e.changes instanceof Array||r.errors.push("commit.changes is not Array"),(0,_id.isIdString)(e.pageId)||r.errors.push('commit.pageId is not valid ID "'+e.pageId+'"'),(0,_id.isIdString)(e.userId)||r.errors.push('commit.userId is not valid ID "'+e.userId+'"'),(0,_id.isIdString)(e.projectId)||r.errors.push('commit.projectId is not valid ID "'+e.projectId+'"'),r):(r.errors.push("commit.kind is not an PageCommit"),r)},create:function create(e){return{kind:"page",parentId:e.parentId,changes:e.changes,cursor:e.cursor,pageId:e.pageId,userId:e.userId,projectId:e.projectId}}};exports.default=PageCommit;

    },{"../../id":586,"../../validator/result":624,"./compress-changes":564}],566:[function(require,module,exports){
        "use strict";var _debug=require("debug"),_debug2=_interopRequireDefault(_debug),_path=require("path"),_path2=_interopRequireDefault(_path),_package=require("../../package.json"),_package2=_interopRequireDefault(_package);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var PATH_HEADS=["/src/client/js","/src/share",_path2.default.resolve("src/server"),_path2.default.resolve("build/server"),_path2.default.resolve("src/share")];function fileToName(e){if("string"!=typeof e)throw new Error("filename is not string");return e.replace(new RegExp("^("+PATH_HEADS.join("|")+")"),_package2.default.name).replace(/\..+$/,"").replace(/\/index$/,"").replace(/\//g,":")}module.exports=function createDebug(e){return(0,_debug2.default)(fileToName(e))};

    },{"../../package.json":256,"debug":103,"path":177}],567:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,t){var e=[],i=!0,n=!1,a=void 0;try{for(var o,l=r[Symbol.iterator]();!(i=(o=l.next()).done)&&(e.push(o.value),!t||e.length!==t);i=!0);}catch(r){n=!0,a=r}finally{try{!i&&l.return&&l.return()}finally{if(n)throw a}}return e}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function decorateCli(r){var t=!0,e=!1,i=void 0;try{for(var n,a=r[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;if(!o.title){var l=o.text.match(/^\s*([%$]) (.+)/);if(l){var c=_slicedToArray(l,3),u=c[1],f=c[2];o.cli={prefix:u,command:f}}}}}catch(r){e=!0,i=r}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}return r}exports.decorateCli=decorateCli;

    },{}],568:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],o=!0,n=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done)&&(r.push(c.value),!t||r.length!==t);o=!0);}catch(e){n=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.decorateCodeBlock=decorateCodeBlock,exports.getCodeTextByFileName=getCodeTextByFileName,exports.getCodeTextStartsFromLineId=getCodeTextStartsFromLineId;var _line=require("../line/"),_decorator=require("./decorator");function detectCodeBlockStart(e){var t=e.match(/^\s*code:(.+)\(([^()]+)\)$/);if(t||(t=e.match(/^\s*code:(.+)$/)),!t)return{};var r=_slicedToArray(t,3),o=r[1],n=r[2];return o=o.trim(),n||(n=o.split(".").pop()),o===n?{lang:n}:{filename:o,lang:n}}function decorateCodeBlock(e){for(var t=function _loop(t){var o=detectCodeBlockStart(e[t].text),n=o.filename,a=o.lang;if(a){var c=(0,_line.countIndent)(e[t])+1,l=(0,_decorator.getBlock)(e,t,function(e){e.codeBlock={lang:a,filename:n,indent:c,start:!1,end:!1}});e[t].codeBlock.start=!0,e[l.end].codeBlock.end=!0,t=l.end}r=t},r=1;r<e.length;r++)t(r);return e}function getCodeTextByFileName(e,t){decorateCodeBlock(e);var r=new Map,o=!0,n=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var i=c.value;if(i.codeBlock&&i.codeBlock.filename&&!i.codeBlock.start){r.has(i.codeBlock.filename)||r.set(i.codeBlock.filename,[]);var d=i.text.substr(i.codeBlock.indent);r.get(i.codeBlock.filename).push(d)}}}catch(e){n=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw a}}return r.get(t)}function getCodeTextStartsFromLineId(e,t){decorateCodeBlock(e);var r=!1,o=[],n=!0,a=!1,c=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var d=l.value;if(d.id===t&&d.codeBlock&&d.codeBlock.start)r=!0;else if(r){if(!d.codeBlock||d.codeBlock.start)break;var u=d.text.substr(d.codeBlock.indent);o.push(u)}}}catch(e){a=!0,c=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw c}}return o}

    },{"../line/":587,"./decorator":569}],569:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.combineDecorators=combineDecorators,exports.getBlock=getBlock;var _line=require("../line/");function combineDecorators(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=!0,n=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){e=(0,i.value)(e)}}catch(e){n=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return e}}function getBlock(e,t,r){var n=(0,_line.countIndent)(e[t]),o={indent:n,start:t,end:t,get length(){return this.end-this.start+1}};"function"==typeof r&&r(e[t]);for(var i=t+1;i<e.length;i++){var a=e[i];if(n>=(0,_line.countIndent)(a))break;"function"==typeof r&&r(a),o.end=i}return o}

    },{"../line/":587}],570:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decorateFormula=decorateFormula;var _scrapboxParser=require("../scrapbox-parser/");function decorateFormula(r){var e=!0,a=!1,t=void 0;try{for(var o,c=r[Symbol.iterator]();!(e=(o=c.next()).done);e=!0){var l=o.value;if(!(l.title||l.numberList||l.codeBlock||l.cli||l.tableBlock)){var n=(0,_scrapboxParser.parseScrapboxSyntax)(l.text);("deco-formula"===n.type||"indent"===n.type&&n.children&&"deco-formula"===n.children.type||n.children instanceof Array&&n.children[0]&&"deco-formula"===n.children[0].type)&&(l.formulaLine=!0)}}}catch(r){a=!0,t=r}finally{try{!e&&c.return&&c.return()}finally{if(a)throw t}}return r}

    },{"../scrapbox-parser/":605}],571:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_decorator=require("./decorator"),_title=require("./title"),_section=require("./section"),_tableBlock=require("./table-block"),_cli=require("./cli"),_codeBlock=require("./code-block"),_numberList=require("./number-list"),_formula=require("./formula");function noEmptyLines(e){return Array.isArray(e)?e:[]}exports.default=(0,_decorator.combineDecorators)(noEmptyLines,_lodash.cloneDeep,_title.decorateTitle,_section.decorateSection,_codeBlock.decorateCodeBlock,_cli.decorateCli,_tableBlock.decorateTableBlock,_numberList.decorateNumberList,_formula.decorateFormula);

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./cli":567,"./code-block":568,"./decorator":569,"./formula":570,"./number-list":572,"./section":573,"./table-block":574,"./title":575}],572:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,t){var e=[],i=!0,n=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(i=(o=u.next()).done)&&(e.push(o.value),!t||e.length!==t);i=!0);}catch(r){n=!0,a=r}finally{try{!i&&u.return&&u.return()}finally{if(n)throw a}}return e}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function decorateNumberList(r){var t=!0,e=!1,i=void 0;try{for(var n,a=r[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;if(!o.title){var u=o.text.match(/^\s*(\d+)\. /);if(u){var l=_slicedToArray(u,2)[1];o.numberList={digit:l.length}}}}}catch(r){e=!0,i=r}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}return r}exports.decorateNumberList=decorateNumberList;

    },{}],573:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decorateSection=decorateSection;var _line=require("../line/");function decorateSection(e){var n=-1;if(e.length<1)return e;for(var t=0;t<e.length;t++)e[t].section={number:n,start:!1,end:!1},(0,_line.isEmptyLine)(e[t])||0!==(0,_line.countIndent)(e[t])||0!==t&&!(0,_line.isEmptyLine)(e[t-1])||(n+=1,e[t].section.start=!0,t>0&&(e[t-1].section.end=!0),e[t].section.number=n);return e[e.length-1].section.end=!0,e}

    },{"../line/":587}],574:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,r){var e=[],n=!0,o=!1,a=void 0;try{for(var l,i=t[Symbol.iterator]();!(n=(l=i.next()).done)&&(e.push(l.value),!r||e.length!==r);n=!0);}catch(t){o=!0,a=t}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return e}(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.decorateTableBlock=decorateTableBlock;var _decorator=require("./decorator"),_line=require("../line/");function _toConsumableArray(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}function detectTableBlockStart(t){var r=t.match(/^\s*table:(.+)$/);return r?{title:_slicedToArray(r,2)[1]}:{}}function decorateTableBlock(t){for(var r=function _loop(r){var n=detectTableBlockStart(t[r].text).title;if(!n)return"continue";var o=(0,_line.countIndent)(t[r])+1,a=(0,_decorator.getBlock)(t,r,function(t){for(var r=[" ".repeat(o)],e=[].concat(_toConsumableArray(t.text.substr(o).split(/(\t)/)));e.length>0;)r.push(e.shift()+(e.shift()||""));t.tableBlock={title:n,indent:o,cells:r,start:!1,end:!1}});t[r].tableBlock.start=!0,t[a.end].tableBlock.end=!0,r=a.end,e=r},e=1;e<t.length;e++)r(e);return t}

    },{"../line/":587,"./decorator":569}],575:[function(require,module,exports){
        "use strict";function decorateTitle(e){return e.length>0&&(e[0].title=!0),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.decorateTitle=decorateTitle;

    },{}],576:[function(require,module,exports){
        (function (__filename){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var debug=require("./debug")(__filename),delay=exports.delay=function delay(e){return new Promise(function(t){return setTimeout(t,e)})},simulateRequestDelay=exports.simulateRequestDelay=function simulateRequestDelay(e,t){return Promise.resolve()};

        }).call(this,"/src/share/delay.js")
    },{"./debug":566}],577:[function(require,module,exports){
        "use strict";function _classCallCheck(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?r:t}function _inherits(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var DuplicateTitleError=exports.DuplicateTitleError=function(r){function DuplicateTitleError(){_classCallCheck(this,DuplicateTitleError);var r=_possibleConstructorReturn(this,(DuplicateTitleError.__proto__||Object.getPrototypeOf(DuplicateTitleError)).call(this));return r.name="DuplicateTitleError",r.message="title is duplicated",r}return _inherits(DuplicateTitleError,Error),DuplicateTitleError}(),NotFastForwardError=exports.NotFastForwardError=function(r){function NotFastForwardError(){_classCallCheck(this,NotFastForwardError);var r=_possibleConstructorReturn(this,(NotFastForwardError.__proto__||Object.getPrototypeOf(NotFastForwardError)).call(this));return r.name="NotFastForwardError",r.message="Not fast-forward",r}return _inherits(NotFastForwardError,Error),NotFastForwardError}();

    },{}],578:[function(require,module,exports){
        (function (process){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LANDING=exports.LANDING=!0,FORCE_APP_URL=exports.FORCE_APP_URL=!0,DEFAULT_PRO_USER=exports.DEFAULT_PRO_USER="true"===process.env.DEFAULT_PRO_USER,ENABLE_GOOGLE_ANALYTICS=exports.ENABLE_GOOGLE_ANALYTICS=!0,ENABLE_BILLING=exports.ENABLE_BILLING=!0,ENABLE_PROJECT_BACKUP=exports.ENABLE_PROJECT_BACKUP=!0,ENABLE_RATE_LIMIT_BY_USER=exports.ENABLE_RATE_LIMIT_BY_USER=!0;

        }).call(this,require('_process'))
    },{"_process":184}],579:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var countryFlag=exports.countryFlag="[\\u{1F1E6}-\\u{1F1FF}]{2}",keyCap=exports.keyCap="[0-9#\\*][\\u{FE0F}]?\\u{20E3}",emojiRange=["[\\u{2600}-\\u{26FF}]","[\\u{2700}-\\u{27BF}]","[\\u{1F300}-\\u{1F5FF}]","[\\u{1F600}-\\u{1F64F}]","[\\u{1F680}-\\u{1F6FF}]","[\\u{1F700}-\\u{1F77F}]","[\\u{1F900}-\\u{1F9FF}]"],emoji="("+emojiRange.join("|")+")",zeroWidthJoinder="\\u{200D}",variationSeletor="[\\u{FE0E}\\u{FE0F}]",skinTone="[\\u{1F3FB}-\\u{1F3FF}]",emojiVariation=exports.emojiVariation=emoji+"("+zeroWidthJoinder+emoji+"|"+skinTone+"|"+variationSeletor+")*";

    },{}],580:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitGraphemes=splitGraphemes;var _hasDom=require("has-dom"),_hasDom2=_interopRequireDefault(_hasDom),_khmer=require("./khmer"),_thai=require("./thai"),_lao=require("./lao"),_myanmar=require("./myanmar"),_emoji=require("./emoji");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var isGooglebot=function isGooglebot(){return(0,_hasDom2.default)()&&/Googlebot/.test(navigator.userAgent)},patterns=[_emoji.countryFlag,_emoji.keyCap,_emoji.emojiVariation,_khmer.khmer,_thai.thai,_lao.lao,_myanmar.myanmar,"."],splitter=isGooglebot()?/(.)/g:new RegExp("("+patterns.join("|")+")","gu");function splitGraphemes(e){return e.match(splitter)||[]}

    },{"./emoji":579,"./khmer":581,"./lao":582,"./myanmar":583,"./thai":584,"has-dom":143}],581:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var letter="[\\u{1780}-\\u{17FF}]",trailingLetter="[\\u{17B6}-\\u{17D1}\\u{17D3}\\u{17DD}]",control="\\u{17D2}",khmer=exports.khmer=letter+"("+control+letter+"|"+trailingLetter+")*";

    },{}],582:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var letter="[\\u{0E80}-\\u{0EFF}]",trailingLetter="[\\u{0EB1}\\u{0EB4}-\\u{0EBC}\\u{0EC8}-\\u{0ECD}]",lao=exports.lao=""+letter+trailingLetter+"*";

    },{}],583:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var letter="[\\u{1000}-\\u{109F}]",trailingLetterRange=["\\u{102B}-\\u{1038}","\\u{103A}-\\u{103E}","\\u{1056}-\\u{1059}","\\u{105E}-\\u{1060}","\\u{1062}-\\u{1064}","\\u{1067}-\\u{106D}","\\u{1071}-\\u{1074}","\\u{1082}-\\u{108D}","\\u{108F}","\\u{109A}-\\u{109D}"],trailingLetter="["+trailingLetterRange.join("")+"]",control="\\u{1039}",myanmar=exports.myanmar=letter+"("+control+letter+"|"+trailingLetter+")*";

    },{}],584:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var letter="[\\u0E00-\\u0E7F]",trailingLetter="[\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E]",thai=exports.thai=""+letter+trailingLetter+"*";

    },{}],585:[function(require,module,exports){
        "use strict";function isGyazoRawURL(a){return/^https?:\/\/(?:[a-z][a-z\d-]*[a-z\d]\.|i\.|)gyazo.com\/[a-z\d]{32}\/raw$/.test(a)}function isGyazoExtURL(a){return/^https?:\/\/(?:[a-z][a-z\d-]*[a-z\d]\.|i\.|)gyazo.com\/[a-z\d]{32}\.[^.]+$/.test(a)}function toGyazoThumbnailUrl(a,t){return isGyazoRawURL(a)?t?a.replace(/\/raw$/,"/thumb/"+t.size):a.replace(/\/raw$/,"/thumb"):isGyazoExtURL(a)?t?a.replace(/\.[^.]+$/,"/thumb/"+t.size):a.replace(/\.[^.]+$/,"/thumb"):a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.toGyazoThumbnailUrl=toGyazoThumbnailUrl,exports.toGyazoLargeThumbnailUrl=toGyazoLargeThumbnailUrl;var GYAZO_LARGE_THUMB_SIZE=exports.GYAZO_LARGE_THUMB_SIZE=1e3;function toGyazoLargeThumbnailUrl(a){return toGyazoThumbnailUrl(a,{size:GYAZO_LARGE_THUMB_SIZE})}

    },{}],586:[function(require,module,exports){
        "use strict";function IdGenerator(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userId:0}).userId,r=Math.floor(16777215*Math.random());return function generate(){var e=Math.floor(Date.now()/1e3);return(r+=1)>16777215&&(r=0),toString16(e,8)+toString16(t,6)+toString16(0,4)+toString16(r,6)}}function toString16(t,r){return(t=t.toString(16)).length>r?t.slice(t.length-r):"0".repeat(r-t.length)+t}function isIdString(t){return/^[a-f\d]{24,32}$/.test(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.IdGenerator=IdGenerator,exports.isIdString=isIdString;

    },{}],587:[function(require,module,exports){
        "use strict";function countIndent(t){return t.text.match(/^(\s*)/)[0].length}function isEmptyLine(t){return/^\s*$/.test(t.text)}function getIndentWidth(t){return 1.5*t+"em"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.countIndent=countIndent,exports.isEmptyLine=isEmptyLine,exports.getIndentWidth=getIndentWidth;

    },{}],588:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makePageSortQuery=makePageSortQuery;var pageSorts=exports.pageSorts={updated:"Date modified",created:"Date created",accessed:"Date last visited",point:"Trending",views:"Most Popular",linked:"Most linked",title:"Title",random:"Random (Not working)"},relatedPageSorts=exports.relatedPageSorts={related:"Most related",updated:"Date modified",accessed:"Date last visited",title:"Title"};function makePageSortQuery(e){e&&pageSorts[e]||(e="updated");var t={},a=-1;return"title"===e&&(e="titleLc",a=1),t.pin=-1,t[e]=a,t}

    },{}],589:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.noEncodeChars=void 0,exports.spaceToUnderscore=spaceToUnderscore,exports.toTitleLc=toTitleLc,exports.revertTitleLc=revertTitleLc,exports.encodeTitleURI=encodeTitleURI;var _lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_graphemeSplitter=require("./grapheme-splitter/");function spaceToUnderscore(e){return e.replace(/ /g,"_")}function toTitleLc(e){return spaceToUnderscore(e).toLowerCase()}function revertTitleLc(e){return e.replace(/_/g," ")}Array.prototype.getIndexByTitleLc=function(e){return this.map(toTitleLc).indexOf(toTitleLc(e))};var noTail=!0,noEncodeChars=exports.noEncodeChars=[{char:"@"},{char:"$"},{char:"&"},{char:"+"},{char:"="},{char:":",noTail:noTail},{char:";",noTail:noTail},{char:'"',noTail:noTail},{char:",",noTail:noTail}];function isNoEncodeChar(e){return!!noEncodeChars.find(function(r){return r.char===e})}function isNoTailChar(e){return isNoEncodeChar(e)&&!!noEncodeChars.find(function(r){return r.char===e}).noTail}function encodeTitleURI(e){e||(e=String(e));var r=(0,_graphemeSplitter.splitGraphemes)(e);return(0,_lodash.range)(0,r.length).map(function(e){var n=r[e],o=e===r.length-1;return!isNoEncodeChar(n)||o&&isNoTailChar(n)?" "===n?"_":encodeURIComponent(n):n}).join("")}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./grapheme-splitter/":580}],590:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPageMetadataFromLines=getPageMetadataFromLines;var _decorateLines=require("./decorate-lines"),_decorateLines2=_interopRequireDefault(_decorateLines),_scrapboxParser=require("./scrapbox-parser/"),_line=require("./line/"),_lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getPageMetadataFromLines(e){var r=[],t=[],a={},o=[],n=!0,i=!1,s=void 0;try{for(var l,c=(0,_decorateLines2.default)(e)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var d=l.value;if(!(d.title||d.codeBlock||d.cli||d.tableBlock)){o.length<5&&!(0,_line.isEmptyLine)(d)&&o.push(d.text.replace(/^\s+/,""));var u=(0,_scrapboxParser.parseScrapboxSyntax)(d.text);r=r.concat((0,_scrapboxParser.getLinksFromNode)(u)),t=t.concat((0,_scrapboxParser.getImagesFromNode)(u));var _=(0,_scrapboxParser.getIconsFromNode)(u),p=!0,f=!1,y=void 0;try{for(var b,g=Object.keys(_)[Symbol.iterator]();!(p=(b=g.next()).done);p=!0){var x=b.value,v=_[x];a.hasOwnProperty(x)?a[x]+=v:a[x]=v}}catch(e){f=!0,y=e}finally{try{!p&&g.return&&g.return()}finally{if(f)throw y}}}}}catch(e){i=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw s}}return{links:r=(0,_lodash.uniq)(r),icons:a,images:t=(0,_lodash.uniq)(t),descriptions:o}}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"./decorate-lines":571,"./line/":587,"./scrapbox-parser/":605}],591:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var PROTOCOL_VERSION=exports.PROTOCOL_VERSION="9";

    },{}],592:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,t){var e=[],n=!0,a=!1,i=void 0;try{for(var l,o=r[Symbol.iterator]();!(n=(l=o.next()).done)&&(e.push(l.value),!t||e.length!==t);n=!0);}catch(r){a=!0,i=r}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}return e}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.compileRelatedPages=compileRelatedPages;var _pageTitle=require("./page-title");function _toConsumableArray(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}var sorts={related:function related(r,t){return t.point-r.point},updated:function updated(r,t){return t.updated-r.updated},accessed:function accessed(r,t){return t.accessed-r.accessed},title:function title(r,t){return t.titleLc>r.titleLc?-1:1}},calcPageRank=function calcPageRank(r){var t=r.currentPageTitle,e=r.links,n=r.relatedPages,a=e.map(_pageTitle.toTitleLc),i=["linkTo","linkFrom"].concat(_toConsumableArray(a)),l=[].concat(_toConsumableArray(n.links1hop),_toConsumableArray(n.links2hop)),o=!0,c=!1,u=void 0;try{for(var s,y=l[Symbol.iterator]();!(o=(s=y.next()).done);o=!0){var f=s.value;f.relations=[],a.includes(f.titleLc)&&f.relations.push("linkTo"),f.linksLc.includes((0,_pageTitle.toTitleLc)(t))&&f.relations.push("linkFrom");var v=!0,d=!1,p=void 0;try{for(var h,m=f.linksLc[Symbol.iterator]();!(v=(h=m.next()).done);v=!0){var g=h.value;a.includes(g)&&f.relations.push(g)}}catch(r){d=!0,p=r}finally{try{!v&&m.return&&m.return()}finally{if(d)throw p}}var b=!0,k=!1,T=void 0;try{for(var _,L=l[Symbol.iterator]();!(b=(_=L.next()).done);b=!0){var A=_.value,w=A.relations;if(w){var x=i.length-i.indexOf(w[0]);A.point=100*x+w.length}}}catch(r){k=!0,T=r}finally{try{!b&&L.return&&L.return()}finally{if(k)throw T}}}}catch(r){c=!0,u=r}finally{try{!o&&y.return&&y.return()}finally{if(c)throw u}}};function compileRelatedPages(r){var t=r.currentPageTitle,e=r.links,n=r.relatedPages,a=r.sort;calcPageRank({currentPageTitle:t,links:e,relatedPages:n});var i=n.links1hop.sort(sorts[a]),l=n.icons1hop.sort(sorts[a]),o={},c=!0,u=!1,s=void 0;try{for(var y,f=e[Symbol.iterator]();!(c=(y=f.next()).done);c=!0){o[y.value]=[]}}catch(r){u=!0,s=r}finally{try{!c&&f.return&&f.return()}finally{if(u)throw s}}var v=!0,d=!1,p=void 0;try{for(var h,m=n.links1hop[Symbol.iterator]();!(v=(h=m.next()).done);v=!0){var g=h.value,b=!0,k=!1,T=void 0;try{for(var _,L=e[Symbol.iterator]();!(b=(_=L.next()).done);b=!0){var A=_.value,w=(0,_pageTitle.toTitleLc)(A);g.linksLc.includes(w)&&o[A].push(Object.assign({show:!1},g))}}catch(r){k=!0,T=r}finally{try{!b&&L.return&&L.return()}finally{if(k)throw T}}}}catch(r){d=!0,p=r}finally{try{!v&&m.return&&m.return()}finally{if(d)throw p}}var x=!0,P=!1,S=void 0;try{for(var C,O=n.links2hop[Symbol.iterator]();!(x=(C=O.next()).done);x=!0){var j=C.value,R=!0,F=!0,I=!1,q=void 0;try{for(var E,M=e[Symbol.iterator]();!(F=(E=M.next()).done);F=!0){var z=E.value,B=(0,_pageTitle.toTitleLc)(z);j.linksLc.includes(B)&&(o[z].push(Object.assign({show:R},j)),R=!1)}}catch(r){I=!0,q=r}finally{try{!F&&M.return&&M.return()}finally{if(I)throw q}}}}catch(r){P=!0,S=r}finally{try{!x&&O.return&&O.return()}finally{if(P)throw S}}var D=!0,G=!1,H=void 0;try{for(var J,K=Object.entries(o)[Symbol.iterator]();!(D=(J=K.next()).done);D=!0){var N=J.value,Q=_slicedToArray(N,2),U=Q[0];Q[1].length>0?o[U]=o[U].sort(sorts[a]):delete o[U]}}catch(r){G=!0,H=r}finally{try{!D&&K.return&&K.return()}finally{if(G)throw H}}var V=[].concat(_toConsumableArray(n.links1hop.map(function(r){return r.titleLc})),_toConsumableArray(n.links2hop.map(function(r){return r.titleLc})),_toConsumableArray(Object.keys(o).map(_pageTitle.toTitleLc)),_toConsumableArray(n.icons1hop.map(function(r){return r.titleLc}))).filter(function(r){return r}),W=e.filter(function(r){return(0,_pageTitle.toTitleLc)(r)!==(0,_pageTitle.toTitleLc)(t)&&!V.includes((0,_pageTitle.toTitleLc)(r))});return{links1hop:i,links2hop:o,icons1hop:l,existPagesLc:V,emptyLinks:W}}

    },{"./page-title":589}],593:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseAudioLinkReverse=exports.parseAudioLink=void 0;var _slicedToArray=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,r){var t=[],i=!0,n=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),pattern=/\[((https?:\/\/[^\s\]]+\.(?:wav|mp3|ogg|aac))\s+([^\]]*))\]/i,parseAudioLink=exports.parseAudioLink=(0,_parser.createNodeParser)(pattern,function(e){var r=_slicedToArray(e,4),t=r[0],i=r[1];return{type:"audioLink",unit:{whole:t,content:i,link:r[2],title:r[3]},children:i}}),patternReverse=/\[(([^\]]+)\s+(https?:\/\/[^\s\]]+\.(?:wav|mp3|ogg|aac)))\]/i,parseAudioLinkReverse=exports.parseAudioLinkReverse=(0,_parser.createNodeParser)(patternReverse,function(e){var r=_slicedToArray(e,4),t=r[0],i=r[1];return{type:"audioLink",unit:{whole:t,content:i,title:r[2],link:r[3]},children:i}});exports.default=(0,_parser.combineNodeParsers)(parseAudioLink,parseAudioLinkReverse);

    },{"./parser":608}],594:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],n=!0,a=!1,o=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){a=!0,o=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),pattern=/\[(https?:\/\/[^\]\s]*\.(?:wav|mp3|ogg|aac))\]/i;exports.default=(0,_parser.createNodeParser)(pattern,function(r){var e=_slicedToArray(r,2),t=e[0],n=e[1];return{type:"audio",unit:{whole:t,content:n},children:n}});

    },{"./parser":608}],595:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],n=!0,a=!1,o=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){a=!0,o=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser");exports.default=(0,_parser.createNodeParser)(/\[(\s+)\]/,function(r){var e=_slicedToArray(r,2),t=e[0],n=e[1];return{type:"blank",unit:{content:n,whole:t},children:n}});

    },{"./parser":608}],596:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],n=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){o=!0,a=r}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser");exports.default=(0,_parser.createNodeParser)(/`((?:\\`|[^`])*)`/,function(r){var e=_slicedToArray(r,2),t=e[0],n=e[1];return{type:"code",unit:{whole:t,content:n},children:n}});

    },{"./parser":608}],597:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseFormula2=exports.parseFormula=exports.parseDeco=void 0;var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],o=!0,a=!1,n=void 0;try{for(var s,i=r[Symbol.iterator]();!(o=(s=i.next()).done)&&(t.push(s.value),!e||t.length!==e);o=!0);}catch(r){a=!0,n=r}finally{try{!o&&i.return&&i.return()}finally{if(a)throw n}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),parseDeco=exports.parseDeco=(0,_parser.createNodeParser)(/\[([!"#%&'()*+,-.\/{|}<>_~]+) ((?:\[[^\]]+\]|[^\]])+)\]/,function(r){var e=_slicedToArray(r,3),t=e[0],o=e[1],a=e[2];return{type:"deco",unit:{whole:t,content:a,deco:o,strong:o.includes("*")?Math.min(o.match(/\*/g).length,10):0,italic:o.includes("/"),strike:o.includes("-"),underline:o.includes("_")},children:a}}),parseFormula=exports.parseFormula=(0,_parser.createNodeParser)(/\[(\$ (.+? ))\]/,function(r){var e=_slicedToArray(r,3),t=e[0],o=e[1];return{type:"deco-formula",unit:{whole:t,content:o,formula:e[2]},children:o}}),parseFormula2=exports.parseFormula2=(0,_parser.createNodeParser)(/\[(\$ ([^\]]+))\]/,function(r){var e=_slicedToArray(r,3),t=e[0],o=e[1];return{type:"deco-formula",unit:{whole:t,content:o,formula:e[2]},children:o}});exports.default=(0,_parser.combineNodeParsers)(parseDeco,parseFormula,parseFormula2);

    },{"./parser":608}],598:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseGyazoLinkReverse=exports.parseGyazoLink=void 0;var _slicedToArray=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,r){var t=[],a=!0,n=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(t.push(s.value),!r||t.length!==r);a=!0);}catch(e){n=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),pattern=/\[((https?:\/\/[^\]\s]+)\s+(https?:\/\/(?:[a-z][a-z0-9-]*[a-z0-9]\.|)gyazo\.com\/[0-9a-f]{32}))\]/,parseGyazoLink=exports.parseGyazoLink=(0,_parser.createNodeParser)(pattern,function(e){var r=_slicedToArray(e,4),t=r[0],a=r[1];return{type:"gyazoLink",unit:{whole:t,content:a,link:r[2],gyazo:r[3]},children:a}}),patternReverse=/\[((https?:\/\/(?:[a-z][a-z0-9-]*[a-z0-9]\.|)gyazo\.com\/[0-9a-f]{32})\s+(https?:\/\/[^\]\s]+))\]/,parseGyazoLinkReverse=exports.parseGyazoLinkReverse=(0,_parser.createNodeParser)(patternReverse,function(e){var r=_slicedToArray(e,4),t=r[0],a=r[1],n=r[2];return{type:"gyazoLink",unit:{whole:t,content:a,link:r[3],gyazo:n},children:a}});exports.default=(0,_parser.combineNodeParsers)(parseGyazoLink,parseGyazoLinkReverse);

    },{"./parser":608}],599:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],a=!0,n=!1,o=void 0;try{for(var i,u=r[Symbol.iterator]();!(a=(i=u.next()).done)&&(t.push(i.value),!e||t.length!==e);a=!0);}catch(r){n=!0,o=r}finally{try{!a&&u.return&&u.return()}finally{if(n)throw o}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),pattern=/\[(https?:\/\/(?:[a-z][a-z0-9-]*[a-z0-9]\.|)gyazo\.com\/[0-9a-f]{32})\]/;exports.default=(0,_parser.createNodeParser)(pattern,function(r){var e=_slicedToArray(r,2),t=e[0],a=e[1];return{type:"gyazo",unit:{whole:t,content:a},children:a}});

    },{"./parser":608}],600:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseHashTag=void 0;var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],a=!0,n=!1,i=void 0;try{for(var o,s=r[Symbol.iterator]();!(a=(o=s.next()).done)&&(t.push(o.value),!e||t.length!==e);a=!0);}catch(r){n=!0,i=r}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),pattern=/(^|\s)#([^\s]+)/,parseHashTag=exports.parseHashTag=(0,_parser.createNodeParser)(pattern,function(r){var e=_slicedToArray(r,3),t=e[1],a=e[2],n={type:"hashTag",unit:{page:a,tag:"#",get content(){return this.page},get whole(){return"#"+this.page}},children:"#"+a};return t?[t,n]:n});

    },{"./parser":608}],601:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseProjectIconTower=exports.parseProjectIcon=exports.parseIconTower=exports.parseIcon=void 0;var _slicedToArray=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,r){var t=[],o=!0,n=!1,c=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(t.push(a.value),!r||t.length!==r);o=!0);}catch(e){n=!0,c=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw c}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),parseIcon=exports.parseIcon=(0,_parser.createNodeParser)(/\[(([^[\]]+)\.icon)\]/,function(e){var r=_slicedToArray(e,3),t=r[1];return{type:"icon",unit:{page:r[2],size:1,get content(){return this.page+".icon"},get whole(){return"["+this.content+"]"}},children:t}}),parseIconTower=exports.parseIconTower=(0,_parser.createNodeParser)(/\[(([^[\]]+)\.icon([*x])([1-9]\d*))\]/,function(e){var r=_slicedToArray(e,5),t=r[1],o=r[2],n=r[3],c=r[4];return{type:"icon",unit:{page:o,size:c-=0,get content(){return this.page+".icon"+n+c},get whole(){return"["+this.content+"]"}},children:t}}),parseProjectIcon=exports.parseProjectIcon=(0,_parser.createNodeParser)(/\[(\/([a-zA-Z0-9-]+)\/([^[\]]+)\.icon)\]/,function(e){var r=_slicedToArray(e,4),t=(r[0],r[1]);return{type:"icon",unit:{project:r[2],page:r[3],size:1,get content(){return"/"+this.project+"/"+this.page+".icon"},get whole(){return"["+this.content+"]"}},children:t}}),parseProjectIconTower=exports.parseProjectIconTower=(0,_parser.createNodeParser)(/\[(\/([a-zA-Z0-9-]+)\/([^[\]]+)\.icon([*x])([1-9]\d*))\]/,function(e){var r=_slicedToArray(e,6),t=(r[0],r[1]),o=r[2],n=r[3],c=r[4],a=r[5];return{type:"icon",unit:{project:o,page:n,size:a-=0,get content(){return"/"+this.project+"/"+this.page+".icon"+c+a},get whole(){return"["+this.content+"]"}},children:t}});exports.default=(0,_parser.combineNodeParsers)(parseProjectIcon,parseProjectIconTower,parseIcon,parseIconTower);

    },{"./parser":608}],602:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseImageLinkReverse=exports.parseImageLink=void 0;var _slicedToArray=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,r){var t=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),pattern=/\[((https?:\/\/[^\]\s]+)\s+(https?:\/\/[^\]\s]*\.(?:png|jpe?g|gif|svg)))\]/i,parseImageLink=exports.parseImageLink=(0,_parser.createNodeParser)(pattern,function(e){var r=_slicedToArray(e,4),t=r[0],n=r[1];return{type:"imageLink",unit:{whole:t,content:n,link:r[2],image:r[3]},children:n}}),patternReverse=/\[((https?:\/\/[^\]\s]*\.(?:png|jpe?g|gif|svg))\s+(https?:\/\/[^\]\s]+))\]/i,parseImageLinkReverse=exports.parseImageLinkReverse=(0,_parser.createNodeParser)(patternReverse,function(e){var r=_slicedToArray(e,4),t=r[0],n=r[1];return{type:"imageLink",unit:{whole:t,content:n,image:r[2],link:r[3]},children:n}});exports.default=(0,_parser.combineNodeParsers)(parseImageLink,parseImageLinkReverse);

    },{"./parser":608}],603:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],n=!0,a=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done)&&(t.push(o.value),!e||t.length!==e);n=!0);}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),pattern=/\[(https?:\/\/[^\]\s]*\.(?:png|jpe?g|gif|svg))\]/i;exports.default=(0,_parser.createNodeParser)(pattern,function(r){var e=_slicedToArray(r,2),t=e[0],n=e[1];return{type:"image",unit:{whole:t,content:n},children:n}});

    },{"./parser":608}],604:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],n=!0,a=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done)&&(t.push(o.value),!e||t.length!==e);n=!0);}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser");exports.default=(0,_parser.createNodeParser)(/^([\t\s]+)(.*)$/,function(r){var e=_slicedToArray(r,3),t=e[0],n=e[1],a=e[2];return{type:"indent",unit:{whole:t,tag:n,content:a},children:a}});

    },{"./parser":608}],605:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseScrapboxSyntax=void 0,exports.isNode=isNode,exports.eachNode=eachNode,exports.getLinksFromNode=getLinksFromNode,exports.getIconsFromNode=getIconsFromNode,exports.getImagesFromNode=getImagesFromNode;var _lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_parser=require("./parser"),_blank=require("./blank"),_blank2=_interopRequireDefault(_blank),_video=require("./video"),_vimeo=require("./vimeo"),_vimeo2=_interopRequireDefault(_vimeo),_audio=require("./audio"),_audio2=_interopRequireDefault(_audio),_audioLink=require("./audio-link"),_audioLink2=_interopRequireDefault(_audioLink),_image=require("./image"),_image2=_interopRequireDefault(_image),_imageLink=require("./image-link"),_imageLink2=_interopRequireDefault(_imageLink),_gyazo=require("./gyazo"),_gyazo2=_interopRequireDefault(_gyazo),_gyazoLink=require("./gyazo-link"),_gyazoLink2=_interopRequireDefault(_gyazoLink),_link=require("./link"),_link2=_interopRequireDefault(_link),_hashTag=require("./hash-tag"),_icon=require("./icon"),_icon2=_interopRequireDefault(_icon),_strongIcon=require("./strong-icon"),_strongIcon2=_interopRequireDefault(_strongIcon),_strongImage=require("./strong-image"),_strongImage2=_interopRequireDefault(_strongImage),_deco=require("./deco"),_deco2=_interopRequireDefault(_deco),_strong=require("./strong"),_strong2=_interopRequireDefault(_strong),_url=require("./url"),_url2=_interopRequireDefault(_url),_urlLink=require("./url-link"),_urlLink2=_interopRequireDefault(_urlLink),_youtube=require("./youtube"),_youtube2=_interopRequireDefault(_youtube),_location=require("./location"),_location2=_interopRequireDefault(_location),_quote=require("./quote"),_quote2=_interopRequireDefault(_quote),_code=require("./code"),_code2=_interopRequireDefault(_code),_indent=require("./indent"),_indent2=_interopRequireDefault(_indent),_pageTitle=require("../validator/page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var parseScrapboxSyntax=exports.parseScrapboxSyntax=(0,_parser.combineNodeParsers)(_indent2.default,_quote2.default,_code2.default,_blank2.default,_deco2.default,_strongIcon2.default,_strongImage2.default,_strong2.default,_youtube2.default,_location2.default,_vimeo2.default,_audio2.default,_video.parseVideo,_image2.default,_gyazo2.default,_gyazoLink2.default,_imageLink2.default,_audioLink2.default,_urlLink2.default,_url2.default,_icon2.default,_link2.default,_hashTag.parseHashTag);function isNode(e){return!(!e.type||!e.unit)||"string"==typeof e}function eachNode(e,i){if("function"==typeof i)return e instanceof Array?e.forEach(function(e){return eachNode(e,i)}):(isNode(e)&&i(e),e.children?eachNode(e.children,i):void 0)}function getLinksFromNode(e){var i=[];return eachNode(e,function(e){switch(e.type){case"link":var o=e.unit,r=o.page;!o.project&&(0,_pageTitle.validatePageTitle)(r).isValid&&i.push(r);break;case"hashTag":var a=e.unit.page;(0,_pageTitle.validatePageTitle)(a).isValid&&i.push(a)}}),(0,_lodash.uniq)(i)}function getIconsFromNode(e){var i={};return eachNode(e,function(e){switch(e.type){case"icon":case"strong-icon":var o=e.unit,r=o.project,a=o.page,t=o.size;!r&&(0,_pageTitle.validatePageTitle)(a).isValid&&t&&(i.hasOwnProperty(a)?i[a]+=t:i[a]=t)}}),i}function getImagesFromNode(e){var i=[];return eachNode(e,function(e){switch(e.type){case"gyazo":case"strongGyazo":i.push(e.children+"/raw");break;case"gyazoLink":case"strongGyazoLink":i.push(e.unit.gyazo+"/raw");break;case"image":case"strongImage":i.push(e.unit.content);break;case"imageLink":case"strongImageLink":i.push(e.unit.image);break;case"youtube":i.push("https://i.ytimg.com/vi/"+e.unit.videoId+"/mqdefault.jpg");break;case"deco-formula":i.push("https://chart.apis.google.com/chart?cht=tx&chl="+encodeURIComponent(e.unit.formula))}}),(0,_lodash.uniq)(i)}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"../validator/page-title":622,"./audio":594,"./audio-link":593,"./blank":595,"./code":596,"./deco":597,"./gyazo":599,"./gyazo-link":598,"./hash-tag":600,"./icon":601,"./image":603,"./image-link":602,"./indent":604,"./link":606,"./location":607,"./parser":608,"./quote":609,"./strong":612,"./strong-icon":610,"./strong-image":611,"./url":614,"./url-link":613,"./video":615,"./vimeo":616,"./youtube":617}],606:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseProjectRootLink=exports.parseProjectLineLink=exports.parseProjectLink=exports.parseLineLink=exports.parsePageLink=void 0;var _slicedToArray=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,r){var t=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),parsePageLink=exports.parsePageLink=(0,_parser.createNodeParser)(/\[([^[\]]+)\]/,function(e){var r=_slicedToArray(e,2)[1];return{type:"link",unit:{page:r,get content(){return this.page},get whole(){return"["+this.page+"]"}},children:r}}),parseLineLink=exports.parseLineLink=(0,_parser.createNodeParser)(/\[(([^[\]]+)#([a-f\d]{24,32}))\]/,function(e){var r=_slicedToArray(e,4),t=r[1];return{type:"link",unit:{page:r[2],line:r[3],get content(){return this.page+"#"+this.line},get whole(){return"["+this.content+"]"}},children:t}}),parseProjectLink=exports.parseProjectLink=(0,_parser.createNodeParser)(/\[(\/([a-z0-9-]+)\/([^[\]]+))\]/i,function(e){var r=_slicedToArray(e,4),t=r[1];return{type:"link",unit:{project:r[2],page:r[3],get content(){return"/"+this.project+"/"+this.page},get whole(){return"["+this.content+"]"}},children:t}}),parseProjectLineLink=exports.parseProjectLineLink=(0,_parser.createNodeParser)(/\[(\/([a-z0-9-]+)\/([^[\]]+)#([a-f\d]{24,32}))\]/i,function(e){var r=_slicedToArray(e,5),t=r[1];return{type:"link",unit:{project:r[2],page:r[3],line:r[4],get content(){return"/"+this.project+"/"+this.page+"#"+this.line},get whole(){return"["+this.content+"]"}},children:t}}),parseProjectRootLink=exports.parseProjectRootLink=(0,_parser.createNodeParser)(/\[(\/([a-z0-9-]+)\/?)\]/i,function(e){var r=_slicedToArray(e,3),t=r[0],n=r[1];return{type:"link",unit:{whole:t,content:n,project:r[2]},children:n}});exports.default=(0,_parser.combineNodeParsers)(parseProjectRootLink,parseProjectLineLink,parseProjectLink,parseLineLink,parsePageLink);

    },{"./parser":608}],607:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseLocationTitleReverse=exports.parseLocationTitle=exports.parseLocation=void 0;var _slicedToArray=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,r){var t=[],o=!0,a=!1,n=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);o=!0);}catch(e){a=!0,n=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw n}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),normalizeLatitude=function normalizeLatitude(e){return parseFloat(e.replace(/^N/,"").replace(/^S/,"-"))},normalizeLongitude=function normalizeLongitude(e){return parseFloat(e.replace(/^E/,"").replace(/^W/,"-"))},parseLocation=exports.parseLocation=(0,_parser.createNodeParser)(/\[(([NS]\d+(?:\.\d+)?),([EW]\d+(?:\.\d+)?)(?:|,Z(\d+)))\]/,function(e){var r=_slicedToArray(e,5),t=r[0],o=r[1],a=r[2],n=r[3],i=r[4];return{type:"location",unit:{whole:t,content:o,latitude:normalizeLatitude(a),longitude:normalizeLongitude(n),zoom:i&&parseInt(i)},children:o}}),parseLocationTitle=exports.parseLocationTitle=(0,_parser.createNodeParser)(/\[(([NS]\d+(?:\.\d+)?),([EW]\d+(?:\.\d+)?)(?:|,Z(\d+)) ([^[\]]+))\]/,function(e){var r=_slicedToArray(e,6),t=r[0],o=r[1],a=r[2],n=r[3],i=r[4],l=r[5];return{type:"location",unit:{whole:t,content:o,latitude:normalizeLatitude(a),longitude:normalizeLongitude(n),zoom:i&&parseInt(i),title:l},children:o}}),parseLocationTitleReverse=exports.parseLocationTitleReverse=(0,_parser.createNodeParser)(/\[(([^[\]]+) ([NS]\d+(?:\.\d+)?),([EW]\d+(?:\.\d+)?)(?:|,Z(\d+)))\]/,function(e){var r=_slicedToArray(e,6),t=r[0],o=r[1],a=r[2],n=r[3],i=r[4],l=r[5];return{type:"location",unit:{whole:t,content:o,latitude:normalizeLatitude(n),longitude:normalizeLongitude(i),zoom:l&&parseInt(l),title:a},children:o}});exports.default=(0,_parser.combineNodeParsers)(parseLocation,parseLocationTitle,parseLocationTitleReverse);

    },{"./parser":608}],608:[function(require,module,exports){
        (function (global){
            "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNodeParser=createNodeParser,exports.combineNodeParsers=combineNodeParsers;var _lodash="undefined"!=typeof window?window.window._:"undefined"!=typeof global?global.window._:null,_disableRegexpCapture=require("disable-regexp-capture"),_disableRegexpCapture2=_interopRequireDefault(_disableRegexpCapture);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var ALLOW_NEST=["indent","quote","strong","deco"];function createNodeParser(e,r){if(!(e instanceof RegExp))throw new Error("pattern is not a RegExp");if("function"!=typeof r)throw new Error("transformToNode is not a function");var t=new RegExp("("+(0,_disableRegexpCapture2.default)(e)+")",e.flags),n=function nodeParser(n){return parseNodeTree(n,function(n){if(!e.test(n))return n;var o=n.split(t).filter(function(e){return e}).map(function(t){var n=t.match(e);return n?r(n):t});return 1===o.length?o[0]:o})};return n.pattern=e,n}function parseNodeTree(e,r){return e?"string"==typeof e?r(e):e instanceof Array?(0,_lodash.flatten)(e.map(function(e){return parseNodeTree(e,r)})):(ALLOW_NEST.includes(e.type)&&(e.children=parseNodeTree(e.children,r)),e):e}function combineNodeParsers(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e){var t=!0,n=!1,o=void 0;try{for(var a,i=r[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){e=(0,a.value)(e)}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}return e}}

        }).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    },{"disable-regexp-capture":120}],609:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],n=!0,a=!1,o=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){a=!0,o=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser");exports.default=(0,_parser.createNodeParser)(/^(>\s*)(.*?)$/,function(r){var e=_slicedToArray(r,3),t=e[0],n=e[1],a=e[2];return{type:"quote",unit:{whole:t,tag:n,content:a},children:a}});

    },{"./parser":608}],610:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseStrongProjectIconTower=exports.parseStrongProjectIcon=exports.parseStrongIconTower=exports.parseStrongIcon=void 0;var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],o=!0,n=!1,c=void 0;try{for(var s,a=r[Symbol.iterator]();!(o=(s=a.next()).done)&&(t.push(s.value),!e||t.length!==e);o=!0);}catch(r){n=!0,c=r}finally{try{!o&&a.return&&a.return()}finally{if(n)throw c}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),parseStrongIcon=exports.parseStrongIcon=(0,_parser.createNodeParser)(/\[\[(([^[\]]+)\.icon)\]\]/,function(r){var e=_slicedToArray(r,3),t=e[1];return{type:"strong-icon",unit:{page:e[2],size:1,get content(){return this.page+".icon"},get whole(){return"[["+this.content+"]]"}},children:t}}),parseStrongIconTower=exports.parseStrongIconTower=(0,_parser.createNodeParser)(/\[\[(([^[\]]+)\.icon([*x])([1-9]\d*))\]\]/,function(r){var e=_slicedToArray(r,5),t=e[1],o=e[2],n=e[3],c=e[4];return{type:"strong-icon",unit:{page:o,size:c-=0,get content(){return this.page+".icon"+n+this.size},get whole(){return"[["+this.content+"]]"}},children:t}}),parseStrongProjectIcon=exports.parseStrongProjectIcon=(0,_parser.createNodeParser)(/\[\[(\/([a-zA-Z0-9-]+)\/([^[\]]+)\.icon)\]\]/,function(r){var e=_slicedToArray(r,4),t=e[1];return{type:"strong-icon",unit:{project:e[2],page:e[3],size:1,get content(){return"/"+this.project+"/"+this.page+".icon"},get whole(){return"[["+this.content+"]]"}},children:t}}),parseStrongProjectIconTower=exports.parseStrongProjectIconTower=(0,_parser.createNodeParser)(/\[\[(\/([a-zA-Z0-9-]+)\/([^[\]]+)\.icon([*x])([1-9]\d*))\]\]/,function(r){var e=_slicedToArray(r,6),t=(e[0],e[1]),o=e[2],n=e[3],c=e[4],s=e[5];return{type:"strong-icon",unit:{project:o,page:n,size:s-=0,get content(){return"/"+this.project+"/"+this.page+".icon"+c+this.size},get whole(){return"[["+this.content+"]]"}},children:t}});exports.default=(0,_parser.combineNodeParsers)(parseStrongProjectIcon,parseStrongProjectIconTower,parseStrongIcon,parseStrongIconTower);

    },{"./parser":608}],611:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseStrongGyazoLinkReverse=exports.parseStrongGyazoLink=exports.parseStrongImageLinkReverse=exports.parseStrongImageLink=exports.parseStrongGyazo=exports.parseStrongImage=void 0;var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],a=!0,n=!1,o=void 0;try{for(var s,i=r[Symbol.iterator]();!(a=(s=i.next()).done)&&(t.push(s.value),!e||t.length!==e);a=!0);}catch(r){n=!0,o=r}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),parseStrongImage=exports.parseStrongImage=(0,_parser.createNodeParser)(/\[\[(https?:\/\/[^\]\s]*\.(?:png|jpe?g|gif|svg))\]\]/i,function(r){var e=_slicedToArray(r,2),t=e[0],a=e[1];return{type:"strongImage",unit:{whole:t,content:a},children:a}}),parseStrongGyazo=exports.parseStrongGyazo=(0,_parser.createNodeParser)(/\[\[(https?:\/\/(?:[a-z][a-z0-9-]*[a-z0-9]\.|)gyazo\.com\/[0-9a-f]{32})\]\]/,function(r){var e=_slicedToArray(r,2),t=e[0],a=e[1];return{type:"strongGyazo",unit:{whole:t,content:a},children:a}}),parseStrongImageLink=exports.parseStrongImageLink=(0,_parser.createNodeParser)(/\[\[((https?:\/\/[^\]\s]+)\s+(https?:\/\/[^\]\s]*\.(?:png|jpe?g|gif|svg)))\]\]/,function(r){var e=_slicedToArray(r,4),t=e[0],a=e[1];return{type:"strongImageLink",unit:{whole:t,content:a,link:e[2],image:e[3]},children:a}}),parseStrongImageLinkReverse=exports.parseStrongImageLinkReverse=(0,_parser.createNodeParser)(/\[\[((https?:\/\/[^\]\s]*\.(?:png|jpe?g|gif|svg))\s+(https?:\/\/[^\]\s]+))\]\]/,function(r){var e=_slicedToArray(r,4),t=e[0],a=e[1],n=e[2];return{type:"strongImageLink",unit:{whole:t,content:a,link:e[3],image:n},children:a}}),parseStrongGyazoLink=exports.parseStrongGyazoLink=(0,_parser.createNodeParser)(/\[\[((https?:\/\/[^\]\s]+)\s+(https?:\/\/(?:[a-z][a-z0-9-]*[a-z0-9]\.|)gyazo\.com\/[0-9a-f]{32}))\]\]/,function(r){var e=_slicedToArray(r,4),t=e[0],a=e[1];return{type:"strongGyazoLink",unit:{whole:t,content:a,link:e[2],gyazo:e[3]},children:a}}),parseStrongGyazoLinkReverse=exports.parseStrongGyazoLinkReverse=(0,_parser.createNodeParser)(/\[\[((https?:\/\/(?:[a-z][a-z0-9-]*[a-z0-9]\.|)gyazo\.com\/[0-9a-f]{32})\s+(https?:\/\/[^\]\s]+))\]\]/,function(r){var e=_slicedToArray(r,4),t=e[0],a=e[1];return{type:"strongGyazoLink",unit:{whole:t,content:a,gyazo:e[2],link:e[3]},children:a}});exports.default=(0,_parser.combineNodeParsers)(parseStrongImage,parseStrongGyazo,parseStrongImageLink,parseStrongImageLinkReverse,parseStrongGyazoLink,parseStrongGyazoLinkReverse);

    },{"./parser":608}],612:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],n=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){o=!0,a=r}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser");exports.default=(0,_parser.createNodeParser)(/\[\[(.+?[\]]*)\]\]/,function(r){var e=_slicedToArray(r,2)[1];return{type:"strong",unit:{content:e,whole:"[["+e+"]]"},children:e}});

    },{"./parser":608}],613:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUrlLinkWithTitleReverse=exports.parseUrlLinkWithTitle=exports.parseUrlLink=void 0;var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],i=!0,n=!1,s=void 0;try{for(var l,a=r[Symbol.iterator]();!(i=(l=a.next()).done)&&(t.push(l.value),!e||t.length!==e);i=!0);}catch(r){n=!0,s=r}finally{try{!i&&a.return&&a.return()}finally{if(n)throw s}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),parseUrlLink=exports.parseUrlLink=(0,_parser.createNodeParser)(/\[(https?:\/\/[^\s\]]+)\]/,function(r){var e=_slicedToArray(r,2)[1];return{type:"urlLink",unit:{link:e,content:e,whole:"["+e+"]"},children:e}}),parseUrlLinkWithTitle=exports.parseUrlLinkWithTitle=(0,_parser.createNodeParser)(/\[((https?:\/\/[^\s\]]+)\s+([^\]]*[^\s]))\]/,function(r){var e=_slicedToArray(r,4),t=e[1];return{type:"urlLink",unit:{link:e[2],title:e[3],content:t,whole:"["+t+"]"},children:t}}),parseUrlLinkWithTitleReverse=exports.parseUrlLinkWithTitleReverse=(0,_parser.createNodeParser)(/\[(([^\]]*[^\s])\s+(https?:\/\/[^\s\]]+))\]/,function(r){var e=_slicedToArray(r,4),t=e[1],i=e[2];return{type:"urlLink",unit:{link:e[3],title:i,content:t,whole:"["+t+"]"},children:t}});exports.default=(0,_parser.combineNodeParsers)(parseUrlLinkWithTitle,parseUrlLinkWithTitleReverse,parseUrlLink);

    },{"./parser":608}],614:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],n=!0,a=!1,o=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){a=!0,o=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser");exports.default=(0,_parser.createNodeParser)(/(https?:\/\/[^\s]+)/,function(r){var e=_slicedToArray(r,2)[1];return{type:"url",unit:{content:e,whole:e},children:e}});

    },{"./parser":608}],615:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseVideo=void 0;var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],n=!0,o=!1,i=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done)&&(t.push(a.value),!e||t.length!==e);n=!0);}catch(r){o=!0,i=r}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),pattern=/\[(https?:\/\/[^\]\s]+\.mp4)\]/i,parseVideo=exports.parseVideo=(0,_parser.createNodeParser)(pattern,function(r){var e=_slicedToArray(r,2),t=e[0],n=e[1];return{type:"video",unit:{whole:t,content:n},children:n}});

    },{"./parser":608}],616:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],n=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done)&&(t.push(a.value),!e||t.length!==e);n=!0);}catch(r){o=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_parser=require("./parser"),pattern=/\[(https?:\/\/vimeo\.com\/([0-9]+))\]/i;exports.default=(0,_parser.createNodeParser)(pattern,function(r){var e=_slicedToArray(r,3),t=e[0],n=e[1];return{type:"vimeo",unit:{whole:t,content:n,videoId:e[2]},children:n}});

    },{"./parser":608}],617:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseYoutubeShortUrl=exports.parseYoutubeCom=void 0;var _slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function sliceIterator(r,e){var t=[],a=!0,o=!1,n=void 0;try{for(var u,i=r[Symbol.iterator]();!(a=(u=i.next()).done)&&(t.push(u.value),!e||t.length!==e);a=!0);}catch(r){o=!0,n=r}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.parseParams=parseParams,exports.normalizeTime=normalizeTime;var _parser=require("./parser");function parseParams(r){var e={};if(!r)return e;var t=!0,a=!1,o=void 0;try{for(var n,u=r.split("&")[Symbol.iterator]();!(t=(n=u.next()).done);t=!0){var i=n.value;if(i){var s=i.split("="),l=_slicedToArray(s,2),p=l[0],c=l[1];e[p]=c}}}catch(r){a=!0,o=r}finally{try{!t&&u.return&&u.return()}finally{if(a)throw o}}return e.t&&(e.t=normalizeTime(e.t)),e}function normalizeTime(r){if(/^\d+$/.test(r))return parseInt(r);var e=0,t=!0,a=!1,o=void 0;try{for(var n,u=[[/(\d+)s/,function(r){return r}],[/(\d+)m/,function(r){return 60*r}],[/(\d+)h/,function(r){return 3600*r}]][Symbol.iterator]();!(t=(n=u.next()).done);t=!0){var i=n.value,s=_slicedToArray(i,2),l=s[0],p=s[1];l.test(r)&&(e+=p(parseInt(r.match(l)[1])))}}catch(r){a=!0,o=r}finally{try{!t&&u.return&&u.return()}finally{if(a)throw o}}return e||r}var parseYoutubeCom=exports.parseYoutubeCom=(0,_parser.createNodeParser)(/\[(https?:\/\/(?:www\.|)youtube\.com\/watch\?v=([a-zA-Z\d_-]+)(?:&([^\s]{1,100})|))\]/,function(r){var e=_slicedToArray(r,4),t=e[0],a=e[1];return{type:"youtube",unit:{whole:t,content:a,videoId:e[2],params:parseParams(e[3])},children:a}}),parseYoutubeShortUrl=exports.parseYoutubeShortUrl=(0,_parser.createNodeParser)(/\[(https?:\/\/youtu\.be\/([a-zA-Z\d_-]+)(?:\?([^\s]{0,100})|))\]/,function(r){var e=_slicedToArray(r,4),t=e[0],a=e[1];return{type:"youtube",unit:{whole:t,content:a,videoId:e[2],params:parseParams(e[3])},children:a}});exports.default=(0,_parser.combineNodeParsers)(parseYoutubeCom,parseYoutubeShortUrl);

    },{"./parser":608}],618:[function(require,module,exports){
        "use strict";var _graphemeSplitter=require("./grapheme-splitter");String.prototype.__defineGetter__("charLength",function(){return(0,_graphemeSplitter.splitGraphemes)(this).length}),String.prototype.charSubstr=function(){for(var e,r=arguments.length,t=Array(r),p=0;p<r;p++)t[p]=arguments[p];return t[1]>0&&(t[1]+=t[0]),(e=(0,_graphemeSplitter.splitGraphemes)(this)).slice.apply(e,t).join("")};

    },{"./grapheme-splitter":580}],619:[function(require,module,exports){
        "use strict";function replaceProtocol(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"!=typeof r)throw new Error("Argument Error: not string");return r.replace(/^[a-z\d]+:/,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.replaceProtocol=replaceProtocol;

    },{}],620:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.validateImportPagesFile=validateImportPagesFile,exports.fixImportPagesFile=fixImportPagesFile,exports.validateAndFixImportPagesFile=validateAndFixImportPagesFile;var _result=require("./result"),_result2=_interopRequireDefault(_result),_pageTitle=require("./page-title");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function validateImportPagesFile(e){var r=new _result2.default;if(!(e.pages instanceof Array))return r.errors.push("pages is not an array"),r;if(e.pages.length<1)return r.errors.push("pages is empty"),r;var t=function _loop(e){var t,i=(0,_pageTitle.validatePageTitle)(e.title);if(i.isInvalid)return(t=r.errors).push.apply(t,_toConsumableArray(i.errors.map(function(r){return r+' at "'+e.title+'"'}))),{v:r};if(!(e.lines instanceof Array))return r.errors.push('page.lines is not an array at "'+e.title+'"'),{v:r};if(e.lines.length<1)return r.errors.push('pages.lines is empty at "'+e.title+'"'),{v:r};if(e.lines.length>=1e4)return r.errors.push("page.lines must be less than 10000 lines"),{v:r};var n=!0,a=!1,o=void 0;try{for(var l,u=e.lines[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var s=l.value;if("string"==typeof s){if(/[\r\n\u2028\u2029]/.test(s))return r.errors.push('line-feed code is included at "'+e.title+'"'),{v:r}}else{if(!s)return r.errors.push('invalid line "'+s+'" found at "'+e.title+'"'),{v:r};if("object"!==(void 0===s?"undefined":_typeof(s)))return r.errors.push('invalid line found at "'+e.title+'"'),{v:r};if(s.created&&"number"!=typeof s.created)return r.errors.push('line.created is not a number at "'+e.title+'"'),{v:r};if(s.updated&&"number"!=typeof s.updated)return r.errors.push('line.updated is not a number at "'+e.title+'"'),{v:r};if("string"!=typeof s.text)return r.errors.push('line.text is missing at "'+e.title+'"'),{v:r};if(/[\r\n\u2028\u2029]/.test(s.text))return r.errors.push('line-feed code is included at "'+e.title+'"'),{v:r}}}}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}},i=!0,n=!1,a=void 0;try{for(var o,l=e.pages[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=t(o.value);if("object"===(void 0===u?"undefined":_typeof(u)))return u.v}}catch(e){n=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(n)throw a}}return r}function fixImportPagesFile(e){var r=function removeLineFeed(e){return e.replace(/[\r\n\u2028\u2029]/g,"")},t=!0,i=!1,n=void 0;try{for(var a,o=e.pages[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value;l.title=r(l.title),l.lines=l.lines.map(function(e){return"string"==typeof e?r(e):(e.text=r(e.text),e)})}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}return e}function validateAndFixImportPagesFile(e){var r=validateImportPagesFile(e);if(r.isValid)return r;return function hasNonLineFeedError(e){return e.find(function(e){return!/line-feed/.test(e||e.message)})}(r.errors)?r:(r.fixed=fixImportPagesFile(e),r)}

    },{"./page-title":622,"./result":624}],621:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.combineValidators=void 0;var _result=require("./result"),_result2=_interopRequireDefault(_result);function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}var combineValidators=exports.combineValidators=function combineValidators(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];var a=!0,o=!1,n=void 0;try{for(var i,u=e[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var l=i.value,s=l.validator,f=l.message;if("function"!=typeof s)throw new Error("validator must be a function.");if("string"!=typeof f)throw new Error("message must be a string.")}}catch(r){o=!0,n=r}finally{try{!a&&u.return&&u.return()}finally{if(o)throw n}}var v=function validate(r){var t=new _result2.default,a=!0,o=!1,n=void 0;try{for(var i,u=e[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var l=i.value,s=l.validator,f=l.message,v=l.next;if(!s(r)&&(t.errors.push(f),!v))break}}catch(r){o=!0,n=r}finally{try{!a&&u.return&&u.return()}finally{if(o)throw n}}return t};return Object.defineProperty(v,"mongooseFormat",{get:function get(){return e.map(function(r){return{validator:r.validator,message:r.message}})}}),v.validators=e,v};

    },{"./result":624}],622:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validatePageTitleLc=exports.validatePageTitle=exports.maxPageTitleLength=exports.minPageTitleLength=void 0;var _=require("./");function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var minPageTitleLength=exports.minPageTitleLength={value:1,message:"Title is too short"},maxPageTitleLength=exports.maxPageTitleLength={value:128,message:"Title is too long"},validatePageTitle=exports.validatePageTitle=(0,_.combineValidators)({validator:function validator(e){return"string"==typeof e},message:"Title must be a String"},{validator:function validator(e){return!!e},message:"Title is missing"},{validator:function validator(e){return e.length>=minPageTitleLength.value},message:minPageTitleLength.message},{validator:function validator(e){return e.length<=maxPageTitleLength.value},message:maxPageTitleLength.message},{validator:function validator(e){return!/[\r\n\u2028\u2029]/.test(e)},message:"Title should be one line (line-feed code is included)"},{validator:function validator(e){return!/^[.\/]+$/.test(e)},message:"Title is an illegal string like a relative path."}),validatePageTitleLc=exports.validatePageTitleLc=_.combineValidators.apply(void 0,_toConsumableArray(validatePageTitle.validators).concat([{validator:function validator(e){return!/[A-Z]/.test(e)},message:"TitleLc must not includes capital letters"}]));

    },{"./":621}],623:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateProjectName=exports.ReservedProjectNames=exports.maxProjectNameLength=exports.minProjectNameLength=void 0;var _flags=require("../flags"),_=require("./"),minProjectNameLength=exports.minProjectNameLength={value:2,message:"Name is too short"},maxProjectNameLength=exports.maxProjectNameLength={value:24,message:"Name is too long"},ReservedProjectNames=exports.ReservedProjectNames=["_","assets","auth","login","logout","config","api","index","project","projects","user","users","setting","settings","slide","feed","search","opensearch","stream","new","billing","billings","io","socket.io","app.html"].concat(_flags.LANDING?["landing","product","enterprise","pricing","try-enterprise","contact","terms","privacy","jp-commercial-act"]:[]).map(function(e){return e.toLowerCase()}),validateProjectName=exports.validateProjectName=(0,_.combineValidators)({validator:function validator(e){return"string"==typeof e},message:"Name must be a String"},{validator:function validator(e){return e.length>=minProjectNameLength.value},message:minProjectNameLength.message,next:!0},{validator:function validator(e){return e.length<=maxProjectNameLength.value},message:maxProjectNameLength.message,next:!0},{validator:function validator(e){return/^[a-z0-9][a-z0-9-]*[a-z0-9]$/i.test(e)},message:"Name can contain only alphabets, numbers and hyphens. It must start and end with alphabet or number",next:!0},{validator:function validator(e){return!ReservedProjectNames.includes(e.toLowerCase())},message:"the name is reserved for system",next:!0});

    },{"../flags":578,"./":621}],624:[function(require,module,exports){
        "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,t){return r&&defineProperties(e.prototype,r),t&&defineProperties(e,t),e}}();function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var ValidationResult=function(){function ValidationResult(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(_classCallCheck(this,ValidationResult),!(e instanceof Array))throw new Error("ArgumentError: errors must be an Array");this.errors=e}return _createClass(ValidationResult,[{key:"toString",value:function toString(){return this.errors.map(function(e){return e.message||e}).join(". ")}},{key:"isValid",get:function get(){return this.errors.length<1}},{key:"isInvalid",get:function get(){return!this.isValid}}]),ValidationResult}();exports.default=ValidationResult;

    },{}]},{},[447]);